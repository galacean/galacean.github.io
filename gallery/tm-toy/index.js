!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://dev.g.alicdn.com/code/npm/@ali/gcp-hk-project-tao-demo/0.0.0/",n(n.s=117)}([function(e,t,n){e.exports=n(120)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(49)),o=a(n(121));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},c=o.default;function u(e){var t=c.__cache||(c.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=c[r[0].trim()]:r.forEach((function(e){"object"==typeof c[e.trim()]&&(i=Object.assign(i,c[e.trim()]))})),t[n]=i),i}console.log(566);var d=(0,r.forwardRef)((function(e,t){var n=(0,r.useRef)(null),o=e.className,a=e.style,c=e.onFirstAppear,d=e.onAppear,f=l(e,["className","style","onFirstAppear","onAppear"]),h=d;return c&&(h=function(e){d&&d(e),n.triggeredAppear?n.triggeredAppear=!0:c&&c(e)}),(0,r.createElement)("div",s({},f,{onAppear:h,ref:t,className:(0,i.default)("rax-view",o),style:Object.assign({},u((0,i.default)("rax-view",o)),a)}))}));d.displayName="View";var f=d;t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=(r=n(133))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=o.default;function c(e){var t=l.__cache||(l.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=l[r[0].trim()]:r.forEach((function(e){"object"==typeof l[e.trim()]&&(i=Object.assign(i,l[e.trim()]))})),t[n]=i),i}var u=(0,i.forwardRef)((function(e,t){var n=e.className,r=e.style,o=e.numberOfLines,l=e.children,u=e.onPress,d=e.onClick,f=s(e,["className","style","numberOfLines","children","onPress","onClick"]),h="string"==typeof o?parseInt(o,10):o,p="";null!=l&&(p=Array.isArray(l)?l.join(""):l.toString());var m=["rax-text",n];return h&&(m.push("rax-text--overflow-hidden"),1===h?m.push("rax-text--singleline"):m.push("rax-text--multiline")),(0,i.createElement)("span",a({},f,{ref:t,className:m.join(" "),style:Object.assign({},c(m.join(" ")),Object.assign(Object.assign({},r),{webkitLineClamp:h>1?h:void 0})),onClick:d||u}),p)}));u.displayName="Text";var d=u;t.default=d},function(e,t,n){!function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a,s,l,c,u,d,f,h,p,m,v,g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r(this,e),this.data=void 0,this._timeStamp=void 0,this._target=void 0,this._currentTarget=void 0,this._bubbles=void 0,this._propagationStopped=void 0,this._type=void 0,this._timeStamp=(new Date).getTime(),this._target=n,this.data=i,this._currentTarget=null,this._bubbles=o,this._propagationStopped=!1,this._type=t}return o(e,[{key:"propagationStopped",get:function(){return this._propagationStopped}},{key:"target",get:function(){return this._target},set:function(e){this._target=e}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"currentTarget",get:function(){return this._currentTarget},set:function(e){this._currentTarget=e}},{key:"bubbles",get:function(){return this._bubbles}},{key:"type",get:function(){return this._type}}]),o(e,[{key:"stopPropagation",value:function(){this._propagationStopped=!0}}]),e}(),_=function(){function e(){r(this,e),this._listeners=void 0,this._listeners={}}return o(e,[{key:"on",value:function(e,t){return this.addEventListener(e,t)}},{key:"addEventListener",value:function(e,t){var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this}},{key:"once",value:function(e,t){return t.once=!0,this.addEventListener(e,t),this}},{key:"off",value:function(e,t){return this.removeEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners;if(0===arguments.length)return this._listeners={},this;if(1===arguments.length)return n[e]=[],this;if(2===arguments.length){if(n[e]){var r=n[e].indexOf(t);n[e].splice(r,1)}return this}return this}},{key:"removeAllEventListeners",value:function(){this._listeners={}}},{key:"hasEvent",value:function(e,t){var n=this._listeners;return!(1!==arguments.length||!n[e]||0===n[e].length)||!(!n[e]||-1===n[e].indexOf(t))}},{key:"trigger",value:function(e){var t=this._listeners[e.type];if(e.target=this,t)for(var n=t.slice(),r=0,i=n.length;r!==i;++r){var o=n[r];o.call(this,e),o.once&&this.removeEventListener(e.type,o)}if(e.bubbles){var a=this.parent;a&&!e.propagationStopped&&a.trigger(e)}return this}},{key:"listeners",get:function(){return this._listeners}}]),e}(),y=function(){},b=console.log.bind(console),x=console.info.bind(console),w=console.warn.bind(console),T=console.error.bind(console),A={debug:y,info:y,warn:y,error:y,isEnabled:!1,enable:function(){this.debug=b,this.info=x,this.warn=w,this.error=T,this.isEnabled=!0},disable:function(){this.debug=y,this.info=y,this.warn=y,this.error=y,this.isEnabled=!1}},E=function(){function e(){r(this,e),this._clock=void 0,this._timeScale=void 0,this._deltaTime=void 0,this._startTime=void 0,this._lastTickTime=void 0,this._clock=performance||Date,this._timeScale=1,this._deltaTime=1e-4;var t=this._clock.now();this._startTime=t,this._lastTickTime=t}return o(e,[{key:"tick",value:function(){var e=this.nowTime;this._deltaTime=(e-this._lastTickTime)*this._timeScale,this._lastTickTime=e}},{key:"nowTime",get:function(){return this._clock.now()}},{key:"deltaTime",get:function(){return this._deltaTime}},{key:"timeScale",get:function(){return this._timeScale},set:function(e){this._timeScale=e}},{key:"unscaledDeltaTime",get:function(){return this._deltaTime/this._timeScale}},{key:"timeSinceStartup",get:function(){return this.nowTime-this._startTime}}]),e}(),O={isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===toString.call(e)},isArrayLike:function(e){return!!e&&"number"==typeof e.length&&"function"!=typeof e},clone:function(e){if("object"!==n(e)||null===e)return e;var t;if(O.isArrayLike(e)){t=e.slice();for(var r=0,i=e.length;r<i;r++)t[r]=O.clone(e[r])}else for(var o in t={},e)e.hasOwnProperty(o)&&(t[o]=O.clone(e[o]));return t},downloadBlob:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(navigator&&navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=window.URL.createObjectURL(e),r=document.createElement("a");document.body.appendChild(r),r.style.display="none",r.href=n,r.download=t,r.addEventListener("click",(function(){r.parentElement&&r.parentElement.removeChild(r)})),r.click(),window.URL.revokeObjectURL(n)}}};(a=e.AssetType||(e.AssetType={}))[a.Scene=1]="Scene",a[a.Cache=2]="Cache",(s=e.ClearMode||(e.ClearMode={}))[s.DONT_CLEAR=0]="DONT_CLEAR",s[s.SOLID_COLOR=1]="SOLID_COLOR",s[s.DEPTH_ONLY=2]="DEPTH_ONLY",s[s.COLOR_ONLY=3]="COLOR_ONLY",s[s.STENCIL_ONLY=4]="STENCIL_ONLY",s[s.ALL_CLEAR=5]="ALL_CLEAR",(l=e.MaterialType||(e.MaterialType={}))[l.OPAQUE=1e3]="OPAQUE",l[l.TRANSPARENT=2e3]="TRANSPARENT",(c=e.DrawMode||(e.DrawMode={}))[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN",(u=e.RenderState||(e.RenderState={}))[u.BLEND=3042]="BLEND",u[u.CULL_FACE=2884]="CULL_FACE",u[u.DEPTH_TEST=2929]="DEPTH_TEST",u[u.ALPHA_TEST=3008]="ALPHA_TEST",u[u.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",u[u.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",u[u.SCISSOR_TEST=3089]="SCISSOR_TEST",(d=e.FrontFace||(e.FrontFace={}))[d.CW=2304]="CW",d[d.CCW=2305]="CCW",(f=e.CullFace||(e.CullFace={}))[f.FRONT=1028]="FRONT",f[f.BACK=1029]="BACK",f[f.FRONT_AND_BACK=1032]="FRONT_AND_BACK",(h=e.Side||(e.Side={}))[h.FRONT=0]="FRONT",h[h.BACK=1]="BACK",h[h.NONE=2]="NONE",h[h.DOUBLE=3]="DOUBLE",(p=e.CompFunc||(e.CompFunc={}))[p.NEVER=512]="NEVER",p[p.LESS=513]="LESS",p[p.EQUAL=514]="EQUAL",p[p.LEQUAL=515]="LEQUAL",p[p.GREATER=516]="GREATER",p[p.NOTEQUAL=517]="NOTEQUAL",p[p.GEQUAL=518]="GEQUAL",p[p.ALWAYS=519]="ALWAYS",(m=e.TextureFilter||(e.TextureFilter={}))[m.NEAREST=9728]="NEAREST",m[m.LINEAR=9729]="LINEAR",m[m.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",m[m.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",m[m.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",m[m.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",(v=e.TextureWrapMode||(e.TextureWrapMode={}))[v.REPEAT=10497]="REPEAT",v[v.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",v[v.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT";var M,S,C,R,k,P,L,I,F,D,N,z,j,B,U,V,H,G=[34069,34070,34071,34072,34073,34074];(M=e.DataType||(e.DataType={}))[M.FLOAT=5126]="FLOAT",M[M.FLOAT_VEC2=35664]="FLOAT_VEC2",M[M.FLOAT_VEC3=35665]="FLOAT_VEC3",M[M.FLOAT_VEC4=35666]="FLOAT_VEC4",M[M.INT=5124]="INT",M[M.INT_VEC2=35667]="INT_VEC2",M[M.INT_VEC3=35668]="INT_VEC3",M[M.INT_VEC4=35669]="INT_VEC4",M[M.BOOL=35670]="BOOL",M[M.BOOL_VEC2=35671]="BOOL_VEC2",M[M.BOOL_VEC3=35672]="BOOL_VEC3",M[M.BOOL_VEC4=35673]="BOOL_VEC4",M[M.FLOAT_MAT2=35674]="FLOAT_MAT2",M[M.FLOAT_MAT3=35675]="FLOAT_MAT3",M[M.FLOAT_MAT4=35676]="FLOAT_MAT4",M[M.SAMPLER_2D=35678]="SAMPLER_2D",M[M.SAMPLER_CUBE=35680]="SAMPLER_CUBE",M[M.BYTE=5120]="BYTE",M[M.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",M[M.SHORT=5122]="SHORT",M[M.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",M[M.UNSIGNED_INT=5125]="UNSIGNED_INT",(S=e.UniformSemantic||(e.UniformSemantic={}))[S.LOCAL=1]="LOCAL",S[S.MODEL=2]="MODEL",S[S.VIEW=3]="VIEW",S[S.PROJECTION=4]="PROJECTION",S[S.MODELVIEW=5]="MODELVIEW",S[S.MODELVIEWPROJECTION=6]="MODELVIEWPROJECTION",S[S.MODELINVERSE=7]="MODELINVERSE",S[S.VIEWINVERSE=8]="VIEWINVERSE",S[S.PROJECTIONINVERSE=9]="PROJECTIONINVERSE",S[S.MODELVIEWINVERSE=10]="MODELVIEWINVERSE",S[S.MODELVIEWPROJECTIONINVERSE=11]="MODELVIEWPROJECTIONINVERSE",S[S.MODELINVERSETRANSPOSE=12]="MODELINVERSETRANSPOSE",S[S.MODELVIEWINVERSETRANSPOSE=13]="MODELVIEWINVERSETRANSPOSE",S[S.VIEWPORT=14]="VIEWPORT",S[S.JOINTMATRIX=15]="JOINTMATRIX",S[S.MORPHWEIGHTS=16]="MORPHWEIGHTS",S[S.EYEPOS=17]="EYEPOS",S[S.TIME=18]="TIME",S[S.JOINTTEXTURE=19]="JOINTTEXTURE",S[S.JOINTCOUNT=20]="JOINTCOUNT",(C=e.BufferUsage||(e.BufferUsage={}))[C.STATIC_DRAW=35044]="STATIC_DRAW",C[C.STREAM_DRAW=35040]="STREAM_DRAW",C[C.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",(R=e.BlendFunc||(e.BlendFunc={}))[R.ZERO=0]="ZERO",R[R.ONE=1]="ONE",R[R.SRC_COLOR=768]="SRC_COLOR",R[R.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",R[R.SRC_ALPHA=770]="SRC_ALPHA",R[R.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",R[R.DST_ALPHA=772]="DST_ALPHA",R[R.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",R[R.DST_COLOR=774]="DST_COLOR",R[R.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",R[R.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",R[R.enumANT_COLOR=32769]="enumANT_COLOR",R[R.ONE_MINUS_enumANT_COLOR=32770]="ONE_MINUS_enumANT_COLOR",R[R.enumANT_ALPHA=32771]="enumANT_ALPHA",R[R.ONE_MINUS_enumANT_ALPHA=32772]="ONE_MINUS_enumANT_ALPHA",(k=e.UpdateType||(e.UpdateType={}))[k.NO_UPDATE=0]="NO_UPDATE",k[k.UPDATE_ALL=1]="UPDATE_ALL",k[k.UPDATE_RANGE=2]="UPDATE_RANGE",(P=e.MaskList||(e.MaskList={}))[P.MASK1=1]="MASK1",P[P.MASK2=2]="MASK2",P[P.MASK3=4]="MASK3",P[P.MASK4=8]="MASK4",P[P.MASK5=16]="MASK5",P[P.MASK6=32]="MASK6",P[P.MASK7=64]="MASK7",P[P.MASK8=128]="MASK8",P[P.MASK9=256]="MASK9",P[P.MASK10=512]="MASK10",P[P.MASK11=1024]="MASK11",P[P.MASK12=2048]="MASK12",P[P.MASK13=4096]="MASK13",P[P.MASK14=8192]="MASK14",P[P.MASK15=16384]="MASK15",P[P.MASK16=32768]="MASK16",P[P.MASK17=65536]="MASK17",P[P.MASK18=131072]="MASK18",P[P.MASK19=262144]="MASK19",P[P.MASK20=524288]="MASK20",P[P.EVERYTHING=268435455]="EVERYTHING",P[P.SHADOW=268435456]="SHADOW",P[P.SHADOW_MAP=536870912]="SHADOW_MAP",(L=e.RefreshRate||(e.RefreshRate={}))[L.ONCE=1]="ONCE",L[L.EVERYFRAME=2]="EVERYFRAME",(I=e.IntersectInfo||(e.IntersectInfo={}))[I.EXCLUDE=0]="EXCLUDE",I[I.INTERSECT=1]="INTERSECT",I[I.INCLUDE=2]="INCLUDE",(F=e.BoundingType||(e.BoundingType={}))[F.AABB=0]="AABB",F[F.OBB=1]="OBB",F[F.SPHERE=2]="SPHERE",(D=e.GLCapabilityType||(e.GLCapabilityType={})).standardDerivatives="OES_standard_derivatives",D.shaderTextureLod="EXT_shader_texture_lod",D.elementIndexUint="OES_element_index_uint",D.depthTexture="WEBGL_depth_texture",D.drawBuffers="WEBGL_draw_buffers",D.vertexArrayObject="OES_vertex_array_object",D.instancedArrays="ANGLE_instanced_arrays",D.multipleSample="multipleSampleOnlySupportedInWebGL2",D.textureFloat="OES_texture_float",D.textureHalfFloat="OES_texture_half_float",D.WEBGL_colorBufferFloat="WEBGL_color_buffer_float",D.colorBufferFloat="EXT_color_buffer_float",D.colorBufferHalfFloat="EXT_color_buffer_half_float",D.textureFilterAnisotropic="EXT_texture_filter_anisotropic",D.astc="WEBGL_compressed_texture_astc",D.astc_webkit="WEBKIT_WEBGL_compressed_texture_astc",D.etc="WEBGL_compressed_texture_etc",D.etc_webkit="WEBKIT_WEBGL_compressed_texture_etc",D.etc1="WEBGL_compressed_texture_etc1",D.etc1_webkit="WEBKIT_WEBGL_compressed_texture_etc1",D.pvrtc="WEBGL_compressed_texture_pvrtc",D.pvrtc_webkit="WEBKIT_WEBGL_compressed_texture_pvrtc",D.s3tc="WEBGL_compressed_texture_s3tc",D.s3tc_webkit="WEBKIT_WEBGL_compressed_texture_s3tc",(N=e.GLCompressedTextureInternalFormat||(e.GLCompressedTextureInternalFormat={}))[N.RGBA_ASTC_4X4_KHR=37808]="RGBA_ASTC_4X4_KHR",N[N.RGBA_ASTC_5X4_KHR=37809]="RGBA_ASTC_5X4_KHR",N[N.RGBA_ASTC_5X5_KHR=37810]="RGBA_ASTC_5X5_KHR",N[N.RGBA_ASTC_6X5_KHR=37811]="RGBA_ASTC_6X5_KHR",N[N.RGBA_ASTC_6X6_KHR=37812]="RGBA_ASTC_6X6_KHR",N[N.RGBA_ASTC_8X5_KHR=37813]="RGBA_ASTC_8X5_KHR",N[N.RGBA_ASTC_8X6_KHR=37814]="RGBA_ASTC_8X6_KHR",N[N.RGBA_ASTC_8X8_KHR=37815]="RGBA_ASTC_8X8_KHR",N[N.RGBA_ASTC_10X5_KHR=37816]="RGBA_ASTC_10X5_KHR",N[N.RGBA_ASTC_10X6_KHR=37817]="RGBA_ASTC_10X6_KHR",N[N.RGBA_ASTC_10X8_KHR=37818]="RGBA_ASTC_10X8_KHR",N[N.RGBA_ASTC_10X10_KHR=37819]="RGBA_ASTC_10X10_KHR",N[N.RGBA_ASTC_12X10_KHR=37820]="RGBA_ASTC_12X10_KHR",N[N.RGBA_ASTC_12X12_KHR=37821]="RGBA_ASTC_12X12_KHR",N[N.SRGB8_ALPHA8_ASTC_4X4_KHR=37840]="SRGB8_ALPHA8_ASTC_4X4_KHR",N[N.SRGB8_ALPHA8_ASTC_5X4_KHR=37841]="SRGB8_ALPHA8_ASTC_5X4_KHR",N[N.SRGB8_ALPHA8_ASTC_5X5_KHR=37842]="SRGB8_ALPHA8_ASTC_5X5_KHR",N[N.SRGB8_ALPHA8_ASTC_6X5_KHR=37843]="SRGB8_ALPHA8_ASTC_6X5_KHR",N[N.SRGB8_ALPHA8_ASTC_6X6_KHR=37844]="SRGB8_ALPHA8_ASTC_6X6_KHR",N[N.SRGB8_ALPHA8_ASTC_8X5_KHR=37845]="SRGB8_ALPHA8_ASTC_8X5_KHR",N[N.SRGB8_ALPHA8_ASTC_8X6_KHR=37846]="SRGB8_ALPHA8_ASTC_8X6_KHR",N[N.SRGB8_ALPHA8_ASTC_8X8_KHR=37847]="SRGB8_ALPHA8_ASTC_8X8_KHR",N[N.SRGB8_ALPHA8_ASTC_10X5_KHR=37848]="SRGB8_ALPHA8_ASTC_10X5_KHR",N[N.SRGB8_ALPHA8_ASTC_10X6_KHR=37849]="SRGB8_ALPHA8_ASTC_10X6_KHR",N[N.SRGB8_ALPHA8_ASTC_10X8_KHR=37850]="SRGB8_ALPHA8_ASTC_10X8_KHR",N[N.SRGB8_ALPHA8_ASTC_10X10_KHR=37851]="SRGB8_ALPHA8_ASTC_10X10_KHR",N[N.SRGB8_ALPHA8_ASTC_12X10_KHR=37852]="SRGB8_ALPHA8_ASTC_12X10_KHR",N[N.SRGB8_ALPHA8_ASTC_12X12_KHR=37853]="SRGB8_ALPHA8_ASTC_12X12_KHR",N[N.RGB_ETC1_WEBGL=36196]="RGB_ETC1_WEBGL",N[N.R11_EAC=37488]="R11_EAC",N[N.SIGNED_R11_EAC=37489]="SIGNED_R11_EAC",N[N.RG11_EAC=37490]="RG11_EAC",N[N.SIGNED_RG11_EAC=37491]="SIGNED_RG11_EAC",N[N.RGB8_ETC2=37492]="RGB8_ETC2",N[N.SRGB8_ETC2=37493]="SRGB8_ETC2",N[N.RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="RGB8_PUNCHTHROUGH_ALPHA1_ETC2",N[N.SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",N[N.RGBA8_ETC2_EAC=37496]="RGBA8_ETC2_EAC",N[N.SRGB8_ALPHA8_ETC2_EAC=37497]="SRGB8_ALPHA8_ETC2_EAC",N[N.RGB_PVRTC_4BPPV1_IMG=35840]="RGB_PVRTC_4BPPV1_IMG",N[N.RGB_PVRTC_2BPPV1_IMG=35841]="RGB_PVRTC_2BPPV1_IMG",N[N.RGBA_PVRTC_4BPPV1_IMG=35842]="RGBA_PVRTC_4BPPV1_IMG",N[N.RGBA_PVRTC_2BPPV1_IMG=35843]="RGBA_PVRTC_2BPPV1_IMG",N[N.RGB_S3TC_DXT1_EXT=33776]="RGB_S3TC_DXT1_EXT",N[N.RGBA_S3TC_DXT1_EXT=33777]="RGBA_S3TC_DXT1_EXT",N[N.RGBA_S3TC_DXT3_EXT=33778]="RGBA_S3TC_DXT3_EXT",N[N.RGBA_S3TC_DXT5_EXT=33779]="RGBA_S3TC_DXT5_EXT",(z=e.OITMode||(e.OITMode={}))[z.WEIGHTED_AVERAGE=0]="WEIGHTED_AVERAGE",z[z.DEPTH_PEEL=1]="DEPTH_PEEL",z[z.DUAL_DEPTH_PEEL=2]="DUAL_DEPTH_PEEL",function(e){e[e.Clamp=0]="Clamp",e[e.Repeat=1]="Repeat",e[e.Mirror=2]="Mirror"}(e.TextureWrapMode||(e.TextureWrapMode={})),(j=e.TextureFilterMode||(e.TextureFilterMode={}))[j.Point=0]="Point",j[j.Bilinear=1]="Bilinear",j[j.Trilinear=2]="Trilinear",(B=e.TextureFormat||(e.TextureFormat={}))[B.R8G8B8=0]="R8G8B8",B[B.R8G8B8A8=1]="R8G8B8A8",B[B.R5G6B5=2]="R5G6B5",B[B.Alpha8=3]="Alpha8",B[B.R32G32B32A32=4]="R32G32B32A32",B[B.DXT1=5]="DXT1",B[B.DXT5=6]="DXT5",B[B.ETC1_RGB=7]="ETC1_RGB",B[B.ETC2_RGB=8]="ETC2_RGB",B[B.ETC2_RGBA5=9]="ETC2_RGBA5",B[B.ETC2_RGBA8=10]="ETC2_RGBA8",B[B.PVRTC_RGB2=11]="PVRTC_RGB2",B[B.PVRTC_RGBA2=12]="PVRTC_RGBA2",B[B.PVRTC_RGB4=13]="PVRTC_RGB4",B[B.PVRTC_RGBA4=14]="PVRTC_RGBA4",B[B.ASTC_4x4=15]="ASTC_4x4",B[B.ASTC_5x5=16]="ASTC_5x5",B[B.ASTC_6x6=17]="ASTC_6x6",B[B.ASTC_8x8=18]="ASTC_8x8",B[B.ASTC_10x10=19]="ASTC_10x10",B[B.ASTC_12x12=20]="ASTC_12x12",(U=e.TextureCubeFace||(e.TextureCubeFace={}))[U.PositiveX=0]="PositiveX",U[U.NegativeX=1]="NegativeX",U[U.PositiveY=2]="PositiveY",U[U.NegativeY=3]="NegativeY",U[U.PositiveZ=4]="PositiveZ",U[U.NegativeZ=5]="NegativeZ",(V=e.RenderBufferColorFormat||(e.RenderBufferColorFormat={}))[V.R8G8B8=0]="R8G8B8",V[V.R8G8B8A8=1]="R8G8B8A8",V[V.Alpha8=2]="Alpha8",V[V.R16G16B16A16=3]="R16G16B16A16",V[V.R32G32B32A32=4]="R32G32B32A32",(H=e.RenderBufferDepthFormat||(e.RenderBufferDepthFormat={}))[H.Depth=0]="Depth",H[H.DepthStencil=1]="DepthStencil",H[H.Stencil=2]="Stencil",H[H.Depth16=3]="Depth16",H[H.Depth24=4]="Depth24",H[H.Depth32=5]="Depth32",H[H.Depth24Stencil8=6]="Depth24Stencil8",H[H.Depth32Stencil8=7]="Depth32Stencil8";var W="undefined"!=typeof Float32Array?Float32Array:Array,X=Math.random,Y=Math.PI/180,q=180/Math.PI;function K(e,t,n){return Math.max(t,Math.min(n,e))}var Q=Object.freeze({__proto__:null,ARRAY_TYPE:W,EPSILON:1e-4,RANDOM:X,equals:function(e,t){return Math.abs(e-t)<=1e-4*Math.max(1,Math.abs(e),Math.abs(t))},toRadian:function(e){return e*Y},toDeg:function(e){return e*q},isPowerOf2:function(e){return 0==(e&e-1)},clamp:K,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}});function J(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*s+o*l,e[1]=i*s+a*l,e[2]=r*c+o*u,e[3]=i*c+a*u,e}function Z(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}var $=Object.freeze({__proto__:null,LDU:function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},adjoint:function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},clone:function(e){var t=new W(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},create:function(){var e=new W(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},equals:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=1e-4*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=1e-4*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=1e-4*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=1e-4*Math.max(1,Math.abs(o),Math.abs(c))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},fromValues:function(e,t,n,r){var i=new W(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null},mul:J,multiply:J,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},rotate:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l,e},scale:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*l,e[3]=a*l,e},set:function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},str:function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:Z,subtract:Z,transpose:function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}});function ee(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1],d=n[2],f=n[3],h=n[4],p=n[5];return e[0]=r*c+o*u,e[1]=i*c+a*u,e[2]=r*d+o*f,e[3]=i*d+a*f,e[4]=r*h+o*p+s,e[5]=i*h+a*p+l,e}function te(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var ne=Object.freeze({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},clone:function(e){var t=new W(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},create:function(){var e=new W(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],u=t[2],d=t[3],f=t[4],h=t[5];return Math.abs(n-l)<=1e-4*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=1e-4*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=1e-4*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-d)<=1e-4*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-f)<=1e-4*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-h)<=1e-4*Math.max(1,Math.abs(s),Math.abs(h))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},fromValues:function(e,t,n,r,i,o){var a=new W(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=n*o-r*i;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-o*a)*l,e[5]=(r*a-n*s)*l,e):null},mul:ee,multiply:ee,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},rotate:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*c,e[1]=i*u+a*c,e[2]=r*-c+o*u,e[3]=i*-c+a*u,e[4]=s,e[5]=l,e},scale:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r*c,e[1]=i*c,e[2]=o*u,e[3]=a*u,e[4]=s,e[5]=l,e},set:function(e,t,n,r,i,o,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:te,subtract:te,translate:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*c+o*u+s,e[5]=i*c+a*u+l,e}});function re(){var e=new W(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function oe(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=n[0],h=n[1],p=n[2],m=n[3],v=n[4],g=n[5],_=n[6],y=n[7],b=n[8];return e[0]=f*r+h*a+p*c,e[1]=f*i+h*s+p*u,e[2]=f*o+h*l+p*d,e[3]=m*r+v*a+g*c,e[4]=m*i+v*s+g*u,e[5]=m*o+v*l+g*d,e[6]=_*r+y*a+b*c,e[7]=_*i+y*s+b*u,e[8]=_*o+y*l+b*d,e}function ae(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}var se=Object.freeze({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},clone:function(e){var t=new W(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},create:re,determinant:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+n*(-c*i+a*s)+r*(l*i-o*s)},equals:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=t[0],f=t[1],h=t[2],p=t[3],m=t[4],v=t[5],g=t[6],_=t[7],y=t[8];return Math.abs(n-d)<=1e-4*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=1e-4*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=1e-4*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=1e-4*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=1e-4*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=1e-4*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-g)<=1e-4*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-_)<=1e-4*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(u-y)<=1e-4*Math.max(1,Math.abs(u),Math.abs(y))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromMat4:ie,fromQuat:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,f=i*a,h=i*s,p=i*l,m=o*a,v=o*s,g=o*l;return e[0]=1-d-p,e[3]=u-g,e[6]=f+v,e[1]=u+g,e[4]=1-c-p,e[7]=h-m,e[2]=f-v,e[5]=h+m,e[8]=1-c-d,e},fromRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(o),l=Math.sin(o),c=a[0],u=a[1];return e[0]=r*s,e[1]=-i*l,e[2]=0,e[3]=r*l,e[4]=i*s,e[5]=0,e[6]=-r*(s*c+l*u)+c+t,e[7]=-i*(-l*c+s*u)+u+n,e[8]=1,e},fromValues:function(e,t,n,r,i,o,a,s,l){var c=new W(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=l,c},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=u*a-s*c,f=-u*o+s*l,h=c*o-a*l,p=n*d+r*f+i*h;return p?(p=1/p,e[0]=d*p,e[1]=(-u*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=f*p,e[4]=(u*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=h*p,e[7]=(-c*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null},mul:oe,multiply:oe,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},normalFromMat4:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15],_=n*s-r*a,y=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,T=i*c-o*l,A=u*m-d*p,E=u*v-f*p,O=u*g-h*p,M=d*v-f*m,S=d*g-h*m,C=f*g-h*v,R=_*C-y*S+b*M+x*O-w*E+T*A;return R?(R=1/R,e[0]=(s*C-l*S+c*M)*R,e[1]=(l*O-a*C-c*E)*R,e[2]=(a*S-s*O+c*A)*R,e[3]=(i*S-r*C-o*M)*R,e[4]=(n*C-i*O+o*E)*R,e[5]=(r*O-n*S-o*A)*R,e[6]=(m*T-v*w+g*x)*R,e[7]=(v*b-p*T-g*y)*R,e[8]=(p*w-m*b+g*_)*R,e):null},projection:function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},rotate:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=Math.sin(n),h=Math.cos(n);return e[0]=h*r+f*a,e[1]=h*i+f*s,e[2]=h*o+f*l,e[3]=h*a-f*r,e[4]=h*s-f*i,e[5]=h*l-f*o,e[6]=c,e[7]=u,e[8]=d,e},scale:function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},set:function(e,t,n,r,i,o,a,s,l,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},sub:ae,subtract:ae,translate:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=n[0],h=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=f*r+h*a+c,e[7]=f*i+h*s+u,e[8]=f*o+h*l+d,e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}});function le(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ce(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],h=e[12],p=e[13],m=e[14],v=e[15];return(t*a-n*o)*(d*v-f*m)-(t*s-r*o)*(u*v-f*p)+(t*l-i*o)*(u*m-d*p)+(n*s-r*a)*(c*v-f*h)-(n*l-i*a)*(c*m-d*h)+(r*l-i*s)*(c*p-u*h)}function ue(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function de(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],v=t[13],g=t[14],_=t[15],y=n[0],b=n[1],x=n[2],w=n[3];return e[0]=y*r+b*s+x*d+w*m,e[1]=y*i+b*l+x*f+w*v,e[2]=y*o+b*c+x*h+w*g,e[3]=y*a+b*u+x*p+w*_,y=n[4],b=n[5],x=n[6],w=n[7],e[4]=y*r+b*s+x*d+w*m,e[5]=y*i+b*l+x*f+w*v,e[6]=y*o+b*c+x*h+w*g,e[7]=y*a+b*u+x*p+w*_,y=n[8],b=n[9],x=n[10],w=n[11],e[8]=y*r+b*s+x*d+w*m,e[9]=y*i+b*l+x*f+w*v,e[10]=y*o+b*c+x*h+w*g,e[11]=y*a+b*u+x*p+w*_,y=n[12],b=n[13],x=n[14],w=n[15],e[12]=y*r+b*s+x*d+w*m,e[13]=y*i+b*l+x*f+w*v,e[14]=y*o+b*c+x*h+w*g,e[15]=y*a+b*u+x*p+w*_,e}function fe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function he(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}var pe=re(),me=new Float32Array(16);function ve(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function ge(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function _e(){var e=new W(3);return e[0]=0,e[1]=0,e[2]=0,e}function ye(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function be(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}var xe=_e(),we=_e(),Te=_e(),Ae=_e(),Ee=Object.freeze({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},adjoint:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15];return e[0]=s*(f*g-h*v)-d*(l*g-c*v)+m*(l*h-c*f),e[1]=-(r*(f*g-h*v)-d*(i*g-o*v)+m*(i*h-o*f)),e[2]=r*(l*g-c*v)-s*(i*g-o*v)+m*(i*c-o*l),e[3]=-(r*(l*h-c*f)-s*(i*h-o*f)+d*(i*c-o*l)),e[4]=-(a*(f*g-h*v)-u*(l*g-c*v)+p*(l*h-c*f)),e[5]=n*(f*g-h*v)-u*(i*g-o*v)+p*(i*h-o*f),e[6]=-(n*(l*g-c*v)-a*(i*g-o*v)+p*(i*c-o*l)),e[7]=n*(l*h-c*f)-a*(i*h-o*f)+u*(i*c-o*l),e[8]=a*(d*g-h*m)-u*(s*g-c*m)+p*(s*h-c*d),e[9]=-(n*(d*g-h*m)-u*(r*g-o*m)+p*(r*h-o*d)),e[10]=n*(s*g-c*m)-a*(r*g-o*m)+p*(r*c-o*s),e[11]=-(n*(s*h-c*d)-a*(r*h-o*d)+u*(r*c-o*s)),e[12]=-(a*(d*v-f*m)-u*(s*v-l*m)+p*(s*f-l*d)),e[13]=n*(d*v-f*m)-u*(r*v-i*m)+p*(r*f-i*d),e[14]=-(n*(s*v-l*m)-a*(r*v-i*m)+p*(r*l-i*s)),e[15]=n*(s*f-l*d)-a*(r*f-i*d)+u*(r*l-i*s),e},clone:function(e){var t=new W(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:le,create:function(){var e=new W(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},determinant:ce,equals:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=t[0],y=t[1],b=t[2],x=t[3],w=t[4],T=t[5],A=t[6],E=t[7],O=t[8],M=t[9],S=t[10],C=t[11],R=t[12],k=t[13],P=t[14],L=t[15];return Math.abs(n-_)<=1e-4*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-y)<=1e-4*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-b)<=1e-4*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=1e-4*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=1e-4*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-T)<=1e-4*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(l-A)<=1e-4*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-E)<=1e-4*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-O)<=1e-4*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(d-M)<=1e-4*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(f-S)<=1e-4*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(h-C)<=1e-4*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(p-R)<=1e-4*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-k)<=1e-4*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(v-P)<=1e-4*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(g-L)<=1e-4*Math.max(1,Math.abs(g),Math.abs(L))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},fromQuat:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,d=r*s,f=i*a,h=i*s,p=i*l,m=o*a,v=o*s,g=o*l;return e[0]=1-d-p,e[1]=u+g,e[2]=f-v,e[3]=0,e[4]=u-g,e[5]=1-c-p,e[6]=h+m,e[7]=0,e[8]=f+v,e[9]=h-m,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:function(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.sqrt(a*a+s*s+l*l);return Math.abs(c)<1e-4?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromRotationTranslation:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,c=o+o,u=r*s,d=r*l,f=r*c,h=i*l,p=i*c,m=o*c,v=a*s,g=a*l,_=a*c;return e[0]=1-(h+m),e[1]=d+_,e[2]=f-g,e[3]=0,e[4]=d-_,e[5]=1-(u+m),e[6]=p+v,e[7]=0,e[8]=f+g,e[9]=p-v,e[10]=1-(u+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScale:function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,c=o+o,u=a+a,d=i*l,f=i*c,h=i*u,p=o*c,m=o*u,v=a*u,g=s*l,_=s*c,y=s*u,b=r[0],x=r[1],w=r[2];return e[0]=(1-(p+v))*b,e[1]=(f+y)*b,e[2]=(h-_)*b,e[3]=0,e[4]=(f-y)*x,e[5]=(1-(d+v))*x,e[6]=(m+g)*x,e[7]=0,e[8]=(h+_)*w,e[9]=(m-g)*w,e[10]=(1-(d+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],l=t[3],c=o+o,u=a+a,d=s+s,f=o*c,h=o*u,p=o*d,m=a*u,v=a*d,g=s*d,_=l*c,y=l*u,b=l*d,x=r[0],w=r[1],T=r[2],A=i[0],E=i[1],O=i[2];return e[0]=(1-(m+g))*x,e[1]=(h+b)*x,e[2]=(p-y)*x,e[3]=0,e[4]=(h-b)*w,e[5]=(1-(f+g))*w,e[6]=(v+_)*w,e[7]=0,e[8]=(p+y)*T,e[9]=(v-_)*T,e[10]=(1-(f+m))*T,e[11]=0,e[12]=n[0]+A-(e[0]*A+e[4]*E+e[8]*O),e[13]=n[1]+E-(e[1]*A+e[5]*E+e[9]*O),e[14]=n[2]+O-(e[2]*A+e[6]*E+e[10]*O),e[15]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromValues:function(e,t,n,r,i,o,a,s,l,c,u,d,f,h,p,m){var v=new W(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=l,v[9]=c,v[10]=u,v[11]=d,v[12]=f,v[13]=h,v[14]=p,v[15]=m,v},fromXRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromYRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},getRotation:function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},getScaling:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(l*l+c*c+u*u),e},getTranslation:function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:ue,invert:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15],_=n*s-r*a,y=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,T=i*c-o*l,A=u*m-d*p,E=u*v-f*p,O=u*g-h*p,M=d*v-f*m,S=d*g-h*m,C=f*g-h*v,R=_*C-y*S+b*M+x*O-w*E+T*A;return R?(R=1/R,e[0]=(s*C-l*S+c*M)*R,e[1]=(i*S-r*C-o*M)*R,e[2]=(m*T-v*w+g*x)*R,e[3]=(f*w-d*T-h*x)*R,e[4]=(l*O-a*C-c*E)*R,e[5]=(n*C-i*O+o*E)*R,e[6]=(v*b-p*T-g*y)*R,e[7]=(u*T-f*b+h*y)*R,e[8]=(a*S-s*O+c*A)*R,e[9]=(r*O-n*S-o*A)*R,e[10]=(p*w-m*b+g*_)*R,e[11]=(d*b-u*w-h*_)*R,e[12]=(s*E-a*M-l*A)*R,e[13]=(n*M-r*E+i*A)*R,e[14]=(m*y-p*x-v*_)*R,e[15]=(u*x-d*y+f*_)*R,e):null},lookAt:function(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p=t[0],m=t[1],v=t[2],g=r[0],_=r[1],y=r[2],b=n[0],x=n[1],w=n[2];return Math.abs(p-b)<1e-4&&Math.abs(m-x)<1e-4&&Math.abs(v-w)<1e-4?ue(e):(u=p-b,d=m-x,f=v-w,i=_*(f*=h=1/Math.sqrt(u*u+d*d+f*f))-y*(d*=h),o=y*(u*=h)-g*f,a=g*d-_*u,(h=Math.sqrt(i*i+o*o+a*a))?(i*=h=1/h,o*=h,a*=h):(i=0,o=0,a=0),s=d*a-f*o,l=f*i-u*a,c=u*o-d*i,(h=Math.sqrt(s*s+l*l+c*c))?(s*=h=1/h,l*=h,c*=h):(s=0,l=0,c=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=c,e[10]=f,e[11]=0,e[12]=-(i*p+o*m+a*v),e[13]=-(s*p+l*m+c*v),e[14]=-(u*p+d*m+f*v),e[15]=1,e)},mul:de,multiply:de,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},multiplyScalarAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},ortho:function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},perspective:function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},perspectiveFromFieldOfView:function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},rotate:function(e,t,n,r){var i,o,a,s,l,c,u,d,f,h,p,m,v,g,_,y,b,x,w,T,A,E,O,M,S=r[0],C=r[1],R=r[2],k=Math.sqrt(S*S+C*C+R*R);return Math.abs(k)<1e-4?null:(S*=k=1/k,C*=k,R*=k,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],f=t[5],h=t[6],p=t[7],m=t[8],v=t[9],g=t[10],_=t[11],y=S*S*a+o,b=C*S*a+R*i,x=R*S*a-C*i,w=S*C*a-R*i,T=C*C*a+o,A=R*C*a+S*i,E=S*R*a+C*i,O=C*R*a-S*i,M=R*R*a+o,e[0]=s*y+d*b+m*x,e[1]=l*y+f*b+v*x,e[2]=c*y+h*b+g*x,e[3]=u*y+p*b+_*x,e[4]=s*w+d*T+m*A,e[5]=l*w+f*T+v*A,e[6]=c*w+h*T+g*A,e[7]=u*w+p*T+_*A,e[8]=s*E+d*O+m*M,e[9]=l*E+f*O+v*M,e[10]=c*E+h*O+g*M,e[11]=u*E+p*O+_*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},rotateX:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+d*r,e[7]=l*i+f*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=d*i-s*r,e[11]=f*i-l*r,e},rotateY:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-d*r,e[3]=l*i-f*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+d*i,e[11]=l*r+f*i,e},rotateZ:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+d*r,e[3]=l*i+f*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=d*i-s*r,e[7]=f*i-l*r,e},scale:function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},set:function(e,t,n,r,i,o,a,s,l,c,u,d,f,h,p,m,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=f,e[12]=h,e[13]=p,e[14]=m,e[15]=v,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},sub:fe,subtract:fe,targetTo:function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],l=r[1],c=r[2],u=i-n[0],d=o-n[1],f=a-n[2],h=u*u+d*d+f*f;h>0&&(u*=h=1/Math.sqrt(h),d*=h,f*=h);var p=l*f-c*d,m=c*u-s*f,v=s*d-l*u;return e[0]=p,e[1]=m,e[2]=v,e[3]=0,e[4]=d*v-f*m,e[5]=f*p-u*v,e[6]=u*m-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e},translate:function(e,t,n){var r,i,o,a,s,l,c,u,d,f,h,p,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=f,e[10]=h,e[11]=p,e[12]=r*m+s*v+d*g+t[12],e[13]=i*m+l*v+f*g+t[13],e[14]=o*m+c*v+h*g+t[14],e[15]=a*m+u*v+p*g+t[15]),e},transpose:function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},decompose:function(e,t,n,r){le(me,e);var i=Math.sqrt(me[0]*me[0]+me[1]*me[1]+me[2]*me[2]),o=Math.sqrt(me[4]*me[4]+me[5]*me[5]+me[6]*me[6]),a=Math.sqrt(me[8]*me[8]+me[9]*me[9]+me[10]*me[10]);if(ce(me)<0&&(i=-i),t[0]=me[12],t[1]=me[13],t[2]=me[14],0===i||0===o||0===a)ue(me);else{var s=1/i,l=1/o,c=1/a;me[0]*=s,me[1]*=s,me[2]*=s,me[4]*=l,me[5]*=l,me[6]*=l,me[8]*=c,me[9]*=c,me[10]*=c}ie(pe,me),he(n,pe),r[0]=i,r[1]=o,r[2]=a},lookAtR:function(e,t,n,r){ge(Te,n,t),0===ye(Te)&&(Te[2]=1),ve(Te,Te);var i=ye(ge(Ae,ve(r,r),Te));return 0!==i&&2!==i||(Te[2]+=1e-4,ve(Te,Te)),ve(xe,be(xe,r,Te)),ve(we,be(we,Te,xe)),e[0]=xe[0],e[1]=xe[1],e[2]=xe[2],e[3]=0,e[4]=we[0],e[5]=we[1],e[6]=we[2],e[7]=0,e[8]=Te[0],e[9]=Te[1],e[10]=Te[2],e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});function Oe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Me(e){var t=new W(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Se(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ce(){var e=new W(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Re(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ke(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=1e-4*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=1e-4*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=1e-4*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=1e-4*Math.max(1,Math.abs(o),Math.abs(c))}function Pe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Le(e,t,n,r){var i=new W(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Ie(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function Fe(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function De(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-r*c,e[2]=o*u+a*c+r*l-i*s,e[3]=a*u-r*s-i*l-o*c,e}function Ne(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}function ze(e,t,n){var r=new W(3);return r[0]=e,r[1]=t,r[2]=n,r}function je(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}var Be=ye;function Ue(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}var Ve,He,Ge,We=(Ve=_e(),He=ze(1,0,0),Ge=ze(0,1,0),function(e,t,n){var r=je(t,n);return r<-.999999?(be(Ve,He,t),Be(Ve)<1e-6&&be(Ve,Ge,t),ve(Ve,Ve),Ue(e,Ve,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(be(Ve,t,n),e[0]=Ve[0],e[1]=Ve[1],e[2]=Ve[2],e[3]=1+r,Ne(e,e))});function Xe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Ye(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}var qe,Ke=(qe=re(),function(e,t,n,r){return qe[0]=n[0],qe[3]=n[1],qe[6]=n[2],qe[1]=r[0],qe[4]=r[1],qe[7]=r[2],qe[2]=-t[0],qe[5]=-t[1],qe[8]=-t[2],Ne(e,he(e,qe))});function Qe(e,t,n,r){var i,o,a,s,l,c=t[0],u=t[1],d=t[2],f=t[3],h=n[0],p=n[1],m=n[2],v=n[3];return(o=c*h+u*p+d*m+f*v)<0&&(o=-o,h=-h,p=-p,m=-m,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),e[0]=s*c+l*h,e[1]=s*u+l*p,e[2]=s*d+l*m,e[3]=s*f+l*v,e}var Je,Ze,$e=(Je=Ce(),Ze=Ce(),function(e,t,n,r,i,o){return Qe(Je,t,i,o),Qe(Ze,n,r,o),Qe(e,Je,Ze,2*o*(1-o)),e});function et(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}var tt=Object.freeze({__proto__:null,add:Oe,calculateW:function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},clone:Me,conjugate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},copy:Se,create:Ce,dot:Re,equals:ke,exactEquals:Pe,fromEuler:function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return e[0]=o*l*u-a*s*c,e[1]=a*s*u+o*l*c,e[2]=a*l*c-o*s*u,e[3]=a*l*u+o*s*c,e},fromMat3:he,fromValues:Le,getAxisAngle:function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},len:Ie,length:Ie,lerp:Fe,mul:De,multiply:De,normalize:Ne,rotateX:function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e},rotateY:function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e},rotateZ:function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},rotationTo:We,scale:Xe,set:Ye,setAxes:Ke,setAxisAngle:Ue,slerp:Qe,sqlerp:$e,sqrLen:et,squaredLength:et,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},toEuler:function(e,t){var n=t[3]*t[1]-t[0]*t[2];if(n<-.4999||n>.4999){var r=Math.sign(n);e[2]=-2*r*Math.atan2(t[0],t[3]),e[1]=r*(Math.PI/2),e[0]=0}else e[0]=Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),1-2*(t[0]*t[0]+t[1]*t[1])),e[1]=Math.asin(2*(t[3]*t[1]-t[2]*t[0])),e[2]=Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),1-2*(t[1]*t[1]+t[2]*t[2]));var i=180/Math.PI;return e[0]*=i,e[1]*=i,e[2]*=i,e}});function nt(){var e=new W(2);return e[0]=0,e[1]=0,e}function rt(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function it(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}var ot,at=(ot=nt(),function(e,t,n,r,i,o){var a,s;for(t||(t=2),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)ot[0]=e[a],ot[1]=e[a+1],i(ot,ot,o),e[a]=ot[0],e[a+1]=ot[1];return e});function st(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function lt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function ct(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ut(e){var t=e[0],n=e[1];return t*t+n*n}function dt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}var ft=Object.freeze({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},clone:function(e){var t=new W(2);return t[0]=e[0],t[1]=e[1],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},create:nt,cross:function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},dist:rt,distance:rt,div:it,divide:it,dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},equals:function(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=1e-4*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=1e-4*Math.max(1,Math.abs(r),Math.abs(o))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},forEach:at,fromValues:function(e,t){var n=new W(2);return n[0]=e,n[1]=t,n},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},len:st,length:st,lerp:function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},mul:lt,multiply:lt,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},normalize:function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},random:function(e,t){t=t||1;var n=2*X()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},set:function(e,t,n){return e[0]=t,e[1]=n,e},sqrDist:ct,sqrLen:ut,squaredDistance:ct,squaredLength:ut,str:function(e){return"vec2("+e[0]+", "+e[1]+")"},sub:dt,subtract:dt,transformMat2:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},transformMat2d:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},transformMat3:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},transformMat4:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}});function ht(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function pt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}var mt=function(){var e=_e();return function(t,n,r,i,o,a){var s,l;for(n||(n=3),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();function vt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function gt(e,t,n){ve(n,n);var r=je(t,n);return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e}var _t=_e();function yt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function bt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}var xt=Object.freeze({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},angle:function(e,t){var n=ze(e[0],e[1],e[2]),r=ze(t[0],t[1],t[2]);ve(n,n),ve(r,r);var i=je(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},bezier:function(e,t,n,r,i,o){var a=1-o,s=a*a,l=o*o,c=s*a,u=3*o*s,d=3*l*a,f=l*o;return e[0]=t[0]*c+n[0]*u+r[0]*d+i[0]*f,e[1]=t[1]*c+n[1]*u+r[1]*d+i[1]*f,e[2]=t[2]*c+n[2]*u+r[2]*d+i[2]*f,e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},clone:function(e){var t=new W(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:_e,cross:be,dist:ht,distance:ht,div:pt,divide:pt,dot:je,equals:function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=1e-4*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=1e-4*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=1e-4*Math.max(1,Math.abs(i),Math.abs(s))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},forEach:mt,fromValues:ze,hermite:function(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,c=a*(o-1),u=a*(3-2*o);return e[0]=t[0]*s+n[0]*l+r[0]*c+i[0]*u,e[1]=t[1]*s+n[1]*l+r[1]*c+i[1]*u,e[2]=t[2]*s+n[2]*l+r[2]*c+i[2]*u,e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},len:Be,length:ye,lerp:function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},mul:vt,multiply:vt,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:ve,projectOnVector:gt,projectOnPlane:function(e,t,n){return gt(_t,t,n),ge(e,t,_t),e},random:function(e,t){t=t||1;var n=2*X()*Math.PI,r=2*X()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e},rotateX:function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},rotateY:function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},rotateZ:function(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},sqrDist:yt,sqrLen:bt,squaredDistance:yt,squaredLength:bt,str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},sub:ge,subtract:ge,transformMat3:function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},transformMat4:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e},transformQuat:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,d=c*i+l*r-a*o,f=c*o+a*i-s*r,h=-a*r-s*i-l*o;return e[0]=u*c+h*-a+d*-l-f*-s,e[1]=d*c+h*-s+f*-a-u*-l,e[2]=f*c+h*-l+u*-s-d*-a,e}});function wt(){var e=new W(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Tt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function At(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}var Et=function(){var e=wt();return function(t,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Ot(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Mt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function St(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}var Ct=Object.freeze({__proto__:null,add:Oe,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},clone:Me,copy:Se,create:wt,dist:Tt,distance:Tt,div:At,divide:At,dot:Re,equals:ke,exactEquals:Pe,floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},forEach:Et,fromValues:Le,inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:Ie,length:Ie,lerp:Fe,max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},mul:Ot,multiply:Ot,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:Ne,random:function(e,t){return t=t||1,e[0]=X(),e[1]=X(),e[2]=X(),e[3]=X(),Ne(e,e),Xe(e,e,t),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:Xe,scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},set:Ye,sqrDist:Mt,sqrLen:et,squaredDistance:Mt,squaredLength:et,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:St,subtract:St,transformMat4:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e},transformQuat:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,d=c*i+l*r-a*o,f=c*o+a*i-s*r,h=-a*r-s*i-l*o;return e[0]=u*c+h*-a+d*-l-f*-s,e[1]=d*c+h*-s+f*-a-u*-l,e[2]=f*c+h*-l+u*-s-d*-a,e[3]=t[3],e}});function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.radius=void 0,this.phi=void 0,this.theta=void 0,this.radius=void 0!==t?t:1,this.phi=void 0!==n?n:0,this.theta=void 0!==r?r:0}var t,n;return t=e,(n=[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"makeSafe",value:function(){return this.phi=K(this.phi,1e-4,Math.PI-1e-4),this}},{key:"setFromVec3",value:function(e){return this.radius=Be(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[2]),this.phi=Math.acos(K(e[1]/this.radius,-1,1))),this}},{key:"setToVec3",value:function(e){var t=Math.sin(this.phi)*this.radius;return e[0]=t*Math.sin(this.theta),e[1]=Math.cos(this.phi)*this.radius,e[2]=t*Math.cos(this.theta),this}}])&&Rt(t.prototype,n),e}();function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),e}function Ft(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Nt(e):n}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dt(e);if(t){var i=Dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zt(this,n)}}function Bt(e,t,n){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ut(e){return function(e){if(Array.isArray(e))return Ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Vt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Vt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var Wt=function(){function e(){Pt(this,e),this._features=[],this._objects=[]}return It(e,[{key:"registerFeature",value:function(e){for(var t=this._features,n=0,r=t.length;n<r;n++)if(t[n]===e)return;t.push(e);for(var i=this._objects,o=0,a=i.length;o<a;o++)i[o].features.push(new e)}},{key:"addObject",value:function(e){e.features=[];for(var t=0,n=this._features.length;t<n;t++)e.features.push(new this._features[t]);this._objects.push(e)}},{key:"callFeatureMethod",value:function(e,t,n){for(var r=e.features,i=r.length,o=0;o<i;o++){var a=r[o];a[t]&&a[t].apply(a,n)}}},{key:"findFeature",value:function(e,t){for(var n=e.features,r=n.length,i=0;i<r;i++){var o=n[i];if(o.constructor===t)return o}}}]),e}(),Xt=function(){function e(){Pt(this,e)}return It(e,null,[{key:"register",value:function(e,t){this._addDependency(e,t,this._dependenciesMap),this._addDependency(t,e,this._invDependenciesMap)}},{key:"_addCheck",value:function(t,n){var r=e._dependenciesMap.get(n);if(r)for(var i=0,o=r.length;i<o;i++)if(!t.getComponent(r[i]))throw"you should add ".concat(r[i]," before adding ").concat(n)}},{key:"_removeCheck",value:function(t,n){var r=e._invDependenciesMap.get(n);if(r)for(var i=0,o=r.length;i<o;i++)if(t.getComponent(r[i]))throw"you should remove ".concat(r[i]," before adding ").concat(n)}},{key:"_addDependency",value:function(e,t,n){var r=n.get(e);r||(r=[],n.set(e,r)),-1===r.indexOf(t)&&r.push(t)}}]),e}();function Yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){return Xt.register(e,t)}))}}Xt._dependenciesMap=new Map,Xt._invDependenciesMap=new Map;var qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Pt(this,e),this._elements=void 0,this.length=0,this._elements=new Array(t)}return It(e,[{key:"add",value:function(e){this.length===this._elements.length?this._elements.push(e):this._elements[this.length]=e,this.length++}},{key:"delete",value:function(e){var t=this._elements.indexOf(e);this.deleteByIndex(t)}},{key:"deleteByIndex",value:function(e){var t=this._elements,n=null,r=this.length-1;return e!==r&&(n=t[r],t[e]=n),this.length--,n}},{key:"garbageCollection",value:function(){this._elements.length=this.length}}]),e}(),Kt=function(t){Ft(r,t);var n=jt(r);function r(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Pt(this,r),(i=n.call(this))._node=void 0,i._destroyed=!1,i._onStartIndex=-1,i._onUpdateIndex=-1,i._overrideOnUpdate=!1,i._overrideUpdate=!1,i._props=void 0,i._enabled=!0,i._awaked=!1,i._started=!1,i._renderPriority=0,i._renderPassFlag=void 0,i._passMasks=void 0,i._cullDistanceSq=0,i._renderable=!1,i._props=o,i._node=t,i._renderPassFlag=e.MaskList.EVERYTHING,i._passMasks=[e.MaskList.EVERYTHING],i._overrideOnUpdate=i.onUpdate!==r.prototype.onUpdate,i._overrideUpdate=i.update!==r.prototype.update,i}return It(r,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!==this._enabled&&(this._enabled=e,e?this._node.isActiveInHierarchy&&this._onEnable():this._node.isActiveInHierarchy&&this._onDisable(),e?this._started&&this.trigger(new g("enabled",this)):this.trigger(new g("disabled",this)))}},{key:"node",get:function(){return this._node}}]),It(r,[{key:"destroy",value:function(){this._destroyed||(this._node._removeComponent(this),this._node.isActiveInHierarchy&&(this._enabled&&this._onDisable(),this._onInActive()),this._destroyed=!0,this._onDestroy())}},{key:"_onAwake",value:function(){}},{key:"_onEnable",value:function(){var e=this.scene._componentsManager;this._started||e.addOnStartScript(this),(this._overrideOnUpdate||this._overrideUpdate)&&(this._overrideUpdate&&(this.onUpdate=this.update),e.addOnUpdateComponent(this))}},{key:"_onDisable",value:function(){var e=this.scene._componentsManager;this._started||e.removeOnStartScript(this),(this._overrideOnUpdate||this._overrideUpdate)&&e.removeOnUpdateComponent(this)}},{key:"_onDestroy",value:function(){}},{key:"_onActive",value:function(){}},{key:"_onInActive",value:function(){}},{key:"_setActive",value:function(e){e?(this._awaked||(this._awaked=!0,this._onAwake()),this._onActive(),this._enabled&&this._onEnable()):(this._enabled&&this._onDisable(),this._onInActive())}},{key:"setPassMasks",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._passMasks=t,this._renderPassFlag=t.reduce((function(e,t){return e|t}),0)}},{key:"addPassMasks",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=this._passMasks.indexOf(o);a<0&&this._passMasks.push(o)}this.setPassMasks.apply(this,Ut(this._passMasks))}},{key:"removePassMasks",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=this._passMasks.indexOf(o);a>-1&&this._passMasks.splice(a,1)}this.setPassMasks.apply(this,Ut(this._passMasks))}},{key:"onStart",value:function(){}},{key:"onUpdate",value:function(){}},{key:"update",value:function(){}},{key:"scene",get:function(){return this._node.scene}},{key:"engine",get:function(){var e,t;return null===(e=this._node)||void 0===e||null===(t=e.scene)||void 0===t?void 0:t.engine}},{key:"isRenderable",get:function(){return this._renderable}},{key:"renderable",set:function(e){this._renderable=e}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(e){this._renderPriority=e}},{key:"started",get:function(){return this._started}},{key:"cullDistanceSq",get:function(){return this._cullDistanceSq}},{key:"cullDistance",get:function(){return Math.sqrt(this._cullDistanceSq)},set:function(e){this._cullDistanceSq=e*e}},{key:"modelMatrix",get:function(){return this._node.getModelMatrix()}},{key:"invModelMatrix",get:function(){return this._node.getInvModelMatrix()}},{key:"renderPassFlag",get:function(){return this._renderPassFlag},set:function(e){this._renderPassFlag=e}},{key:"parent",get:function(){return this._node}}]),r}(_),Qt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Pt(this,e),this._flags=t,this.flag=!0}return It(e,[{key:"destroy",value:function(){var e=this._flags,t=e.indexOf(this),n=e.length-1;if(t!==n){var r=e[n];e[t]=r}e.length--,this._flags=null}}]),e}(),Jt=function(e){Ft(n,e);var t=jt(n);function n(e){var r;return Pt(this,n),(r=t.call(this,e))._position=xt.create(),r._rotation=xt.create(),r._rotationQuaternion=tt.create(),r._scale=xt.fromValues(1,1,1),r._worldPosition=xt.create(),r._worldRotation=xt.create(),r._worldRotationQuaternion=tt.create(),r._lossyWorldScale=xt.fromValues(1,1,1),r._localMatrix=Ee.create(),r._worldMatrix=Ee.create(),r._dirtyFlag=n._WM_WP_WE_WQ_WS_FLAGS,r._changeFlags=[],r._isParentDirty=!0,r._parentTransformCache=null,r}return It(n,[{key:"position",get:function(){return this._position},set:function(e){this._position!==e&&xt.copy(this._position,e),this._setDirtyFlagTrue(n._LOCAL_MATRIX_FLAG),this._updateWorldPositionFlag()}},{key:"worldPosition",get:function(){return this._isContainDirtyFlag(n._WORLD_POSITION_FLAG)&&(this._getParentTransform()?Ee.getTranslation(this._worldPosition,this.worldMatrix):xt.copy(this._worldPosition,this._position),this._setDirtyFlagFalse(n._WORLD_POSITION_FLAG)),this._worldPosition},set:function(e){this._worldPosition!==e&&xt.copy(this._worldPosition,e);var t=this._getParentTransform();if(t){var r=Ee.invert(n._tempMat41,t.worldMatrix);xt.transformMat4(this._worldPosition,e,r)}else xt.copy(this._worldPosition,e);this.position=this._worldPosition,this._setDirtyFlagFalse(n._WORLD_POSITION_FLAG)}},{key:"rotation",get:function(){return this._isContainDirtyFlag(n._LOCAL_EULER_FLAG)&&(tt.toEuler(this._rotation,this._rotationQuaternion),this._setDirtyFlagFalse(n._LOCAL_EULER_FLAG)),this._rotation},set:function(e){this._rotation!==e&&xt.copy(this._rotation,e),this._setDirtyFlagTrue(n._LOCAL_MATRIX_FLAG|n._LOCAL_QUAT_FLAG),this._setDirtyFlagFalse(n._LOCAL_EULER_FLAG),this._updateWorldRotationFlag()}},{key:"worldRotation",get:function(){return this._isContainDirtyFlag(n._WORLD_EULER_FLAG)&&(tt.toEuler(this._worldRotation,this.worldRotationQuaternion),this._setDirtyFlagFalse(n._WORLD_EULER_FLAG)),this._worldRotation},set:function(e){this._worldRotation!==e&&xt.copy(this._worldRotation,e),tt.fromEuler(this._worldRotationQuaternion,e[0],e[1],e[2]),this.worldRotationQuaternion=this._worldRotationQuaternion,this._setDirtyFlagFalse(n._WORLD_EULER_FLAG)}},{key:"rotationQuaternion",get:function(){return this._isContainDirtyFlag(n._LOCAL_QUAT_FLAG)&&(tt.fromEuler(this._rotationQuaternion,this._rotation[0],this._rotation[1],this._rotation[2]),this._setDirtyFlagFalse(n._LOCAL_QUAT_FLAG)),this._rotationQuaternion},set:function(e){this._rotationQuaternion!==e&&tt.copy(this._rotationQuaternion,e),this._setDirtyFlagTrue(n._LOCAL_MATRIX_FLAG|n._LOCAL_EULER_FLAG),this._setDirtyFlagFalse(n._LOCAL_QUAT_FLAG),this._updateWorldRotationFlag()}},{key:"worldRotationQuaternion",get:function(){if(this._isContainDirtyFlag(n._WORLD_QUAT_FLAG)){var e=this._getParentTransform();null!=e?tt.multiply(this._worldRotationQuaternion,e.worldRotationQuaternion,this.rotationQuaternion):tt.copy(this._worldRotationQuaternion,this.rotationQuaternion),this._setDirtyFlagFalse(n._WORLD_QUAT_FLAG)}return this._worldRotationQuaternion},set:function(e){this._worldRotationQuaternion!==e&&tt.copy(this._worldRotationQuaternion,e);var t=this._getParentTransform();if(t){var r=tt.invert(n._tempVec41,t.worldRotationQuaternion);tt.multiply(this._rotationQuaternion,e,r)}else tt.copy(this._rotationQuaternion,e);this.rotationQuaternion=this._rotationQuaternion,this._setDirtyFlagFalse(n._WORLD_QUAT_FLAG)}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale!==e&&xt.copy(this._scale,e),this._setDirtyFlagTrue(n._LOCAL_MATRIX_FLAG),this._updateWorldScaleFlag()}},{key:"lossyWorldScale",get:function(){if(this._isContainDirtyFlag(n._WORLD_SCALE_FLAG)){if(this._getParentTransform()){var e=this._getScaleMatrix();xt.set(this._lossyWorldScale,e[0],e[4],e[8])}else xt.copy(this._lossyWorldScale,this._scale);this._setDirtyFlagFalse(n._WORLD_SCALE_FLAG)}return this._lossyWorldScale}},{key:"localMatrix",get:function(){return this._isContainDirtyFlag(n._LOCAL_MATRIX_FLAG)&&(Ee.fromRotationTranslationScale(this._localMatrix,this.rotationQuaternion,this._position,this._scale),this._setDirtyFlagFalse(n._LOCAL_MATRIX_FLAG)),this._localMatrix},set:function(e){this._localMatrix!==e&&Ee.copy(this._localMatrix,e),Ee.decompose(this._localMatrix,this._position,this._rotationQuaternion,this._scale),this._setDirtyFlagTrue(n._LOCAL_EULER_FLAG),this._setDirtyFlagFalse(n._LOCAL_MATRIX_FLAG),this._updateAllWorldFlag()}},{key:"worldMatrix",get:function(){if(this._isContainDirtyFlag(n._WORLD_MATRIX_FLAG)){var e=this._getParentTransform();e?Ee.multiply(this._worldMatrix,e.worldMatrix,this.localMatrix):Ee.copy(this._worldMatrix,this.localMatrix),this._setDirtyFlagFalse(n._WORLD_MATRIX_FLAG)}return this._worldMatrix},set:function(e){this._worldMatrix!==e&&Ee.copy(this._worldMatrix,e);var t=this._getParentTransform();if(t){var r=Ee.invert(n._tempMat42,t.worldMatrix);Ee.multiply(this._localMatrix,e,r)}else Ee.copy(this._localMatrix,e);this.localMatrix=this._localMatrix,this._setDirtyFlagFalse(n._WORLD_MATRIX_FLAG)}}]),It(n,[{key:"getWorldForward",value:function(e){var t=this.worldMatrix;return e=xt.set(e,t[8],t[9],t[10]),xt.normalize(e,e)}},{key:"getWorldRight",value:function(e){var t=this.worldMatrix;return e=xt.set(e,t[0],t[1],t[2]),xt.normalize(e,e)}},{key:"getWorldUp",value:function(e){var t=this.worldMatrix;return e=xt.set(e,t[4],t[5],t[6]),xt.normalize(e,e)}},{key:"translate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var r=n._tempMat40;Ee.fromQuat(r,this.rotationQuaternion),e=xt.transformMat4(n._tempVec3,e,r),this.position=xt.add(this._position,this._position,e)}else this.worldPosition=xt.add(this.worldPosition,e,this._worldPosition)}},{key:"rotate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=tt.fromEuler(n._tempVec40,e[0],e[1],e[2]);this._rotateByQuat(r,t)}},{key:"rotateByAxis",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t*Math.PI/180,o=tt.setAxisAngle(n._tempVec40,e,i);this._rotateByQuat(o,r)}},{key:"lookAt",value:function(e,t){var r,i=this.worldPosition,o=Q.EPSILON;if(!(Math.abs(i[0]-e[0])<o&&Math.abs(i[1]-e[1])<o&&Math.abs(i[2]-e[2])<o)){t=null!==(r=t)&&void 0!==r?r:xt.set(n._tempVec3,0,1,0);var a=Ee.lookAtR(n._tempMat43,i,e,t);this.worldRotationQuaternion=Ee.getRotation(n._tempVec40,a)}}},{key:"registerWorldChangeFlag",value:function(){var e=new Qt(this._changeFlags);return this._changeFlags.push(e),e}},{key:"_onDestroy",value:function(){for(var e=0,t=this._changeFlags.length;e<t;e++)this._changeFlags[e].destroy()}},{key:"_parentChange",value:function(){this._isParentDirty=!0,this._updateAllWorldFlag()}},{key:"_cloneTo",value:function(e){return e.localMatrix=this.localMatrix,e}},{key:"_updateWorldPositionFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WP_FLAGS)){this._worldAssociatedChange(n._WM_WP_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateWorldPositionFlag()}}}},{key:"_updateWorldRotationFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WE_WQ_FLAGS)){this._worldAssociatedChange(n._WM_WE_WQ_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateWorldPositionAndRotationFlag()}}}},{key:"_updateWorldPositionAndRotationFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WP_WE_WQ_FLAGS)){this._worldAssociatedChange(n._WM_WP_WE_WQ_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateWorldPositionAndRotationFlag()}}}},{key:"_updateWorldScaleFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WS_FLAGS)){this._worldAssociatedChange(n._WM_WS_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateWorldPositionAndScaleFlag()}}}},{key:"_updateWorldPositionAndScaleFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WP_WS_FLAGS)){this._worldAssociatedChange(n._WM_WP_WS_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateWorldPositionAndScaleFlag()}}}},{key:"_updateAllWorldFlag",value:function(){if(!this._isContainDirtyFlags(n._WM_WP_WE_WQ_WS_FLAGS)){this._worldAssociatedChange(n._WM_WP_WE_WQ_WS_FLAGS);for(var e=this._node.children,t=0,r=e.length;t<r;t++){var i;null===(i=e[t].transform)||void 0===i||i._updateAllWorldFlag()}}}},{key:"_getParentTransform",value:function(){if(!this._isParentDirty)return this._parentTransformCache;for(var e=null,t=this._node.parentNode;t;){var n=t.transform;if(n){e=n;break}t=t.parent}return this._parentTransformCache=e,this._isParentDirty=!1,e}},{key:"_getScaleMatrix",value:function(){var e=n._tempVec40,t=n._tempMat30,r=n._tempMat31,i=n._tempMat32;return se.fromMat4(r,this.worldMatrix),tt.invert(e,this.worldRotationQuaternion),se.fromQuat(e,t),se.multiply(i,t,r),i}},{key:"_isContainDirtyFlags",value:function(e){return(this._dirtyFlag&e)===e}},{key:"_isContainDirtyFlag",value:function(e){return 0!=(this._dirtyFlag&e)}},{key:"_setDirtyFlagTrue",value:function(e){this._dirtyFlag|=e}},{key:"_setDirtyFlagFalse",value:function(e){this._dirtyFlag&=~e}},{key:"_worldAssociatedChange",value:function(e){this._dirtyFlag|=e;for(var t=this._changeFlags.length-1;t>=0;t--)this._changeFlags[t].flag=!0}},{key:"_rotateByQuat",value:function(e,t){t?(tt.multiply(this._rotationQuaternion,this.rotationQuaternion,e),this.rotationQuaternion=this._rotationQuaternion):(tt.multiply(this._worldRotationQuaternion,this.worldRotationQuaternion,e),this.worldRotationQuaternion=this._worldRotationQuaternion)}}]),n}(Kt);Jt._tempVec3=xt.create(),Jt._tempVec41=Ct.create(),Jt._tempVec40=Ct.create(),Jt._tempMat30=se.create(),Jt._tempMat31=se.create(),Jt._tempMat32=se.create(),Jt._tempMat40=Ee.create(),Jt._tempMat41=Ee.create(),Jt._tempMat42=Ee.create(),Jt._tempMat43=Ee.create(),Jt._LOCAL_EULER_FLAG=1,Jt._LOCAL_QUAT_FLAG=2,Jt._WORLD_POSITION_FLAG=4,Jt._WORLD_EULER_FLAG=8,Jt._WORLD_QUAT_FLAG=16,Jt._WORLD_SCALE_FLAG=32,Jt._LOCAL_MATRIX_FLAG=64,Jt._WORLD_MATRIX_FLAG=128,Jt._WM_WP_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_POSITION_FLAG,Jt._WM_WE_WQ_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_EULER_FLAG|Jt._WORLD_QUAT_FLAG,Jt._WM_WP_WE_WQ_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_POSITION_FLAG|Jt._WORLD_EULER_FLAG|Jt._WORLD_QUAT_FLAG,Jt._WM_WS_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_SCALE_FLAG,Jt._WM_WP_WS_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_POSITION_FLAG|Jt._WORLD_SCALE_FLAG,Jt._WM_WP_WE_WQ_WS_FLAGS=Jt._WORLD_MATRIX_FLAG|Jt._WORLD_POSITION_FLAG|Jt._WORLD_EULER_FLAG|Jt._WORLD_QUAT_FLAG|Jt._WORLD_SCALE_FLAG;var Zt=function(e){Ft(n,e);var t=jt(n);function n(e,r,i){var o;return Pt(this,n),(o=t.call(this)).name=void 0,o._isActiveInHierarchy=!1,o._components=[],o._scene=void 0,o._active=void 0,o._children=[],o._parent=null,o._activeChangedComponents=void 0,o._isRoot=void 0,o.transform=void 0,o._invModelMatrix=Ee.create(),o.tempVec30=xt.create(),o.tempVec31=xt.create(),o.tempVec32=xt.create(),o.tempVec33=xt.create(),o.tempVec34=xt.create(),o.tempVec36=xt.create(),o.tempQuat=tt.create(),o._inverseWorldMatFlag=void 0,n._nodes.add(Nt(o)),o._scene=e,o._isRoot=null===r&&"__root__"===i,o.name=i,o.parent=r,o.isActive=!0,o.transform=o.addComponent(Jt),o._inverseWorldMatFlag=o.transform.registerWorldChangeFlag(),o}return It(n,[{key:"isActive",get:function(){return this._active},set:function(e){if(e!==this._active)if(this._active=e,e){var t=this._parent;(this._isRoot||t&&t._isActiveInHierarchy)&&this._processActive()}else this._isActiveInHierarchy&&this._processInActive()}},{key:"isActiveInHierarchy",get:function(){return this._isActiveInHierarchy}},{key:"parent",get:function(){return this._parent},set:function(e){if(e!==this._parent){var t=this._parent;if(null!=t){var r=t._children;r.splice(r.indexOf(this),1)}var i=this._parent=e;if(i){i._children.push(this);var o=i._scene;this._scene!==o&&(this._scene=o,n._traverseSetOwnerScene(this,o)),i._isActiveInHierarchy?!this._isActiveInHierarchy&&this._active&&this._processActive():this._isActiveInHierarchy&&this._processInActive()}else this._isActiveInHierarchy&&this._processInActive(),t&&(this._scene=null,n._traverseSetOwnerScene(this,null))}this._setTransformDirty()}},{key:"childCount",get:function(){return this._children.length}},{key:"scene",get:function(){return this._scene}}],[{key:"findByName",value:function(e){for(var t=n._nodes._elements,r=t.length-1;r>=0;r--){var i=t[r];if(i.name===e)return i}return null}},{key:"findByPath",value:function(e,t){var r=e.split("/"),i=t.root;if(!i)return null;for(var o=i,a=0,s=r.length;a<s;++a){var l=r[a];if(l&&!(o=n._findChildByName(o,l)))return null}return o}},{key:"_findChildByName",value:function(e,t){for(var n=e._children,r=n.length-1;r>=0;r--){var i=n[r];if(i.name===t)return i}return null}},{key:"_traverseSetOwnerScene",value:function(e,t){for(var n=e.children.length-1;n>=0;n--)e.children[n]._scene=t,this._traverseSetOwnerScene(e.children[n],t)}}]),It(n,[{key:"addComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xt._addCheck(this,e);var n=new e(this,t);return this._components.push(n),this._isActiveInHierarchy&&n._setActive(!0),n}},{key:"getComponent",value:function(e){for(var t=this._components.length-1;t>=0;t--){var n=this._components[t];if(n instanceof e)return n}}},{key:"getComponents",value:function(e,t){for(var n=this._components.length-1;n>=0;n--){var r=this._components[n];r instanceof e&&t.push(r)}return t}},{key:"addChild",value:function(e){e.parent=this}},{key:"removeChild",value:function(e){e.parent=null}},{key:"getChild",value:function(e){return this._children[e]}},{key:"findByName",value:function(e){var t=this._children,r=n._findChildByName(this,e);if(r)return r;for(var i=t.length-1;i>=0;i--){var o=t[i].findByName(e);if(o)return o}return null}},{key:"findByPath",value:function(e){for(var t=e.split("/"),r=this,i=0,o=t.length;i<o;++i){var a=t[i];if(a&&!(r=n._findChildByName(r,a)))return null}return r}},{key:"clearChildren",value:function(){for(var e=this._children,t=e.length-1;t>=0;t--){var r=e[t];r._parent=null,r._isActiveInHierarchy&&r._processInActive(),r._scene=null,n._traverseSetOwnerScene(r,null)}e.length=0}},{key:"clone",value:function(){var e=new n(this._scene,null,this.name);e._active=this._active,e._isActiveInHierarchy=this._isActiveInHierarchy,e.transform.localMatrix=this.transform.localMatrix;for(var t=this._children,r=0,i=this._children.length;r<i;r++){var o=t[r];e.addChild(o.clone())}for(var a=this._components||[],s=a.length,l=0;l<s;l++){var c=a[l];c instanceof Jt||e.createAbility(c.constructor,c._props)}return e}},{key:"destroy",value:function(){for(var e=this._components,t=e.length-1;t>=0;t--)e[t].destroy();this._components.length=0;for(var r=this._children,i=r.length-1;i>=0;i--)r[i].destroy();if(this._children.length=0,null!=this._parent){var o=this._parent._children;o.splice(o.indexOf(this),1)}this._parent=null,n._nodes.delete(this)}},{key:"_removeComponent",value:function(e){Xt._removeCheck(this,e.constructor);var t=this._components;t.splice(t.indexOf(e),1)}},{key:"_setActiveComponents",value:function(e){for(var t=this._activeChangedComponents,n=0,r=t.length;n<r;++n)t[n]._setActive(e);this._scene._componentsManager.putActiveChangedTempList(t),this._activeChangedComponents=null}},{key:"_processActive",value:function(){if(this._activeChangedComponents)throw"Note: can't set the 'main inActive node' active in hierarchy, if the operation is in main inActive node or it's children script's onDisable Event.";this._activeChangedComponents=this._scene._componentsManager.getActiveChangedTempList(),this._setActiveInHierarchy(this._activeChangedComponents),this._setActiveComponents(!0)}},{key:"_processInActive",value:function(){if(this._activeChangedComponents)throw"Note: can't set the 'main active node' inActive in hierarchy, if the operation is in main active node or it's children script's onEnable Event.";this._activeChangedComponents=this._scene._componentsManager.getActiveChangedTempList(),this._setInActiveInHierarchy(this._activeChangedComponents),this._setActiveComponents(!1)}},{key:"_setActiveInHierarchy",value:function(e){this._isActiveInHierarchy=!0;for(var t=this._components,n=t.length-1;n>=0;n--)e.push(t[n]);for(var r=this._children,i=r.length-1;i>=0;i--){var o=r[i];o.isActive&&o._setActiveInHierarchy(e)}}},{key:"_setInActiveInHierarchy",value:function(e){this._isActiveInHierarchy=!1;for(var t=this._components,n=t.length-1;n>=0;n--)e.push(t[n]);for(var r=this._children,i=r.length-1;i>=0;i--){var o=r[i];o.isActive&&o._setInActiveInHierarchy(e)}}},{key:"_setTransformDirty",value:function(){if(this.transform)this.transform._parentChange();else for(var e=0,t=this._children.length;e<t;e++)this.children[e]._setTransformDirty()}},{key:"createChild",value:function(e){return new n(this._scene,this,e)}},{key:"findChildByName",value:function(e){for(var t=this._children,n=t.length-1;n>=0;n--){var r=t[n];if(r.name&&r.name===e)return r}for(var i=t.length-1;i>=0;i--){var o=t[i].findChildByName(e);if(o)return o}return null}},{key:"findChildByPath",value:function(e){var t=e.split("/");if(0===t.length)return null;var n,r=this,i=Gt(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(null===(r=r.findChildByName(o)))return null}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"createAbility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.addComponent(e,t);return n}},{key:"findAbilityByType",value:function(e){for(var t=this._components,n=t.length-1;n>=0;n--){var r=t[n];if(r instanceof e)return r}return null}},{key:"attachAbility",value:function(e){-1!==this._components.indexOf(e)&&this._components.push(e)}},{key:"detachAbility",value:function(e){var t=this._components.indexOf(e);-1!==t&&this._components.splice(t,1)}},{key:"rotateByQuat",value:function(e){var t=tt.toEuler(this.tempVec33,e);this.transform.rotate(t)}},{key:"rotateByAngles",value:function(e,t,n){O.isArray(e)?xt.set(this.tempVec36,e[0],e[1],e[2]):xt.set(this.tempVec36,e,t,n),this.transform.rotate(this.tempVec36)}},{key:"setRotationAngles",value:function(e,t,n){xt.set(this.tempVec34,e,t,n),this.transform.rotation=this.tempVec34}},{key:"setRotationAxisAngle",value:function(e,t){var n=tt.setAxisAngle(this.tempQuat,e,Q.toRadian(t));this.transform.rotationQuaternion=n}},{key:"getForward",value:function(){return this.forward}},{key:"getModelMatrix",value:function(){return this.transform.worldMatrix}},{key:"setModelMatrix",value:function(e){this.transform.worldMatrix=e}},{key:"setModelMatrixNew",value:function(e){this.transform.worldMatrix=e}},{key:"getInvModelMatrix",value:function(){return this._inverseWorldMatFlag.flag&&(Ee.invert(this._invModelMatrix,this.transform.worldMatrix),this._inverseWorldMatFlag.flag=!1),this._invModelMatrix}},{key:"lookAt",value:function(e,t){return this.transform.lookAt(e,t),this}},{key:"childrenCount",get:function(){return this._children.length}},{key:"parentNode",get:function(){return this._parent},set:function(e){this.parent=e}},{key:"children",get:function(){return this._children}},{key:"engine",get:function(){return this._scene.engine}},{key:"abilityCount",get:function(){return this._components.length}},{key:"abilityArray",get:function(){return this._components}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position=e}},{key:"up",get:function(){return this.transform.getWorldUp(this.tempVec30)}},{key:"forward",get:function(){return this.transform.getWorldForward(this.tempVec31)}},{key:"right",get:function(){return this.transform.getWorldRight(this.tempVec32)}},{key:"worldPosition",get:function(){return this.transform.worldPosition},set:function(e){this.transform.worldPosition=e}},{key:"rotation",get:function(){return this.transform.rotationQuaternion},set:function(e){this.transform.rotationQuaternion=e}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale=e}},{key:"castShadow",set:function(e){$t(this,e,"castShadow")}},{key:"recieveShadow",set:function(e){$t(this,e,"recieveShadow")}},{key:"ignoreInDepthTexture",set:function(e){$t(this,e,"ignoreInDepthTexture")}}]),n}(_);function $t(e,t,n){var r=e.abilityArray;if(r)for(var i=r.length-1;i>=0;i--){var o=r[i];o.isRenderable&&(o[n]=t)}var a=e.children;if(a)for(var s=a.length-1;s>=0;s--)a[s][n]=t}Zt._nodes=new qt;var en=function(){function e(){Pt(this,e),this._onStartScripts=new qt,this._onUpdateScripts=new qt,this._onLateUpdateScripts=new qt,this._destoryComponents=[],this._onUpdateAnimations=new qt,this._renderers=new qt,this._onUpdateRenderers=new qt,this._componentsContainerPool=[],this._onUpdateComponents=new qt}return It(e,[{key:"addRenderer",value:function(e){e._rendererIndex=this._renderers.length,this._renderers.add(e)}},{key:"removeRenderer",value:function(e){var t=this._renderers.deleteByIndex(e._rendererIndex);t&&(t._rendererIndex=e._rendererIndex),e._rendererIndex=-1}},{key:"addOnStartScript",value:function(e){e._onStartIndex=this._onStartScripts.length,this._onStartScripts.add(e)}},{key:"removeOnStartScript",value:function(e){var t=this._onStartScripts.deleteByIndex(e._onStartIndex);t&&(t._onStartIndex=e._onStartIndex),e._onStartIndex=-1}},{key:"addOnUpdateScript",value:function(e){e._onUpdateIndex=this._onUpdateScripts.length,this._onUpdateScripts.add(e)}},{key:"removeOnUpdateScript",value:function(e){var t=this._onUpdateScripts.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1}},{key:"addOnLateUpdateScript",value:function(e){e._onLateUpdateIndex=this._onLateUpdateScripts.length,this._onLateUpdateScripts.add(e)}},{key:"removeOnLateUpdateScript",value:function(e){var t=this._onLateUpdateScripts.deleteByIndex(e._onLateUpdateIndex);t&&(t._onLateUpdateIndex=e._onLateUpdateIndex),e._onLateUpdateIndex=-1}},{key:"addOnUpdateAnimations",value:function(e){e._onUpdateIndex=this._onUpdateAnimations.length,this._onUpdateAnimations.add(e)}},{key:"removeOnUpdateAnimations",value:function(e){var t=this._onUpdateAnimations.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1}},{key:"addOnUpdateRenderers",value:function(e){e._onUpdateIndex=this._onUpdateRenderers.length,this._onUpdateRenderers.add(e)}},{key:"removeOnUpdateRenderers",value:function(e){var t=this._onUpdateRenderers.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1}},{key:"addDestoryComponent",value:function(e){this._destoryComponents.push(e)}},{key:"callScriptOnStart",value:function(){var e=this._onStartScripts;if(e.length>0){for(var t=e._elements,n=0;n<e.length;n++){var r=t[n];r._started=!0,r._onStartIndex=-1,r.onStart()}e.length=0}}},{key:"callScriptOnUpdate",value:function(e){for(var t=this._onUpdateScripts._elements,n=this._onUpdateScripts.length-1;n>=0;--n){var r=t[n];r._started&&r.onUpdate(e)}}},{key:"callScriptOnLateUpdate",value:function(){for(var e=this._onLateUpdateScripts._elements,t=this._onLateUpdateScripts.length-1;t>=0;--t){var n=e[t];n._started&&n.onLateUpdate()}}},{key:"callAnimationUpdate",value:function(e){for(var t=this._onUpdateAnimations._elements,n=this._onUpdateAnimations.length-1;n>=0;--n)t[n].update(e)}},{key:"callRendererOnUpdate",value:function(e){for(var t=this._onUpdateRenderers._elements,n=this._onUpdateRenderers.length-1;n>=0;--n)t[n].onUpdate(e)}},{key:"callRender",value:function(e){for(var t=this._renderers._elements,n=this._renderers.length-1;n>=0;--n)t[n]._render(e)}},{key:"callComponentDestory",value:function(){var e=this._destoryComponents,t=e.length;if(t>0){for(var n=t-1;n>=0;--n)e[n].onDestroy();e.length=0}}},{key:"callCameraOnBeginRender",value:function(e){for(var t=e.node._components,n=t.length-1;n>=0;--n){var r=t[n];r.onBeginRender&&r.onBeginRender()}}},{key:"callCameraOnEndRender",value:function(e){for(var t=e.node._components,n=t.length-1;n>=0;--n){var r=t[n];r.onBeginRender&&r.onEndRender()}}},{key:"getActiveChangedTempList",value:function(){return this._componentsContainerPool.length?this._componentsContainerPool.pop():[]}},{key:"putActiveChangedTempList",value:function(e){e.length=0,this._componentsContainerPool.push(e)}},{key:"addOnUpdateComponent",value:function(e){e._onUpdateIndex=this._onUpdateComponents.length,this._onUpdateComponents.add(e)}},{key:"removeOnUpdateComponent",value:function(e){this._onUpdateComponents.delete(e),e._onUpdateIndex=-1}},{key:"callComponentOnUpdate",value:function(e){for(var t=this._onUpdateComponents._elements,n=this._onUpdateComponents.length-1;n>=0;--n){var r=t[n];r._started&&r.onUpdate(e)}}}]),e}(),tn=new Wt,nn=function(e){Ft(n,e);var t=jt(n);function n(e){var r;return Pt(this,n),(r=t.call(this)).features=[],r._activeCameras=void 0,r._engine=void 0,r._root=void 0,r.clipPlanes=[],r._componentsManager=void 0,r._engine=e,r._componentsManager=new en,r._root=new Zt(Nt(r),null,"__root__"),r._activeCameras=[],tn.addObject(Nt(r)),r}return It(n,[{key:"engine",get:function(){return this._engine}},{key:"root",get:function(){return this._root}},{key:"activeCameras",get:function(){return this._activeCameras}}],[{key:"registerFeature",value:function(e){tn.registerFeature(e)}}]),It(n,[{key:"findFeature",value:function(e){return tn.findFeature(this,e)}},{key:"update",value:function(e){tn.callFeatureMethod(this,"preUpdate",[this]),this._componentsManager.callScriptOnStart(),this._componentsManager.callScriptOnUpdate(e),this._componentsManager.callComponentOnUpdate(e),this._componentsManager.callAnimationUpdate(e),this._componentsManager.callScriptOnLateUpdate(),tn.callFeatureMethod(this,"postUpdate",[this])}},{key:"render",value:function(){var e=this._activeCameras,t=this._engine.time.deltaTime;if(this._componentsManager.callRendererOnUpdate(t),e.length>0){e.sort((function(e,t){return e.priority-t.priority}));for(var n=0,r=e.length;n<r;n++){var i=e[n],o=i.node;i.enabled&&o.isActiveInHierarchy&&(this._componentsManager.callCameraOnBeginRender(i),tn.callFeatureMethod(this,"preRender",[this,i]),i.render(),tn.callFeatureMethod(this,"postRender",[this,i]),this._componentsManager.callCameraOnEndRender(i))}}else A.debug("NO active camera.")}},{key:"attachRenderCamera",value:function(e){-1===this._activeCameras.indexOf(e)?this._activeCameras.push(e):A.warn("Camera already attached.")}},{key:"detachRenderCamera",value:function(e){var t=this._activeCameras.indexOf(e);-1!==t&&this._activeCameras.splice(t,1)}},{key:"findObjectByName",value:function(e){return this._root.name===e?this._root:this._root.findChildByName(e)}},{key:"raycast",value:function(){}},{key:"destroy",value:function(){tn.callFeatureMethod(this,"destroy",[this]),this._root.destroy(),this._root=null,this._activeCameras=null,tn._objects=[],this._componentsManager=null}}]),n}(_),rn=function(){function e(){Pt(this,e),this._assets=void 0,this._assets={}}return It(e,[{key:"requireAsset",value:function(e,t,n){var r=this._assets[e];return r||(r=new t(e,n),this.addAsset(e,r)),r}},{key:"findAsset",value:function(e){return this._assets[e]}},{key:"addAsset",value:function(e,t){this._assets[e]=t}},{key:"removeAsset",value:function(e){delete this._assets[e]}},{key:"clear",value:function(){this._assets={}}},{key:"assetsCount",get:function(){return Object.keys(this._assets).length}}]),e}(),on=new Wt,an=function(e){Ft(n,e);var t=jt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pt(this,n),(e=t.call(this))._config=r,e.features=[],e.scenes=void 0,e.assetPool=new rn,e.requestId=void 0,e._FPS=60,e._rhis=[],e._time=new E,e._paused=!0,e._FPSTime=0,e._tickTime=0,e._animateTime=new E,e._currentScene=new nn(Nt(e)),e._fixedUpdateInterval=1e3/30,e._animate=void 0,on.addObject(Nt(e)),e.scenes=[e._currentScene],e}return It(n,[{key:"time",get:function(){return this._time}},{key:"currentScene",get:function(){return this._currentScene},set:function(e){e&&(this._currentScene=e,this.scenes.find((function(t){return t===e}))||this.scenes.push(e))}},{key:"isPaused",get:function(){return this._paused}}],[{key:"registerFeature",value:function(e){on.registerFeature(e)}}]),It(n,[{key:"findFeature",value:function(e){return on.findFeature(this,e)}},{key:"requireRHI",value:function(e,t,n){var r=this.getRHI(t);if(void 0!==r)return null===r&&(r=new e(t,n),this._rhis.push(r)),r}},{key:"getRHI",value:function(e){var t;if("string"==typeof e?t=document.getElementById(e):e instanceof HTMLCanvasElement&&(t=e),t){var n,r=Gt(this._rhis);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.canvas===t)return i}}catch(e){r.e(e)}finally{r.f()}return null}A.warn("unknown canvas parameter:  ".concat(e))}},{key:"addScene",value:function(){var e=new nn(this);return this.scenes.push(e),e}},{key:"setCurrentSceneByIndex",value:function(e){e>=0&&e<this.scenes.length?this._currentScene=this.scenes[e]:A.error("Engine -- bad scene index: "+e)}},{key:"setFixedUpdateInterval",value:function(e){this._fixedUpdateInterval=e}},{key:"setFPS",value:function(e){e>=60?(this._FPS=60,this._FPSTime=0,this._tickTime=0):(this._FPS=e,this._FPSTime=1e3/e,this._tickTime=0)}},{key:"pause",value:function(){this._paused=!0,this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=0)}},{key:"resume",value:function(){var e=this;if(this._paused){this._paused=!1;var t=0;this._animate||(this._animate=function(){var n=e._animateTime;if(n.tick(),e._currentScene){var r=e._fixedUpdateInterval;for(t+=n.deltaTime;t>=r;)e._currentScene.trigger(new g("fixedUpdate",e)),t-=r}e._FPSTime?(e._tickTime>=e._FPSTime&&(e.tick(),e._tickTime-=e._FPSTime),e._tickTime+=n.deltaTime):e.tick(),e.requestId=requestAnimationFrame(e._animate)}),this.requestId=requestAnimationFrame((function(){e._animateTime.tick(),e._animate()}))}}},{key:"run",value:function(){on.callFeatureMethod(this,"preLoad",[this]),this.resume(),this.trigger(new g("run",this))}},{key:"render",value:function(){}},{key:"tick",value:function(){if(!this._paused){var e=this._time;e.tick();var t=e.deltaTime;on.callFeatureMethod(this,"preTick",[this,this.scenes]);var n,r=Gt(this._rhis);try{for(r.s();!(n=r.n()).done;)n.value.beginFrame()}catch(e){r.e(e)}finally{r.f()}var i,o=Gt(this.scenes);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.update(t),a.render(),a._componentsManager.callComponentDestory()}}catch(e){o.e(e)}finally{o.f()}var s,l=Gt(this._rhis);try{for(l.s();!(s=l.n()).done;)s.value.endFrame()}catch(e){l.e(e)}finally{l.f()}on.callFeatureMethod(this,"postTick",[this,this.scenes])}}},{key:"shutdown",value:function(){this.trigger(new g("shutdown",this)),on.callFeatureMethod(this,"shutdown",[this]),this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=0),this._animate=void 0;var e,t=Gt(this.scenes);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(e){t.e(e)}finally{t.f()}this.scenes=[],this._currentScene=null,this.features=[],this._time=null,this._animateTime=null,this.assetPool.clear(),this.assetPool=null,on._objects=[]}},{key:"config",get:function(){return this._config}}],[{key:"registerPipline",value:function(){}}]),n}(_),sn=function(){function e(){Pt(this,e)}return It(e,[{key:"preLoad",value:function(){}},{key:"preTick",value:function(){}},{key:"postTick",value:function(){}},{key:"shutdown",value:function(){}}]),e}(),ln=function(){function t(n){Pt(this,t),this.type=void 0,this.name=void 0,this.cacheID=void 0,this.needRecreate=void 0,this.name=n,this.type=e.AssetType.Cache}return It(t,[{key:"_finalize",value:function(){}}]),t}(),cn=function e(){Pt(this,e)},un=function(){function e(){Pt(this,e)}return It(e,[{key:"preUpdate",value:function(){}},{key:"postUpdate",value:function(){}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"destroy",value:function(){}}]),e}(),dn=function(e){Ft(n,e);var t=jt(n);function n(){var e;Pt(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._started=!1,e._onStartIndex=-1,e._onUpdateIndex=-1,e._onLateUpdateIndex=-1,e._onPreRenderIndex=-1,e._onPostRenderIndex=-1,e}return It(n,[{key:"onAwake",value:function(){}},{key:"onEnable",value:function(){}},{key:"onStart",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onLateUpdate",value:function(){}},{key:"onBeginRender",value:function(){}},{key:"onEndRender",value:function(){}},{key:"onDisable",value:function(){}},{key:"onDestroy",value:function(){}},{key:"_onAwake",value:function(){this.onAwake()}},{key:"_onEnable",value:function(){var e=this.scene._componentsManager,t=n.prototype;this._started||e.addOnStartScript(this),this.onUpdate!==t.onUpdate&&e.addOnUpdateScript(this),this.onLateUpdate!==t.onLateUpdate&&e.addOnLateUpdateScript(this),this.onEnable()}},{key:"_onDisable",value:function(){var e=this.scene._componentsManager,t=n.prototype;this._started||e.removeOnStartScript(this),this.onUpdate!==t.onUpdate&&e.removeOnUpdateScript(this),this.onLateUpdate!==t.onLateUpdate&&e.removeOnLateUpdateScript(this),this.onDisable()}},{key:"_onDestroy",value:function(){this.scene._componentsManager.addDestoryComponent(this)}}]),n}(Kt),fn=function(e){Ft(n,e);var t=jt(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pt(this,n),(r=t.call(this,e,i))._onUpdateIndex=-1,r._rendererIndex=-1,r._renderable=!0;var o=n.prototype;return r._overrideOnUpdate=r.onUpdate!==o.onUpdate,r._overrideUpdate=r.update!==o.update,r}return It(n,[{key:"update",value:function(){}},{key:"onUpdate",value:function(){}},{key:"_onEnable",value:function(){var e=this.scene._componentsManager;this._started||e.addOnStartScript(this),(this._overrideOnUpdate||this._overrideUpdate)&&(this._overrideUpdate&&(this.onUpdate=this.update),e.addOnUpdateRenderers(this)),e.addRenderer(this)}},{key:"_onDisable",value:function(){var e=this.scene._componentsManager;this._started||e.removeOnStartScript(this),(this._overrideOnUpdate||this._overrideUpdate)&&e.removeOnUpdateRenderers(this),e.removeRenderer(this)}},{key:"_render",value:function(e){var t=!1;if(this.cullDistanceSq>0){var n=xt.squaredDistance(e.eyePos,this.node.worldPosition);t=this.cullDistanceSq<n}t||this.render(e)}}]),n}(Kt),hn=xt.create(),pn=function(e){Ft(n,e);var t=jt(n);function n(e,r){var i;Pt(this,n),(i=t.call(this,e,r)).viewMatrix=void 0,i.inverseViewMatrix=void 0,i.projectionMatrix=void 0,i.inverseProjectionMatrix=void 0,i.zNear=void 0,i.zFar=void 0,i.colorWriteMask=void 0,i.viewport=void 0,i.leftHand=void 0,i._rhi=void 0,i._sceneRenderer=void 0,i._isOrtho=void 0;var o=r.RHI,a=r.SceneRenderer,s=r.canvas,l=r.attributes,c=i._node.scene.engine;return i._rhi=c.requireRHI(o,s,l),i._sceneRenderer=new a(Nt(i)),i._isOrtho=!1,i.viewMatrix=Ee.create(),i.projectionMatrix=Ee.create(),i.inverseViewMatrix=Ee.create(),i.inverseProjectionMatrix=Ee.create(),i.node.scene.attachRenderCamera(Nt(i)),i.zNear=1,i.zFar=100,i.colorWriteMask=[!0,!0,!0,!0],i.viewport=[0,0,i._rhi.canvas.width,i._rhi.canvas.height],i.leftHand=!1,i}return It(n,[{key:"aspect",get:function(){return this.viewport[2]/this.viewport[3]}},{key:"renderHardware",get:function(){return this._rhi}},{key:"sceneRenderer",get:function(){return this._sceneRenderer},set:function(e){var t=this.sceneRenderer.defaultRenderPass,n=t.clearMode,r=t.clearParam;this._sceneRenderer=e,e.defaultRenderPass.clearParam||this.setClearMode(n,r)}},{key:"eyePos",get:function(){return this._node.worldPosition}}]),It(n,[{key:"render",value:function(){this._sceneRenderer.render()}},{key:"setClearMode",value:function(e,t){var n=this._sceneRenderer.defaultRenderPass;n.clearMode=e,n.clearParam=t}},{key:"setPerspective",value:function(e,t,n,r,i){this._isOrtho=!1,this.zNear=r,this.zFar=i,Ee.perspective(this.projectionMatrix,Q.toRadian(e),t/n,r,i),Ee.invert(this.inverseProjectionMatrix,this.projectionMatrix)}},{key:"setViewport",value:function(e,t,n,r){this.viewport=[e,t,n,r],this._rhi.viewport(e,t,n,r)}},{key:"setOrtho",value:function(e,t,n,r,i,o){this._isOrtho=!0,this.zNear=i,this.zFar=o,Ee.ortho(this.projectionMatrix,e,t,n,r,i,o),Ee.invert(this.inverseProjectionMatrix,this.projectionMatrix)}},{key:"worldToScreen",value:function(e){var t=this.viewport,n=t[2]-t[0],r=t[3]-t[1],i=Ee.create();Ee.mul(i,this.projectionMatrix,this.viewMatrix);var o=Ct.fromValues(e[0],e[1],e[2],1),a=Ct.create();Ct.transformMat4(a,o,i);var s=a[0]/a[3],l=a[1]/a[3],c=a[2]/a[3],u=.5*(s+1)*n,d=.5*(1-l)*r,f=this._rhi.canvas,h=f.clientWidth,p=f.clientHeight;return u=u*h/f.width,d=d*p/f.height,xt.fromValues(u,d,c)}},{key:"screenToWorld",value:function(e,t){void 0===t&&(t=0);var n=this._rhi.canvas,r=n.clientWidth,i=n.clientHeight,o=n.width,a=n.height,s=e[0]/r*o,l=e[1]/i*a,c=this.viewport,u=c[2],d=c[3],f=(s-c[0])/u*2-1,h=1-(l-c[1])/d*2,p=Ct.fromValues(f,h,t,1),m=Ee.create();Ee.mul(m,this.projectionMatrix,this.viewMatrix);var v=Ee.create();Ee.invert(v,m);var g=Ct.create();return Ct.transformMat4(g,p,v),xt.fromValues(g[0]/g[3],g[1]/g[3],g[2]/g[3])}},{key:"screenPointToRay",value:function(e,t){var n=this._isOrtho?this.worldToScreen([e,t]):this.eyePos,r=this.screenToWorld([e,t],.5);return xt.sub(r,r,n),xt.normalize(r,r),{origin:n,direction:r}}},{key:"destroy",value:function(){Bt(Dt(n.prototype),"destroy",this).call(this),this._node.scene.detachRenderCamera(this),this._sceneRenderer&&this._sceneRenderer.destroy(),this._rhi&&this._rhi.destroy()}},{key:"update",value:function(e){Bt(Dt(n.prototype),"update",this).call(this,e),xt.copy(hn,this._node.forward),this.leftHand&&xt.scale(hn,hn,-1),xt.add(hn,this._node.position,hn),Ee.lookAt(this.viewMatrix,this._node.position,hn,this._node.up),Ee.invert(this.inverseViewMatrix,this.viewMatrix)}}]),n}(Kt);function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t,n){return t&&vn(e.prototype,t),n&&vn(e,n),e}function _n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bn(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yn(e);if(t){var i=yn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bn(this,n)}}function wn(e,t,n){return(wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var Tn=function(e){_n(n,e);var t=xn(n);function n(e,r){var i;mn(this,n),(i=t.call(this,e))._uvRect=void 0,i._worldSize=[],i._positionQuad=void 0,i._rotationAngle=void 0,i._anchor=void 0,i._texture=void 0,i._rect=void 0,i._worldSizeFactor=void 0,i.renderMode="2D",i.tintColor=[1,1,1,1],i.transformMatrix=void 0;var o=r.texture,a=r.rect,s=r.anchor,l=r.worldSizeFactor;return i._worldSizeFactor=l||100,i.setTexture(o),i.setRect(a),i.setAnchor(s),i.setUvRect(),i.setWorldSize(),r.tintColor&&(i.tintColor=r.tintColor),i._positionQuad={leftTop:xt.create(),leftBottom:xt.create(),rightTop:xt.create(),rightBottom:xt.create()},i._rotationAngle=0,i}return gn(n,[{key:"setTexture",value:function(e){e&&(this._texture=e)}},{key:"setRect",value:function(e){var t,n,r,i,o,a,s,l,c,u;this._rect=e||{x:0,y:0,width:null!==(t=null!==(n=null===(r=this._texture)||void 0===r||null===(i=r.image)||void 0===i?void 0:i.width)&&void 0!==n?n:null===(o=this._texture)||void 0===o?void 0:o.width)&&void 0!==t?t:0,height:null!==(a=null!==(s=null===(l=this._texture)||void 0===l||null===(c=l.image)||void 0===c?void 0:c.height)&&void 0!==s?s:null===(u=this._texture)||void 0===u?void 0:u.height)&&void 0!==a?a:0}}},{key:"setAnchor",value:function(e){this._anchor=e||[.5,.5]}},{key:"setWorldSize",value:function(){var e=this._worldSizeFactor;this._worldSize=[this._rect.width/e,this._rect.height/e]}},{key:"setUvRect",value:function(){var e,t;this._texture&&this._texture.image?(e=this._texture.image.width,t=this._texture.image.height):(e=this._rect.width,t=this._rect.height),this._uvRect={u:this._rect.x/e,v:this._rect.y/t,width:this._rect.width/e,height:this._rect.height/t}}},{key:"render",value:function(e){this._updatePositionQuad(e),this._transformByMatrix(),e.sceneRenderer.pushSprite(this,this._positionQuad,this._uvRect,this.tintColor,this.texture,this.renderMode,e)}},{key:"_transformByMatrix",value:function(){if(this.transformMatrix){var e=this.transformMatrix,t=Ct.set(Ct.create(),this._positionQuad.leftTop[0],this._positionQuad.leftTop[1],this._positionQuad.leftTop[2],1),n=Ct.set(Ct.create(),this._positionQuad.leftBottom[0],this._positionQuad.leftBottom[1],this._positionQuad.leftBottom[2],1),r=Ct.set(Ct.create(),this._positionQuad.rightTop[0],this._positionQuad.rightTop[1],this._positionQuad.rightTop[2],1),i=Ct.set(Ct.create(),this._positionQuad.rightBottom[0],this._positionQuad.rightBottom[1],this._positionQuad.rightBottom[2],1);Ct.transformMat4(t,t,e),Ct.transformMat4(n,n,e),Ct.transformMat4(r,r,e),Ct.transformMat4(i,i,e),this._positionQuad.leftTop=xt.clone([t[0],t[1],t[2]]),this._positionQuad.leftBottom=xt.clone([n[0],n[1],n[2]]),this._positionQuad.rightTop=xt.clone([r[0],r[1],r[2]]),this._positionQuad.rightBottom=xt.clone([i[0],i[1],i[2]])}}},{key:"_updatePositionQuad",value:function(e){if("2D"===this.renderMode){var t=e.viewMatrix,n=xt.fromValues(t[0],t[4],t[8]),r=xt.fromValues(t[1],t[5],t[9]),i=xt.clone(this.node.worldPosition),o=this._worldSize,a=this.node.scale;if(xt.scale(n,n,o[0]*a[0]),xt.scale(r,r,o[1]*a[1]),0!==this._rotationAngle){var s=xt.fromValues(t[2],t[6],t[10]),l=tt.create();tt.setAxisAngle(l,s,this._rotationAngle),xt.transformQuat(n,n,l),xt.transformQuat(r,r,l)}var c=xt.create(),u=xt.create();xt.scale(c,n,2*(this.anchor[0]-.5)),xt.scale(u,r,2*(this.anchor[1]-.5)),xt.sub(i,i,c),xt.add(i,i,u);var d=xt.create();xt.sub(d,i,n),xt.add(d,d,r);var f=xt.create();xt.sub(f,i,n),xt.sub(f,f,r);var h=xt.create();xt.add(h,i,n),xt.sub(h,h,r);var p=xt.create();xt.add(p,i,n),xt.add(p,p,r),this._positionQuad.leftTop=d,this._positionQuad.leftBottom=f,this._positionQuad.rightTop=p,this._positionQuad.rightBottom=h}}},{key:"texture",set:function(e){this.setTexture(e),this.setRect(),this.setUvRect(),this.setWorldSize()},get:function(){return this._texture}},{key:"anchor",set:function(e){this._anchor=e||[.5,.5]},get:function(){return this._anchor}},{key:"rect",set:function(e){this.setRect(e),this.setUvRect(),this.setWorldSize()},get:function(){return this._rect}},{key:"rotationAngle",get:function(){return this._rotationAngle},set:function(e){this._rotationAngle=e}}]),n}(fn),An=function(e){_n(n,e);var t=xn(n);function n(){return mn(this,n),t.apply(this,arguments)}return gn(n,[{key:"setRect",value:function(e){var t;try{e&&(t=JSON.parse(e))}catch(e){A.warn("Rect is not valid JSON format")}wn(yn(n.prototype),"setRect",this).call(this,t)}},{key:"setTexture",value:function(e){e&&e.asset&&(e=e.asset),this._texture=e}}]),n}(Tn);function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cn=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({common:"#define PI 3.14159265359\n#define LOG2 1.442695\n\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\n// nosie common\n#include <noise_common>\n",common_vert:"attribute vec3 a_position;\n\n#ifdef O3_HAS_UV\n\nattribute vec2 a_uv;\n\n#endif\n\n#ifdef O3_HAS_NORMAL\n\nattribute vec3 a_normal;\n\n#endif\n\n#ifdef O3_HAS_TANGENT\n\nattribute vec4 a_tangent;\n\n#endif\n\n#ifdef O3_HAS_VERTEXCOLOR\n\nattribute vec4 a_color;\n\n#endif\n\n#if defined( O3_HAS_SKIN ) && ( defined( O3_JOINTS_NUM ) || defined( O3_USE_JOINT_TEXTURE ) )\n    attribute vec4 a_joint;\n    attribute vec4 a_weight;\n\n    #ifdef O3_USE_JOINT_TEXTURE\n        uniform sampler2D u_jointSampler;\n        uniform float u_jointCount;\n\n        mat4 getJointMatrix(sampler2D smp, float index)\n        {\n            float base = index / u_jointCount;\n            float hf = 0.5 / u_jointCount;\n            float v = base + hf;\n\n            vec4 m0 = texture2D(smp, vec2(0.125, v ));\n            vec4 m1 = texture2D(smp, vec2(0.375, v ));\n            vec4 m2 = texture2D(smp, vec2(0.625, v ));\n            vec4 m3 = texture2D(smp, vec2(0.875, v ));\n\n            return mat4(m0, m1, m2, m3);\n\n        }\n\n    #elif defined( O3_JOINTS_NUM )\n        uniform mat4 u_jointMatrix[ O3_JOINTS_NUM ];\n    #endif\n#endif\n\nuniform mat4 u_localMat;\nuniform mat4 u_modelMat;\nuniform mat4 u_viewMat;\nuniform mat4 u_projMat;\nuniform mat4 u_MVMat;\nuniform mat4 u_MVPMat;\nuniform mat3 u_normalMat;\nuniform vec3 u_cameraPos;\nuniform float u_time;\n",common_frag:"uniform O3_VERTEX_PRECISION mat4 u_localMat;\nuniform O3_VERTEX_PRECISION mat4 u_modelMat;\nuniform O3_VERTEX_PRECISION mat4 u_viewMat;\nuniform O3_VERTEX_PRECISION mat4 u_projMat;\nuniform O3_VERTEX_PRECISION mat4 u_MVMat;\nuniform O3_VERTEX_PRECISION mat4 u_MVPMat;\nuniform O3_VERTEX_PRECISION mat3 u_normalMat;\nuniform O3_VERTEX_PRECISION vec3 u_cameraPos;\nuniform O3_VERTEX_PRECISION float u_time;\n",color_share:"#ifdef O3_HAS_VERTEXCOLOR\n\nvarying vec4 v_color;\n\n#endif\n",normal_share:"#ifdef O3_HAS_NORMAL\n\n    #if defined( O3_HAS_TANGENT ) && defined( O3_HAS_NORMALMAP )\n\n    varying mat3 v_TBN;\n\n    #else\n\n    varying vec3 v_normal;\n\n    #endif\n\n#endif\n",uv_share:"varying vec2 v_uv;\n",worldpos_share:"#if defined( O3_NEED_WORLDPOS ) || defined( O3_HAS_ENVMAP ) || defined( O3_HAS_LIGHTMAP ) || defined(O3_CLIPPLANE_NUM)\n\nvarying vec3 v_pos;\n\n#endif\n",shadow_share:"#ifdef O3_GENERATE_SHADOW_MAP\n\nuniform mat4 u_viewMatFromLight;\nuniform mat4 u_projMatFromLight;\n\n#endif\n\n#ifdef O3_SHADOW_MAP_COUNT\n\nuniform mat4 u_viewMatFromLight[O3_SHADOW_MAP_COUNT];\nuniform mat4 u_projMatFromLight[O3_SHADOW_MAP_COUNT];\nvarying vec4 v_PositionFromLight[O3_SHADOW_MAP_COUNT];\n\n#endif\n",fog_share:"#ifdef O3_HAS_FOG\n\nvarying vec3 v_fogDepth;\n\nuniform O3_VERTEX_PRECISION vec3 u_fogColor;\n\n    #ifdef O3_FOG_EXP2\n\n        uniform O3_VERTEX_PRECISION float u_fogDensity;\n\n    #else\n\n        uniform O3_VERTEX_PRECISION float u_fogNear;\n        uniform O3_VERTEX_PRECISION float u_fogFar;\n\n    #endif\n\n#endif\n",begin_normal_vert:"    #ifdef O3_HAS_NORMAL\n\n    vec3 normal = vec3( a_normal );\n\n        #if defined( O3_HAS_TANGENT ) && defined( O3_HAS_NORMALMAP )\n\n        vec4 tangent = vec4( a_tangent );\n\n        #endif\n\n    #endif\n",begin_position_vert:"    vec4 position = vec4( a_position , 1.0 );\n",morph_target_vert:"#ifdef O3_HAS_MORPH\n\n    uniform float u_morphWeights[ O3_MORPH_NUM ];\n\n    #ifdef O3_MORPH_POSITION\n\n    attribute vec3 a_position0;\n\n    #endif\n\n    #ifdef O3_MORPH_NORMAL\n\n    attribute vec3 a_normal0;\n\n    #endif\n\n    #ifdef O3_MORPH_TANGENT\n\n    attribute vec3 a_tangent0;\n\n    #endif\n\n    #if O3_MORPH_NUM > 1\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position1;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal1;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent1;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 2\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position2;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal2;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent2;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 3\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position3;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal3;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent3;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 4\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position4;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal4;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent4;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 5\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position5;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal5;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent5;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 6\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position6;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal6;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent6;\n\n        #endif\n\n    #endif\n\n    #if O3_MORPH_NUM > 7\n\n        #ifdef O3_MORPH_POSITION\n\n        attribute vec3 a_position7;\n\n        #endif\n\n        #ifdef O3_MORPH_NORMAL\n\n        attribute vec3 a_normal7;\n\n        #endif\n\n        #ifdef O3_MORPH_TANGENT\n\n        attribute vec3 a_tangent7;\n\n        #endif\n\n    #endif\n\n#endif\n",position_vert:"    #ifndef O3_GENERATE_SHADOW_MAP\n\n    gl_Position = u_MVPMat * position;\n\n    #endif\n",color_vert:"    #ifdef O3_HAS_VERTEXCOLOR\n\n    v_color = a_color;\n\n    #endif\n",normal_vert:"    #ifdef O3_HAS_NORMAL\n\n        #if defined( O3_HAS_TANGENT ) && defined( O3_HAS_NORMALMAP )\n\n        vec3 normalW = normalize( u_normalMat * normal.xyz );\n        vec3 tangentW = normalize( u_normalMat * tangent.xyz );\n        vec3 bitangentW = cross( normalW, tangentW ) * tangent.w;\n        v_TBN = mat3( tangentW, bitangentW, normalW );\n\n        #else\n\n        v_normal = normalize( u_normalMat * normal );\n\n        #endif\n\n    #endif\n",skinning_vert:"#if defined( O3_HAS_SKIN ) && ( defined( O3_JOINTS_NUM ) || defined( O3_USE_JOINT_TEXTURE ) )\n\n        #ifdef O3_USE_JOINT_TEXTURE\n            mat4 skinMatrix =\n                a_weight.x * getJointMatrix(u_jointSampler, a_joint.x ) +\n                a_weight.y * getJointMatrix(u_jointSampler, a_joint.y ) +\n                a_weight.z * getJointMatrix(u_jointSampler, a_joint.z ) +\n                a_weight.w * getJointMatrix(u_jointSampler, a_joint.w );\n\n        #elif defined( O3_JOINTS_NUM )\n            mat4 skinMatrix =\n                a_weight.x * u_jointMatrix[ int( a_joint.x ) ] +\n                a_weight.y * u_jointMatrix[ int( a_joint.y ) ] +\n                a_weight.z * u_jointMatrix[ int( a_joint.z ) ] +\n                a_weight.w * u_jointMatrix[ int( a_joint.w ) ];\n        #endif\n\n        position = skinMatrix * position;\n\n        #ifdef O3_HAS_NORMAL\n            normal = vec4( skinMatrix * vec4( normal, 0.0 ) ).xyz;\n            #if defined( O3_HAS_TANGENT ) && defined( O3_HAS_NORMALMAP )\n                tangent.xyz = vec4( skinMatrix * vec4( tangent.xyz, 0.0 ) ).xyz;\n            #endif\n\n        #endif\n\n#endif\n",uv_vert:"    #ifdef O3_HAS_UV\n\n    v_uv = a_uv;\n\n    #else\n\n    // may need this calculate normal\n    v_uv = vec2( 0., 0. );\n\n    #endif\n",worldpos_vert:"    #if defined( O3_NEED_WORLDPOS ) || defined( O3_HAS_ENVMAP ) || defined( O3_HAS_LIGHTMAP ) || defined(O3_CLIPPLANE_NUM)\n\n    vec4 temp_pos = u_modelMat * position;\n    v_pos = temp_pos.xyz / temp_pos.w;\n\n    #endif\n",shadow_vert:"    #ifdef O3_GENERATE_SHADOW_MAP\n\n    gl_Position = u_projMatFromLight * u_viewMatFromLight * u_modelMat * position;\n\n    #endif\n\n    #ifdef O3_SHADOW_MAP_COUNT\n\n    for (int i = 0; i < O3_SHADOW_MAP_COUNT; i++) {\n\n        v_PositionFromLight[i] = u_projMatFromLight[i] * u_viewMatFromLight[i] * u_modelMat * vec4( a_position, 1.0 );\n\n    }\n\n    #endif\n",morph_vert:"    #ifdef O3_HAS_MORPH\n\n        #if defined( O3_MORPH_POSITION )\n\n        position.xyz += u_morphWeights[ 0 ] * a_position0;\n\n            #if O3_MORPH_NUM > 1\n\n            position.xyz += u_morphWeights[ 1 ] * a_position1;\n\n            #endif\n\n            #if O3_MORPH_NUM > 2\n\n            position.xyz += u_morphWeights[ 2 ] * a_position2;\n\n            #endif\n\n            #if O3_MORPH_NUM > 3\n\n            position.xyz += u_morphWeights[ 3 ] * a_position3;\n\n            #endif\n\n            #if O3_MORPH_NUM > 4\n\n            position.xyz += u_morphWeights[ 4 ] * a_position4;\n\n            #endif\n\n            #if O3_MORPH_NUM > 5\n\n            position.xyz += u_morphWeights[ 5 ] * a_position5;\n\n            #endif\n\n            #if O3_MORPH_NUM > 6\n\n            position.xyz += u_morphWeights[ 6 ] * a_position6;\n\n            #endif\n\n            #if O3_MORPH_NUM > 7\n\n            position.xyz += u_morphWeights[ 7 ] * a_position7;\n\n            #endif\n\n        #endif\n\n        #if defined( O3_HAS_NORMAL ) && defined( O3_MORPH_NORMAL )\n\n        normal.xyz += u_morphWeights[ 0 ] * a_normal0;\n\n            #if O3_MORPH_NUM > 1\n\n            normal.xyz += u_morphWeights[ 1 ] * a_normal1;\n\n            #endif\n\n            #if O3_MORPH_NUM > 2\n\n            normal.xyz += u_morphWeights[ 2 ] * a_normal2;\n\n            #endif\n\n            #if O3_MORPH_NUM > 3\n\n            normal.xyz += u_morphWeights[ 3 ] * a_normal3;\n\n            #endif\n\n            #if O3_MORPH_NUM > 4\n\n            normal.xyz += u_morphWeights[ 4 ] * a_normal4;\n\n            #endif\n\n            #if O3_MORPH_NUM > 5\n\n            normal.xyz += u_morphWeights[ 5 ] * a_normal5;\n\n            #endif\n\n            #if O3_MORPH_NUM > 6\n\n            normal.xyz += u_morphWeights[ 6 ] * a_normal6;\n\n            #endif\n\n            #if O3_MORPH_NUM > 7\n\n            normal.xyz += u_morphWeights[ 7 ] * a_normal7;\n\n            #endif\n\n        #endif\n\n        #if defined( O3_HAS_TANGENT ) && defined( O3_MORPH_TANGENT ) && defined( O3_HAS_NORMALMAP )\n\n        tangent.xyz += u_morphWeights[ 0 ] * a_tangent0;\n\n            #if O3_MORPH_NUM > 1\n\n            tangent.xyz += u_morphWeights[ 1 ] * a_tangent1;\n\n            #endif\n\n            #if O3_MORPH_NUM > 2\n\n            tangent.xyz += u_morphWeights[ 2 ] * a_tangent2;\n\n            #endif\n\n            #if O3_MORPH_NUM > 3\n\n            tangent.xyz += u_morphWeights[ 3 ] * a_tangent3;\n\n            #endif\n\n            #if O3_MORPH_NUM > 4\n\n            tangent.xyz += u_morphWeights[ 4 ] * a_tangent4;\n\n            #endif\n\n            #if O3_MORPH_NUM > 5\n\n            tangent.xyz += u_morphWeights[ 5 ] * a_tangent5;\n\n            #endif\n\n            #if O3_MORPH_NUM > 6\n\n            tangent.xyz += u_morphWeights[ 6 ] * a_tangent6;\n\n            #endif\n\n            #if O3_MORPH_NUM > 7\n\n            tangent.xyz += u_morphWeights[ 7 ] * a_tangent7;\n\n            #endif\n\n        #endif\n\n    #endif\n",fog_vert:"    #ifdef O3_HAS_FOG\n\n    v_fogDepth = ( u_MVMat * position ).xyz;\n\n    #endif\n",ambient_light_frag:"#ifdef O3_HAS_AMBIENT_LIGHT\n\nstruct AmbientLight {\n    vec3 color;\n    vec3 lightColor;\n    float intensity;\n};\nuniform AmbientLight u_ambientLight;\n\n#endif\n",direct_light_frag:"#ifdef O3_DIRECT_LIGHT_COUNT\n\nstruct DirectLight {\n    vec3 color;\n    vec3 lightColor;\n    float intensity;\n    vec3 direction;\n};\nuniform DirectLight u_directLights[ O3_DIRECT_LIGHT_COUNT ];\n\n#endif\n",point_light_frag:"#ifdef O3_POINT_LIGHT_COUNT\n\nstruct PointLight {\n    vec3 color;\n    vec3 lightColor;\n    vec3 position;\n    float intensity;\n    float distance;\n    float decay;\n};\nuniform PointLight u_pointLights[ O3_POINT_LIGHT_COUNT ];\n\n#endif\n",spot_light_frag:"#ifdef O3_SPOT_LIGHT_COUNT\n\nstruct SpotLight {\n    vec3 color;\n    vec3 lightColor;\n    vec3 position;\n    vec3 direction;\n    float intensity;\n    float distance;\n    float decay;\n    float angle;\n    float penumbra;\n    float coneCos;\n    float penumbraCos;\n};\nuniform SpotLight u_spotLights[ O3_SPOT_LIGHT_COUNT ];\n\n#endif\n",mobile_material_frag:"uniform float u_shininess;\n\n#ifdef O3_EMISSION_TEXTURE\n\nuniform sampler2D u_emission;\n\n#else\n\nuniform vec4 u_emission;\n\n#endif\n\n#ifdef O3_AMBIENT_TEXTURE\n\nuniform sampler2D u_ambient;\n\n#else\n\nuniform vec4 u_ambient;\n\n#endif\n\n#ifdef O3_DIFFUSE_TEXTURE\n\nuniform sampler2D u_diffuse;\n\n#else\n\nuniform vec4 u_diffuse;\n\n#endif\n\n#ifdef O3_SPECULAR_TEXTURE\n\nuniform sampler2D u_specular;\n\n#else\n\nuniform vec4 u_specular;\n\n#endif\n",fog_frag:"    #ifdef O3_HAS_FOG\n\n    float fogDepth = length( v_fogDepth );\n\n        #ifdef O3_FOG_EXP2\n\n            float fogFactor = whiteCompliment( exp2( - u_fogDensity * u_fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n        #else\n\n            float fogFactor = smoothstep( u_fogNear, u_fogFar, fogDepth );\n\n        #endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, u_fogColor, fogFactor );\n\n    #endif\n",begin_mobile_frag:"    #ifdef O3_EMISSION_TEXTURE\n\n    vec4 emission = texture2D(u_emission, v_uv_emissionTexture);\n\n    #else\n\n    vec4 emission = u_emission;\n\n    #endif\n\n    vec4 ambient = vec4(0);\n    #ifdef O3_HAS_AMBIENT_LIGHT\n        #ifdef O3_AMBIENT_TEXTURE\n            ambient = texture2D(u_ambient, v_uv_ambientTexture) * vec4(u_ambientLight.lightColor, 1.0);\n         #else\n            ambient = u_ambient * vec4(u_ambientLight.lightColor, 1.0);\n         #endif\n    #endif\n\n    #ifdef O3_DIFFUSE_TEXTURE\n\n    vec4 diffuse = texture2D(u_diffuse, v_uv_diffuseTexture);\n\n    #else\n\n    vec4 diffuse = u_diffuse;\n\n    #endif\n\n    #ifdef O3_SPECULAR_TEXTURE\n\n    vec4 specular = texture2D(u_specular, v_uv_specularTexture);\n\n    #else\n\n    vec4 specular = u_specular;\n\n    #endif\n",begin_normal_frag:"    #ifdef O3_HAS_NORMAL\n\n        #if defined( O3_HAS_TANGENT ) && defined( O3_HAS_NORMALMAP )\n\n        vec3 N = normalize( v_TBN[ 2 ] );\n\n        #else\n\n        vec3 N = normalize( v_normal );\n\n        #endif\n\n    #endif\n",begin_viewdir_frag:"    #if defined( O3_NEED_WORLDPOS ) || defined( O3_HAS_ENVMAP ) || defined( O3_HAS_LIGHTMAP )\n\n    vec3 V =  normalize( u_cameraPos - v_pos );\n\n    #endif\n",mobile_blinnphong_frag:"    #ifdef O3_HAS_NORMAL\n         N *= float( gl_FrontFacing ) * 2.0 - 1.0;\n    #else\n         vec3 N = vec3(0, 0, 1);\n    #endif\n\n\n    vec3 lightDiffuse = vec3( 0.0, 0.0, 0.0 );\n    vec3 lightSpecular = vec3( 0.0, 0.0, 0.0 );\n\n    #ifdef O3_DIRECT_LIGHT_COUNT\n\n    for( int i = 0; i < O3_DIRECT_LIGHT_COUNT; i++ ) {\n        DirectLight lgt = u_directLights[ i ];\n\n        float d = max(dot(N, -lgt.direction), 0.0)*lgt.intensity;\n        lightDiffuse += lgt.color*d;\n\n        vec3 halfDir = normalize( V - lgt.direction );\n        float s = pow( clamp( dot( N, halfDir ), 0.0, 1.0 ), u_shininess ) * lgt.intensity;\n        lightSpecular += lgt.color * s;\n    }\n\n    #endif\n\n    #ifdef O3_POINT_LIGHT_COUNT\n\n    for( int i = 0; i < O3_POINT_LIGHT_COUNT; i++ ) {\n        PointLight lgt = u_pointLights[ i ];\n        vec3 direction = v_pos - lgt.position;\n        float dist = length( direction );\n        direction /= dist;\n        float decay = pow( max( 0.0, 1.0-dist/lgt.distance ), 2.0 );\n\n        float d =  max( dot( N, -direction ), 0.0 )*lgt.intensity*decay;\n        lightDiffuse += lgt.color*d;\n\n        vec3 halfDir = normalize( V - direction );\n        float s = pow( clamp( dot( N, halfDir ), 0.0, 1.0 ), u_shininess ) * lgt.intensity * decay;\n        lightSpecular += lgt.color * s;\n\n    }\n\n    #endif\n\n    #ifdef O3_SPOT_LIGHT_COUNT\n\n    for( int i = 0; i < O3_SPOT_LIGHT_COUNT; i++) {\n        SpotLight lgt = u_spotLights[ i ];\n        vec3 direction = v_pos - lgt.position;\n        float angle = acos( dot( normalize( direction ), normalize( lgt.direction ) ) );\n        float dist = length( direction );\n        direction /= dist;\n        float decay = pow( max( 0.0, 1.0 - dist / lgt.distance ), 2.0 );\n\n        float hasLight = step( angle, lgt.angle );\n        float hasPenumbra = step( lgt.angle, angle ) * step( angle, lgt.angle * ( 1.0 + lgt.penumbra ) );\n        float penumbra = hasPenumbra * ( 1.0 - ( angle - lgt.angle ) / ( lgt.angle * lgt.penumbra ) );\n        float d = max( dot( N, -direction ), 0.0 ) * lgt.intensity * decay * ( penumbra + hasLight );\n        lightDiffuse += lgt.color * d;\n\n        vec3 halfDir = normalize( V - direction );\n        float s = pow( clamp( dot( N, halfDir ), 0.0, 1.0 ), u_shininess ) * lgt.intensity * decay * ( penumbra + hasLight );\n        lightSpecular += lgt.color * s;\n\n    }\n\n    #endif\n\n    diffuse *= vec4( lightDiffuse, 1.0 );\n    specular *= vec4( lightSpecular, 1.0 );\n",mobile_lambert_frag:"    vec3 totalLight = vec3(0.0, 0.0, 0.0);\n    #ifdef O3_DIRECT_LIGHT_COUNT\n    for( int i = 0; i < O3_DIRECT_LIGHT_COUNT; i++ ){\n        vec3 lightColor = u_directLights[ i ].color * u_directLights[ i ].intensity;\n        lightColor *= max( dot( N, -u_directLights[ i ].direction ), 0.0 );\n\n        totalLight += lightColor;\n    }\n    #endif\n    diffuse *= vec4( totalLight, 1.0 );\n",noise_common:"// Modulo 289 without a division (only multiplications)\nvec4 mod289( vec4 x ) {\n\n    return x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\nvec3 mod289( vec3 x ) {\n\n    return x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\nvec2 mod289( vec2 x ) {\n\n    return x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\nfloat mod289( float x ) {\n\n    return x - floor( x * ( 1.0 / 289.0 ) ) * 289.0;\n\n}\n\n// Modulo 7 without a division\nvec4 mod7( vec4 x ) {\n\n    return x - floor( x * ( 1.0 / 7.0 ) ) * 7.0;\n\n}\n\nvec3 mod7( vec3 x ) {\n\n    return x - floor( x * ( 1.0 / 7.0 ) ) * 7.0;\n\n}\n\n// Permutation polynomial: (34x^2 + x) mod 289\nvec4 permute( vec4 x ) {\n\n    return mod289( ( 34.0 * x + 1.0 ) * x);\n\n}\n\nvec3 permute( vec3 x ) {\n\n    return mod289( ( 34.0 * x + 1.0 ) * x );\n\n}\n\nfloat permute( float x ) {\n\n  return mod289( ( ( x * 34.0 ) + 1.0 ) * x );\n\n}\n\nvec4 taylorInvSqrt( vec4 r ) {\n\n    return 1.79284291400159 - 0.85373472095314 * r;\n\n}\n\nfloat taylorInvSqrt( float r ) {\n\n    return 1.79284291400159 - 0.85373472095314 * r;\n\n}\n\nvec4 fade( vec4 t ) {\n\n    return t * t * t * ( t * ( t * 6.0 - 15.0 ) + 10.0 );\n\n}\n\nvec3 fade( vec3 t ) {\n\n    return t * t * t * ( t * ( t * 6.0 - 15.0 ) + 10.0 );\n\n}\n\nvec2 fade( vec2 t ) {\n\n    return t * t * t * ( t * ( t * 6.0 - 15.0 ) + 10.0 );\n\n}\n\n#define K 0.142857142857 // 1/7\n#define Ko 0.428571428571 // 1/2-K/2\n#define K2 0.020408163265306 // 1/(7*7)\n#define Kd2 0.0714285714285 // K/2\n#define Kz 0.166666666667 // 1/6\n#define Kzo 0.416666666667 // 1/2-1/6*2\n#define jitter 1.0 // smaller jitter gives more regular pattern\n#define jitter1 0.8 // smaller jitter gives less errors in F1 F2\n",noise_cellular_2D:'\n// Cellular noise ("Worley noise") in 2D in GLSL.\n// Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\n// This code is released under the conditions of the MIT license.\n// See LICENSE file for details.\n// https://github.com/stegu/webgl-noise\n\n// Cellular noise, returning F1 and F2 in a vec2.\n// Standard 3x3 search window for good F1 and F2 values\nvec2 cellular( vec2 P ) {\n\n\tvec2 Pi = mod289( floor( P ) );\n \tvec2 Pf = fract( P );\n\tvec3 oi = vec3( -1.0, 0.0, 1.0);\n\tvec3 of = vec3( -0.5, 0.5, 1.5);\n\tvec3 px = permute( Pi.x + oi );\n\tvec3 p = permute( px.x + Pi.y + oi ); // p11, p12, p13\n\tvec3 ox = fract( p * K ) - Ko;\n\tvec3 oy = mod7( floor( p * K ) ) * K - Ko;\n\tvec3 dx = Pf.x + 0.5 + jitter * ox;\n\tvec3 dy = Pf.y - of + jitter * oy;\n\tvec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared\n\tp = permute( px.y + Pi.y + oi ); // p21, p22, p23\n\tox = fract( p * K ) - Ko;\n\toy = mod7( floor( p * K ) ) * K - Ko;\n\tdx = Pf.x - 0.5 + jitter * ox;\n\tdy = Pf.y - of + jitter * oy;\n\tvec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared\n\tp = permute( px.z + Pi.y + oi ); // p31, p32, p33\n\tox = fract( p * K ) - Ko;\n\toy = mod7( floor( p * K ) ) * K - Ko;\n\tdx = Pf.x - 1.5 + jitter * ox;\n\tdy = Pf.y - of + jitter * oy;\n\tvec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared\n\t// Sort out the two smallest distances (F1, F2)\n\tvec3 d1a = min( d1, d2 );\n\td2 = max( d1, d2 ); // Swap to keep candidates for F2\n\td2 = min( d2, d3 ); // neither F1 nor F2 are now in d3\n\td1 = min( d1a, d2 ); // F1 is now in d1\n\td2 = max( d1a, d2 ); // Swap to keep candidates for F2\n\td1.xy = ( d1.x < d1.y ) ? d1.xy : d1.yx; // Swap if smaller\n\td1.xz = ( d1.x < d1.z ) ? d1.xz : d1.zx; // F1 is in d1.x\n\td1.yz = min( d1.yz, d2.yz ); // F2 is now not in d2.yz\n\td1.y = min( d1.y, d1.z ); // nor in  d1.z\n\td1.y = min( d1.y, d2.x ); // F2 is in d1.y, we\'re done.\n\treturn sqrt( d1.xy );\n\n}\n',noise_cellular_2x2:'\n// Cellular noise ("Worley noise") in 2D in GLSL.\n// Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\n// This code is released under the conditions of the MIT license.\n// See LICENSE file for details.\n// https://github.com/stegu/webgl-noise\n\n// Cellular noise, returning F1 and F2 in a vec2.\n// Speeded up by using 2x2 search window instead of 3x3,\n// at the expense of some strong pattern artifacts.\n// F2 is often wrong and has sharp discontinuities.\n// If you need a smooth F2, use the slower 3x3 version.\n// F1 is sometimes wrong, too, but OK for most purposes.\nvec2 cellular2x2( vec2 P ) {\n\n\tvec2 Pi = mod289( floor( P ) );\n \tvec2 Pf = fract( P );\n\tvec4 Pfx = Pf.x + vec4( -0.5, -1.5, -0.5, -1.5 );\n\tvec4 Pfy = Pf.y + vec4( -0.5, -0.5, -1.5, -1.5 );\n\tvec4 p = permute( Pi.x + vec4( 0.0, 1.0, 0.0, 1.0 ) );\n\tp = permute( p + Pi.y + vec4( 0.0, 0.0, 1.0, 1.0 ) );\n\tvec4 ox = mod7( p ) * K + Kd2;\n\tvec4 oy = mod7( floor( p * K ) ) * K + Kd2;\n\tvec4 dx = Pfx + jitter1 * ox;\n\tvec4 dy = Pfy + jitter1 * oy;\n\tvec4 d = dx * dx + dy * dy; // d11, d12, d21 and d22, squared\n\n\t// Do it right and find both F1 and F2\n\td.xy = ( d.x < d.y ) ? d.xy : d.yx; // Swap if smaller\n\td.xz = ( d.x < d.z ) ? d.xz : d.zx;\n\td.xw = ( d.x < d.w ) ? d.xw : d.wx;\n\td.y = min( d.y, d.z );\n\td.y = min( d.y, d.w );\n\treturn sqrt( d.xy );\n\n}\n',noise_cellular_2x2x2:'\n// Cellular noise ("Worley noise") in 3D in GLSL.\n// Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\n// This code is released under the conditions of the MIT license.\n// See LICENSE file for details.\n// https://github.com/stegu/webgl-noise\n\n// Cellular noise, returning F1 and F2 in a vec2.\n// Speeded up by using 2x2x2 search window instead of 3x3x3,\n// at the expense of some pattern artifacts.\n// F2 is often wrong and has sharp discontinuities.\n// If you need a good F2, use the slower 3x3x3 version.\nvec2 cellular2x2x2(vec3 P) {\n\n\tvec3 Pi = mod289( floor( P ) );\n \tvec3 Pf = fract( P );\n\tvec4 Pfx = Pf.x + vec4( 0.0, -1.0, 0.0, -1.0 );\n\tvec4 Pfy = Pf.y + vec4( 0.0, 0.0, -1.0, -1.0 );\n\tvec4 p = permute( Pi.x + vec4( 0.0, 1.0, 0.0, 1.0 ) );\n\tp = permute( p + Pi.y + vec4( 0.0, 0.0, 1.0, 1.0 ) );\n\tvec4 p1 = permute( p + Pi.z ); // z+0\n\tvec4 p2 = permute( p + Pi.z + vec4( 1.0 ) ); // z+1\n\tvec4 ox1 = fract( p1 * K ) - Ko;\n\tvec4 oy1 = mod7( floor( p1 * K ) ) * K - Ko;\n\tvec4 oz1 = floor( p1 * K2 ) * Kz - Kzo; // p1 < 289 guaranteed\n\tvec4 ox2 = fract( p2 * K ) - Ko;\n\tvec4 oy2 = mod7( floor( p2 * K ) ) * K - Ko;\n\tvec4 oz2 = floor( p2 * K2 ) * Kz - Kzo;\n\tvec4 dx1 = Pfx + jitter1 * ox1;\n\tvec4 dy1 = Pfy + jitter1 * oy1;\n\tvec4 dz1 = Pf.z + jitter1 * oz1;\n\tvec4 dx2 = Pfx + jitter1 * ox2;\n\tvec4 dy2 = Pfy + jitter1 * oy2;\n\tvec4 dz2 = Pf.z - 1.0 + jitter1 * oz2;\n\tvec4 d1 = dx1 * dx1 + dy1 * dy1 + dz1 * dz1; // z+0\n\tvec4 d2 = dx2 * dx2 + dy2 * dy2 + dz2 * dz2; // z+1\n\n\t// Do it right and sort out both F1 and F2\n\tvec4 d = min( d1, d2 ); // F1 is now in d\n\td2 = max( d1, d2 ); // Make sure we keep all candidates for F2\n\td.xy = ( d.x < d.y ) ? d.xy : d.yx; // Swap smallest to d.x\n\td.xz = ( d.x < d.z ) ? d.xz : d.zx;\n\td.xw = ( d.x < d.w ) ? d.xw : d.wx; // F1 is now in d.x\n\td.yzw = min( d.yzw, d2.yzw ); // F2 now not in d2.yzw\n\td.y = min( d.y, d.z ); // nor in d.z\n\td.y = min( d.y, d.w ); // nor in d.w\n\td.y = min( d.y, d2.x ); // F2 is now in d.y\n\treturn sqrt( d.xy ); // F1 and F2\n\n}\n',noise_cellular_3D:'\n// Cellular noise ("Worley noise") in 3D in GLSL.\n// Copyright (c) Stefan Gustavson 2011-04-19. All rights reserved.\n// This code is released under the conditions of the MIT license.\n// See LICENSE file for details.\n// https://github.com/stegu/webgl-noise\n\n// Cellular noise, returning F1 and F2 in a vec2.\n// 3x3x3 search region for good F2 everywhere, but a lot\n// slower than the 2x2x2 version.\n// The code below is a bit scary even to its author,\n// but it has at least half decent performance on a\n// modern GPU. In any case, it beats any software\n// implementation of Worley noise hands down.\n\nvec2 cellular( vec3 P ) {\n\n\tvec3 Pi = mod289( floor( P ) );\n \tvec3 Pf = fract( P ) - 0.5;\n\n\tvec3 Pfx = Pf.x + vec3( 1.0, 0.0, -1.0 );\n\tvec3 Pfy = Pf.y + vec3( 1.0, 0.0, -1.0 );\n\tvec3 Pfz = Pf.z + vec3( 1.0, 0.0, -1.0 );\n\n\tvec3 p = permute( Pi.x + vec3( -1.0, 0.0, 1.0 ) );\n\tvec3 p1 = permute( p + Pi.y - 1.0 );\n\tvec3 p2 = permute( p + Pi.y );\n\tvec3 p3 = permute( p + Pi.y + 1.0 );\n\n\tvec3 p11 = permute( p1 + Pi.z - 1.0 );\n\tvec3 p12 = permute( p1 + Pi.z );\n\tvec3 p13 = permute( p1 + Pi.z + 1.0 );\n\n\tvec3 p21 = permute( p2 + Pi.z - 1.0 );\n\tvec3 p22 = permute( p2 + Pi.z );\n\tvec3 p23 = permute( p2 + Pi.z + 1.0 );\n\n\tvec3 p31 = permute( p3 + Pi.z - 1.0 );\n\tvec3 p32 = permute( p3 + Pi.z );\n\tvec3 p33 = permute( p3 + Pi.z + 1.0 );\n\n\tvec3 ox11 = fract( p11 * K ) - Ko;\n\tvec3 oy11 = mod7( floor( p11 * K ) ) * K - Ko;\n\tvec3 oz11 = floor( p11 * K2 ) * Kz - Kzo; // p11 < 289 guaranteed\n\n\tvec3 ox12 = fract( p12 * K ) - Ko;\n\tvec3 oy12 = mod7( floor( p12 * K ) ) * K - Ko;\n\tvec3 oz12 = floor( p12 * K2 ) * Kz - Kzo;\n\n\tvec3 ox13 = fract( p13 * K ) - Ko;\n\tvec3 oy13 = mod7( floor( p13 * K ) ) * K - Ko;\n\tvec3 oz13 = floor( p13 * K2 ) * Kz - Kzo;\n\n\tvec3 ox21 = fract( p21 * K ) - Ko;\n\tvec3 oy21 = mod7( floor( p21 * K ) ) * K - Ko;\n\tvec3 oz21 = floor( p21 * K2 ) * Kz - Kzo;\n\n\tvec3 ox22 = fract( p22 * K ) - Ko;\n\tvec3 oy22 = mod7( floor( p22 * K ) ) * K - Ko;\n\tvec3 oz22 = floor( p22 * K2 ) * Kz - Kzo;\n\n\tvec3 ox23 = fract( p23 * K ) - Ko;\n\tvec3 oy23 = mod7( floor( p23 * K ) ) * K - Ko;\n\tvec3 oz23 = floor( p23 * K2 ) * Kz - Kzo;\n\n\tvec3 ox31 = fract( p31 * K ) - Ko;\n\tvec3 oy31 = mod7( floor( p31 * K ) ) * K - Ko;\n\tvec3 oz31 = floor( p31 * K2 ) * Kz - Kzo;\n\n\tvec3 ox32 = fract( p32 * K ) - Ko;\n\tvec3 oy32 = mod7( floor( p32 * K ) ) * K - Ko;\n\tvec3 oz32 = floor( p32 * K2 ) * Kz - Kzo;\n\n\tvec3 ox33 = fract( p33 * K ) - Ko;\n\tvec3 oy33 = mod7( floor( p33 * K ) ) * K - Ko;\n\tvec3 oz33 = floor( p33 * K2 ) * Kz - Kzo;\n\n\tvec3 dx11 = Pfx + jitter * ox11;\n\tvec3 dy11 = Pfy.x + jitter * oy11;\n\tvec3 dz11 = Pfz.x + jitter * oz11;\n\n\tvec3 dx12 = Pfx + jitter * ox12;\n\tvec3 dy12 = Pfy.x + jitter * oy12;\n\tvec3 dz12 = Pfz.y + jitter * oz12;\n\n\tvec3 dx13 = Pfx + jitter * ox13;\n\tvec3 dy13 = Pfy.x + jitter * oy13;\n\tvec3 dz13 = Pfz.z + jitter * oz13;\n\n\tvec3 dx21 = Pfx + jitter * ox21;\n\tvec3 dy21 = Pfy.y + jitter * oy21;\n\tvec3 dz21 = Pfz.x + jitter * oz21;\n\n\tvec3 dx22 = Pfx + jitter * ox22;\n\tvec3 dy22 = Pfy.y + jitter * oy22;\n\tvec3 dz22 = Pfz.y + jitter * oz22;\n\n\tvec3 dx23 = Pfx + jitter * ox23;\n\tvec3 dy23 = Pfy.y + jitter * oy23;\n\tvec3 dz23 = Pfz.z + jitter * oz23;\n\n\tvec3 dx31 = Pfx + jitter * ox31;\n\tvec3 dy31 = Pfy.z + jitter * oy31;\n\tvec3 dz31 = Pfz.x + jitter * oz31;\n\n\tvec3 dx32 = Pfx + jitter * ox32;\n\tvec3 dy32 = Pfy.z + jitter * oy32;\n\tvec3 dz32 = Pfz.y + jitter * oz32;\n\n\tvec3 dx33 = Pfx + jitter * ox33;\n\tvec3 dy33 = Pfy.z + jitter * oy33;\n\tvec3 dz33 = Pfz.z + jitter * oz33;\n\n\tvec3 d11 = dx11 * dx11 + dy11 * dy11 + dz11 * dz11;\n\tvec3 d12 = dx12 * dx12 + dy12 * dy12 + dz12 * dz12;\n\tvec3 d13 = dx13 * dx13 + dy13 * dy13 + dz13 * dz13;\n\tvec3 d21 = dx21 * dx21 + dy21 * dy21 + dz21 * dz21;\n\tvec3 d22 = dx22 * dx22 + dy22 * dy22 + dz22 * dz22;\n\tvec3 d23 = dx23 * dx23 + dy23 * dy23 + dz23 * dz23;\n\tvec3 d31 = dx31 * dx31 + dy31 * dy31 + dz31 * dz31;\n\tvec3 d32 = dx32 * dx32 + dy32 * dy32 + dz32 * dz32;\n\tvec3 d33 = dx33 * dx33 + dy33 * dy33 + dz33 * dz33;\n\n\t// Do it right and sort out both F1 and F2\n\tvec3 d1a = min( d11, d12 );\n\td12 = max( d11, d12 );\n\td11 = min( d1a, d13 ); // Smallest now not in d12 or d13\n\td13 = max( d1a, d13 );\n\td12 = min( d12, d13 ); // 2nd smallest now not in d13\n\tvec3 d2a = min( d21, d22 );\n\td22 = max( d21, d22 );\n\td21 = min( d2a, d23 ); // Smallest now not in d22 or d23\n\td23 = max( d2a, d23 );\n\td22 = min( d22, d23 ); // 2nd smallest now not in d23\n\tvec3 d3a = min( d31, d32 );\n\td32 = max( d31, d32 );\n\td31 = min( d3a, d33 ); // Smallest now not in d32 or d33\n\td33 = max( d3a, d33 );\n\td32 = min( d32, d33 ); // 2nd smallest now not in d33\n\tvec3 da = min( d11, d21 );\n\td21 = max( d11, d21 );\n\td11 = min( da, d31 ); // Smallest now in d11\n\td31 = max( da, d31 ); // 2nd smallest now not in d31\n\td11.xy = ( d11.x < d11.y ) ? d11.xy : d11.yx;\n\td11.xz = ( d11.x < d11.z ) ? d11.xz : d11.zx; // d11.x now smallest\n\td12 = min( d12, d21 ); // 2nd smallest now not in d21\n\td12 = min( d12, d22 ); // nor in d22\n\td12 = min( d12, d31 ); // nor in d31\n\td12 = min( d12, d32 ); // nor in d32\n\td11.yz = min( d11.yz, d12.xy ); // nor in d12.yz\n\td11.y = min( d11.y, d12.z ); // Only two more to go\n\td11.y = min( d11.y, d11.z ); // Done! (Phew! )\n\treturn sqrt( d11.xy ); // F1, F2\n\n}\n',noise_cellular:"#include <noise_cellular_2D>\n#include <noise_cellular_3D>\n#include <noise_cellular_2x2>\n#include <noise_cellular_2x2x2>\n",noise_perlin_2D:'//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n// Classic Perlin noise\nfloat perlin( vec2 P ) {\n\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod289(Pi); // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n\n    vec4 i = permute(permute(ix) + iy);\n\n    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n    vec4 gy = abs(gx) - 0.5 ;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n\n    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n\n}\n\n// Classic Perlin noise, periodic variant\nfloat perlin( vec2 P, vec2 rep ) {\n\n    vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n    Pi = mod(Pi, rep.xyxy); // To create noise with explicit period\n    Pi = mod289(Pi);        // To avoid truncation effects in permutation\n    vec4 ix = Pi.xzxz;\n    vec4 iy = Pi.yyww;\n    vec4 fx = Pf.xzxz;\n    vec4 fy = Pf.yyww;\n\n    vec4 i = permute(permute(ix) + iy);\n\n    vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n    vec4 gy = abs(gx) - 0.5 ;\n    vec4 tx = floor(gx + 0.5);\n    gx = gx - tx;\n\n    vec2 g00 = vec2(gx.x,gy.x);\n    vec2 g10 = vec2(gx.y,gy.y);\n    vec2 g01 = vec2(gx.z,gy.z);\n    vec2 g11 = vec2(gx.w,gy.w);\n\n    vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n    g00 *= norm.x;\n    g01 *= norm.y;\n    g10 *= norm.z;\n    g11 *= norm.w;\n\n    float n00 = dot(g00, vec2(fx.x, fy.x));\n    float n10 = dot(g10, vec2(fx.y, fy.y));\n    float n01 = dot(g01, vec2(fx.z, fy.z));\n    float n11 = dot(g11, vec2(fx.w, fy.w));\n\n    vec2 fade_xy = fade(Pf.xy);\n    vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n    float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n    return 2.3 * n_xy;\n\n}\n',noise_perlin_3D:'//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n// Classic Perlin noise\nfloat perlin( vec3 P ) {\n\n    vec3 Pi0 = floor(P); // Integer part for indexing\n    vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n\n}\n\n// Classic Perlin noise, periodic variant\nfloat perlin( vec3 P, vec3 rep ) {\n\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n\n}\n',noise_perlin_4D:'//\n// GLSL textureless classic 4D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n// Classic Perlin noise\nfloat perlin( vec4 P ) {\n\n    vec4 Pi0 = floor(P); // Integer part for indexing\n    vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec4 Pf0 = fract(P); // Fractional part for interpolation\n    vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = vec4(Pi0.zzzz);\n    vec4 iz1 = vec4(Pi1.zzzz);\n    vec4 iw0 = vec4(Pi0.wwww);\n    vec4 iw1 = vec4(Pi1.wwww);\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 ixy00 = permute(ixy0 + iw0);\n    vec4 ixy01 = permute(ixy0 + iw1);\n    vec4 ixy10 = permute(ixy1 + iw0);\n    vec4 ixy11 = permute(ixy1 + iw1);\n\n    vec4 gx00 = ixy00 * (1.0 / 7.0);\n    vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n    vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n    gx00 = fract(gx00) - 0.5;\n    gy00 = fract(gy00) - 0.5;\n    gz00 = fract(gz00) - 0.5;\n    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n    vec4 sw00 = step(gw00, vec4(0.0));\n    gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n    gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n    vec4 gx01 = ixy01 * (1.0 / 7.0);\n    vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n    vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n    gx01 = fract(gx01) - 0.5;\n    gy01 = fract(gy01) - 0.5;\n    gz01 = fract(gz01) - 0.5;\n    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n    vec4 sw01 = step(gw01, vec4(0.0));\n    gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n    gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n    vec4 gx10 = ixy10 * (1.0 / 7.0);\n    vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n    vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n    gx10 = fract(gx10) - 0.5;\n    gy10 = fract(gy10) - 0.5;\n    gz10 = fract(gz10) - 0.5;\n    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n    vec4 sw10 = step(gw10, vec4(0.0));\n    gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n    gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n    vec4 gx11 = ixy11 * (1.0 / 7.0);\n    vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n    vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n    gx11 = fract(gx11) - 0.5;\n    gy11 = fract(gy11) - 0.5;\n    gz11 = fract(gz11) - 0.5;\n    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n    vec4 sw11 = step(gw11, vec4(0.0));\n    gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n    gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n    g0000 *= norm00.x;\n    g0100 *= norm00.y;\n    g1000 *= norm00.z;\n    g1100 *= norm00.w;\n\n    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n    g0001 *= norm01.x;\n    g0101 *= norm01.y;\n    g1001 *= norm01.z;\n    g1101 *= norm01.w;\n\n    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n    g0010 *= norm10.x;\n    g0110 *= norm10.y;\n    g1010 *= norm10.z;\n    g1110 *= norm10.w;\n\n    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n    g0011 *= norm11.x;\n    g0111 *= norm11.y;\n    g1011 *= norm11.z;\n    g1111 *= norm11.w;\n\n    float n0000 = dot(g0000, Pf0);\n    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n    float n1111 = dot(g1111, Pf1);\n\n    vec4 fade_xyzw = fade(Pf0);\n    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n    return 2.2 * n_xyzw;\n\n}\n\n// Classic Perlin noise, periodic version\nfloat perlin( vec4 P, vec4 rep ) {\n\n    vec4 Pi0 = mod(floor(P), rep); // Integer part modulo rep\n    vec4 Pi1 = mod(Pi0 + 1.0, rep); // Integer part + 1 mod rep\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec4 Pf0 = fract(P); // Fractional part for interpolation\n    vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = vec4(Pi0.zzzz);\n    vec4 iz1 = vec4(Pi1.zzzz);\n    vec4 iw0 = vec4(Pi0.wwww);\n    vec4 iw1 = vec4(Pi1.wwww);\n\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 ixy00 = permute(ixy0 + iw0);\n    vec4 ixy01 = permute(ixy0 + iw1);\n    vec4 ixy10 = permute(ixy1 + iw0);\n    vec4 ixy11 = permute(ixy1 + iw1);\n\n    vec4 gx00 = ixy00 * (1.0 / 7.0);\n    vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n    vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n    gx00 = fract(gx00) - 0.5;\n    gy00 = fract(gy00) - 0.5;\n    gz00 = fract(gz00) - 0.5;\n    vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n    vec4 sw00 = step(gw00, vec4(0.0));\n    gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n    gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n    vec4 gx01 = ixy01 * (1.0 / 7.0);\n    vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n    vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n    gx01 = fract(gx01) - 0.5;\n    gy01 = fract(gy01) - 0.5;\n    gz01 = fract(gz01) - 0.5;\n    vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n    vec4 sw01 = step(gw01, vec4(0.0));\n    gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n    gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n    vec4 gx10 = ixy10 * (1.0 / 7.0);\n    vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n    vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n    gx10 = fract(gx10) - 0.5;\n    gy10 = fract(gy10) - 0.5;\n    gz10 = fract(gz10) - 0.5;\n    vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n    vec4 sw10 = step(gw10, vec4(0.0));\n    gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n    gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n    vec4 gx11 = ixy11 * (1.0 / 7.0);\n    vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n    vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n    gx11 = fract(gx11) - 0.5;\n    gy11 = fract(gy11) - 0.5;\n    gz11 = fract(gz11) - 0.5;\n    vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n    vec4 sw11 = step(gw11, vec4(0.0));\n    gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n    gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n    vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n    vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n    vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n    vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n    vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n    vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n    vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n    vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n    vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n    vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n    vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n    vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n    vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n    vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n    vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n    vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n    vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n    g0000 *= norm00.x;\n    g0100 *= norm00.y;\n    g1000 *= norm00.z;\n    g1100 *= norm00.w;\n\n    vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n    g0001 *= norm01.x;\n    g0101 *= norm01.y;\n    g1001 *= norm01.z;\n    g1101 *= norm01.w;\n\n    vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n    g0010 *= norm10.x;\n    g0110 *= norm10.y;\n    g1010 *= norm10.z;\n    g1110 *= norm10.w;\n\n    vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n    g0011 *= norm11.x;\n    g0111 *= norm11.y;\n    g1011 *= norm11.z;\n    g1111 *= norm11.w;\n\n    float n0000 = dot(g0000, Pf0);\n    float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n    float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n    float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n    float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n    float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n    float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n    float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n    float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n    float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n    float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n    float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n    float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n    float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n    float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n    float n1111 = dot(g1111, Pf1);\n\n    vec4 fade_xyzw = fade(Pf0);\n    vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n    vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n    vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n    vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n    float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n    return 2.2 * n_xyzw;\n\n}\n',noise_perlin:"#include <noise_perlin_2D>\n#include <noise_perlin_3D>\n#include <noise_perlin_4D>\n",noise_psrd_2D:'// Periodic (tiling) 2-D simplex noise (hexagonal lattice gradient noise)\n// with rotating gradients and analytic derivatives.\n// Variants also without the derivative (no "d" in the name), without\n// the tiling property (no "p" in the name) and without the rotating\n// gradients (no "r" in the name).\n//\n// This is (yet) another variation on simplex noise. It\'s similar to the\n// version presented by Ken Perlin, but the grid is axis-aligned and\n// slightly stretched in the y direction to permit rectangular tiling.\n//\n// The noise can be made to tile seamlessly to any integer period in x and\n// any even integer period in y. Odd periods may be specified for y, but\n// then the actual tiling period will be twice that number.\n//\n// The rotating gradients give the appearance of a swirling motion, and can\n// serve a similar purpose for animation as motion along z in 3-D noise.\n// The rotating gradients in conjunction with the analytic derivatives\n// can make "flow noise" effects as presented by Perlin and Neyret.\n//\n// vec3 {p}s{r}dnoise(vec2 pos {, vec2 per} {, float rot})\n// "pos" is the input (x,y) coordinate\n// "per" is the x and y period, where per.x is a positive integer\n//    and per.y is a positive even integer\n// "rot" is the angle to rotate the gradients (any float value,\n//    where 0.0 is no rotation and 1.0 is one full turn)\n// The first component of the 3-element return vector is the noise value.\n// The second and third components are the x and y partial derivatives.\n//\n// float {p}s{r}noise(vec2 pos {, vec2 per} {, float rot})\n// "pos" is the input (x,y) coordinate\n// "per" is the x and y period, where per.x is a positive integer\n//    and per.y is a positive even integer\n// "rot" is the angle to rotate the gradients (any float value,\n//    where 0.0 is no rotation and 1.0 is one full turn)\n// The return value is the noise value.\n// Partial derivatives are not computed, making these functions faster.\n//\n// Author: Stefan Gustavson (stefan.gustavson@gmail.com)\n// Version 2016-05-10.\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// idea of using a permutation polynomial.\n//\n// Copyright (c) 2016 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n// Hashed 2-D gradients with an extra rotation.\n// (The constant 0.0243902439 is 1/41)\nvec2 rgrad2( vec2 p, float rot ) {\n\n    // For more isotropic gradients, sin/cos can be used instead.\n    float u = permute( permute( p.x ) + p.y ) * 0.0243902439 + rot; // Rotate by shift\n    u = fract( u ) * 6.28318530718; // 2*pi\n    return vec2( cos( u ), sin( u ));\n\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 psrdnoise(vec2 pos, vec2 per, float rot) {\n  // Hack: offset y slightly to hide some rare artifacts\n  pos.y += 0.01;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients\n// and analytical derivative.\n// This function is implemented as a wrapper to "psrdnoise",\n// at the minimal cost of three extra additions.\n//\nvec3 psdnoise(vec2 pos, vec2 per) {\n  return psrdnoise(pos, per, 0.0);\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients,\n// but without the analytical derivative.\n//\nfloat psrnoise(vec2 pos, vec2 per, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to "psrnoise",\n// at the minimal cost of three extra additions.\n//\nfloat psnoise(vec2 pos, vec2 per) {\n  return psrnoise(pos, per, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 srdnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n\n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients and analytical derivative.\n// This function is implemented as a wrapper to "srdnoise",\n// at the minimal cost of three extra additions.\n//\nvec3 sdnoise(vec2 pos) {\n  return srdnoise(pos, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients,\n// without the analytical derivative.\n//\nfloat srnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n\n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to "srnoise",\n// at the minimal cost of three extra additions.\n// Note: if this kind of noise is all you want, there are faster\n// GLSL implementations of non-tiling simplex noise out there.\n// This one is included mainly for completeness and compatibility\n// with the other functions in the file.\n//\nfloat snoise(vec2 pos) {\n  return srnoise(pos, 0.0);\n}\n',noise_simplex_2D:"//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nfloat simplex( vec2 v ) {\n\n    const vec4 C = vec4( 0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                        -0.577350269189626,  // -1.0 + 2.0 * C.x\n                        0.024390243902439 ); // 1.0 / 41.0\n    // First corner\n    vec2 i  = floor( v + dot( v, C.yy ) );\n    vec2 x0 = v - i + dot( i, C.xx );\n\n    // Other corners\n    vec2 i1;\n    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n    //i1.y = 1.0 - i1.x;\n    i1 = ( x0.x > x0.y ) ? vec2( 1.0, 0.0 ) : vec2( 0.0, 1.0 );\n    // x0 = x0 - 0.0 + 0.0 * C.xx ;\n    // x1 = x0 - i1 + 1.0 * C.xx ;\n    // x2 = x0 - 1.0 + 2.0 * C.xx ;\n    vec4 x12 = x0.xyxy + C.xxzz;\n    x12.xy -= i1;\n\n    // Permutations\n    i = mod289( i ); // Avoid truncation effects in permutation\n    vec3 p = permute( permute( i.y + vec3( 0.0, i1.y, 1.0 ) )\n        + i.x + vec3( 0.0, i1.x, 1.0 ) );\n\n    vec3 m = max( 0.5 - vec3( dot( x0, x0 ), dot( x12.xy, x12.xy ), dot( x12.zw, x12.zw ) ), 0.0 );\n    m = m*m ;\n    m = m*m ;\n\n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n    vec3 x = 2.0 * fract( p * C.www ) - 1.0;\n    vec3 h = abs( x ) - 0.5;\n    vec3 ox = floor( x + 0.5 );\n    vec3 a0 = x - ox;\n\n    // Normalise gradients implicitly by scaling m\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\n    m *= 1.79284291400159 - 0.85373472095314 * ( a0 * a0 + h * h );\n\n    // Compute final noise value at P\n    vec3 g;\n    g.x  = a0.x * x0.x + h.x * x0.y;\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n    return 130.0 * dot( m, g );\n\n}\n",noise_simplex_3D_grad:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20150104 (JcBernack)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nfloat simplex( vec3 v, out vec3 gradient ) {\n\n    const vec2  C = vec2( 1.0 / 6.0, 1.0 / 3.0 );\n    const vec4  D = vec4( 0.0, 0.5, 1.0, 2.0 );\n\n    // First corner\n    vec3 i  = floor( v + dot( v, C.yyy ) );\n    vec3 x0 = v - i + dot( i, C.xxx ) ;\n\n    // Other corners\n    vec3 g = step( x0.yzx, x0.xyz );\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n    // Permutations\n    i = mod289( i );\n    vec4 p = permute( permute( permute(\n                i.z + vec4( 0.0, i1.z, i2.z, 1.0 ) )\n            + i.y + vec4( 0.0, i1.y, i2.y, 1.0 ) )\n            + i.x + vec4( 0.0, i1.x, i2.x, 1.0 ) );\n\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3 ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ * ns.x + ns.yyyy;\n    vec4 y = y_ * ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs( x ) - abs( y );\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor( b0 ) * 2.0 + 1.0;\n    vec4 s1 = floor( b1 ) * 2.0 + 1.0;\n    vec4 sh = - step( h, vec4( 0.0 ) );\n\n    vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww ;\n\n    vec3 p0 = vec3( a0.xy, h.x );\n    vec3 p1 = vec3( a0.zw, h.y );\n    vec3 p2 = vec3( a1.xy, h.z );\n    vec3 p3 = vec3( a1.zw, h.w );\n\n    //Normalise gradients\n    vec4 norm = taylorInvSqrt( vec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) ) );\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n    // Mix final noise value\n    vec4 m = max( 0.6 - vec4( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ), dot( x3, x3 ) ), 0.0 );\n    vec4 m2 = m * m;\n    vec4 m4 = m2 * m2;\n    vec4 pdotx = vec4( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 ), dot( p3, x3 ) );\n\n    // Determine noise gradient\n    vec4 temp = m2 * m * pdotx;\n    gradient = - 8.0 * ( temp.x * x0 + temp.y * x1 + temp.z * x2 + temp.w * x3 );\n    gradient += m4.x * p0 + m4.y * p1 + m4.z * p2 + m4.w * p3;\n    gradient *= 42.0;\n\n    return 42.0 * dot( m4, pdotx );\n\n}\n",noise_simplex_3D:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nfloat simplex( vec3 v ) {\n\n    const vec2 C = vec2( 1.0 / 6.0, 1.0 / 3.0 );\n    const vec4 D = vec4( 0.0, 0.5, 1.0, 2.0 );\n\n    // First corner\n    vec3 i  = floor( v + dot( v, C.yyy ) );\n    vec3 x0 = v - i + dot( i, C.xxx );\n\n    // Other corners\n    vec3 g = step( x0.yzx, x0.xyz );\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n\n    vec3 x1 = x0 - i1 + C.xxx;\n    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n    // Permutations\n    i = mod289( i );\n    vec4 p = permute( permute( permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n            + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n            + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n    float n_ = 0.142857142857; // 1.0/7.0\n    vec3 ns = n_ * D.wyz - D.xzx;\n\n    vec4 j = p - 49.0 * floor( p * ns.z * ns.z );  //  mod(p,7*7)\n\n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs( x ) - abs( y );\n\n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n\n    vec4 s0 = floor( b0 ) * 2.0 + 1.0;\n    vec4 s1 = floor( b1 ) * 2.0 + 1.0;\n    vec4 sh = - step( h, vec4( 0.0 ) );\n\n    vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww ;\n\n    vec3 p0 = vec3( a0.xy, h.x );\n    vec3 p1 = vec3( a0.zw, h.y );\n    vec3 p2 = vec3( a1.xy, h.z );\n    vec3 p3 = vec3( a1.zw, h.w );\n\n    //Normalise gradients\n    vec4 norm = taylorInvSqrt( vec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) ) );\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n\n    // Mix final noise value\n    vec4 m = max( 0.6 - vec4( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ), dot( x3, x3 ) ), 0.0 );\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot( p0, x0 ), dot( p1, x1 ),\n                                dot( p2, x2 ), dot( p3, x3 ) ) );\n\n}\n",noise_simplex_4D:"//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nvec4 grad4( float j, vec4 ip ) {\n\n    const vec4 ones = vec4( 1.0, 1.0, 1.0, -1.0 );\n    vec4 p, s;\n\n    p.xyz = floor( fract( vec3( j ) * ip.xyz ) * 7.0 ) * ip.z - 1.0;\n    p.w = 1.5 - dot( abs( p.xyz ), ones.xyz );\n    s = vec4( lessThan( p, vec4( 0.0 ) ) );\n    p.xyz = p.xyz + ( s.xyz * 2.0 - 1.0 ) * s.www;\n\n    return p;\n\n}\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat simplex(vec4 v) {\n\n    const vec4 C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                        -0.447213595499958); // -1 + 4 * G4\n\n    // First corner\n    vec4 i  = floor( v + dot( v, vec4( F4 ) ) );\n    vec4 x0 = v - i + dot( i, C.xxxx );\n\n    // Other corners\n\n    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n    vec4 i0;\n    vec3 isX = step( x0.yzw, x0.xxx );\n    vec3 isYZ = step( x0.zww, x0.yyz );\n    i0.x = isX.x + isX.y + isX.z;\n    i0.yzw = 1.0 - isX;\n    i0.y += isYZ.x + isYZ.y;\n    i0.zw += 1.0 - isYZ.xy;\n    i0.z += isYZ.z;\n    i0.w += 1.0 - isYZ.z;\n\n    vec4 i3 = clamp( i0, 0.0, 1.0 );\n    vec4 i2 = clamp( i0 - 1.0, 0.0, 1.0 );\n    vec4 i1 = clamp( i0 - 2.0, 0.0, 1.0 );\n\n    vec4 x1 = x0 - i1 + C.xxxx;\n    vec4 x2 = x0 - i2 + C.yyyy;\n    vec4 x3 = x0 - i3 + C.zzzz;\n    vec4 x4 = x0 + C.wwww;\n\n    // Permutations\n    i = mod289( i );\n    float j0 = permute( permute( permute( permute( i.w ) + i.z ) + i.y ) + i.x );\n    vec4 j1 = permute( permute( permute( permute (\n                i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n            + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n            + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n            + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n    vec4 ip = vec4( 1.0 / 294.0, 1.0 / 49.0, 1.0 / 7.0, 0.0 );\n\n    vec4 p0 = grad4(j0,   ip);\n    vec4 p1 = grad4(j1.x, ip);\n    vec4 p2 = grad4(j1.y, ip);\n    vec4 p3 = grad4(j1.z, ip);\n    vec4 p4 = grad4(j1.w, ip);\n\n    // Normalise gradients\n    vec4 norm = taylorInvSqrt( vec4( dot( p0, p0 ), dot( p1, p1 ), dot( p2, p2 ), dot( p3, p3 ) ) );\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    p4 *= taylorInvSqrt( dot( p4, p4 ) );\n\n    // Mix contributions from the five corners\n    vec3 m0 = max( 0.6 - vec3( dot( x0, x0 ), dot( x1, x1 ), dot( x2, x2 ) ), 0.0 );\n    vec2 m1 = max( 0.6 - vec2( dot( x3, x3 ), dot( x4, x4 ) ), 0.0 );\n    m0 = m0 * m0;\n    m1 = m1 * m1;\n    return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n                + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n",noise_simplex:"#include <noise_simplex_2D>\n#include <noise_simplex_3D>\n#include <noise_simplex_3D_grad>\n#include <noise_simplex_4D>\n",perturbation_share:"#ifdef HAS_PERTURBATIONMAP\n  uniform sampler2D u_perturbationSampler;\n  uniform float u_perturbationUOffset;\n  uniform float u_perturbationVOffset;\n#endif\n",perturbation_frag:"#ifdef HAS_PERTURBATIONMAP\n  vec2 getScreenUv(){\n    return gl_FragCoord.xy / u_resolution;\n  }\n\n  vec4 screenColor = texture2D(u_perturbationSampler, getScreenUv() + normalize(u_viewMat * vec4(normal, 1.)).xy * vec2(u_perturbationUOffset, u_perturbationVOffset));\n  gl_FragColor = mix(screenColor, gl_FragColor, gl_FragColor.a);\n\n#endif\n",refraction_share:"#ifdef HAS_REFRACTIONMAP\n\n    uniform sampler2D u_refractionSampler;\n    uniform mat4 u_PTMMatrix;\n    uniform float u_refractionDepth;\n\n#endif\n",refraction_frag:"#ifdef HAS_REFRACTIONMAP\n  vec4 refractionColor = vec4(0.);\n  vec3 refractDir = normalize(refract(-geometry.viewDir, geometry.normal, u_refractionRatio));\n  vec3 newPos = v_pos + refractDir * u_refractionDepth;\n  vec4 projectionPos = u_PTMMatrix * u_projMat * u_viewMat * vec4(newPos, 1.0);\n  vec2 projectionUv = projectionPos.xy / projectionPos.w;\n  refractionColor = texture2D(u_refractionSampler, projectionUv);\n  gl_FragColor = mix(refractionColor, gl_FragColor, gl_FragColor.a);\n\n#endif\n",uv_transform_share_define:"#ifdef HAS_SPECULARGLOSSINESSMAP\n\n    varying vec2 v_uv_specularGlossinessTexture;\n\n#endif\n\n#ifdef HAS_BASECOLORMAP\n\n    varying vec2 v_uv_baseColorTexture;\n\n#endif\n\n#ifdef O3_HAS_NORMALMAP\n\n    varying vec2 v_uv_normalTexture;\n\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\n    varying vec2 v_uv_emissiveTexture;\n\n#endif\n\n#ifdef HAS_METALMAP\n\n    varying vec2 v_uv_metallicTexture;\n\n#endif\n\n#ifdef HAS_ROUGHNESSMAP\n\n    varying vec2 v_uv_roughnessTexture;\n\n#endif\n\n#ifdef HAS_METALROUGHNESSMAP\n\n    varying vec2 v_uv_metallicRoughnessTexture;\n\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\n\n    varying vec2 v_uv_occlusionTexture;\n\n#endif\n\n#ifdef HAS_OPACITYMAP\n\n    varying vec2 v_uv_opacityTexture;\n\n#endif\n\n#ifdef HAS_PERTURBATIONMAP\n\n    varying vec2 v_uv_perturbationTexture;\n\n#endif\n\n\n// mobile material,\n#ifdef O3_EMISSION_TEXTURE\n\n    varying vec2 v_uv_emissionTexture;\n\n#endif\n\n#ifdef O3_AMBIENT_TEXTURE\n\n    varying vec2 v_uv_ambientTexture;\n\n#endif\n\n#ifdef O3_DIFFUSE_TEXTURE\n\n    varying vec2 v_uv_diffuseTexture;\n\n#endif\n\n#ifdef O3_SPECULAR_TEXTURE\n\n    varying vec2 v_uv_specularTexture;\n\n#endif\n",uv_transform_vert_define:"#ifdef HAS_SPECULARGLOSSINESSMAP\n\n    uniform mat3 u_specularGlossinessSamplerMatrix;\n\n#endif\n\n#ifdef HAS_BASECOLORMAP\n\n    uniform mat3 u_baseColorSamplerMatrix;\n\n#endif\n\n#ifdef O3_HAS_NORMALMAP\n\n    uniform mat3 u_normalSamplerMatrix;\n\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\n    uniform mat3 u_emissiveSamplerMatrix;\n\n#endif\n\n#ifdef HAS_METALMAP\n\n    uniform mat3 u_metallicSamplerMatrix;\n\n#endif\n\n#ifdef HAS_ROUGHNESSMAP\n\n    uniform mat3 u_roughnessSamplerMatrix;\n\n#endif\n\n#ifdef HAS_METALROUGHNESSMAP\n\n    uniform mat3 u_metallicRoughnessSamplerMatrix;\n\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\n\n    uniform mat3 u_occlusionSamplerMatrix;\n\n#endif\n\n#ifdef HAS_OPACITYMAP\n\n    uniform mat3 u_opacitySamplerMatrix;\n\n#endif\n\n#ifdef HAS_PERTURBATIONMAP\n\n    uniform mat3 u_perturbationSamplerMatrix;\n\n#endif\n\n\n// mobile material,\n#ifdef O3_EMISSION_TEXTURE\n\n    uniform mat3 u_emissionMatrix;\n\n#endif\n\n#ifdef O3_AMBIENT_TEXTURE\n\n    uniform mat3 u_ambientMatrix;\n\n#endif\n\n#ifdef O3_DIFFUSE_TEXTURE\n\n    uniform mat3 u_diffuseMatrix;\n\n#endif\n\n#ifdef O3_SPECULAR_TEXTURE\n\n    uniform mat3 u_specularMatrix;\n\n#endif\n",uv_transform_vert:"#ifdef HAS_SPECULARGLOSSINESSMAP\n\n    v_uv_specularGlossinessTexture = (u_specularGlossinessSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_BASECOLORMAP\n\n    v_uv_baseColorTexture = (u_baseColorSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef O3_HAS_NORMALMAP\n\n    v_uv_normalTexture = (u_normalSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\n    v_uv_emissiveTexture = (u_emissiveSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_METALMAP\n\n    v_uv_metallicTexture = (u_metallicSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_ROUGHNESSMAP\n\n    v_uv_roughnessTexture = (u_roughnessSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_METALROUGHNESSMAP\n\n    v_uv_metallicRoughnessTexture = (u_metallicRoughnessSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\n\n    v_uv_occlusionTexture = (u_occlusionSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_OPACITYMAP\n\n    v_uv_opacityTexture = (u_opacitySamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef HAS_PERTURBATIONMAP\n\n    v_uv_perturbationTexture = (u_perturbationSamplerMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n\n// mobile material,\n#ifdef O3_EMISSION_TEXTURE\n\n    v_uv_emissionTexture = (u_emissionMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef O3_AMBIENT_TEXTURE\n\n    v_uv_ambientTexture = (u_ambientMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef O3_DIFFUSE_TEXTURE\n\n    v_uv_diffuseTexture = (u_diffuseMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n\n#ifdef O3_SPECULAR_TEXTURE\n\n    v_uv_specularTexture = (u_specularMatrix * vec3(v_uv, 1.0)).st ;\n\n#endif\n",clipPlane_vert_define:"#ifdef O3_CLIPPLANE_NUM\n    uniform vec4 u_clipPlanes[O3_CLIPPLANE_NUM];\n    varying float v_clipDistances[O3_CLIPPLANE_NUM];\n#endif\n",clipPlane_vert:"#ifdef O3_CLIPPLANE_NUM\n    for(int i = 0; i < O3_CLIPPLANE_NUM; i++){\n        v_clipDistances[i] = dot(vec4(v_pos,1.0), u_clipPlanes[i]);\n    }\n#endif\n",clipPlane_frag_define:"#ifdef O3_CLIPPLANE_NUM\n    varying float v_clipDistances[O3_CLIPPLANE_NUM];\n#endif\n",clipPlane_frag:"#ifdef O3_CLIPPLANE_NUM\n    for(int i = 0; i < O3_CLIPPLANE_NUM; i++){\n        if(v_clipDistances[i] < 0.0){\n            discard;\n        }\n    }\n#endif\n",gamma_frag:"#ifdef GAMMA\n    float gamma = 2.2;\n    gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0 / gamma));\n#endif\n",oit_frag:"#if defined(ALPHA_BLEND) && defined(OIT_ENABLE)\n    if(gl_FragCoord.z > texture2D(u_depthSampler, gl_FragCoord.xy / u_resolution).r){\n        discard;\n    }\n    vec4 oitColor = gl_FragColor;\n\n    // Bavoil and Myers Method\n    gl_FragData[0]= vec4(oitColor.rgb * oitColor.a, oitColor.a);\n    gl_FragData[1]= vec4(1)/ 255.0; // \n\n\n    // Depth Weights Improve Occlusion\n//    float w = weight(gl_FragCoord.z, oitColor.a);\n//    gl_FragData[0] = vec4(oitColor.rgb * oitColor.a * w, oitColor.a);\n//    gl_FragData[1].r =oitColor.a * w;\n#endif\n",oit_frag_define:"#if defined(ALPHA_BLEND) && defined(OIT_ENABLE)\n\n    uniform sampler2D u_depthSampler;\n\n    float weight(float z, float a) {\n        return a * clamp(3e3 * pow(1.0 - z, 3.0), 1e-2, 3e3);\n//          return pow(z,-5.0);\n    }\n#endif\n"},{pbr_common_frag_define:"#ifndef EPSILON\n#define EPSILON 1e-6\n#endif\n\n#ifndef RECIPROCAL_PI\n    #define RECIPROCAL_PI 0.31830988618\n#endif\n\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\n",pbr_util_frag_define:"vec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n    #ifdef MANUAL_SRGB\n\n        #ifdef SRGB_FAST_APPROXIMATION\n\n            vec3 linOut = pow(srgbIn.xyz, vec3(2.2));\n        #else\n\n         vec3 bLess = step(vec3(0.04045), srgbIn.xyz);\n         vec3 linOut = mix(srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055), vec3(2.4)), bLess);\n\n        #endif\n\n    return vec4(linOut, srgbIn.w);;\n\n    #else\n\n    return srgbIn;\n\n    #endif\n}\n\nfloat pow2( const in float x ) {\n    return x * x;\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n    return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\n\n// todo: enhance\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n    if( decayExponent > 0.0 ) {\n\n        #if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n        // based upon Frostbite 3 Moving to Physically-based Rendering\n        // page 32, equation 26: E[window1]\n        // https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n        // this is intended to be used on spot and point lights who are represented as luminous intensity\n        // but who must be converted to luminous irradiance for surface lighting calculation\n        float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n        float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n        return distanceFalloff * maxDistanceCutoffFactor;\n\n        #else\n\n        return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n        #endif\n\n    }\n\n    return 1.0;\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n}\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n    return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n    return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n\n\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n    return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n\n// \nfloat getLuminance(vec3 color)\n{\n    return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n",pbr_envmap_light_frag_define:"#ifdef O3_HAS_ENVMAP_LIGHT\n\nstruct EnvMapLight {\n    vec3 diffuse;\n    vec3 specular;\n    float mipMapLevel;\n    float diffuseIntensity;\n    float specularIntensity;\n    mat3 transformMatrix;\n};\n\n\nuniform EnvMapLight u_envMapLight;\n\n#ifdef O3_USE_DIFFUSE_ENV\n    uniform samplerCube u_env_diffuseSampler;\n#endif\n\n#ifdef O3_USE_SPECULAR_ENV\n    uniform samplerCube u_env_specularSampler;\n#endif\n\n#endif\n",pbr_base_frag_define:"#ifdef ALPHA_MASK\nuniform float u_alphaCutoff;\n#endif\n\nuniform vec4 u_baseColorFactor;\nuniform vec2 u_metallicRoughnessValue;\nuniform vec3 u_specularFactor;\nuniform float u_glossinessFactor;\n\nuniform float u_envMapIntensity;\nuniform float u_refractionRatio;\n\n\nuniform float u_clearCoat;\nuniform float u_clearCoatRoughness;\nuniform vec2 u_resolution;\n\n// todo: delete\nuniform float u_normalScale;\nuniform float u_occlusionStrength;\n\n",pbr_texture_frag_define:"#ifdef HAS_BASECOLORMAP\n\nuniform sampler2D u_baseColorSampler;\n\n#endif\n\n#ifdef O3_HAS_NORMALMAP\n\nuniform sampler2D u_normalSampler;\n\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\nuniform sampler2D u_emissiveSampler;\nuniform vec3 u_emissiveFactor;\n\n#endif\n\n#ifdef HAS_METALMAP\n\nuniform sampler2D u_metallicSampler;\n\n#endif\n\n#ifdef HAS_ROUGHNESSMAP\n\nuniform sampler2D u_roughnessSampler;\n\n#endif\n\n#ifdef HAS_METALROUGHNESSMAP\n\nuniform sampler2D u_metallicRoughnessSampler;\n\n#endif\n\n\n#ifdef HAS_SPECULARGLOSSINESSMAP\n\nuniform sampler2D u_specularGlossinessSampler;\n\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\n\nuniform sampler2D u_occlusionSampler;\n\n#endif\n\n#ifdef HAS_OPACITYMAP\n\nuniform sampler2D u_opacitySampler;\n\n#endif\n\n#ifdef HAS_REFLECTIONMAP\n\nuniform samplerCube u_reflectionSampler;\n\n#endif\n",pbr_runtime_frag_define:"struct IncidentLight {\n    vec3 color;\n    vec3 direction;\n    bool visible;\n};\nstruct ReflectedLight {\n    vec3 directDiffuse;\n    vec3 directSpecular;\n    vec3 indirectDiffuse;\n    vec3 indirectSpecular;\n};\nstruct GeometricContext {\n    vec3 position;\n    vec3 normal;\n    vec3 viewDir;\n};\nstruct PhysicalMaterial {\n    vec3    diffuseColor;\n    float   specularRoughness;\n    vec3    specularColor;\n    float   clearCoat;\n    float   clearCoatRoughness;\n};\n",pbr_normal_frag_define:"vec3 getNormal()\n{\n  #ifdef O3_HAS_NORMALMAP\n    #ifndef O3_HAS_TANGENT\n        #ifdef HAS_DERIVATIVES\n            vec3 pos_dx = dFdx(v_pos);\n            vec3 pos_dy = dFdy(v_pos);\n            vec3 tex_dx = dFdx(vec3(v_uv, 0.0));\n            vec3 tex_dy = dFdy(vec3(v_uv, 0.0));\n            vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n            #ifdef O3_HAS_NORMAL\n                vec3 ng = normalize(v_normal);\n            #else\n                vec3 ng = normalize( cross(pos_dx, pos_dy) );\n            #endif\n            t = normalize(t - ng * dot(ng, t));\n            vec3 b = normalize(cross(ng, t));\n            mat3 tbn = mat3(t, b, ng);\n        #else\n            #ifdef O3_HAS_NORMAL\n                vec3 ng = normalize(v_normal);\n            #else\n                vec3 ng = vec3(0.0, 0.0, 1.0);\n            #endif\n            mat3 tbn = mat3(vec3(0.0), vec3(0.0), ng);\n        #endif\n    #else\n        mat3 tbn = v_TBN;\n    #endif\n        vec3 n = texture2D(u_normalSampler, v_uv_normalTexture ).rgb;\n        n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_normalScale, u_normalScale, 1.0)));\n  #else\n    #ifdef O3_HAS_NORMAL\n        vec3 n = normalize(v_normal);\n    #elif defined(HAS_DERIVATIVES)\n        vec3 pos_dx = dFdx(v_pos);\n        vec3 pos_dy = dFdy(v_pos);\n        vec3 n = normalize( cross(pos_dx, pos_dy) );\n    #else\n        vec3 n= vec3(0.0,0.0,1.0);\n    #endif\n  #endif\n\n  n *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\n  return n;\n}\n",pbr_brdf_cook_torrance_frag_define:"vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disneys reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n",pbr_direct_irradiance_frag_define:"void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n    float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n    vec3 irradiance = dotNL * directLight.color;\n\n    #ifndef PHYSICALLY_CORRECT_LIGHTS\n\n        irradiance *= PI; // punctual light\n\n    #endif\n\n\n    float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\n    reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\n    reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n    reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n}\n\n\n\n#ifdef O3_DIRECT_LIGHT_COUNT\n\n    void getDirectionalDirectLightIrradiance( const in DirectLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n        directLight.color = directionalLight.lightColor;\n        directLight.direction = -directionalLight.direction;\n        directLight.visible = true;\n    }\n\n#endif\n\n#ifdef O3_POINT_LIGHT_COUNT\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.lightColor;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n#ifdef O3_SPOT_LIGHT_COUNT\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.lightColor;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n\n#endif\n",pbr_ibl_specular_frag_define:"// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n    float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n    const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n    const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n    vec4 r = roughness * c0 + c1;\n\n    float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n    vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n    return specularColor * AB.x + AB.y;\n\n} // validated\n\n\n// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\nfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n    //float envMapWidth = pow( 2.0, maxMIPLevelScalar );\n    //float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n    float maxMIPLevelScalar = float( maxMIPLevel );\n    float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n    // clamp to allowable LOD ranges.\n    return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n}\n\n#ifdef O3_HAS_ENVMAP_LIGHT\n\nvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n    #if !defined(O3_USE_SPECULAR_ENV) && !defined(HAS_REFLECTIONMAP)\n\n        return u_envMapLight.specular * u_envMapLight.specularIntensity * u_envMapIntensity;\n\n    #else\n\n    #ifdef ENVMAPMODE_REFRACT\n\n        vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, u_refractionRatio );\n\n    #else\n\n        vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\n    #endif\n//        reflectVec = inverseTransformDirection( reflectVec, u_viewMat );\n\n        reflectVec =  u_envMapLight.transformMatrix * reflectVec;\n\n        float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\n        #ifdef HAS_TEX_LOD\n            #ifdef HAS_REFLECTIONMAP\n                 vec4 envMapColor = textureCubeLodEXT( u_reflectionSampler, reflectVec, specularMIPLevel );\n            #else\n                vec4 envMapColor = textureCubeLodEXT( u_env_specularSampler, reflectVec, specularMIPLevel );\n            #endif\n\n        #else\n            #ifdef HAS_REFLECTIONMAP\n                 vec4 envMapColor = textureCube( u_reflectionSampler, reflectVec, specularMIPLevel );\n            #else\n                 vec4 envMapColor = textureCube( u_env_specularSampler, reflectVec, specularMIPLevel );\n            #endif\n        #endif\n\n        envMapColor.rgb = SRGBtoLINEAR( envMapColor * u_envMapLight.specularIntensity * u_envMapIntensity).rgb;\n\n        return envMapColor.rgb;\n\n    #endif\n\n}\n#endif\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n    float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n    float dotNL = dotNV;\n    float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n    reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n}\n",pbr_ibl_diffuse_frag_define:"void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n    reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#ifdef O3_HAS_AMBIENT_LIGHT\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n    vec3 irradiance = ambientLightColor;\n\n    #ifndef PHYSICALLY_CORRECT_LIGHTS\n\n        irradiance *= PI;\n\n    #endif\n\n    return irradiance;\n\n}\n\n#endif\n",pbr_begin_frag:"    vec3 normal = getNormal();\n    vec4 diffuseColor = u_baseColorFactor;\n    vec3 totalEmissiveRadiance = vec3(0.0);\n    float metalnessFactor = u_metallicRoughnessValue.r;\n    float roughnessFactor = u_metallicRoughnessValue.g;\n    vec3 specularFactor = u_specularFactor;\n    float glossinessFactor = u_glossinessFactor;\n\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    PhysicalMaterial material;\n    GeometricContext geometry;\n    IncidentLight directLight;\n\n    #ifdef HAS_BASECOLORMAP\n\n        vec4 baseMapColor = texture2D( u_baseColorSampler, v_uv_baseColorTexture );\n        baseMapColor = SRGBtoLINEAR( baseMapColor );\n        diffuseColor *= baseMapColor;\n\n    #endif\n\n    #ifdef O3_HAS_VERTEXCOLOR\n\n        diffuseColor.rgb *= v_color.rgb;\n\n        #ifdef O3_HAS_VERTEXALPHA\n\n            diffuseColor.a *= v_color.a;\n\n        #endif\n\n    #endif\n\n    #ifdef ALPHA_MASK\n\n        if( diffuseColor.a < u_alphaCutoff ) {\n            discard;\n        }\n\n    #endif\n\n\n    #if defined(ALPHA_BLEND) && defined(HAS_OPACITYMAP)\n\n        #ifdef GETOPACITYFROMRGB\n            diffuseColor.a *= getLuminance(texture2D( u_opacitySampler, v_uv_opacityTexture ).rgb);\n        #else\n            diffuseColor.a *= texture2D( u_opacitySampler, v_uv_opacityTexture ).a;\n        #endif\n\n    #endif\n\n    #ifdef UNLIT\n\n        gl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n    #else\n\n\n\n        #ifdef HAS_METALROUGHNESSMAP\n\n            vec4 metalRoughMapColor = texture2D( u_metallicRoughnessSampler, v_uv_metallicRoughnessTexture );\n            metalnessFactor *= metalRoughMapColor.b;\n            roughnessFactor *= metalRoughMapColor.g;\n\n        #else\n            #ifdef HAS_METALMAP\n\n            vec4 metalMapColor = texture2D( u_metallicSampler, v_uv_metallicTexture );\n            metalnessFactor *= metalMapColor.b;\n\n            #endif\n\n            #ifdef HAS_ROUGHNESSMAP\n\n            vec4 roughMapColor = texture2D( u_roughnessSampler, v_uv_roughnessTexture );\n            roughnessFactor *= roughMapColor.g;\n\n            #endif\n        #endif\n\n        #ifdef HAS_SPECULARGLOSSINESSMAP\n\n            vec4 specularGlossinessColor = texture2D(u_specularGlossinessSampler, v_uv_specularGlossinessTexture );\n            specularFactor *= specularGlossinessColor.rgb;\n            glossinessFactor *= specularGlossinessColor.a;\n\n        #endif\n\n\n        #ifdef IS_METALLIC_WORKFLOW\n            material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n            material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n//          material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n            material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT /* pow2( reflectivity )*/ ), diffuseColor.rgb, metalnessFactor );\n        #else\n            float specularStrength = max( max( specularFactor.r, specularFactor.g ), specularFactor.b );\n            material.diffuseColor = diffuseColor.rgb * ( 1.0 - specularStrength );\n            material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\n            material.specularColor = specularFactor;\n        #endif\n\n        material.clearCoat = saturate( u_clearCoat );\n        material.clearCoatRoughness = clamp( u_clearCoatRoughness, 0.04, 1.0 );\n\n        geometry.position = v_pos;\n        geometry.normal = normal;\n        geometry.viewDir = normalize( u_cameraPos - v_pos );\n\n",pbr_direct_irradiance_frag:"        #if defined( O3_DIRECT_LIGHT_COUNT ) && defined( RE_Direct )\n\n            DirectLight directionalLight;\n\n            for ( int i = 0; i < O3_DIRECT_LIGHT_COUNT; i ++ ) {\n\n                directionalLight = u_directLights[ i ];\n\n                getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n                RE_Direct( directLight, geometry, material, reflectedLight );\n\n            }\n\n        #endif\n\n        #if defined( O3_POINT_LIGHT_COUNT ) && defined( RE_Direct )\n\n            PointLight pointLight;\n\n            for ( int i = 0; i < O3_POINT_LIGHT_COUNT; i ++ ) {\n\n                pointLight = u_pointLights[ i ];\n\n                getPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n                RE_Direct( directLight, geometry, material, reflectedLight );\n\n            }\n\n        #endif\n\n        #if defined( O3_SPOT_LIGHT_COUNT ) && defined( RE_Direct )\n\n            SpotLight spotLight;\n\n            for ( int i = 0; i < O3_SPOT_LIGHT_COUNT; i ++ ) {\n\n                spotLight = u_spotLights[ i ];\n\n                getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n                RE_Direct( directLight, geometry, material, reflectedLight );\n\n            }\n\n        #endif\n",pbr_ibl_diffuse_frag:"#if defined(RE_IndirectDiffuse)\n\n    vec3 irradiance = vec3(0);\n\n    #if defined(O3_HAS_AMBIENT_LIGHT)\n        irradiance += getAmbientLightIrradiance(u_ambientLight.lightColor);\n    #endif\n\n    #if defined(O3_HAS_ENVMAP_LIGHT)\n\n        #ifdef O3_USE_DIFFUSE_ENV\n            vec3 lightMapIrradiance = textureCube(u_env_diffuseSampler, geometry.normal).rgb * u_envMapLight.diffuseIntensity;\n        #else\n            vec3 lightMapIrradiance = u_envMapLight.diffuse * u_envMapLight.diffuseIntensity;\n        #endif\n\n        #ifndef PHYSICALLY_CORRECT_LIGHTS\n            lightMapIrradiance *= PI;\n        #endif\n\n        irradiance += lightMapIrradiance;\n\n    #endif\n\n    RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n\n",pbr_ibl_specular_frag:"#if defined( RE_IndirectSpecular )\n\n    vec3 radiance = vec3( 0.0 );\n    vec3 clearCoatRadiance = vec3( 0.0 );\n\n#endif\n\n\n\n#if defined( O3_HAS_ENVMAP_LIGHT ) && defined( RE_IndirectSpecular )\n\n    radiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), int(u_envMapLight.mipMapLevel) );\n    clearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), int(u_envMapLight.mipMapLevel) );\n\n#endif\n\n\n#if defined( RE_IndirectSpecular )\n\n    RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",pbr_end_frag:"#ifdef HAS_OCCLUSIONMAP\n\n    float ambientOcclusion = (texture2D(u_occlusionSampler, v_uv_occlusionTexture).r - 1.0) * u_occlusionStrength + 1.0;\n    reflectedLight.indirectDiffuse *= ambientOcclusion;\n\n    #if defined(O3_USE_SPECULAR_ENV)\n\n        float dotNV = saturate(dot(geometry.normal, geometry.viewDir));\n        reflectedLight.indirectSpecular *= computeSpecularOcclusion(dotNV, ambientOcclusion, material.specularRoughness);\n\n    #endif\n\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\n    vec4 emissiveMapColor = texture2D(u_emissiveSampler, v_uv_emissiveTexture);\n    emissiveMapColor = SRGBtoLINEAR(emissiveMapColor);\n    totalEmissiveRadiance += u_emissiveFactor * emissiveMapColor.rgb;\n\n#endif\n\nvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\ngl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n#endif\n"}),Rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"parseVersion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100";return"#version ".concat(e,"\n")}},{key:"parsePrecision",value:function(e,t,n){return"\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\n          precision ".concat(n?e:t," float;\n          precision ").concat(n?e:t," int;\n\n          #define O3_VERTEX_PRECISION ").concat(e,"\n          #define O3_FRAGMENT_PRECISION ").concat(t,"\n        #else\n          precision ").concat("mediump"," float;\n          precision ").concat("mediump"," int;\n\n          #define O3_VERTEX_PRECISION ").concat("mediump","\n          #define O3_FRAGMENT_PRECISION ").concat("mediump","\n        #endif\n      ")}},{key:"parseShaderName",value:function(e){return"#define O3_SHADER_NAME ".concat(e,"\n")}},{key:"parseAttributeMacros",value:function(e){return"#define O3_ATTRIBUTE_MACROS_START\n"+e.map((function(e){return"#define ".concat(e,"\n")})).join("")+"#define O3_ATTRIBUTE_MACROS_END\n"}},{key:"parseCustomMacros",value:function(e){return"#define O3_CUSTOM_MACROS_START\n"+e.map((function(e){return"#define ".concat(e,"\n")})).join("")+"#define O3_CUSTOM_MACROS_END\n"}},{key:"parseShader",value:function(t){return e.parseIncludes(t)}},{key:"parseIncludes",value:function(t){return t.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,(function(t,n){var r=Cn[n];return void 0===r?(A.error('Shader slice "'.concat(t.trim(),'" not founded.')),""):e.parseIncludes(r)}))}},{key:"InjectShaderSlices",value:function(e){Mn(Cn,e)}},{key:"parseExtension",value:function(e){return"#define O3_EXTENSION_START\n"+e.map((function(e){return"#extension ".concat(e," : enable\n")})).join("")+"#define O3_EXTENSION_END\n"}},{key:"convertTo300",value:function(e,t){if(e.includes("#version 300 es"))return e;if(e=(e=(e=(e=(e=e.replace(/#version 100/,"#version 300 es")).replace(/\battribute\b/g,"in")).replace(/\bvarying\b/g,t?"in":"out")).replace(/\btexture(2D|Cube)\s*\(/g,"texture(")).replace(/\btexture(2D|Cube)LodEXT\s*\(/g,"textureLod("),t)if(/\bgl_FragData\[.+?\]/g.test(e)){var n=(e=e.replace(/\bgl_FragColor\b/g,"gl_FragData[0]")).match(/\bgl_FragData\[.+?\]/g);e=this.replaceMRTShader(e,n)}else e=(e=e.replace(/void\s+?main\s*\(/g,"out vec4 glFragColor;\nvoid main(")).replace(/\bgl_FragColor\b/g,"glFragColor");return e}},{key:"getMaxDrawBuffers",value:function(e){for(var t=new Set,n=e.match(/\bgl_FragData\[.+?\]/g)||[],r=0;r<n.length;r++){var i=n[r].match(/\bgl_FragData\[(.+?)\]/);t.add(i[1])}return t.size}},{key:"compatible",value:function(e){return/\bgl_FragData\[.+?\]/g.test(e)&&(e=e.replace(/\bgl_FragColor\b/g,"gl_FragData[0]")),e}},{key:"replaceMRTShader",value:function(e,t){for(var n="",r=new Set,i=0;i<t.length;i++){var o=t[i].match(/\bgl_FragData\[(.+?)\]/);r.add(o[1])}return r.forEach((function(e){n+="layout(location=".concat(e,") out vec4 fragOutColor").concat(e,";\n")})),n+="void main(",(e=e.replace(/\bgl_FragData\[(.+?)\]/g,"fragOutColor$1")).replace(/void\s+?main\s*\(/g,n)}}])&&En(t,n),e}();function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t,n){return t&&Pn(e.prototype,t),n&&Pn(e,n),e}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){In(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Bn(e):n}function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jn(e);if(t){var i=jn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Un(this,n)}}function Hn(e,t,n){return(Hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wn=function(t){zn(r,t);var n=Vn(r);function r(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kn(this,r),(i=n.call(this,t))._glTexture=void 0,i._formatDetail=void 0,i._width=void 0,i._height=void 0,i._rhi=void 0,i._target=void 0,i._mipmap=void 0,i._mipmapCount=void 0,i._wrapModeU=void 0,i._wrapModeV=void 0,i._filterMode=void 0,i._anisoLevel=1,i.needUpdateFilers=void 0,i.needUpdateWholeTexture=void 0,i.canMipmap=void 0,i.isCompressed=!1,i.wrapS=void 0,i.wrapT=void 0,i.filterMag=void 0,i.filterMin=void 0,i._flipY=!1,i._premultiplyAlpha=!1,i.config=void 0,i.isFloat=void 0,i.config=o,o=Nn({magFilter:e.TextureFilter.LINEAR,minFilter:e.TextureFilter.LINEAR_MIPMAP_LINEAR,wrapS:e.TextureWrapMode.REPEAT,wrapT:e.TextureWrapMode.REPEAT,flipY:!1,premultiplyAlpha:!1,isFloat:!1},o),i.flipY=o.flipY,i.premultiplyAlpha=o.premultiplyAlpha,i.isFloat=o.isFloat,i.setFilter(o.magFilter,o.minFilter),i.setWrapMode(o.wrapS,o.wrapT),i}return Ln(r,[{key:"generateMipmaps",value:function(){if(this._mipmap){var e=this._rhi.gl;this._bind(),e.generateMipmap(this._target),this._unbind()}}},{key:"destroy",value:function(){this._rhi.gl.deleteTexture(this._glTexture),this._glTexture=null,this._formatDetail=null,this._rhi=null}},{key:"_bind",value:function(){this._rhi.gl.bindTexture(this._target,this._glTexture)}},{key:"_unbind",value:function(){this._rhi.gl.bindTexture(this._target,null)}},{key:"_getPixelBuffer",value:function(e,t,n,i,o,a){var s=this._rhi.gl,l=this._formatDetail,c=l.baseFormat,u=l.dataType;r._readFrameBuffer||(r._readFrameBuffer=s.createFramebuffer()),s.bindFramebuffer(s.FRAMEBUFFER,r._readFrameBuffer),null!=e?s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+e,this._glTexture,0):s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this._glTexture,0),s.readPixels(t,n,i,o,c,u,a),s.bindFramebuffer(s.FRAMEBUFFER,null)}},{key:"_initMipmap",value:function(e){var t=this._rhi.gl,n=this._rhi.isWebGL2,r=this._formatDetail,i=r.internalFormat,o=r.baseFormat,a=r.dataType;if(this._bind(),n)t.texStorage2D(this._target,this._mipmapCount,i,this._width,this._height);else if(o!==i&&(i=o),e)for(var s=0;s<this._mipmapCount;s++)for(var l=Math.max(1,this._width>>s),c=0;c<6;c++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,s,i,l,l,0,o,a,null);else for(var u=0;u<this._mipmapCount;u++){var d=Math.max(1,this._width>>u),f=Math.max(1,this._height>>u);t.texImage2D(this._target,u,i,d,f,0,o,a,null)}this._unbind()}},{key:"_getMaxMiplevel",value:function(e){return Math.floor(Math.log2(e))}},{key:"_getMipmapCount",value:function(){return this._mipmap?Math.floor(Math.log2(Math.max(this._width,this._height)))+1:1}},{key:"_setWrapMode",value:function(t,n){var i=this._rhi.gl;switch(this._rhi.isWebGL2||t===e.TextureWrapMode.Clamp||r._isPowerOf2(this._width)&&r._isPowerOf2(this._height)||(A.warn("non-power-2 texture is not supported for REPEAT or MIRRORED_REPEAT in WebGL1,and has automatically downgraded to CLAMP_TO_EDGE"),t=e.TextureWrapMode.Clamp),t){case e.TextureWrapMode.Clamp:i.texParameteri(this._target,n,i.CLAMP_TO_EDGE);break;case e.TextureWrapMode.Repeat:i.texParameteri(this._target,n,i.REPEAT);break;case e.TextureWrapMode.Mirror:i.texParameteri(this._target,n,i.MIRRORED_REPEAT)}}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"wrapModeU",get:function(){return this._wrapModeU},set:function(e){if(e!==this._wrapModeU){var t=this._rhi.gl;this._wrapModeU=e,this._bind(),this._setWrapMode(e,t.TEXTURE_WRAP_S),this._unbind()}}},{key:"wrapModeV",get:function(){return this._wrapModeV},set:function(e){if(e!==this._wrapModeV){var t=this._rhi.gl;this._wrapModeV=e,this._bind(),this._setWrapMode(e,t.TEXTURE_WRAP_T),this._unbind()}}},{key:"mipmapCount",get:function(){return this._mipmapCount}},{key:"filterMode",get:function(){return this._filterMode},set:function(t){if(t!==this._filterMode){var n=this._rhi.gl;switch(t===e.TextureFilterMode.Point||r._isPowerOf2(this._width)&&r._isPowerOf2(this._height)||(A.warn("non-power-2 texture is not supported for Bilinear or Trilinear ,and has automatically downgraded to Point"),t=e.TextureFilterMode.Point),this._filterMode=t,this._bind(),t){case e.TextureFilterMode.Point:n.texParameteri(this._target,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(this._target,n.TEXTURE_MIN_FILTER,this._mipmap?n.NEAREST_MIPMAP_NEAREST:n.NEAREST);break;case e.TextureFilterMode.Bilinear:n.texParameteri(this._target,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(this._target,n.TEXTURE_MIN_FILTER,this._mipmap?n.LINEAR_MIPMAP_NEAREST:n.LINEAR);break;case e.TextureFilterMode.Trilinear:n.texParameteri(this._target,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(this._target,n.TEXTURE_MIN_FILTER,this._mipmap?n.LINEAR_MIPMAP_LINEAR:n.LINEAR)}this._unbind()}}},{key:"anisoLevel",get:function(){return this._anisoLevel},set:function(e){var t=this._rhi.capability.maxAnisoLevel;if(e>t&&(A.warn("anisoLevel:".concat(e,", exceeds the limit and is automatically downgraded to:").concat(t)),e=t),e<1&&(A.warn("anisoLevel:".concat(e,", must be greater than 0, and is automatically downgraded to 1")),e=1),e!==this._anisoLevel){var n=this._rhi.gl;this._anisoLevel=e,this._bind(),n.texParameterf(this._target,n.TEXTURE_MAX_ANISOTROPY_EXT,e),this._unbind()}}}],[{key:"_isPowerOf2",value:function(e){return 0==(e&e-1)}},{key:"_getFormatDetail",value:function(t,n,r){switch(t){case e.TextureFormat.R8G8B8:return{internalFormat:r?n.RGB8:n.RGB,baseFormat:n.RGB,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.TextureFormat.R8G8B8A8:return{internalFormat:r?n.RGBA8:n.RGBA,baseFormat:n.RGBA,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.TextureFormat.R5G6B5:return{internalFormat:r?n.RGB565:n.RGB,baseFormat:n.RGB,dataType:n.UNSIGNED_SHORT_5_6_5,isCompressed:!1};case e.TextureFormat.Alpha8:return{internalFormat:n.ALPHA,baseFormat:n.ALPHA,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.TextureFormat.R32G32B32A32:return{internalFormat:n.RGBA32F,baseFormat:n.RGBA,dataType:n.FLOAT,isCompressed:!1};case e.TextureFormat.DXT1:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT,isCompressed:!0};case e.TextureFormat.DXT5:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT,isCompressed:!0};case e.TextureFormat.ETC1_RGB:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL,isCompressed:!0};case e.TextureFormat.ETC2_RGB:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB8_ETC2,isCompressed:!0};case e.TextureFormat.ETC2_RGBA5:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB8_PUNCHTHROUGH_ALPHA1_ETC2,isCompressed:!0};case e.TextureFormat.ETC2_RGBA8:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA8_ETC2_EAC,isCompressed:!0};case e.TextureFormat.PVRTC_RGB2:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB_PVRTC_2BPPV1_IMG,isCompressed:!0};case e.TextureFormat.PVRTC_RGBA2:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG,isCompressed:!0};case e.TextureFormat.PVRTC_RGB4:return{internalFormat:e.GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG,isCompressed:!0};case e.TextureFormat.PVRTC_RGBA4:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_PVRTC_4BPPV1_IMG,isCompressed:!0};case e.TextureFormat.ASTC_4x4:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR,isCompressed:!0};case e.TextureFormat.ASTC_5x5:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_5X5_KHR,isCompressed:!0};case e.TextureFormat.ASTC_6x6:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_6X6_KHR,isCompressed:!0};case e.TextureFormat.ASTC_8x8:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_8X8_KHR,isCompressed:!0};case e.TextureFormat.ASTC_10x10:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_10X10_KHR,isCompressed:!0};case e.TextureFormat.ASTC_12x12:return{internalFormat:e.GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR,isCompressed:!0}}}},{key:"_getRenderBufferColorFormatDetail",value:function(t,n,r){switch(t){case e.RenderBufferColorFormat.R8G8B8:return{internalFormat:r?n.RGB8:n.RGB,baseFormat:n.RGB,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.RenderBufferColorFormat.R8G8B8A8:return{internalFormat:r?n.RGBA8:n.RGBA,baseFormat:n.RGBA,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.RenderBufferColorFormat.Alpha8:return{internalFormat:n.ALPHA,baseFormat:n.ALPHA,dataType:n.UNSIGNED_BYTE,isCompressed:!1};case e.RenderBufferColorFormat.R16G16B16A16:return{internalFormat:n.RGBA16F,baseFormat:n.RGBA,dataType:n.HALF_FLOAT,isCompressed:!1};case e.RenderBufferColorFormat.R32G32B32A32:return{internalFormat:n.RGBA32F,baseFormat:n.RGBA,dataType:n.FLOAT,isCompressed:!1}}}},{key:"_getRenderBufferDepthFormatDetail",value:function(t,n,r){switch(t){case e.RenderBufferDepthFormat.Depth:return{internalFormat:r?n.DEPTH_COMPONENT32F:n.DEPTH_COMPONENT16,baseFormat:n.DEPTH_COMPONENT,dataType:r?n.FLOAT:n.UNSIGNED_INT,isCompressed:!1,attachment:n.DEPTH_ATTACHMENT};case e.RenderBufferDepthFormat.DepthStencil:return{internalFormat:r?n.DEPTH24_STENCIL8:n.DEPTH_STENCIL,baseFormat:n.DEPTH_STENCIL,dataType:n.UNSIGNED_INT_24_8,isCompressed:!1,attachment:n.DEPTH_STENCIL_ATTACHMENT};case e.RenderBufferDepthFormat.Stencil:return{internalFormat:n.STENCIL_INDEX8,baseFormat:n.STENCIL_ATTACHMENT,dataType:n.UNSIGNED_BYTE,isCompressed:!1,attachment:n.STENCIL_ATTACHMENT};case e.RenderBufferDepthFormat.Depth16:return{internalFormat:n.DEPTH_COMPONENT16,baseFormat:n.DEPTH_COMPONENT,dataType:n.UNSIGNED_INT,isCompressed:!1,attachment:n.DEPTH_ATTACHMENT};case e.RenderBufferDepthFormat.Depth24:return{internalFormat:n.DEPTH_COMPONENT24,baseFormat:n.DEPTH_COMPONENT,dataType:n.UNSIGNED_INT,isCompressed:!1,attachment:n.DEPTH_ATTACHMENT};case e.RenderBufferDepthFormat.Depth32:return{internalFormat:n.DEPTH_COMPONENT32F,baseFormat:n.DEPTH_COMPONENT,dataType:n.FLOAT,isCompressed:!1,attachment:n.DEPTH_ATTACHMENT};case e.RenderBufferDepthFormat.Depth24Stencil8:return{internalFormat:r?n.DEPTH24_STENCIL8:n.DEPTH_STENCIL,baseFormat:n.DEPTH_STENCIL,dataType:n.UNSIGNED_INT_24_8,isCompressed:!1,attachment:n.DEPTH_STENCIL_ATTACHMENT};case e.RenderBufferDepthFormat.Depth32Stencil8:return{internalFormat:n.DEPTH32F_STENCIL8,baseFormat:n.DEPTH_STENCIL,dataType:n.FLOAT_32_UNSIGNED_INT_24_8_REV,isCompressed:!1,attachment:n.DEPTH_STENCIL_ATTACHMENT}}}},{key:"_supportTextureFormat",value:function(t,n){var r=!0;switch(t){case e.TextureFormat.R32G32B32A32:n.canIUse(e.GLCapabilityType.textureFloat)||(r=!1)}return r}},{key:"_supportRenderBufferColorFormat",value:function(t,n){var r=!0;switch(t){case e.RenderBufferColorFormat.R32G32B32A32:n.canIUse(e.GLCapabilityType.colorBufferFloat)&&n.canIUse(e.GLCapabilityType.textureFloat)||(r=!1);break;case e.RenderBufferColorFormat.R16G16B16A16:n.canIUse(e.GLCapabilityType.colorBufferHalfFloat)&&n.canIUse(e.GLCapabilityType.textureHalfFloat)||(r=!1)}return r}},{key:"_supportRenderBufferDepthFormat",value:function(t,n,r){var i=n.isWebGL2,o=!0;if(r&&!n.canIUse(e.GLCapabilityType.depthTexture))return!1;switch(t){case e.RenderBufferDepthFormat.Stencil:o=!1;break;case e.RenderBufferDepthFormat.Depth24:case e.RenderBufferDepthFormat.Depth32:case e.RenderBufferDepthFormat.Depth32Stencil8:i||(o=!1)}return o}}]),Ln(r,[{key:"setFilter",value:function(e,t){return this.needUpdateFilers=this.needUpdateFilers||this.filterMag!==e||this.filterMin!==t,this.filterMag=e,this.filterMin=t,this}},{key:"setWrapMode",value:function(e,t){return this.needUpdateFilers=this.needUpdateFilers||this.wrapS!==e||this.wrapT!==t,this.wrapS=e,this.wrapT=t,this}},{key:"resetState",value:function(){this.needUpdateFilers=!0}},{key:"flipY",get:function(){return this._flipY},set:function(e){e!==this._flipY&&(this.needUpdateWholeTexture=!0),this._flipY=e}},{key:"premultiplyAlpha",get:function(){return this._premultiplyAlpha},set:function(e){e!==this._premultiplyAlpha&&(this.needUpdateWholeTexture=!0),this._premultiplyAlpha=e}}]),r}(ln);Wn._readFrameBuffer=null;var Xn=function(t){zn(r,t);var n=Vn(r);function r(e,t){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return kn(this,r),(i=n.call(this,e,o))._format=void 0,i._compressedMipFilled=0,i.updateSubRects=void 0,i.updateSubImageData=void 0,i._image=void 0,i._context=void 0,i.uOffset=void 0,i.vOffset=void 0,i.uScale=void 0,i.vScale=void 0,i.uvRotation=void 0,i.uvCenter=void 0,i._uvMatrix=se.create(),i.isRaw=void 0,arguments[0]instanceof Object?(i.constructorNew.apply(Bn(i),arguments),Un(i)):(o=Nn({uOffset:0,vOffset:0,uScale:1,vScale:1,uvRotation:0,uvCenter:[0,0],isRaw:!1,width:null,height:null},o),i.uOffset=o.uOffset,i.vOffset=o.vOffset,i.uScale=o.uScale,i.vScale=o.vScale,i.uvRotation=o.uvRotation,i.uvCenter=o.uvCenter,i.isRaw=o.isRaw,i._width=o.width,i._height=o.height,t&&(i.image=t),i.updateSubRects=[],i.updateSubImageData=[],i)}return Ln(r,[{key:"constructorNew",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.TextureFormat.R8G8B8A8,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=t.gl,s=t.isWebGL2;if(!Wn._supportTextureFormat(i,t))throw new Error("Texture format is not supported:".concat(e.TextureFormat[i]));!o||s||Wn._isPowerOf2(n)&&Wn._isPowerOf2(r)||(A.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),o=!1);var l=Wn._getFormatDetail(i,a,s);this._glTexture=a.createTexture(),this._formatDetail=l,this._rhi=t,this._target=a.TEXTURE_2D,this._mipmap=o,this._width=n,this._height=r,this._format=i,this._mipmapCount=this._getMipmapCount(),l.isCompressed&&!s||this._initMipmap(!1),this.filterMode=e.TextureFilterMode.Bilinear,this.wrapModeU=this.wrapModeV=e.TextureWrapMode.Repeat,this.type=e.AssetType.Scene}},{key:"setPixelBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=this._rhi.gl,s=this._rhi.isWebGL2,l=this._formatDetail,c=l.internalFormat,u=l.baseFormat,d=l.dataType,f=l.isCompressed,h=Math.max(1,this._width>>t),p=Math.max(1,this._height>>t);if(n=n||0,r=r||0,i=i||h-n,o=o||p-r,this._bind(),f){var m=1<<t;s||this._compressedMipFilled&m?a.compressedTexSubImage2D(this._target,t,n,r,i,o,c,e):(a.compressedTexImage2D(this._target,t,c,i,o,0,e),this._compressedMipFilled|=m)}else a.texSubImage2D(this._target,t,n,r,i,o,u,d,e);this._unbind()}},{key:"setImageSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=this._rhi.gl,s=this._formatDetail,l=s.baseFormat,c=s.dataType;this._bind(),a.texSubImage2D(this._target,t,i||0,o||0,l,c,e),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,+n),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+r),this._unbind()}},{key:"getPixelBuffer",value:function(e,t,n,i,o){if(this._formatDetail.isCompressed)throw new Error("Unable to read compressed texture");Hn(jn(r.prototype),"_getPixelBuffer",this).call(this,null,e,t,n,i,o)}},{key:"format",get:function(){return this._format}}]),Ln(r,[{key:"updateSubTexture",value:function(e,t){this.needUpdateWholeTexture||e&&e.x>=0&&e.y>=0&&e.x+e.width<=this._image.width&&e.y+e.height<=this._image.height&&(this.updateSubRects.push(e),this.updateSubImageData.push(t))}},{key:"configMipmap",value:function(){Wn._isPowerOf2(this._image.width)&&Wn._isPowerOf2(this._image.height)?this.canMipmap=this.filterMin===e.TextureFilter.NEAREST_MIPMAP_NEAREST||this.filterMin===e.TextureFilter.LINEAR_MIPMAP_NEAREST||this.filterMin===e.TextureFilter.NEAREST_MIPMAP_LINEAR||this.filterMin===e.TextureFilter.LINEAR_MIPMAP_LINEAR:this.canMipmap=!1,this.canMipmap||(this.filterMin=this.filterMin===e.TextureFilter.NEAREST?e.TextureFilter.NEAREST:e.TextureFilter.LINEAR,this.filterMag=this.filterMag===e.TextureFilter.NEAREST?e.TextureFilter.NEAREST:e.TextureFilter.LINEAR,this.wrapS=e.TextureWrapMode.CLAMP_TO_EDGE,this.wrapT=e.TextureWrapMode.CLAMP_TO_EDGE)}},{key:"updateTexture",value:function(){this.needUpdateWholeTexture=!0,this.needUpdateFilers=!0,this.updateSubRects=[],this.updateSubImageData=[]}},{key:"getImageData",value:function(e,t,n,r){if(!this._context&&this._image.getContext&&(this._context=this._image.getContext("2d")),this._context)return this._context.getImageData(e,t,n,r)}},{key:"resetState",value:function(){this.image&&(this.image=this.image),Hn(jn(r.prototype),"resetState",this).call(this)}},{key:"uvMatrix",get:function(){return this._glTexture?this._uvMatrix:se.fromUvTransform(this._uvMatrix,this.uOffset,this.vOffset,this.uScale,this.vScale,this.uvRotation,this.uvCenter)}},{key:"image",get:function(){return this._image},set:function(t){this._image=t,this.updateTexture(),this.isRaw?(this.setFilter(e.TextureFilter.NEAREST,e.TextureFilter.NEAREST),this.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE),this.canMipmap=!1):this.configMipmap()}}]),r}(Wn),Yn=function(){function t(n){kn(this,t),this.name=void 0,this.renderType=void 0,this.useFog=void 0,this.maxJointsNum=void 0,this._technique=void 0,this._values=void 0,this.name=n,this.renderType=e.MaterialType.OPAQUE,this.useFog=!0,this.maxJointsNum=0,this._technique=null,this._values={}}return Ln(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name,t=new this.constructor(e);for(var n in t.renderType=this.renderType,t.useFog=this.useFog,this._values)if(this._values.hasOwnProperty(n)){var r=this._values[n];r instanceof Wn?t.setValue(n,r):t.setValue(n,O.clone(r))}return t}},{key:"setValue",value:function(e,t){var n=this.getValue(e)instanceof Wn;this._generateTechnique&&n!==t instanceof Wn&&(this._technique=null),t?this._values[e]=t:this.delValue(e)}},{key:"delValue",value:function(e){delete this._values[e]}},{key:"getValue",value:function(e){return this._values[e]}},{key:"prepareDrawing",value:function(e,t,n){var r=this._technique.uniforms;for(var i in r){var o=r[i];this._updateValueBySemantic(o,e,t)}var a=e.scene;a.hasFogFeature&&a.bindFogToMaterial(this),this._technique.compile(e,t,n,this)}},{key:"preCompile",value:function(){}},{key:"postCompile",value:function(){}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"_updateValueBySemantic",value:function(t,n,r){var i,o=this._values;switch(t.semantic){case e.UniformSemantic.LOCAL:o[t.name]=r._node.transform.localMatrix;break;case e.UniformSemantic.MODEL:o[t.name]=r._node.transform.worldMatrix;break;case e.UniformSemantic.VIEW:o[t.name]=n.viewMatrix;break;case e.UniformSemantic.PROJECTION:o[t.name]=n.projectionMatrix;break;case e.UniformSemantic.MODELVIEW:var a=n.viewMatrix,s=r._node.transform.worldMatrix,l=o[t.name];l||(l=Ee.create()),Ee.mul(l,a,s),o[t.name]=l;break;case e.UniformSemantic.MODELVIEWPROJECTION:var c=n.viewMatrix,u=n.projectionMatrix,d=r._node.transform.worldMatrix,f=o[t.name];f||(f=Ee.create()),Ee.mul(f,c,d),Ee.mul(f,u,f),o[t.name]=f;break;case e.UniformSemantic.MODELINVERSE:o[t.name]=r.invModelMatrixs;break;case e.UniformSemantic.VIEWINVERSE:o[t.name]=n.inverseViewMatrix;break;case e.UniformSemantic.PROJECTIONINVERSE:o[t.name]=n.inverseProjectionMatrix;break;case e.UniformSemantic.MODELVIEWINVERSE:var h=n.viewMatrix,p=r.modelMatrix,m=o[t.name];m||(m=Ee.create()),Ee.mul(m,h,p),Ee.invert(m,m),o[t.name]=m;break;case e.UniformSemantic.MODELVIEWPROJECTIONINVERSE:var v=n.viewMatrix,g=n.projectionMatrix,_=r._node.transform.worldMatrix,y=o[t.name];y||(y=Ee.create()),Ee.mul(y,v,_),Ee.mul(y,g,y),Ee.invert(y,y),o[t.name]=y;break;case e.UniformSemantic.MODELINVERSETRANSPOSE:var b=o[t.name];b||(b=se.create()),se.normalFromMat4(b,r._node.transform.worldMatrix),o[t.name]=b;break;case e.UniformSemantic.MODELVIEWINVERSETRANSPOSE:var x=o[t.name];x||(x=Ee.create()),Ee.multiply(x,n.viewMatrix,r.modelMatrix),Ee.invert(x,x),Ee.transpose(x,x),o[t.name]=x;break;case e.UniformSemantic.VIEWPORT:o[t.name]=n.viewport;break;case e.UniformSemantic.JOINTMATRIX:o[t.name]=r.matrixPalette;break;case e.UniformSemantic.JOINTTEXTURE:o[t.name]=r.jointTexture;break;case e.UniformSemantic.JOINTCOUNT:o[t.name]=null===(i=r.jointNodes)||void 0===i?void 0:i.length;break;case e.UniformSemantic.MORPHWEIGHTS:o[t.name]=r.weights;break;case e.UniformSemantic.EYEPOS:o[t.name]=n.eyePos;break;case e.UniformSemantic.TIME:o[t.name]=.001*r.engine.time.timeSinceStartup}}},{key:"transparent",get:function(){return this.renderType===e.MaterialType.TRANSPARENT},set:function(t){this.renderType=t?e.MaterialType.TRANSPARENT:e.MaterialType.OPAQUE}},{key:"technique",get:function(){return this._technique},set:function(e){this._technique=e,this._values={}}}]),t}(),qn=function(e){zn(n,e);var t=Vn(n);function n(e){var r;return kn(this,n),(r=t.call(this,e))._techniquePool=void 0,r._techniquePool={},r}return Ln(n,[{key:"prepareDrawing",value:function(e,t,r){var i=this._requireTechnique(e,t,r);i&&(this._technique=i,Hn(jn(n.prototype),"prepareDrawing",this).call(this,e,t,r))}},{key:"clearTechniques",value:function(){this._techniquePool={}}},{key:"_requireTechnique",value:function(e,t,n){var r=this._getTechniqueKey(e,t,n),i=this._techniquePool[r];return i||(i=this._generateTechnique(e,t,n),this._techniquePool[r]=i),i}},{key:"_generateTechnique",value:function(){}},{key:"_getTechniqueKey",value:function(e,t){var n=null!=t.skin,r=n?t.skin.joints.length:0,i=n?"skin_":"static_";return n&&(i+="jont"+r),i}}]),n}(Yn),Kn=function(t){zn(r,t);var n=Vn(r);function r(e){var t;return kn(this,r),(t=n.call(this,e)).isValid=!1,t._uniforms=r.commonUniforms,t._attributes=r.commonAttributes,t.states=null,t.vertexShader="",t.fragmentShader="",t.version="100",t.autoConvert=!0,t.vertexPrecision="highp",t.fragmentPrecision="mediump",t.customMacros=[],t.shaderExtension100=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives","GL_EXT_draw_buffers"],t.shaderExtension300=[],t._needCompile=!0,t._recreateHeader=void 0,t._vsHeader=void 0,t._vsCode=void 0,t._fsHeader=void 0,t._fsCode=void 0,t._fogMacro=void 0,t.attribLocSet=void 0,t}return Ln(r,[{key:"compile",value:function(e,t,n,r){if(this.parseFog(e),this._needCompile){var i,o,a=null==e?void 0:e.renderHardware,s=null==a?void 0:a.isWebGL2;null===(i=r.preCompile)||void 0===i||i.call(r,this);var l=this.getAttributeDefines(e,t,n,r);if(this._recreateHeader&&(this.attributes=this.attributes,this.uniforms=this.uniforms),this._vsHeader&&!this._recreateHeader||(this._vsHeader=Rn.parseVersion(this.version)+Rn.parseShaderName((this.name||"VOID").toUpperCase()+"_VERT")+"\n"+Rn.parsePrecision(this.vertexPrecision,this.fragmentPrecision,!0)+"\n"+Rn.parseAttributeMacros(l)+"\n"+Rn.parseCustomMacros(this.customMacros)+"\n"),this._vsCode||(this._vsCode=Rn.parseShader(this.vertexShader)),this.vertexShader=this._vsHeader+this._vsCode,this._fsHeader&&!this._recreateHeader||(this._fsHeader=Rn.parseVersion(this.version)+Rn.parseShaderName((this.name||"VOID").toUpperCase()+"_FRAG")+"\n"+Rn.parseExtension(s?this.shaderExtension300:this.shaderExtension100)+Rn.parsePrecision(this.vertexPrecision,this.fragmentPrecision)+"\n"+Rn.parseAttributeMacros(l)+"\n"+Rn.parseCustomMacros(this.customMacros)+"\n"),this._fsCode||(this._fsCode=Rn.parseShader(this.fragmentShader)),this.fragmentShader=this._fsHeader+this._fsCode,this.autoConvert&&s&&"300 es"!==this.version){var c=a.capability.maxDrawBuffers;Rn.getMaxDrawBuffers(this.fragmentShader)<=c&&(this.vertexShader=Rn.convertTo300(this.vertexShader),this.fragmentShader=Rn.convertTo300(this.fragmentShader,!0))}else s||"300es"===this.version||(this.fragmentShader=Rn.compatible(this.fragmentShader));this._needCompile=!1,this._recreateHeader=!1,null===(o=r.postCompile)||void 0===o||o.call(r,this)}}},{key:"getAttributeDefines",value:function(t,n,r,i){var o=t._rhi,a=o.gl,s=[];if(!r)return s;var l,c=Object.keys(r.vertexAttributes);if(c.indexOf("TEXCOORD_0")>-1&&s.push("O3_HAS_UV"),c.indexOf("NORMAL")>-1&&s.push("O3_HAS_NORMAL"),c.indexOf("TANGENT")>-1&&s.push("O3_HAS_TANGENT"),c.indexOf("JOINTS_0")>-1&&(s.push("O3_HAS_SKIN"),null===(l=n.jointNodes)||void 0===l?void 0:l.length)){var u=o.renderStates.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),d=Math.floor((u-20)/4),f=n.jointNodes.length;f>d?o.canIUseMoreJoints?s.push("O3_USE_JOINT_TEXTURE"):A.error("component's joints count(".concat(f,") greater than device's MAX_VERTEX_UNIFORM_VECTORS number ").concat(u,", suggest joint count less than ").concat(d,"."),n):i.maxJointsNum>0&&s.push("O3_JOINTS_NUM ".concat(i.maxJointsNum))}if(c.indexOf("COLOR_0")>-1&&(s.push("O3_HAS_VERTEXCOLOR"),4===r.vertexAttributes.COLOR_0.size&&s.push("O3_HAS_VERTEXALPHA")),n.weights){var h=o.renderStates.getParameter(a.MAX_VERTEX_ATTRIBS);c.length>h&&A.warn("too many morph targets, beyond the MAX_VERTEX_ATTRIBS limit ".concat(h));var p=n.weights.length;s.push("O3_HAS_MORPH"),s.push("O3_MORPH_NUM ".concat(p)),c.indexOf("POSITION_0")>-1&&s.push("O3_MORPH_POSITION"),c.indexOf("NORMAL_0")>-1&&s.push("O3_MORPH_NORMAL"),c.indexOf("TANGENT_0")>-1&&s.push("O3_MORPH_TANGENT"),this._attributes=Fn(this.attributes,this.createMorphConfig(r,p)),this._uniforms.u_morphWeights={name:"u_morphWeights",semantic:e.UniformSemantic.MORPHWEIGHTS,type:e.DataType.FLOAT}}var m=t.scene;return m.hasFogFeature&&s.push.apply(s,function(e){return function(e){if(Array.isArray(e))return Gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(m.getFogMacro())),s}},{key:"parseFog",value:function(e){var t=e.scene;if(t.hasFogFeature){var n=t.getFogMacro();this._fogMacro!==n&&(this._needCompile=!0,this._recreateHeader=!0,this.needRecreate=!0,this._fogMacro=n)}}},{key:"createMorphConfig",value:function(t,n){for(var r=Object.keys(t.vertexAttributes),i={},o=0;o<n;o++)r.indexOf("POSITION_".concat(o))>-1&&(i["a_position".concat(o)]={name:"a_position".concat(o),semantic:"POSITION_".concat(o),type:e.DataType.FLOAT_VEC3}),r.indexOf("NORMAL_".concat(o))>-1&&(i["a_normal".concat(o)]={name:"a_normal".concat(o),semantic:"NORMAL_".concat(o),type:e.DataType.FLOAT_VEC3}),r.indexOf("TANGENT_".concat(o))>-1&&(i["a_tangent".concat(o)]={name:"a_tangent".concat(o),semantic:"TANGENT_".concat(o),type:e.DataType.FLOAT_VEC3});return i}},{key:"attributes",get:function(){return this._attributes},set:function(e){this._attributes=Fn({},r.commonAttributes,e)}},{key:"uniforms",get:function(){return this._uniforms},set:function(e){this._uniforms=Fn({},r.commonUniforms,e)}}]),r}(ln);Kn.commonAttributes={a_position:{name:"a_position",semantic:"POSITION",type:e.DataType.FLOAT_VEC3},a_uv:{name:"a_uv",semantic:"TEXCOORD_0",type:e.DataType.FLOAT_VEC2},a_normal:{name:"a_noraml",semantic:"NORMAL",type:e.DataType.FLOAT_VEC3},a_tangent:{name:"a_tangent",semantic:"TANGENT",type:e.DataType.FLOAT_VEC4},a_color:{name:"a_color",semantic:"COLOR_0",type:e.DataType.FLOAT_VEC4},a_joint:{name:"a_joint",semantic:"JOINTS_0",type:e.DataType.FLOAT_VEC4},a_weight:{name:"a_weight",semantic:"WEIGHTS_0",type:e.DataType.FLOAT_VEC4}},Kn.commonUniforms={u_localMat:{name:"u_localMat",semantic:e.UniformSemantic.LOCAL,type:e.DataType.FLOAT_MAT4},u_modelMat:{name:"u_modelMat",semantic:e.UniformSemantic.MODEL,type:e.DataType.FLOAT_MAT4},u_viewMat:{name:"u_viewMat",semantic:e.UniformSemantic.VIEW,type:e.DataType.FLOAT_MAT4},u_projMat:{name:"u_projMat",semantic:e.UniformSemantic.PROJECTION,type:e.DataType.FLOAT_MAT4},u_MVMat:{name:"u_MVMat",semantic:e.UniformSemantic.MODELVIEW,type:e.DataType.FLOAT_MAT4},u_MVPMat:{name:"u_MVPMat",semantic:e.UniformSemantic.MODELVIEWPROJECTION,type:e.DataType.FLOAT_MAT4},u_normalMat:{name:"u_normalMat",semantic:e.UniformSemantic.MODELINVERSETRANSPOSE,type:e.DataType.FLOAT_MAT3},u_cameraPos:{name:"u_cameraPos",type:e.DataType.FLOAT_VEC3,semantic:e.UniformSemantic.EYEPOS},u_time:{name:"u_time",type:e.DataType.FLOAT,semantic:e.UniformSemantic.TIME},u_jointMatrix:{name:"u_jointMatrix",semantic:e.UniformSemantic.JOINTMATRIX,type:e.DataType.FLOAT_MAT4},u_jointSampler:{name:"u_jointSampler",semantic:e.UniformSemantic.JOINTTEXTURE,type:e.DataType.SAMPLER_2D},u_jointCount:{name:"u_jointCount",semantic:e.UniformSemantic.JOINTCOUNT,type:e.DataType.FLOAT},u_fogColor:{name:"u_fogColor",type:e.DataType.FLOAT_VEC3},u_fogDensity:{name:"u_fogDensity",type:e.DataType.FLOAT},u_fogNear:{name:"u_fogNear",type:e.DataType.FLOAT},u_fogFar:{name:"u_fogFar",type:e.DataType.FLOAT}};var Qn=function(t){zn(r,t);var n=Vn(r);function r(t,i,o){var a;return kn(this,r),(a=n.call(this,t,o))._format=void 0,a._compressedFaceFilled=[0,0,0,0,0,0],a._images=void 0,a._mipMapLevel=void 0,a.needUpdateCubeTextureFace=void 0,arguments[0]instanceof Object?(a.constructorNew.apply(Bn(a),arguments),Un(a)):(a.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE),a.needUpdateCubeTextureFace=[],i&&(a.images=i),a)}return Ln(r,[{key:"constructorNew",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.TextureFormat.R8G8B8A8,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.gl,a=t.isWebGL2;if(!Wn._supportTextureFormat(r,t))throw new Error("Texture format is not supported:".concat(e.TextureFormat[r]));!i||a||Wn._isPowerOf2(n)||(A.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),i=!1);var s=Wn._getFormatDetail(r,o,a);this._glTexture=o.createTexture(),this._formatDetail=s,this._rhi=t,this._target=o.TEXTURE_CUBE_MAP,this._mipmap=i,this._width=n,this._height=n,this._format=r,this._mipmapCount=this._getMipmapCount(),s.isCompressed&&!a||this._initMipmap(!0),this.filterMode=e.TextureFilterMode.Bilinear,this.wrapModeU=this.wrapModeV=e.TextureWrapMode.Clamp,this.type=e.AssetType.Scene}},{key:"setPixelBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=this._rhi.gl,l=this._rhi.isWebGL2,c=this._formatDetail,u=c.internalFormat,d=c.baseFormat,f=c.dataType,h=c.isCompressed,p=Math.max(1,this._width>>n);if(r=r||0,i=i||0,o=o||p-r,a=a||p-i,this._bind(),h){var m=1<<n;l||this._compressedFaceFilled[e]&m?s.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,r,i,o,a,u,t):(s.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,u,o,a,0,t),this._compressedFaceFilled[e]|=m)}else s.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,r,i,o,a,d,f,t);this._unbind()}},{key:"setImageSource",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=this._rhi.gl,l=this._formatDetail,c=l.baseFormat,u=l.dataType;this._bind(),s.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,o||0,a||0,c,u,t),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,+r),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+i),this._unbind()}},{key:"getPixelBuffer",value:function(e,t,n,i,o,a){if(this._formatDetail.isCompressed)throw new Error("Unable to read compressed texture");Hn(jn(r.prototype),"_getPixelBuffer",this).call(this,e,t,n,i,o,a)}},{key:"format",get:function(){return this._format}}]),Ln(r,[{key:"updateTexture",value:function(){this.needUpdateWholeTexture=!0,this.needUpdateFilers=!0}},{key:"updateImage",value:function(e,t){this._images[0]&&(this._images[0][e]=t),this.needUpdateCubeTextureFace[e]=!0}},{key:"configMipmap",value:function(){this.images[1]?this._mipMapLevel=Math.log2(this.images[0][0].width):Wn._isPowerOf2(this._images[0][0].width)&&Wn._isPowerOf2(this._images[0][0].height)?this.filterMin===e.TextureFilter.NEAREST_MIPMAP_NEAREST||this.filterMin===e.TextureFilter.LINEAR_MIPMAP_NEAREST||this.filterMin===e.TextureFilter.NEAREST_MIPMAP_LINEAR||this.filterMin===e.TextureFilter.LINEAR_MIPMAP_LINEAR?(this.canMipmap=!0,this._mipMapLevel=Math.log2(this.images[0][0].width)):(this.canMipmap=!1,this._mipMapLevel=0):(this.canMipmap=!1,this._mipMapLevel=0,this.setFilter(e.TextureFilter.NEAREST,e.TextureFilter.NEAREST),this.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE))}},{key:"resetState",value:function(){this.images&&(this.images=this.images),Hn(jn(r.prototype),"resetState",this).call(this)}},{key:"images",get:function(){return this._images},set:function(e){this._images=e,this.updateTexture(),this.configMipmap()}},{key:"mipMapLevel",get:function(){return this._mipMapLevel}}]),r}(Wn),Jn=function(t){zn(r,t);var n=Vn(r);function r(t,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.RenderBufferDepthFormat.Depth,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];kn(this,r),(a=n.call(this,"",null))._isCube=!1,a._format=void 0,a._autoMipmap=!1;var u=t.gl,d=t.isWebGL2;if(!Wn._supportRenderBufferDepthFormat(s,t,!0))throw new Error("RenderBufferDepthFormat is not supported:".concat(e.RenderBufferDepthFormat[s]));if(c&&i!==o)throw new Error("The cube texture must have the same width and height");return!l||d||Wn._isPowerOf2(i)&&Wn._isPowerOf2(o)||(A.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),l=!1),a._glTexture=u.createTexture(),a._formatDetail=Wn._getRenderBufferDepthFormatDetail(s,u,d),a._isCube=c,a._rhi=t,a._target=c?u.TEXTURE_CUBE_MAP:u.TEXTURE_2D,a._mipmap=l,a._width=i,a._height=o,a._format=s,a._mipmapCount=a._getMipmapCount(),a._initMipmap(c),a.filterMode=e.TextureFilterMode.Bilinear,a.wrapModeU=a.wrapModeV=e.TextureWrapMode.Clamp,a.type=e.AssetType.Scene,a}return Ln(r,[{key:"format",get:function(){return this._format}},{key:"autoGenerateMipmaps",get:function(){return this._autoMipmap},set:function(e){this._autoMipmap=e}}]),r}(Wn),Zn=function(t){zn(r,t);var n=Vn(r);function r(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kn(this,r),(i=n.call(this,t)).config=o,i._frameBuffer=void 0,i._MSAAFrameBuffer=void 0,i._rhi=void 0,i._width=void 0,i._height=void 0,i._antiAliasing=void 0,i._colorTextures=void 0,i._depthTexture=void 0,i._depthRenderBuffer=void 0,i._MSAAColorRenderBuffers=[],i._MSAADepthRenderBuffer=void 0,i._oriDrawBuffers=void 0,i._blitDrawBuffers=void 0,i.clearColor=[0,0,0,0],i.cubeTexture=void 0,i.texture=void 0,i.depthTexture=void 0,i.colorBufferFloat=void 0,i._samples=void 0,i.textureConfig={magFilter:e.TextureFilter.LINEAR,minFilter:e.TextureFilter.LINEAR,wrapS:e.TextureWrapMode.CLAMP_TO_EDGE,wrapT:e.TextureWrapMode.CLAMP_TO_EDGE},arguments[0]instanceof Object?(i.constructorNew.apply(Bn(i),arguments),Un(i)):(i._width=o.width||1024,i._height=o.height||1024,i.clearColor=o.clearColor||[0,0,0,0],i._samples=o.samples||1,i.colorBufferFloat=!!o.colorBufferFloat,!o.isMulti&&i.initTexture(),i)}return Ln(r,[{key:"constructorNew",value:function(t,n,r,i){var o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.RenderBufferDepthFormat.Depth,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=t.gl;if(!(a instanceof Jn||Wn._supportRenderBufferDepthFormat(a,t,!1)))throw new Error("RenderBufferDepthFormat is not supported:".concat(e.RenderBufferDepthFormat[a]));if((null===(o=i)||void 0===o?void 0:o.length)>1&&!t.canIUse(e.GLCapabilityType.drawBuffers))throw new Error("MRT is not supported");if(this._colorTextures=i?i instanceof Array?i.slice():[i]:[],this._colorTextures.some((function(e){return e.width!==n||e.height!==r})))throw new Error("RenderColorTexture's size must as same as RenderTarget");if(a instanceof Jn&&(a.width!==n||a.height!==r))throw new Error("RenderDepthTexture's size must as same as RenderTarget");if(this._colorTextures.length>1&&this._colorTextures.some((function(e){return e._isCube})))throw new Error("MRT+Cube+[,MSAA] is not supported");var c=t.capability.maxAntiAliasing;s>c&&(A.warn("MSAA antiAliasing exceeds the limit and is automatically downgraded to:".concat(c)),s=c),this._rhi=t,this._width=n,this._height=r,this._frameBuffer=l.createFramebuffer(),this._antiAliasing=s,a instanceof Jn&&(this._depthTexture=a),this._bindMainFBO(a),s>1&&(this._MSAAFrameBuffer=l.createFramebuffer(),this._bindMSAAFBO(a)),this.type=e.AssetType.Scene}},{key:"getColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._colorTextures[e]}},{key:"destroy",value:function(){var e=this._rhi.gl;e.deleteFramebuffer(this._frameBuffer),this._depthRenderBuffer&&e.deleteRenderbuffer(this._depthRenderBuffer),this._MSAAFrameBuffer&&e.deleteFramebuffer(this._MSAAFrameBuffer),this._MSAADepthRenderBuffer&&e.deleteRenderbuffer(this._MSAADepthRenderBuffer);for(var t=0;t<this._colorTextures.length;t++)this._colorTextures[t].destroy();for(var n=0;n<this._MSAAColorRenderBuffers.length;n++)e.deleteRenderbuffer(this._MSAAColorRenderBuffers[n]);this._depthTexture&&this._depthTexture.destroy(),this._frameBuffer=null,this._colorTextures.length=0,this._depthTexture=null,this._depthRenderBuffer=null,this._MSAAFrameBuffer=null,this._MSAAColorRenderBuffers.length=0,this._MSAADepthRenderBuffer=null}},{key:"_activeRenderTarget",value:function(){var e=this._rhi.gl;this._MSAAFrameBuffer?e.bindFramebuffer(e.FRAMEBUFFER,this._MSAAFrameBuffer):e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer)}},{key:"_setRenderTargetFace",value:function(e){var t=this._rhi.gl,n=this._colorTextures[0],r=this._depthTexture;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),(null==n?void 0:n._isCube)&&t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+e,n._glTexture,0),(null==r?void 0:r._isCube)&&t.framebufferTexture2D(t.FRAMEBUFFER,r._formatDetail.attachment,t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r._glTexture,0),this._activeRenderTarget()}},{key:"_blitRenderTarget",value:function(){var e=this._rhi.gl,t=e.COLOR_BUFFER_BIT|(this._depthTexture?e.DEPTH_BUFFER_BIT:0),n=this._colorTextures.length;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._MSAAFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._frameBuffer);for(var r=0;r<n;r++){var i=e.COLOR_ATTACHMENT0+r;this._blitDrawBuffers[r]=i,e.readBuffer(i),e.drawBuffers(this._blitDrawBuffers),e.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,t,e.NEAREST),this._blitDrawBuffers[r]=e.NONE}e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"_bindMainFBO",value:function(e){var t=this._rhi.gl,n=this._rhi.isWebGL2,r=this._colorTextures.length,i=new Array(r);t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer);for(var o=0;o<r;o++){var a=this._colorTextures[o],s=t.COLOR_ATTACHMENT0+o;i[o]=s,a._isCube||t.framebufferTexture2D(t.FRAMEBUFFER,s,t.TEXTURE_2D,a._glTexture,0)}if(r>1&&t.drawBuffers(i),this._oriDrawBuffers=i,e instanceof Jn)e._isCube||t.framebufferTexture2D(t.FRAMEBUFFER,e._formatDetail.attachment,t.TEXTURE_2D,e._glTexture,0);else if(this._antiAliasing<=1){var l=Wn._getRenderBufferDepthFormatDetail(e,t,n),c=l.internalFormat,u=l.attachment,d=t.createRenderbuffer();this._depthRenderBuffer=d,t.bindRenderbuffer(t.RENDERBUFFER,d),t.renderbufferStorage(t.RENDERBUFFER,c,this._width,this._height),t.framebufferRenderbuffer(t.FRAMEBUFFER,u,t.RENDERBUFFER,d)}t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}},{key:"_bindMSAAFBO",value:function(e){var t=this._rhi.gl,n=this._rhi.isWebGL2,r=t.createRenderbuffer(),i=this._colorTextures.length;this._blitDrawBuffers=new Array(i),this._MSAADepthRenderBuffer=r,t.bindFramebuffer(t.FRAMEBUFFER,this._MSAAFrameBuffer);for(var o=0;o<i;o++){var a=t.createRenderbuffer();this._MSAAColorRenderBuffers[o]=a,this._blitDrawBuffers[o]=t.NONE,t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorageMultisample(t.RENDERBUFFER,this._antiAliasing,this._colorTextures[o]._formatDetail.internalFormat,this._width,this._height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+o,t.RENDERBUFFER,a)}t.drawBuffers(this._oriDrawBuffers);var s=e instanceof Jn?e._formatDetail:Wn._getRenderBufferDepthFormatDetail(e,t,n),l=s.internalFormat,c=s.attachment;t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorageMultisample(t.RENDERBUFFER,this._antiAliasing,l,this._width,this._height),t.framebufferRenderbuffer(t.FRAMEBUFFER,c,t.RENDERBUFFER,r),this._checkFrameBuffer(),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}},{key:"_checkFrameBuffer",value:function(){var e=this._rhi.gl,t=this._rhi.isWebGL2,n=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error(" Height and width of the attachment are not the same.");case e.FRAMEBUFFER_UNSUPPORTED:throw new Error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer")}if(t&&n===e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE)throw new Error("The values of gl.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.")}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"colorTextureCount",get:function(){return this._colorTextures.length}},{key:"depthTextureNew",get:function(){return this._depthTexture}},{key:"antiAliasing",get:function(){return this._antiAliasing}},{key:"samples",get:function(){return this._samples},set:function(e){this._samples=e,this.needRecreate=!0}},{key:"isMulti",get:function(){return this.config.isMulti}}]),Ln(r,[{key:"initTexture",value:function(){var e=this.config;e.isCube?this.cubeTexture=new Qn(name+"_render_texture",null,this.textureConfig):(this.texture=new Xn(name+"_render_texture",null,this.textureConfig),e.enableDepthTexture&&(this.depthTexture=new Xn(name+"_depth_texture",null,this.textureConfig)))}}]),r}(ln),$n=function(e){zn(n,e);var t=Vn(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return kn(this,n),(r=t.call(this,e,Nn(Nn({},i),{},{isMulti:!0})))._textures=[],i.enableDepthTexture&&(r.depthTexture=new Xn("depth_texture",null,r.textureConfig)),r}return Ln(n,[{key:"addTexColor",value:function(e){this._textures.push(e)}},{key:"textures",get:function(){return this._textures}}]),n}(Zn),er=function(t){zn(r,t);var n=Vn(r);function r(t,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.RenderBufferColorFormat.R8G8B8A8,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];kn(this,r),(a=n.call(this,"",null))._isCube=!1,a._format=void 0,a._autoMipmap=!1;var u=t.gl,d=t.isWebGL2;if(!Wn._supportRenderBufferColorFormat(s,t))throw new Error("RenderBufferColorFormat is not supported:".concat(e.RenderBufferColorFormat[s]));if(c&&i!==o)throw new Error("The cube texture must have the same width and height");return!l||d||Wn._isPowerOf2(i)&&Wn._isPowerOf2(o)||(A.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),l=!1),a._glTexture=u.createTexture(),a._formatDetail=Wn._getRenderBufferColorFormatDetail(s,u,d),a._isCube=c,a._rhi=t,a._target=c?u.TEXTURE_CUBE_MAP:u.TEXTURE_2D,a._mipmap=l,a._width=i,a._height=o,a._format=s,a._mipmapCount=a._getMipmapCount(),a._initMipmap(c),a.filterMode=e.TextureFilterMode.Bilinear,a.wrapModeU=a.wrapModeV=e.TextureWrapMode.Clamp,a.type=e.AssetType.Scene,a}return Ln(r,[{key:"format",get:function(){return this._format}},{key:"autoGenerateMipmaps",get:function(){return this._autoMipmap},set:function(e){this._autoMipmap=e}}]),Ln(r,[{key:"getPixelBuffer",value:function(e,t,n,i,o,a){Hn(jn(r.prototype),"_getPixelBuffer",this).call(this,e,t,n,i,o,a)}}]),r}(Wn);function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e,t,n){return t&&nr(e.prototype,t),n&&nr(e,n),e}function ir(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=or(e);if(t){var i=or(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ar(this,n)}}function lr(e,t,n){return(lr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=or(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ur=0,dr=function(e){ir(n,e);var t=sr(n);function n(e){var r;return tr(this,n),(r=t.call(this,e||"DEFAULT_MESH_NAME_"+ur++)).primitives=void 0,r.weights=void 0,r.primitives=[],r}return rr(n,[{key:"updatePrimitiveWeightsIndices",value:function(e){this.primitives.forEach((function(t){t.updateWeightsIndices(e)}))}}]),n}(ln),fr=0,hr=function(e){ir(n,e);var t=sr(n);function n(e){var r;return tr(this,n),(r=t.call(this,e||"DEFAULT_SKIN_NAME_"+fr++)).inverseBindMatrices=void 0,r.joints=void 0,r.skeleton=void 0,r.inverseBindMatrices=[],r.joints=[],r.skeleton="none",r}return n}(ln),pr=function(e){ir(n,e);var t=sr(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tr(this,n),(r=t.call(this,e,i))._mesh=void 0,r._instanceMaterials=void 0,r._sharedMaterials=void 0,r._mesh=null,r._instanceMaterials=[],r._sharedMaterials=[],r.mesh=i.mesh,r}return rr(n,[{key:"setMaterial",value:function(e,t){this._instanceMaterials[e]=t}},{key:"getInstanceMaterial",value:function(e){return this._instanceMaterials[e]}},{key:"getSharedMaterial",value:function(e){return this._sharedMaterials[e]}},{key:"render",value:function(e){var t=this._mesh;if(t)for(var n=e.sceneRenderer,r=t.primitives,i=0,o=r.length;i<o;i++){var a=r[i],s=this._instanceMaterials[i]||this._sharedMaterials[i];s?n.pushPrimitive(this,a,s):A.error("Primitive has no material: "+a.name)}}},{key:"destroy",value:function(){lr(or(n.prototype),"destroy",this).call(this),this._mesh=null,this._instanceMaterials=[],this._sharedMaterials=[]}},{key:"mesh",get:function(){return this._mesh},set:function(e){this._mesh=e;var t=e.primitives;this._sharedMaterials=[],this._instanceMaterials=[];var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._sharedMaterials.push(i.material)}}catch(e){r.e(e)}finally{r.f()}}}]),n}(fn),mr=function(t){ir(r,t);var n=sr(r);function r(e){var t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tr(this,r),(i=n.call(this,e,o))._hasInitJoints=!1,i.matrixPalette=void 0,i.jointNodes=void 0,i.jointTexture=void 0,i._mat=void 0,i._weights=void 0,i.weightsIndices=[],i._skin=void 0,i._useJointTexture=!1,i._mat=Ee.create(),i._weights=null,i._skin=null,i.skin=o.skin,i.setWeights(null===(t=o.mesh)||void 0===t?void 0:t.weights),i}return rr(r,[{key:"setWeights",value:function(e){if(this._weights=e,e){for(var t=e.length,n=0;n<t;n++)this.weightsIndices[n]=n;for(var r=this.weightsIndices,i=0;i<t-1;i++)for(var o=i+1;o<t;o++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a,a=r[i],r[i]=r[o],r[o]=a}this.mesh.updatePrimitiveWeightsIndices(r)}}},{key:"_initJoints",value:function(){var e;if(this._skin){for(var t=this._skin.joints,n=[],r=t.length-1;r>=0;r--)n[r]=this.findByNodeName(this.node,t[r]);this.matrixPalette=new Float32Array(16*n.length),this.jointNodes=n;var i=null===(e=this.scene.activeCameras[0])||void 0===e?void 0:e.renderHardware;if(i){var o=i.renderStates.getParameter(i.gl.MAX_VERTEX_UNIFORM_VECTORS),a=Math.floor((o-20)/4);t.length>a&&i.canIUseMoreJoints&&(this._useJointTexture=!0)}}}},{key:"findByNodeName",value:function(e,t){return e?e.findChildByName(t)||this.findByNodeName(e.parentNode,t):null}},{key:"_findParent",value:function(e,t){if(e){var n=e.parentNode;return n?n.name===t?n:n.findChildByName(t)||this._findParent(n,t):null}return null}},{key:"update",value:function(){if(this._hasInitJoints||(this._initJoints(),this._hasInitJoints=!0),this._skin){for(var e=this.jointNodes,t=this._skin.inverseBindMatrices,n=this.matrixPalette,r=this.node.getInvModelMatrix(),i=this._mat,o=e.length-1;o>=0;o--)Ee.identity(i),e[o]?Ee.multiply(i,e[o].transform.worldMatrix,t[o]):Ee.copy(i,t[o]),Ee.multiply(i,r,i),n.set(i,16*o);this._useJointTexture&&this.createJointTexture()}}},{key:"createJointTexture",value:function(){if(!this.jointTexture){var t,n=null===(t=this.node.scene.activeCameras[0])||void 0===t?void 0:t.renderHardware;if(!n)return;this.jointTexture=new Xn(n,4,this.jointNodes.length,e.TextureFormat.R32G32B32A32,!1)}this.jointTexture.setPixelBuffer(this.matrixPalette)}},{key:"skin",get:function(){return this._skin},set:function(e){this._skin=e}},{key:"weights",get:function(){return this._weights}}]),r}(pr),vr=function(e){ir(n,e);var t=sr(n);function n(e,r){var i;return tr(this,n),(i=t.call(this,e,r))._lods=void 0,i._lods=[],i}return rr(n,[{key:"addLod",value:function(e,t){t.enabled=!1,this._lods.push({distance:e,rendererAbility:t}),this._lods.sort((function(e,t){return t.distance-e.distance}))}},{key:"render",value:function(e){if(!(this._lods.length<=0)){for(var t=e.eyePos,n=this.node.worldPosition,r=xt.distance(t,n),i=this._lods,o=0,a=i.length-1;a>=0;a--)if(r<i[a].distance){o=a;break}i[o].rendererAbility.render(e)}}}]),n}(fn);function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t,n){return t&&_r(e.prototype,t),n&&_r(e,n),e}function br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wr(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xr(e);if(t){var i=xr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wr(this,n)}}!function(e){e[e.ONCE=0]="ONCE",e[e.LOOP=1]="LOOP"}(e.WrapMode||(e.WrapMode={})),function(e){e[e.FINISHED=0]="FINISHED",e[e.LOOP_END=1]="LOOP_END",e[e.FRAME_EVENT=2]="FRAME_EVENT"}(e.AnimationEvent||(e.AnimationEvent={})),function(e){e[e.LINEAR=0]="LINEAR",e[e.CUBICSPLINE=1]="CUBICSPLINE",e[e.STEP=2]="STEP"}(e.InterpolationType||(e.InterpolationType={}));var Ar=function(t){br(r,t);var n=Tr(r);function r(){var e;return gr(this,r),(e=n.call(this)).layerWeight=void 0,e.mixTagetLayer=void 0,e.isFading=void 0,e.fadeDeltaTime=void 0,e.crossFadeDuration=void 0,e.fadeDuration=void 0,e.crossFadeDeltaTime=void 0,e.isMixLayer=void 0,e.hasMixLayer=void 0,e.mixNode=void 0,e._activedEvents=void 0,e._animClip=void 0,e._isPlaying=void 0,e._wrapMode=void 0,e._channelStates=void 0,e._animClipLength=void 0,e._frameEvents=void 0,e.layerWeight=1,e._activedEvents=[],e}return yr(r,[{key:"isPlaying",get:function(){return this._animClip&&this._isPlaying}}]),yr(r,[{key:"canMix",value:function(e,t){if(!this._animClip||!this._isPlaying||this.isMixLayer||this.isFading)return!1;if(this._animClip.getChannelCount()!==e.getChannelCount())return!1;for(var n=this._animClip.getChannelCount()-1;n>=0;n--){var r=this._animClip.getChannelObject(n),i=this._findChannelTarget(t,r.target),o=e.getChannelObject(n);if(i!==this._findChannelTarget(t,o.target))return!1}return!0}},{key:"mix",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this._isPlaying=t.isPlaying,this._animClip=e,this._wrapMode=void 0!==i.wrapMode?i.wrapMode:t._wrapMode,this._addEvents(i),this._channelStates=[],this._animClipLength=0,this._isPlaying){for(var o=t._channelStates,a=this._animClip.getChannelCount(),s=a-1;s>=0;s--){var l=this._animClip.getChannelObject(s),c=this._findChannelTarget(r,l.target);this._channelStates[s]={frameTime:0,currentFrame:0,currentValue:this._animClip.createChannelValue(s),mixWeight:c?1:0},o[s].mixWeight=void 0===o[s].mixWeight?1:o[s].mixWeight,1===o[s].mixWeight&&(o[s].mixWeight=c?0:1);var u=this._animClip.getChannelTimeLength(s);this._animClipLength=this._animClipLength>u?this._animClipLength:u}return!0}return!1}},{key:"removeMixWeight",value:function(){for(var e=this._channelStates.length-1;e>=0;e--)1===this._channelStates[e].mixWeight&&(this.mixTagetLayer._channelStates[e].mixWeight=1)}},{key:"play",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{wrapMode:e.WrapMode.LOOP};if(this._isPlaying=!!t,this._animClip=t,this._wrapMode=void 0!==r.wrapMode?r.wrapMode:e.WrapMode.LOOP,this._addEvents(r),this._channelStates=[],this._animClipLength=0,this._isPlaying){for(var i=this._animClip.getChannelCount(),o=[],a=i-1;a>=0;a--){var s=this._animClip.getChannelObject(a),l=this._findChannelTarget(n,s.target);l||A.warn("Can not find channel target:"+s.target.id),this._channelStates[a]={frameTime:0,currentFrame:0,currentValue:this._animClip.createChannelValue(a)},o[a]={targetObject:l,path:s.target.path,outputSize:s.sampler.outputSize};var c=this._animClip.getChannelTimeLength(a);this._animClipLength=this._animClipLength>c?this._animClipLength:c}return o}return!1}},{key:"stop",value:function(t){this._animClip&&this._isPlaying&&(t?this._isPlaying=!1:this._wrapMode=e.WrapMode.ONCE)}},{key:"updateState",value:function(e){if(this._animClip&&this._isPlaying){this.isFading?(this.fadeDeltaTime+=e,this.layerWeight=1-this.fadeDeltaTime/this.fadeDuration,this.layerWeight<=0&&(this._isPlaying=!1)):this.crossFadeDuration&&(this.crossFadeDeltaTime+=e,this.layerWeight=this.crossFadeDeltaTime/this.crossFadeDuration,this.layerWeight>=1&&(this.layerWeight=1,delete this.crossFadeDuration)),e/=1e3,this._activeEvents(e);for(var t=0,n=this._animClip.getChannelCount()-1;n>=0;n--)this._updateChannelState(e,n)&&t++;0===t&&(this._isPlaying=!1,this.isMixLayer&&this.removeMixWeight())}}},{key:"getChannelLayerWeight",value:function(e){return(this.hasMixLayer||this.isMixLayer)&&e<this._channelStates.length?this._channelStates[e].mixWeight*(this.isMixLayer?this.mixTagetLayer.layerWeight:this.layerWeight):this.layerWeight}},{key:"getChannelValue",value:function(e){return this._channelStates[e].currentValue}},{key:"triggerEvents",value:function(){var e=this;this._activedEvents&&this._activedEvents.forEach((function(t){e.trigger(t)})),this._activedEvents.length=0}},{key:"jumpToFrame",value:function(e){for(var t=this._animClip.getChannelCount()-1;t>=0;t--)this._channelStates[t].frameTime=0,this._updateChannelState(e,t)}},{key:"_updateChannelState",value:function(t,n){var r=this._animClip,i=this._channelStates[n],o=r.getChannelTimeLength(n);if(i.frameTime+=t,i.frameTime>o)switch(this._wrapMode){case e.WrapMode.ONCE:i.frameTime=o;break;case e.WrapMode.LOOP:i.frameTime=i.frameTime%this._animClipLength;break;default:A.error("Unknown Anim wrap Mode: "+this._wrapMode)}if(i.mixWeight&&0===i.mixWeight)return!0;var a=Math.min(i.frameTime,o),s=this._getKeyAndAlpha(r.getChannelObject(n),a);return i.currentValue=r.evaluate(i.currentValue,n,s.currentKey,s.nextKey,s.alpha),!(this._wrapMode===e.WrapMode.ONCE&&i.frameTime>=o)}},{key:"_addEvents",value:function(t){var n=this;if(this.removeAllEventListeners(),this._frameEvents=[],t.events)for(var r=0,i=function(i){var o=t.events[i],a=o.type;o.type===e.AnimationEvent.FRAME_EVENT&&(a="frameEvent"+r,r++,n._frameEvents.push({eventType:a,triggerTime:o.triggerTime,triggered:!1})),n.addEventListener(a,(function(){o.callback()}))},o=t.events.length-1;o>=0;o--)i(o)}},{key:"_activeEvents",value:function(t){if(this._frameEvents.length>0&&this._channelStates.length>0)for(var n=this._channelStates[0].frameTime+t,r=this._frameEvents.length-1;r>=0;r--){var i=this._frameEvents[r];!i.triggered&&n>i.triggerTime&&(this._activedEvents.push(new g(i.eventType,this)),i.triggered=!0)}if(this._channelStates.length>0&&this._channelStates[0].frameTime+t>=this._animClip.getChannelTimeLength(0))if(this._wrapMode===e.WrapMode.LOOP){if(this._frameEvents.length>0)for(var o=this._frameEvents.length-1;o>=0;o--)this._frameEvents[o].triggered=!1;this.hasEvent(e.AnimationEvent.LOOP_END)&&this._activedEvents.push(new g(e.AnimationEvent.LOOP_END,this))}else this.hasEvent(e.AnimationEvent.FINISHED)&&this._activedEvents.push(new g(e.AnimationEvent.FINISHED,this))}},{key:"_findChannelTarget",value:function(e,t){var n=t.id,r=null;return r=e.name===n?e:e.findChildByName(n),"weights"===t.path?r.findAbilityByType(mr):r}},{key:"_getKeyAndAlpha",value:function(t,n){for(var r=0,i=0,o=0,a=t.sampler.input,s=a.length,l=s-1;l>=0;l--)if(n>a[l]){r=n-a[l],i=l;break}if((o=i+1)>=s)switch(this._wrapMode){case e.WrapMode.ONCE:o=s-1;break;case e.WrapMode.LOOP:o=0}var c=a[o]-a[i];return{currentKey:i,nextKey:o,alpha:o===i||c<1e-5?1:r/c}}}]),r}(_),Er=function(e){br(n,e);var t=Tr(n);function n(e){var r;return gr(this,n),(r=t.call(this,e))._onUpdateIndex=-1,r._animSet=void 0,r._animLayers=void 0,r._timeScale=void 0,r._channelTargets=void 0,r._animSet={},r._animLayers=[new Ar],r._timeScale=1,r}return yr(n,[{key:"timeScale",get:function(){return this._timeScale},set:function(e){e>0&&(this._timeScale=e)}}],[{key:"lerp",value:function(e,t,n,r,i){switch(i){case 1:e=t*(1-r)+n*r;break;case 4:tt.slerp(e,t,n,r);break;default:for(var o=i;o>=0;o--)e[o]=t[o]*(1-r)+n[o]*r}return e}}]),yr(n,[{key:"update",value:function(e){if(this.isPlaying()){e*=this._timeScale;for(var t=this._animLayers.length-1;t>=0;t--)this._animLayers[t].updateState(e);this._updateValues();for(var n=this._animLayers.length-1;n>=0;n--){var r=this._animLayers[n];r.triggerEvents(),r.isPlaying||!r.isFading&&!r.isMixLayer||(this._animLayers.splice(n,1),this._removeRefMixLayers(r))}}}},{key:"addAnimationClip",value:function(e,t){this._animSet[t]=e}},{key:"removeAnimationClip",value:function(e){this._animSet[e]&&delete this._animSet[e]}},{key:"getAnimationClipLength",value:function(e){var t=this._animSet[e];return t?t.getChannelTimeLength(0):0}},{key:"getAnimationClip",value:function(e){return this._animSet[e]||null}},{key:"isPlaying",value:function(){for(var e=this._animLayers.length-1;e>=0;e--)if(this._animLayers[e].isPlaying)return!0;return!1}},{key:"playAnimationClip",value:function(e,t){var n=this._animSet[e];if(n){for(var r=null,i=this._animLayers.length-1;i>=0;i--)if(!this._animLayers[i].isFading&&!this._animLayers[i].isMixLayer){r=this._animLayers[i];break}r||(r=new Ar,this._animLayers.push(r)),this._removeRefMixLayers(r),this._channelTargets=r.play(n,this.node,t)}else A.error("can not find anim clip: "+e)}},{key:"crossFade",value:function(e,t,n){var r=this._animSet[e];if(r)if(!t||t<0)A.error("crossFadeDuration can not less than 0!");else{for(var i=null,o=this._animLayers.length-1;o>=0;o--)if(this._animLayers[o].canMix(r,this.node)){i=this._animLayers[o];break}if(i){for(var a=this._animLayers.length-1;a>=0;a--)this._animLayers[a].isFading&&this._animLayers.splice(a,1);i.isFading=!0,i.fadeDuration=t,i.fadeDeltaTime=0;var s=new Ar;s.crossFadeDuration=t,s.crossFadeDeltaTime=0,s.play(r,this.node,n),this._animLayers.push(s)}else this.playAnimationClip(e,n)}else A.error("can not find anim clip: "+e)}},{key:"mix",value:function(e,t,n){var r=this._animSet[e];if(r){var i=this.node.findChildByName(t);if(i){for(var o=null,a=this._animLayers.length-1;a>=0;a--)if(this._animLayers[a].canMix(r,this.node)){o=this._animLayers[a];break}if(o){this._removeRefMixLayers(null,i),o.hasMixLayer=!0;var s=new Ar;s.isMixLayer=!0,s.mixTagetLayer=o,s.mixNode=i,s.mix(r,o,this.node,i,n),this._animLayers.push(s)}}else A.error("can not find mix bone!")}else A.error("can not find anim clip: "+e)}},{key:"stop",value:function(e){for(var t=this._animLayers.length-1;t>=0;t--)this._animLayers[t].isFading?this._animLayers.splice(t,1):this._animLayers[t].stop(e)}},{key:"jumpToFrame",value:function(e){e/=1e3;for(var t=this._animLayers.length-1;t>=0;t--)this._animLayers[t].jumpToFrame(e);this._updateValues()}},{key:"_removeRefMixLayers",value:function(e,t){if(e&&e.hasMixLayer)for(var n=this._animLayers.length-1;n>=0;n--){var r=this._animLayers[n];r.isMixLayer&&r.mixTagetLayer===e&&(r.removeMixWeight(),this._animLayers.splice(n,1))}if(t)for(var i=this._animLayers.length-1;i>=0;i--){var o=this._animLayers[i];o.isMixLayer&&(o.mixNode===t||o.mixNode.findChildByName(t)||t.findChildByName(o.mixNode))&&(o.removeMixWeight(),this._animLayers.splice(i,1))}}},{key:"_updateValues",value:function(){if(0!==this._animLayers.length&&this._channelTargets)for(var e=this._channelTargets.length-1;e>=0;e--){var t=this._channelTargets[e],n=this._getChannelValue(e,t.outputSize),r=t.targetObject,i=t.path;"weights"===i?r.setWeights(n):r[i]=n}}},{key:"_getChannelValue",value:function(e,t){for(var r=[],i=[],o=this._animLayers.length-1;o>=0;o--){var a=this._animLayers[o].getChannelLayerWeight(e);a>0&&(r.push(a),i.push(this._animLayers[o].getChannelValue(e)))}return 1===i.length?i[0]:2===i.length?n.lerp(i[0],i[0],i[1],r[1],t):(A.error("Can not get channel value!"),!1)}},{key:"_onEnable",value:function(){this.scene._componentsManager.addOnUpdateAnimations(this)}},{key:"_onDisable",value:function(){this.scene._componentsManager.removeOnUpdateAnimations(this)}}]),n}(Kt),Or=function(t){br(r,t);var n=Tr(r);function r(e){var t;return gr(this,r),(t=n.call(this,e)).samplers=void 0,t.channels=void 0,t.samplers=[],t.channels=[],t}return yr(r,[{key:"addSampler",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.InterpolationType.LINEAR;i===e.InterpolationType.CUBICSPLINE&&(r<=4?i=e.InterpolationType.LINEAR:r/=3);var o={input:t,output:n,outputSize:r,interpolation:i};this.samplers.push(o)}},{key:"addChannel",value:function(e,t,n){var r={sampler:this.samplers[e],target:{id:t,path:n}};this.channels.push(r)}},{key:"getChannelCount",value:function(){return this.channels.length}},{key:"getChannelObject",value:function(e){return this.channels[e]}},{key:"getFrameCount",value:function(e){return this.channels[e].sampler.input.length}},{key:"getFrameTime",value:function(e,t){return this.channels[e].sampler.input[t]}},{key:"getChannelTimeLength",value:function(e){var t=this.channels[e].sampler,n=t.input.length;return t.input[n-1]}},{key:"createChannelValue",value:function(e){var t=this.channels[e].sampler;return new Float32Array(t.outputSize)}},{key:"evaluate",value:function(t,n,r,i,o){var a=this.channels[n],s=a.sampler.output,l=a.sampler.outputSize;switch(a.sampler.interpolation){case e.InterpolationType.CUBICSPLINE:this.evaluateCubicSpline(t,s,l,r,i,o);break;case e.InterpolationType.LINEAR:this.evaluateLinear(t,s,l,r,i,o)}return t}},{key:"evaluateCubicSpline",value:function(e,t,n,r,i,o){for(var a=o*o,s=o*a,l=n;l>=0;l--){var c=t[r*n*3+l],u=t[r*n*3+n+l],d=t[r*n*3+2*n+l],f=t[i*n*3+n+l];e[l]=u*(2*s-3*a+1)+f*(-2*s+3*a)+c*(s-2*a+o)+d*(s-a)}}},{key:"evaluateLinear",value:function(e,t,n,r,i,o){switch(n){case 1:e[0]=t[r]*(1-o)+t[i]*o;break;case 4:var a=tt.fromValues(t[r*n],t[r*n+1],t[r*n+2],t[r*n+3]),s=tt.fromValues(t[i*n],t[i*n+1],t[i*n+2],t[i*n+3]);tt.slerp(e,a,s,o);break;default:for(var l=n;l>=0;l--)e[l]=t[r*n+l]*(1-o)+t[i*n+l]*o}}}]),r}(ln);function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cr(e,t,n){return t&&Sr(e.prototype,t),n&&Sr(e,n),e}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}var Dr=function(){function e(){Mr(this,e),this._nextId=void 0,this.tweeners=void 0,this._nextId=0,this.tweeners={}}return Cr(e,[{key:"getId",value:function(){return this._nextId++}},{key:"add",value:function(e){e.id||(e.id=this.getId()),this.tweeners[e.id]=e}},{key:"update",value:function(e){for(var t in this.tweeners){var n=this.tweeners[t];n.update(e),n._played&&n._paused&&!n.preserved&&delete this.tweeners[t]}}}]),e}(),Nr={Restart:0,Yoyo:1},zr="function"==typeof Float32Array;function jr(e,t){return 1-3*t+3*e}function Br(e,t){return 3*t-6*e}function Ur(e){return 3*e}function Vr(e,t,n){return((jr(t,n)*e+Br(t,n))*e+Ur(t))*e}function Hr(e,t,n){return 3*jr(t,n)*e*e+2*Br(t,n)*e+Ur(t)}function Gr(e){return e}function Wr(e,t,n,r){return n*e/r+t}function Xr(e,t,n,r){return n-Yr(r-e,0,n,r)+t}function Yr(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}var qr,Kr,Qr,Jr,Zr,$r=Object.freeze({__proto__:null,linear:Wr,easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){var i;return null!==(i=0===e)?i:{b:n*Math.pow(2,10*(e/r-1))+t}},easeOutExpo:function(e,t,n,r){var i;return null!==(i=e===r)?i:t+{c:n*(1-Math.pow(2,-10*e/r))+t}},easeInOutExpo:function(e,t,n,r){return(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i,o,a;return a=1.70158,0===e||(e/=r),(o=0)||(o=.3*r),(i=n)<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)+t},easeOutElastic:function(e,t,n,r){var i,o,a;return a=1.70158,0===e||(e/=r),(o=0)||(o=.3*r),(i=n)<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/o)+n+t},easeInOutElastic:function(e,t,n,r){var i,o,a;return a=1.70158,0===e||(e/=r/2),(o=0)||(o=r*(.3*1.5)),(i=n)<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/o)*.5+n+t},easeInBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:Xr,easeOutBounce:Yr,easeInOutBounce:function(e,t,n,r){return e<r/2?.5*Xr(2*e,0,n,r)+t:.5*Yr(2*e-r,0,n,r)+.5*n+t},bezierEasing:function(e,t,n,r){var i=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return Gr;for(var i=zr?new Float32Array(11):new Array(11),o=0;o<11;++o)i[o]=Vr(.1*o,e,n);function a(t){for(var r=0,o=1;10!==o&&i[o]<=t;++o)r+=.1;--o;var a=r+(t-i[o])/(i[o+1]-i[o])*.1,s=Hr(a,e,n);return s>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var o=Hr(t,n,r);if(0===o)return t;t-=(Vr(t,n,r)-e)/o}return t}(t,a,e,n):0===s?a:function(e,t,n,r,i){var o,a,s=0;do{(o=Vr(a=t+(n-t)/2,r,i)-e)>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+.1,e,n)}return function(e){return 0===e||1===e?e:Vr(a(e),t,r)}}(e,t,n,r);return function(e,t,n,r){return n*i(e/r)+t}}}),ei=function(){},ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lr(e);if(t){var i=Lr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fr(this,n)}}(n);function n(e,r,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return Mr(this,n),t.call(this,e,r,i,o,a,s)}return Cr(n,[{key:"duration",value:function(){return-1===this.options.loops.count?-1:this.options.delay+this.options.loops.count*this.interval}},{key:"update",value:function(e){if(this._time+=e,!this._paused){if(this.options.delay>this._time)return!0;if(this.elapsedTime+=e,this.elapsedTime=this.elapsedTime>this.interval?this.interval:this.elapsedTime,this.options.plugin(this),this.options.onTick(this),this.elapsedTime===this.interval)if(this._remainLoops>0||this._remainLoops<=-1)switch(this.options.loops.type){case Nr.Yoyo:this.rewind=!this.rewind,this.elapsedTime=0,this.rewind||this._remainLoops--;break;case Nr.Restart:this.elapsedTime=0,this._remainLoops--}else this.stop();return!0}}}]),n}(function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Mr(this,e),this._time=void 0,this._paused=void 0,this._remainLoops=void 0,this._played=void 0,this.options=void 0,this.elapsedTime=void 0,this.interval=void 0,this.rewind=void 0,this.preserved=void 0,this.startValue=void 0,this.endValue=void 0,this.getter=void 0,this.setter=void 0,this.options=Pr({id:"",loops:{count:0,type:Nr.Yoyo},easing:Wr,delay:0,plugin:ei,pluginOptions:{},onComplete:ei,onTick:ei},o),this._time=0,this._remainLoops=this.options.loops.count||0,this._paused=!0,this._played=!1,this.rewind=!1,this.preserved=!1,this.elapsedTime=0,this.startValue=t(),this.endValue=r,this.getter=t,this.setter=n,this.interval=i}return Cr(e,[{key:"duration",value:function(){}},{key:"update",value:function(){}},{key:"setLoops",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nr.Yoyo;return this.options.loops={count:e,type:t},this._remainLoops=e,this}},{key:"set",value:function(e,t){return this.options=Pr(Pr({},this.options),Rr({},e,t)),this}},{key:"stop",value:function(){return this.options.onComplete(this),this._paused=!0,this}},{key:"pause",value:function(){return!this._paused&&(this._paused=!0,this)}},{key:"start",value:function(e){return e&&e.add(this),!!this._paused&&(this.elapsedTime=0,this._paused=!1,this._played=!0,this)}}]),e}()),ni=function(e){var t=e.options.easing,n=tt.create(),r=t(e.elapsedTime,0,1,e.interval);tt.slerp(n,e.startValue,e.endValue,r),e.setter(n)},ri=function(e){var t=(0,e.options.easing)(e.elapsedTime,e.startValue,e.endValue-e.startValue,e.interval);e.setter(t)},ii=function(e){return function(t){var n;switch(e){case 2:n=ft.create();break;case 3:n=xt.create();break;default:n=Ct.create()}for(var r=t.options.easing,i=0;i<e;i++){var o=t.startValue[i],a=t.endValue[i]-t.startValue[i];t.rewind&&(o=t.endValue[i],a=t.startValue[i]-t.endValue[i]),n[i]=r(t.elapsedTime,o,a,t.interval)}t.setter(n)}},oi=ii(2),ai=ii(3),si=ii(4),li=Object.freeze({__proto__:null,QuaternionPlugin:ni,FloatPlugin:ri,Vector2Plugin:oi,Vector3Plugin:ai,Vector4Plugin:si}),ci={Rotate:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.plugin=r.plugin||ni,new ti((function(){return tt.clone(e.rotation)}),(function(t){return e.rotation=t}),t,n,r,e)},Translate:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.plugin=r.plugin||ai,new ti((function(){return xt.clone(e.position)}),(function(t){return e.position=t}),t,n,r,e)},Scale:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r.plugin=r.plugin||ai,new ti((function(){return xt.clone(e.scale)}),(function(t){return e.scale=t}),t,n,r,e)},DataType:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return o.dataType===e.DataType.FLOAT_VEC2?(o.plugin=o.plugin||oi,new ti((function(){return ft.clone(t)}),n,r,i,o)):o.dataType===e.DataType.FLOAT_VEC3?(o.plugin=o.plugin||ai,new ti((function(){return xt.clone(t)}),n,r,i,o)):o.dataType===e.DataType.FLOAT_VEC4?(o.plugin=o.plugin||ai,new ti((function(){return Ct.clone(t)}),n,r,i,o)):(o.plugin=o.plugin||ri,new ti((function(){return t}),n,r,i,o))}};function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fi(e,t,n){return t&&di(e.prototype,t),n&&di(e,n),e}function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mi(e);if(t){var i=mi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vi(this,n)}}function _i(e,t,n){return(_i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}!function(e){e[e.ONCE=0]="ONCE",e[e.LOOP=1]="LOOP"}(qr||(qr={})),function(e){e[e.FINISHED=0]="FINISHED",e[e.LOOP_END=1]="LOOP_END",e[e.FRAME_EVENT=2]="FRAME_EVENT"}(Kr||(Kr={})),function(e){e[e.LINEAR=0]="LINEAR",e[e.CUBICSPLINE=1]="CUBICSPLINE",e[e.STEP=2]="STEP"}(Qr||(Qr={})),(Jr=e.AnimationClipType||(e.AnimationClipType={})).Interpolation="Interpolation",Jr.Frame="Frame",Jr.Skeleton="Skeleton",Jr.AnimationComponent="AnimationComponent",function(e){e[e.PLAYING=0]="PLAYING",e[e.PAUSUE=1]="PAUSUE",e[e.STOP=2]="STOP",e[e.INIT=3]="INIT",e[e.PLAYBYANIMATOR=4]="PLAYBYANIMATOR"}(Zr||(Zr={}));var yi=function(){function e(t,n,r,i){ui(this,e),this.type=void 0,this.animClip=void 0,this.node=void 0,this.currentTime=void 0,this.hasInit=void 0,this.enabled=void 0,this.id=void 0,this.id=t,this.type=n,this.node=r,this.animClip=i,this.hasInit=!1}return fi(e,[{key:"init",value:function(){this.currentTime=0,this.enabled=!0,this.animClip.addHandler(this.id,this)}},{key:"play",value:function(){this.enabled=!0}},{key:"update",value:function(){this.hasInit||(this.init(),this.hasInit=!0)}},{key:"stop",value:function(){this.enabled=!1}},{key:"reset",value:function(){this.animClip.removeHandler(this.id),this.hasInit=!1}}]),e}(),bi=function e(t){ui(this,e),this.data=void 0,this.prev=void 0,this.next=void 0,this.data=t,this.prev=null,this.next=null},xi=function(){function e(){ui(this,e),this.head=void 0,this.length=0,this.tail=void 0,this.head=null,this.tail=null}return fi(e,[{key:"append",value:function(e){var t=new bi(e);return null==this.head?(this.head=t,this.tail=t):(this.tail.next=t,t.prev=this.tail,this.tail=t),this.length++,!0}},{key:"len",value:function(){return this.length}},{key:"insert",value:function(e,t){if(e==this.length)return this.append(t);for(var n=1,r=this.head;n<e;)r=r.next,n++;var i=r.next,o=new bi(t);return r.next=o,o.prev=r,o.next=i,i.prev=o,this.length++,!0}},{key:"remove",value:function(e){if(e<0||e>=this.length)return null;if(0!=e){for(var t=0,n=this.head;t<e;)t++,n=n.next;var r=n.prev,i=n.next;return r.next=i,i.prev=r,null==n.next&&(this.tail=r),this.length--,n}this.head,this.head=this.head.next,this.head.prev=null}},{key:"get",value:function(e){if(e<0||e>this.length)return null;for(var t=0,n=this.head;t<e;)t++,n=n.next;return n}},{key:"print",value:function(){for(var e=this.head;null!=e;)e=e.next}}]),e}();function wi(e){return{position:xt.clone(e.position),rotation:Ct.clone(e.rotation),scale:xt.clone(e.scale)}}var Ti,Ai=function(e){pi(n,e);var t=gi(n);function n(){var e;ui(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).keyframeLinkListMap=void 0,e.tween=void 0,e.originNodeState=void 0,e.curNodeState=void 0,e.changedProperty=void 0,e}return fi(n,[{key:"init",value:function(){var e=this;_i(mi(n.prototype),"init",this).call(this);var t=this.animClip,r=this.node,i=t.keyframes;this.tween=new Dr,this.changedProperty={},this.keyframeLinkListMap={},this.originNodeState=wi(r),this.curNodeState=wi(r),this.curNodeState.rotation=tt.toEuler(xt.create(),this.curNodeState.rotation),Object.keys(t.keyframes).map((function(e){return Number(e)})).sort((function(e,t){return e-t})).forEach((function(t){var n=i[t];n=n.forEach((function(n){var r=n.property,i=n.subProperty,o="".concat(r,".").concat(i);n.keyframeTime=t,e.keyframeLinkListMap[o]=e.keyframeLinkListMap[o]||new xi,e.keyframeLinkListMap[o].append(n)}))})),this.generateTweener()}},{key:"generateTweener",value:function(){var e=this,t=this.tween,n=this.keyframeLinkListMap,r=this.curNodeState,i=ci.DataType,o={x:0,y:1,z:2};Object.keys(n).forEach((function(a){for(var s=a.split("."),l=n[a],c=s[0],u=s[1],d=l.head;null!==d;){var f=d.data,h=r[c][o[u]],p=f.keyframeTime,m=0,v=f.interpolation.split(",");4!==v.length&&console.error("invalid bezier value");var g=f.value;if(d.prev){var _=d.prev.data;h=_.value,p=f.keyframeTime-_.keyframeTime,m=_.keyframeTime}p>0?i(h,(function(t){r[c][o[u]]=t,e.changedProperty[c]=!0}),g,p,{easing:$r.bezierEasing(v[0],v[1],v[2],v[3]),delay:m}).start(t):r[c][o[u]]=g,d=d.next}}))}},{key:"update",value:function(e){_i(mi(n.prototype),"update",this).call(this,e),this.currentTime+=e,this.tween.update(e),this.affectNode()}},{key:"affectNode",value:function(){var e=this.node,t=this.curNodeState;Object.keys(this.changedProperty).forEach((function(n){if("rotation"===n){var r=t[n];e[n]=tt.fromEuler(tt.create(),r[0],r[1],r[2])}else e[n]=xt.clone(t[n])}))}},{key:"reset",value:function(){var e=this.curNodeState,t=this.originNodeState;this.tween,_i(mi(n.prototype),"reset",this).call(this),e&&(Object.keys(this.changedProperty).forEach((function(n){e[n]="rotation"===n?tt.clone(t[n]):xt.clone(t[n])})),this.affectNode())}}]),n}(yi),Ei=function(t){pi(r,t);var n=gi(r);function r(e,t,i,o){var a;return ui(this,r),(a=n.call(this,e,t,i,o)).actionName=void 0,a.skeltoAnimationRenderer=void 0,a.ownClip=void 0,a}return fi(r,[{key:"init",value:function(){_i(mi(r.prototype),"init",this).call(this);var t=this.node,n=this.animClip;n.removeAllHandler(),n.addHandler(this.id,this),this.enabled=!0,this.actionName=n.skeltonAnim.name;var i=this.skeltoAnimationRenderer=t.findAbilityByType(Er)||t.createAbility(Er);i.enabled=!1,i.addAnimationClip(n.skeltonAnim,this.actionName),this.skeltoAnimationRenderer.playAnimationClip(this.actionName,{wrapMode:e.WrapMode.ONCE})}},{key:"play",value:function(){_i(mi(r.prototype),"play",this).call(this),this.skeltoAnimationRenderer.enabled=!1}},{key:"update",value:function(e){_i(mi(r.prototype),"update",this).call(this,e),this.animClip,this.enabled&&(this.currentTime+=e,this.skeltoAnimationRenderer.jumpToFrame(this.currentTime))}},{key:"stop",value:function(){_i(mi(r.prototype),"stop",this).call(this),this.skeltoAnimationRenderer&&(this.skeltoAnimationRenderer.removeAnimationClip(this.actionName),this.skeltoAnimationRenderer.enabled=!0,this.ownClip=!1)}},{key:"reset",value:function(){_i(mi(r.prototype),"reset",this).call(this),this.ownClip=!1}}]),r}(yi),Oi=function(e){pi(n,e);var t=gi(n);function n(e,r,i,o){var a;return ui(this,n),(a=t.call(this,e,r,i,o)).handler=void 0,a.type=void 0,a.animClip=void 0,a.node=void 0,a.currentTime=void 0,a}return n}(yi),Mi=(hi(Ti={},e.AnimationClipType.Interpolation,Ai),hi(Ti,e.AnimationClipType.Skeleton,Ei),hi(Ti,e.AnimationClipType.AnimationComponent,Oi),Ti),Si=0,Ci=function(e){pi(n,e);var t=gi(n);function n(e,r){var i;ui(this,n),(i=t.call(this,e,r)).currentTime=void 0,i.duration=void 0,i.state=void 0,i._wrapMode=void 0,i.animClipSet=void 0,i.uniqueAnimClipSet=void 0,i.startTimeAnimClipSet=void 0,i.handlerList=void 0,i.binHandlerMap=void 0,i.handlerStartTimeMap=void 0,i._animationData=void 0,i._timeScale=void 0,i._autoPlay=void 0;var o=r.animationData,a=r.duration,s=r.wrapMode,l=r.autoPlay;return i.animClipSet={},i.uniqueAnimClipSet={},i.startTimeAnimClipSet={},i.handlerList=[],i.binHandlerMap={},i.handlerStartTimeMap=new WeakMap,i._timeScale=1,i.currentTime=0,i.wrapMode=s,i.duration=a||1/0,i.autoPlay=l,i.animationData=o,i.state=Zr.INIT,l&&i.play(),i}return fi(n,[{key:"timeScale",get:function(){return this._timeScale},set:function(e){e>0&&(this._timeScale=e)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode=e}},{key:"autoPlay",get:function(){return this._autoPlay},set:function(e){this._autoPlay=e,e?this.play():this.stop()}},{key:"animationData",get:function(){return this._animationData},set:function(e){e&&(this._animationData=e)}}]),fi(n,[{key:"_animate",value:function(e,t){var n=this,r=this.duration,i=this.handlerStartTimeMap,o=this.wrapMode;e*=this._timeScale,this.currentTime>r&&(o===qr.LOOP?(this.reset(),t.call(this)):this._finished()),this.currentTime+=e,this.handlerList.forEach((function(t){var r=i.get(t);n.currentTime>r&&t.update(e)}))}},{key:"update",value:function(e){this.state===Zr.PLAYING&&this._animate(e,this.play)}},{key:"onAnimUpdate",value:function(e){this.state===Zr.PLAYBYANIMATOR&&this._animate(e,this.playByAnimator)}},{key:"addAnimationClip",value:function(e,t){var n=t.name;if(!this.uniqueAnimClipSet["".concat(n,"_").concat(e)]&&(this.animClipSet[n]=t,this.uniqueAnimClipSet["".concat(n,"_").concat(e)]=t,this.startTimeAnimClipSet[e]=this.startTimeAnimClipSet[e]||[],this.startTimeAnimClipSet[e].push(t),this.binHandlerMap[n]=this.binHandlerMap[n]||{},!this.binHandlerMap[n][e])){var r=function(e,t){var n=t.AnimationClipType;return new Mi[n](++Si,n,e,t)}(this.node,t);this.handlerStartTimeMap.set(r,e),this.handlerList.push(r),this.binHandlerMap[n][e]=r}}},{key:"removeHandler",value:function(e,t){for(var n=this.handlerList,r=this.binHandlerMap[e][t],i=n.length-1;i>=0;--i)if(n[i].id===r.id){n.splice(i,1);break}this.handlerStartTimeMap.delete(r),delete this.binHandlerMap[e][t]}},{key:"removeAnimationClip",value:function(e){var t=this;this.animClipSet[e]&&(Object.keys(this.startTimeAnimClipSet).forEach((function(n){var r=null;t.startTimeAnimClipSet[n].forEach((function(i,o){i.name===e&&(r=o,t.removeHandler(e,n),delete t.uniqueAnimClipSet["".concat(e,"_").concat(n)],delete t.startTimeAnimClipSet[n][r])}))})),delete this.animClipSet[e])}},{key:"removeAllAnimationClip",value:function(){var e=this,t=this.animClipSet;Object.keys(t).forEach((function(t){e.removeAnimationClip(t)}))}},{key:"parseAnimationData",value:function(){var e=this,t=this.animationData||{},n=t.keyframes,r=void 0===n?{}:n,i=t.timeScale,o=void 0===i?1:i,a=t.duration,s=void 0===a?1/0:a;this.removeAllAnimationClip(),Object.keys(r).forEach((function(t){r[t].forEach((function(n){e.addAnimationClip(Number(t),n)}))})),this.duration=s,this.timeScale=o}},{key:"_prePlay",value:function(){this.state!==Zr.INIT&&this.state!==Zr.STOP||this.animationData&&this.parseAnimationData()}},{key:"play",value:function(){this._prePlay(),this.state=Zr.PLAYING}},{key:"playByAnimator",value:function(){this._prePlay(),this.state=Zr.PLAYBYANIMATOR}},{key:"pause",value:function(){this.state=Zr.PAUSUE}},{key:"stop",value:function(){this.reset(),this.state=Zr.STOP}},{key:"jumpToFrame",value:function(){}},{key:"reset",value:function(){this.currentTime=0,this.pause(),this.handlerList.reverse().forEach((function(e){e.reset()})),this.state=Zr.INIT}},{key:"_finished",value:function(){this.state=Zr.STOP;var e=new g("animationFinished");e.data=this,this.node.trigger(e)}}]),n}(Kt),Ri=function(e){pi(n,e);var t=gi(n);function n(e,r){var i;ui(this,n),(i=t.call(this,e,r)).currentTime=void 0,i.duration=void 0,i.startTimeAnimationMap=void 0,i.animationList=void 0,i.state=void 0,i._animatorData=void 0,i._timeScale=void 0,i._wrapMode=void 0,i._autoPlay=void 0;var o=r.animatorData,a=r.duration,s=r.wrapMode,l=r.autoPlay;return i.animationList=[],i.startTimeAnimationMap={},i._timeScale=1,i.currentTime=0,i.duration=a||1/0,i.wrapMode=s,i.autoPlay=l,i.animatorData=o,i.state=Zr.INIT,o&&(o.onAttach=function(e){i.animatorData=e,l&&i.play()}),i}return fi(n,[{key:"timeScale",get:function(){return this._timeScale},set:function(e){e>0&&(this._timeScale=e)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode=e}},{key:"autoPlay",get:function(){return this._autoPlay},set:function(e){this._autoPlay=e,e?this.play():this.stop()}},{key:"animatorData",get:function(){return this._animatorData},set:function(e){e&&(this._animatorData=e)}}]),fi(n,[{key:"update",value:function(e){var t=this;if(this.state===Zr.PLAYING){var r=this.duration,i=this.startTimeAnimationMap,o=this.wrapMode;e*=this._timeScale,_i(mi(n.prototype),"update",this).call(this,e),this.currentTime>r&&(o===qr.LOOP?this.replay():this._finished()),this.currentTime+=e,Object.keys(i).forEach((function(n){t.currentTime-Number(n)>=0&&i[n].forEach((function(t){t.onAnimUpdate(e)}))}))}}},{key:"addAnimationByStartTime",value:function(e,t){this.startTimeAnimationMap[e]=this.startTimeAnimationMap[e]||[],this.startTimeAnimationMap[e].push(t),this.animationList.push(t)}},{key:"removeAllAnimation",value:function(){this.startTimeAnimationMap=[],this.animationList=[]}},{key:"parseAnimatorData",value:function(){var e=this,t=this.animatorData.options,n=(t=void 0===t?{}:t).keyframes,r=void 0===n?{}:n,i=t.timeScale,o=void 0===i?1:i,a=t.duration,s=void 0===a?1/0:a;this.removeAllAnimation(),Object.keys(r).forEach((function(t){(r[t]||[]).forEach((function(n){e.addAnimationByStartTime(Number(t),n)}))})),this.duration=s,this.timeScale=o}},{key:"play",value:function(){this.state!==Zr.INIT&&this.state!==Zr.STOP||(this.animatorData&&this.parseAnimatorData(),this.animationList.forEach((function(e){e.playByAnimator()}))),this.state=Zr.PLAYING}},{key:"replay",value:function(){this.reset(),this.play()}},{key:"pause",value:function(){this.state=Zr.PAUSUE,this.animationList.forEach((function(e){e.pause()}))}},{key:"stop",value:function(){this.animationList.forEach((function(e){e.stop()})),this.reset(),this.state=Zr.STOP}},{key:"_finished",value:function(){this.state=Zr.STOP;var e=new g("animatorFinished");e.data=this,this.engine.trigger(e)}},{key:"jumpToFrame",value:function(){}},{key:"reset",value:function(){this.currentTime=0,this.pause(),this.animationList.forEach((function(e){e.reset()})),this.state=Zr.INIT}}]),n}(Kt),ki=function(e){pi(n,e);var t=gi(n);function n(e,r){var i;ui(this,n),(i=t.call(this,e))._keyframes=void 0,i._duration=void 0;var o=r.keyframes,a=r.duration;return i.keyframes=o,i.duration=a,i}return fi(n,[{key:"keyframes",get:function(){return this._keyframes},set:function(e){this._keyframes=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}}]),n}(ln),Pi=e.AnimationClipType.Interpolation,Li=e.AnimationClipType.Frame,Ii=e.AnimationClipType.Skeleton,Fi=e.AnimationClipType.AnimationComponent,Di=function(e){pi(n,e);var t=gi(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ui(this,n),(i=t.call(this,e)).AnimationClipType=void 0,i._options=void 0,i.keyframes=void 0,i.frameIndex=null,i.skeltonAnim=null,i.animationComponentAbility=null,i.handlerMap=void 0,i.AnimationClipType=r||Pi,i.options=o,i.handlerMap={},i.initialize(),i}return fi(n,[{key:"initialize",value:function(){switch(this.AnimationClipType){case Pi:this.initInterpolation();break;case Li:this.initFrame();break;case Ii:this.initSkelton();break;default:this.AnimationClipType=Fi,this.initAnimationComponent()}}},{key:"initInterpolation",value:function(){if(this.options){var e=this.options.keyframes;this.keyframes=e}}},{key:"initFrame",value:function(){var e=this.options;e.fps,e.frameRects}},{key:"initSkelton",value:function(){this.skeltonAnim=this.options}},{key:"initAnimationComponent",value:function(){var e=this.options.script;this.animationComponentAbility=e}},{key:"addHandler",value:function(e,t){this.handlerMap[e]=t}},{key:"removeHandler",value:function(e){this.handlerMap[e]&&(this.handlerMap[e].stop(),delete this.handlerMap[e])}},{key:"removeAllHandler",value:function(){var e=this;Object.keys(this.handlerMap).forEach((function(t){e.removeHandler(t)}))}},{key:"options",get:function(){return this._options},set:function(e){this._options=e,this.initialize()}}]),n}(ln),Ni=function(e){pi(n,e);var t=gi(n);function n(e,r){var i;return ui(this,n),(i=t.call(this,e))._options=void 0,i.options=r,i}return fi(n,[{key:"onAttach",value:function(){}},{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),n}(ln);function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bi(e,t,n){return t&&ji(e.prototype,t),n&&ji(e,n),e}function Ui(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]}var Vi=function(){function t(e,n){zi(this,t),this.min=xt.create(),this.max=xt.create(),this.update(e,n)}return Bi(t,[{key:"update",value:function(e,t){xt.copy(this.min,e),xt.copy(this.max,t)}},{key:"setFromCenterAndSize",value:function(e,t){var n=xt.create();xt.scale(n,t,.5),xt.subtract(this.min,e,n),xt.add(this.max,e,n)}},{key:"intersectsFrustum",value:function(t){for(var n=this.min,r=this.max,i=[],o=[],a=0;a<6;a++){var s=t[a];i[0]=s[0]>0?n[0]:r[0],o[0]=s[0]>0?r[0]:n[0],i[1]=s[1]>0?n[1]:r[1],o[1]=s[1]>0?r[1]:n[1],i[2]=s[2]>0?n[2]:r[2],o[2]=s[2]>0?r[2]:n[2];var l=Ui(s,i),c=Ui(s,o);if(l<0&&c<0)return e.IntersectInfo.EXCLUDE;if(l<0||c<0)return e.IntersectInfo.INTERSECT}return e.IntersectInfo.INCLUDE}},{key:"isInFrustum",value:function(e){for(var t=this.min,n=this.max,r=[],i=0;i<6;i++){var o=e[i];if(r[0]=o[0]>0?n[0]:t[0],r[1]=o[1]>0?n[1]:t[1],r[2]=o[2]>0?n[2]:t[2],Ui(o,r)<0)return!1}return!0}}]),t}(),Hi=function(){function t(e,n,r){zi(this,t),this.min=xt.create(),this.max=xt.create(),this.corners=[],this.minWorld=xt.create(),this.maxWorld=xt.create(),this.cornersWorld=[],xt.copy(this.min,e),xt.copy(this.max,n),this.corners=this.getCornersFromMinMax(e,n),this.updateByModelMatrix(r)}return Bi(t,[{key:"getCornersFromMinMax",value:function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return[xt.fromValues(n,r,i),xt.fromValues(o,a,s),xt.fromValues(o,r,i),xt.fromValues(n,a,i),xt.fromValues(n,r,s),xt.fromValues(o,a,i),xt.fromValues(n,a,s),xt.fromValues(o,r,s)]}},{key:"updateByModelMatrix",value:function(e){for(var t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0],r=0;r<8;++r){var i=this.corners[r],o=xt.create();xt.transformMat4(o,i,e),xt.min(t,t,o),xt.max(n,n,o),this.minWorld=t,this.maxWorld=n,this.cornersWorld[r]=o}}},{key:"intersectsFrustum",value:function(t){for(var n=this.cornersWorld,r=0;r<6;r++){for(var i=t[r],o=!1,a=0;a<8;a++)if(Ui(i,n[a])>0)o=!0;else if(o)return e.IntersectInfo.INTERSECT;if(!o)return e.IntersectInfo.EXCLUDE}return e.IntersectInfo.INCLUDE}},{key:"isInFrustum",value:function(e){for(var t=this.cornersWorld,n=0;n<6;n++){for(var r=e[n],i=!1,o=0;o<8;o++)if(Ui(r,t[o])>0){i=!0;break}if(!i)return!1}return!0}}]),t}(),Gi=function(){function t(e,n,r){zi(this,t),this.center=xt.create(),this.radius=0,this.centerWorld=xt.create(),this.radiusWorld=0;var i=xt.distance(e,n);this.radius=.5*i,xt.add(this.center,e,n),xt.scale(this.center,this.center,.5),this.updateByModelMatrix(r)}return Bi(t,[{key:"updateByModelMatrix",value:function(e){xt.transformMat4(this.centerWorld,this.center,e),this.radiusWorld=this.radius*function(e){var t=e,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,i))}(e)}},{key:"intersectsFrustum",value:function(t){for(var n=0;n<6;n++){var r=Ui(t[n],this.centerWorld);if(r<-this.radiusWorld)return e.IntersectInfo.EXCLUDE;if(r<this.radiusWorld)return e.IntersectInfo.INTERSECT}return e.IntersectInfo.INCLUDE}},{key:"isInFrustum",value:function(e){for(var t=0;t<6;t++)if(Ui(e[t],this.centerWorld)<-this.radiusWorld)return!1;return!0}}]),t}();function Wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yi(e,t,n){return t&&Xi(e.prototype,t),n&&Xi(e,n),e}function qi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Ji(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ki(e);if(t){var i=Ki(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qi(this,n)}}var Zi=function(e){qi(n,e);var t=Ji(n);function n(){var e;return Wi(this,n),(e=t.call(this)).colliders=void 0,e.colliders=[],e}return Yi(n,[{key:"attachCollider",value:function(e){this.colliders.push(e)}},{key:"detachCollider",value:function(e){var t=this.colliders.indexOf(e);-1!=t&&this.colliders.splice(t,1)}}]),n}(un),$i=function(t){qi(r,t);var n=Ji(r);function r(t,i){var o;return Wi(this,r),(o=n.call(this,t,i)).tag=void 0,o.tag=i.tag||e.MaskList.EVERYTHING,o}return Yi(r,[{key:"_onEnable",value:function(){this.scene.findFeature(Zi).attachCollider(this)}},{key:"_onDisable",value:function(){this.scene.findFeature(Zi).detachCollider(this)}}]),r}(Kt),eo=function(e){qi(n,e);var t=Ji(n);function n(e,r){var i;return Wi(this,n),(i=t.call(this,e,r)).boxMin=void 0,i.boxMax=void 0,i._corners=void 0,i.boxMin=xt.fromValues(-.5,-.5,-.5),i.boxMax=xt.fromValues(.5,.5,.5),i}return Yi(n,[{key:"setBoxMinMax",value:function(e,t){this.boxMin=e,this.boxMax=t,this._corners=null}},{key:"setBoxCenterSize",value:function(e,t){var n=xt.create();xt.scale(n,t,.5),xt.add(this.boxMax,e,n),xt.scale(n,t,-.5),xt.add(this.boxMin,e,n),this._corners=null}},{key:"getCorners",value:function(){if(!this._corners){var e=this.boxMin[0],t=this.boxMin[1],n=this.boxMin[2],r=this.boxMax[0]-e,i=this.boxMax[1]-t,o=this.boxMax[2]-n;this._corners=[xt.fromValues(e+r,t+i,n+o),xt.fromValues(e,t+i,n+o),xt.fromValues(e,t,n+o),xt.fromValues(e+r,t,n+o),xt.fromValues(e+r,t+i,n),xt.fromValues(e,t+i,n),xt.fromValues(e,t,n),xt.fromValues(e+r,t,n)]}return this._corners}}]),n}($i),to=function(e){qi(n,e);var t=Ji(n);function n(e,r){var i;return Wi(this,n),(i=t.call(this,e,r)).planePoint=void 0,i.normal=void 0,i.planePoint=xt.fromValues(0,0,0),i.normal=xt.fromValues(0,1,0),i}return Yi(n,[{key:"setPlane",value:function(e,t){this.planePoint=e,this.normal=t}}]),n}($i),no=function(e){qi(n,e);var t=Ji(n);function n(e,r){var i;return Wi(this,n),(i=t.call(this,e,r)).center=void 0,i.radius=void 0,i.center=xt.fromValues(0,0,0),i.radius=1,i}return Yi(n,[{key:"setSphere",value:function(e,t){this.center=e,this.radius=t}}]),n}($i),ro=function(e){qi(n,e);var t=Ji(n);function n(e,r){var i;Wi(this,n),(i=t.call(this,e,r))._center=[0,0,0],i._size=[1,1,1],i.isShowCollider=!0;var o=r.center,a=r.size,s=r.isShowCollider;return i.center=o,i.size=a,i.isShowCollider=s,i}return Yi(n,[{key:"center",get:function(){return this._center},set:function(e){this._center=e,this.setBoxCenterSize(this._center,this._size)}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.setBoxCenterSize(this._center,this._size)}}]),n}(eo),io=function(e){qi(n,e);var t=Ji(n);function n(e,r){var i;Wi(this,n),(i=t.call(this,e,r)).__center=[0,0,0],i.__radius=1,i.isShowCollider=!0;var o=r._center,a=r._radius,s=r.isShowCollider;return i._center=o,i._radius=a,i.isShowCollider=s,i}return Yi(n,[{key:"_center",get:function(){return this.__center},set:function(e){this.__center=e,this.setSphere(this.__center,this.__radius)}},{key:"_radius",get:function(){return this.__radius},set:function(e){this.__radius=e,this.setSphere(this.__center,this.__radius)}}]),n}(no);function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lo(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function co(e,t,n){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ao(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uo(e,t){var n=e.center,r=[];return r[0]=Math.max(t.min[0],Math.min(n[0],t.max[0])),r[1]=Math.max(t.min[1],Math.min(n[1],t.max[1])),r[2]=Math.max(t.min[2],Math.min(n[2],t.max[2])),xt.distance(n,r)<e.radius}nn.registerFeature(Zi);var fo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ao(e);if(t){var i=ao(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lo(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e))._colliderManager=void 0,t._myCollider=void 0,t._overlopCollider=void 0,t._sphere=void 0,t._box=void 0,t._colliderManager=null,t._myCollider=null,t._overlopCollider=null,t}return t=i,(n=[{key:"update",value:function(e){co(ao(i.prototype),"update",this).call(this,e);var t=null;if(this._colliderManager&&this._myCollider){var n=this._colliderManager.colliders;if(this._myCollider instanceof eo){this._box=this._getWorldBox(this._myCollider);for(var r=0,o=n.length;r<o;r++){var a=n[r];a!=this._myCollider&&this._boxCollision(a)&&(t=a,this.trigger(new g("collision",this,{collider:a})))}}else if(this._myCollider instanceof no){this._sphere=this._getWorldSphere(this._myCollider);for(var s=0,l=n.length;s<l;s++){var c=n[s];c!=this._myCollider&&this._sphereCollision(c)&&(t=c,this.trigger(new g("collision",this,{collider:c})))}}}if(null!=t&&this._overlopCollider!=t&&this.trigger(new g("begin_overlop",this,{collider:t})),null!=this._overlopCollider&&this._overlopCollider!=t){var u=this._overlopCollider;this.trigger(new g("end_overlop",this,{collider:u}))}this._overlopCollider=t}},{key:"_getWorldBox",value:function(e){var t=e.node.getModelMatrix(),n=xt.create(),r=xt.create();xt.transformMat4(n,e.boxMax,t),xt.transformMat4(r,e.boxMin,t);for(var i=xt.create(),o=e.getCorners(),a=0;a<8;a++)xt.transformMat4(i,o[a],t),i[0]>n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1]),i[2]>n[2]&&(n[2]=i[2]),i[0]<r[0]&&(r[0]=i[0]),i[1]<r[1]&&(r[1]=i[1]),i[2]<r[2]&&(r[2]=i[2]);return{min:r,max:n}}},{key:"_getWorldSphere",value:function(e){var t=xt.create();return xt.transformMat4(t,e.center,e.node.getModelMatrix()),{radius:e.radius,center:t}}},{key:"_boxCollision",value:function(e){var t,n;return e instanceof eo?(t=this._getWorldBox(e),n=this._box,t.min[0]<=n.max[0]&&t.max[0]>=n.min[0]&&t.min[1]<=n.max[1]&&t.max[1]>=n.min[1]&&t.min[2]<=n.max[2]&&t.max[2]>=n.min[2]):e instanceof no&&uo(this._getWorldSphere(e),this._box)}},{key:"_sphereCollision",value:function(e){if(e instanceof eo){var t=this._getWorldBox(e);return uo(this._sphere,t)}var n,r;return e instanceof no&&(n=this._getWorldSphere(e),r=this._sphere,xt.distance(n.center,r.center)<n.radius+n.radius)}},{key:"_onAwake",value:function(){this._colliderManager=this.scene.findFeature(Zi),this._myCollider=this.node.findAbilityByType($i)}},{key:"overlopCollider",get:function(){return this._overlopCollider}}])&&oo(t.prototype,n),i}(Kt);function ho(e,t,n){var r=new XMLHttpRequest;n&&(r.timeout=n),r.open("GET",e,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(null,r.response):t("loadBinary error : "+e,null))},r.send(null)}function po(e,t,n){var r=new XMLHttpRequest;n&&(r.timeout=n),r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t&&t(null,r.responseText):t("loadText error: "+r.statusText,null))},r.send(null)}function mo(e,t,n){po(e,(function(e,n){if(e)t(e,null);else{var r=null;try{r=JSON.parse(n)}catch(e){return t(e.toString(),null)}t(null,r)}}),n)}function vo(e){return Math.pow(2,Math.round(Math.log(e)/Math.log(2)))}function go(e){return e&&0==(e&e-1)}function _o(e){var t=e.width,n=e.height,r=vo(t),i=vo(n),o=document.createElement("canvas");return o.width=r,o.height=i,o.getContext("2d").drawImage(e,0,0,t,n,0,0,r,i),o.toDataURL()}function yo(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=new Image;o&&(n=setTimeout((function(){t(new Error("Image load timeout "+e),null),a.onerror=null,a.onload=null}),o)),r&&(a.crossOrigin="anonymous"),a.onerror=function(){n&&clearTimeout(n),t(new Error("Failed to load "+e),null)},a.onload=function(){if(n&&clearTimeout(n),!i||go(a.width)&&go(a.height))t(null,a);else{var e=new Image;e.onload=function(){t(null,e)},e.src=_o(a)}},a.src=e}function bo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"anonymous",r=document.createElement("video"),i=!1;r.loop=!0,r.crossOrigin=n,r.onerror=function(){t(new Error("Failed to load "+e),null)},r.addEventListener("canplaythrough",(function(){i||(i=!0,t(null,r))}),!0),r.src=e,setTimeout((function(){i||t(new Error("Failed to load "+e))}),1e4)}function xo(e,t,n){var r=new window.Blob([e],{type:t}),i=new Image;i.src=URL.createObjectURL(r),i.crossOrigin="anonymous",i.onerror=function(){n(new Error("Failed to load image buffer"),null)},i.onload=function(){n(null,i)}}function wo(e,t,n){var r=new window.Blob([e]),i=new FileReader;i.readAsText(r,"utf-8"),i.onload=function(){n(null,i.result)}}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ao=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.header=void 0,this.palette=void 0,this.imageData=void 0}var t,n,r;return t=e,r=[{key:"checkHeader",value:function(t){if(t.imageType===e.Type.NO_DATA)throw new Error("TGA::checkHeader() - No data");if(t.hasColorMap){if(t.colorMapLength>256||24!==t.colorMapSize||1!==t.colorMapType)throw new Error("TGA::checkHeader() - Invalid colormap for indexed type")}else if(t.colorMapType)throw new Error("TGA::checkHeader() - Why does the image contain a palette ?");if(t.width<=0||t.height<=0)throw new Error("TGA::checkHeader() - Invalid image size");if(8!==t.pixelDepth&&16!==t.pixelDepth&&24!==t.pixelDepth&&32!==t.pixelDepth)throw new Error('TGA::checkHeader() - Invalid pixel size "'+t.pixelDepth+'"')}},{key:"decodeRLE",value:function(e,t,n,r){var i,o,a,s,l=new Uint8Array(r),c=new Uint8Array(n);for(i=0;i<r;)if(a=1+(127&(o=e[t++])),128&o){for(s=0;s<n;++s)c[s]=e[t++];for(s=0;s<a;++s)l.set(c,i),i+=n}else for(a*=n,s=0;s<a;++s)l[i++]=e[t++];return l}},{key:"getImageData8bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f,h;for(d=0,h=i;h!==a;h+=o)for(f=s;f!==c;f+=l,d++)u=t[d],e[4*(f+r*h)+3]=255,e[4*(f+r*h)+2]=n[3*u+0],e[4*(f+r*h)+1]=n[3*u+1],e[4*(f+r*h)+0]=n[3*u+2];return e}},{key:"getImageData16bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f,h;for(d=0,h=i;h!==a;h+=o)for(f=s;f!==c;f+=l,d+=2)u=t[d+0]|t[d+1]<<8,e[4*(f+r*h)+0]=(31744&u)>>7,e[4*(f+r*h)+1]=(992&u)>>2,e[4*(f+r*h)+2]=(31&u)>>3,e[4*(f+r*h)+3]=32768&u?0:255;return e}},{key:"getImageData24bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f;for(u=0,f=i;f!==a;f+=o)for(d=s;d!==c;d+=l,u+=3)e[4*(d+r*f)+3]=255,e[4*(d+r*f)+2]=t[u+0],e[4*(d+r*f)+1]=t[u+1],e[4*(d+r*f)+0]=t[u+2];return e}},{key:"getImageData32bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f;for(u=0,f=i;f!==a;f+=o)for(d=s;d!==c;d+=l,u+=4)e[4*(d+r*f)+2]=t[u+0],e[4*(d+r*f)+1]=t[u+1],e[4*(d+r*f)+0]=t[u+2],e[4*(d+r*f)+3]=t[u+3];return e}},{key:"getImageDataGrey8bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f,h;for(d=0,h=i;h!==a;h+=o)for(f=s;f!==c;f+=l,d++)u=t[d],e[4*(f+r*h)+0]=u,e[4*(f+r*h)+1]=u,e[4*(f+r*h)+2]=u,e[4*(f+r*h)+3]=255;return e}},{key:"getImageDataGrey16bits",value:function(e,t,n,r,i,o,a,s,l,c){var u,d,f;for(u=0,f=i;f!==a;f+=o)for(d=s;d!==c;d+=l,u+=2)e[4*(d+r*f)+0]=t[u+0],e[4*(d+r*f)+1]=t[u+0],e[4*(d+r*f)+2]=t[u+0],e[4*(d+r*f)+3]=t[u+1];return e}}],(n=[{key:"parseData",value:function(t){var n=0;if(t.length<18)throw new Error("TGA::load() - Not enough data to contain header");if(this.header={idLength:t[n++],colorMapType:t[n++],imageType:t[n++],colorMapIndex:t[n++]|t[n++]<<8,colorMapLength:t[n++]|t[n++]<<8,colorMapDepth:t[n++],offsetX:t[n++]|t[n++]<<8,offsetY:t[n++]|t[n++]<<8,width:t[n++]|t[n++]<<8,height:t[n++]|t[n++]<<8,pixelDepth:t[n++],flags:t[n++]},this.header.hasEncoding=this.header.imageType===e.Type.RLE_INDEXED||this.header.imageType===e.Type.RLE_RGB||this.header.imageType===e.Type.RLE_GREY,this.header.hasColorMap=this.header.imageType===e.Type.RLE_INDEXED||this.header.imageType===e.Type.INDEXED,this.header.isGreyColor=this.header.imageType===e.Type.RLE_GREY||this.header.imageType===e.Type.GREY,e.checkHeader(this.header),(n+=this.header.idLength)>=t.length)throw new Error("TGA::load() - No data");if(this.header.hasColorMap){var r=this.header.colorMapLength*(this.header.colorMapDepth>>3);this.palette=t.subarray(n,n+r),n+=r}var i=this.header.pixelDepth>>3,o=this.header.width*this.header.height,a=o*i;return this.header.hasEncoding?this.imageData=e.decodeRLE(t,n,i,a):this.imageData=t.subarray(n,n+(this.header.hasColorMap?o:a)),this.imageData}},{key:"getImageData",value:function(t){var n,r,i,o,a,s,l,c=this.header.width,u=this.header.height,d=(this.header.flags&e.Origin.MASK)>>e.Origin.SHIFT;switch(t||(t=document?document.createElement("canvas").getContext("2d").createImageData(c,u):{width:c,height:u,data:new Uint8ClampedArray(c*u*4)}),d===e.Origin.TOP_LEFT||d===e.Origin.TOP_RIGHT?(o=0,a=1,s=u):(o=u-1,a=-1,s=-1),d===e.Origin.TOP_LEFT||d===e.Origin.BOTTOM_LEFT?(n=0,r=1,i=c):(n=c-1,r=-1,i=-1),this.header.pixelDepth){case 8:l=this.header.isGreyColor?e.getImageDataGrey8bits:e.getImageData8bits;break;case 16:l=this.header.isGreyColor?e.getImageDataGrey16bits:e.getImageData16bits;break;case 24:l=e.getImageData24bits;break;case 32:l=e.getImageData32bits}return l(t.data,this.imageData,this.palette,c,o,a,s,n,r,i),t}},{key:"getCanvas",value:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=t.createImageData(this.header.width,this.header.height);return e.width=this.header.width,e.height=this.header.height,t.putImageData(this.getImageData(n),0,0),e}},{key:"getDataURL",value:function(e){return this.getCanvas().toDataURL(e||"image/png")}}])&&To(t.prototype,n),r&&To(t,r),e}();function Eo(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;ho(e,(function(o,a){if(o)t("Error loading TGA file from "+e,null);else{var s=new Ao;try{s.parseData(new Uint8Array(a))}catch(e){return void t("Error parse TGA data",null)}yo(s.getDataURL(),t,n,r,i)}}))}function Oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;switch(e){case"binary":ho(t.url,n,t.timeout);break;case"text":po(t.url,n);break;case"json":mo(t.url,n,t.timeout);break;case"image":/\.tga/.test(t.url)?Eo(t.url,n,t.crossOrigin,t.reSample,t.timeout):yo(t.url,n,t.crossOrigin,t.reSample,t.timeout);break;case"video":bo(t.url,n,t.crossOrigin);break;case"imageBuffer":xo(t.imageBuffer,t.type,n);break;case"shaderBuffer":wo(t.shaderBuffer,t.type,n);break;default:n("load file error: unknown file type")}}function Mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[],r=[],i=function(t){var i=e[t]||{},o=new Promise((function(e,t){Oo(i.type,i.props,(function(n,r){n?t(n):e(r)}))}));n.push(o),r.push(t)};for(var o in e)i(o);Promise.all(n).then((function(e){for(var n={},i=0;i<e.length;i++)n[r[i]]=e[i];t(null,n)})).catch((function(e){t(e)}))}Ao.Type={NO_DATA:0,INDEXED:1,RGB:2,GREY:3,RLE_INDEXED:9,RLE_RGB:10,RLE_GREY:11},Ao.Origin={BOTTOM_LEFT:0,BOTTOM_RIGHT:1,TOP_LEFT:2,TOP_RIGHT:3,SHIFT:4,MASK:48};var So=Object.freeze({__proto__:null,load:Oo,loadAll:Mo});function Co(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ko(e,t,n){return t&&Ro(e.prototype,t),n&&Ro(e,n),e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(){return(Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zo(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=No(e);if(t){var i=No(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zo(this,n)}}var Bo=function(){},Uo={},Vo=function(e){Do(n,e);var t=jo(n);function n(e,r,i){var o;return Co(this,n),(o=t.call(this)).handlers=void 0,o.engine=void 0,o.rhi=void 0,o.request=void 0,o._urls=void 0,o._names=void 0,o._resources=void 0,o.handlers=Uo,o._urls={},o._names={},o._resources={},o.engine=e,o.rhi=i,o.request=r||So,o}return ko(n,[{key:"registerHandler",value:function(e,t){this.handlers[e]=t}},{key:"add",value:function(e){this._resources[e.type]||(this._resources[e.type]=[]),this._resources[e.type].push(e),this.trigger(new g("added",this,e))}},{key:"findResource",value:function(e,t){return this._resources[e]?this._resources[e].find((function(e){return e.name===t})):null}},{key:"batchLoad",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo,r=arguments.length>2?arguments[2]:void 0,i=[],o=function(n){var o=e[n],a=new Promise((function(e,n){t.load(o,(function(t,r){t?n(t):e(r)}),r)}));i.push(a)},a=0;a<e.length;a++)o(a);Promise.all(i).then((function(){n(null,e)}),(function(e){n(e)}))}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo,n=arguments.length>2?arguments[2]:void 0,r=this;if(!e.loaded){e.loading=!0;var i=this.handlers[e.type];if("texture"!==e.type&&"textureNew"!==e.type||(e.config.handlerType=e.handlerType||"image"),i)if(e.data)this._onLoadSuccess(e,i,t),e.trigger(new g("loaded",e));else{var o=e.fileUrl,a=e.config;i.load(this.request,Fo({url:o,timeout:n},a),(function(n,o){n?t(n):(e.data=o,r._onLoadSuccess(e,i,t))}))}else t("No Handler for resource type: "+e.type)}}},{key:"_onLoadSuccess",value:function(e,t,n){var r=this;e.loading=!1,e.loaded=!0,t.patch&&t.patch(e,this._resources),Promise.resolve(t.open(e,this.rhi)).then((function(){r.add(e),n(null,e),e.trigger(new g("loaded",e))})).catch((function(e){console.error(e),n(e)}))}}],[{key:"registerHandler",value:function(e,t){Uo[e]=t}}]),n}(_),Ho=function(t){Do(r,t);var n=jo(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return Co(this,r),(t=n.call(this)).name=void 0,t.type=void 0,t.handlerType=void 0,t.config=void 0,t.data=void 0,t.assets=void 0,t.assetType=void 0,t.loaded=void 0,t.loading=void 0,t._file=void 0,t.name=i,t.type=o.type,t.handlerType=o.handlerType,t.config=o.config||{},t.data=o.data,t.assets=[],t.assetType=o.assetType||e.AssetType.Cache,t.loaded=!1,t.loading=!1,t._file={url:o.url,urls:o.urls},t}return ko(r,[{key:"ready",value:function(e){this.assets?e.call(this,this):this.once("loaded",(function(t){e.call(this,t)}))}},{key:"fileUrl",get:function(){return this._file.url||this._file.urls}},{key:"asset",get:function(){if(this.assets&&this.assets[0])return this.assets[0]},set:function(e){this.assets[0]=e||void 0}}]),r}(_);function Go(e){var t=e.split("/"),n=t.slice(t.length-1)[0];return[t.slice(0,t.length-1).join("/"),n]}function Wo(e){return"/"!==e.charAt(0)&&null===e.match(/:\/\//)}var Xo=Object.freeze({__proto__:null,split:Go,getBasename:function(e){return Go(e)[1]},getDirectory:function(e){var t=e.split("/");return t.slice(0,t.length-1).join("/")},isRelativePath:Wo,join:function(e,t){return e+"/"+t},getExtension:function(e){var t=e.split("?")[0].split(".").pop();return t!==e?"."+t:""},extractPath:function(e){var t=".",n=e.split("/"),r=0;if(n.length>1)for(!1===Wo(e)&&(t=""),r=0;r<n.length-1;++r)t+="/"+n[r];return t}}),Yo=function(){function t(){Co(this,t)}return ko(t,[{key:"load",value:function(e,t,n){e.load(t.handlerType,t,(function(e,r){e?n("Error loading Texture from "+t.url):n(null,r)}))}},{key:"open",value:function(t){if("video"===t.handlerType){var n=Fo(Fo({},{magFilter:e.TextureFilter.LINEAR,minFilter:e.TextureFilter.LINEAR,wrapS:e.TextureWrapMode.CLAMP_TO_EDGE,wrapT:e.TextureWrapMode.CLAMP_TO_EDGE}),t.config),r=new Xn(t.name,t.data,n);r.type=t.assetType,t.asset=r}else{var i=new Xn(t.name,t.data,t.config);i.type=t.assetType,t.asset=i}}}]),t}();function qo(e){var t=e.replace(/data:.+?,/,"");return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function Ko(t,n,r){var i=new Kn(t.name),o={},a={};return"parameters"in t?(o=function(e){var t={},n=e.parameters;for(var r in e.attributes){var i=e.attributes[r];t[r]=n[i],t[r].name=r,t[r].paramName=i}return t}(t),a=function(t){var n={},r=t.parameters;for(var i in t.uniforms){var o=t.uniforms[i];n[i]=r[o],n[i].name=i,n[i].paramName=o;var a=n[i].semantic;e.UniformSemantic[a]&&(n[i].semantic=e.UniformSemantic[a])}return n}(t)):(o=t.attributes,a=t.uniforms),"states"in t&&(i.states=t.states),i.vertexShader=n,i.fragmentShader=r,i.attributes=o,i.uniforms=a,i.isValid=!0,i}var Qo=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){e.load("json",t,(function(e,r){e?n("Error loading Texture from "+t.url):n(null,r)}))}},{key:"open",value:function(e){var t=e.data||{},n=[];if(t.hasOwnProperty("technique")&&t.hasOwnProperty("fragmentShader")&&t.hasOwnProperty("vertexShader")){var r=Ko(t.technique,t.vertexShader,t.fragmentShader);r.type=e.assetType,n.push(r)}else t.techniques&&t.techniques.forEach((function(r){var i=t.programs[r.program],o=Ko(r,qo(t.shaders[i.vertexShader].uri),qo(t.shaders[i.fragmentShader].uri));o.type=e.assetType,n.push(o)}));e.assets=n}}]),e}(),Jo=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){t.reSample=t.reSample||!1,e.load("image",t,(function(e,r){e?n("Error loading Texture from "+t.url):n(null,r)}))}},{key:"open",value:function(e){e.asset=e.data}}]),e}(),Zo=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){t.reSample=t.reSample||!1,e.load("video",t,(function(e,r){e?n("Error loading Texture from "+t.url):n(null,r)}))}},{key:"open",value:function(e){e.asset=e.data}}]),e}(),$o=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){var r=t.url;Array.isArray(r[0])||(r=[r]);for(var i=[],o=[],a=function(a){o[a]=[];for(var s=function(s){var l=new Promise((function(i,l){e.load("image",Lo({},t,{url:r[a][s]}),(function(e,t){e?(n("Error loading Texture from "+r[a]),l()):(o[a][s]=t,i())}))}));i.push(l)},l=0;l<r[a].length;l++)s(l)},s=0;s<r.length;s++)a(s);Promise.all(i).then((function(){n(null,o)}))}},{key:"open",value:function(e){var t=new Qn(e.name,e.data,e.config);t.type=e.assetType,e.asset=t}}]),e}(),ea=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){if(t.hasOwnProperty("draw")){var r=t.width||256,i=t.height||256;t.width=r,t.height=i;var o=document.createElement("canvas");o.width=r,o.height=i;var a=o.getContext("2d");t.draw(a,t),n(null,o)}else n('canvastexture resource has no "draw" function specified',null)}},{key:"open",value:function(e){var t=new Xn(e.name,e.data,e.config);e.asset=t}}]),e}(),ta=function(){function e(){Co(this,e)}return ko(e,[{key:"load",value:function(e,t,n){e.load(t.handlerType,t,(function(e,r){e?n("Error loading Texture from "+t.url):n(null,r)}))}},{key:"open",value:function(e,t){var n=e.data,r=e.name,i=n.width,o=n.height,a=new Xn(t,i,o);a.name=r,a._glTexture&&(a.setImageSource(n),a.generateMipmaps(),a.type=e.assetType,e.asset=a)}}]),e}(),na=function(){function t(){Co(this,t)}return ko(t,[{key:"load",value:function(e,t,n){var r=t.url;Array.isArray(r[0])||(r=[r]);for(var i=[],o=[],a=function(a){o[a]=[];for(var s=function(s){var l=new Promise((function(i,l){e.load("image",Lo({},t,{url:r[a][s]}),(function(e,t){e?(n("Error loading Texture from "+r[a]),l()):(o[a][s]=t,i())}))}));i.push(l)},l=0;l<r[a].length;l++)s(l)},s=0;s<r.length;s++)a(s);Promise.all(i).then((function(){n(null,o)}))}},{key:"open",value:function(t,n){var r=t.data,i=t.name,o=r[0][0],a=o.width;if(a===o.height){var s=new Qn(n,a);if(s.name=i,s._glTexture){for(var l=0;l<r.length;l++)for(var c=0;c<6;c++)s.setImageSource(e.TextureCubeFace.PositiveX+c,r[l][c],l);1===r.length&&s.generateMipmaps(),s.type=t.assetType,t.asset=s}}else A.error("The cube texture must have the same width and height")}}]),t}();function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e,t,n){return t&&ia(e.prototype,t),n&&ia(e,n),e}function aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){aa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ua(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=da(e);if(t){var i=da(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fa(this,n)}}function pa(e,t,n){return(pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=da(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ma(e,t){for(var n=[],r=64+e.bytesOfKeyValueData,i=e.pixelWidth,o=e.pixelHeight,a=t?e.numberOfMipmapLevels:1,s=0;s<a;s++){var l=new Int32Array(e.buffer,r,1)[0];r+=4;for(var c=0;c<e.numberOfFaces;c++){var u=new Uint8Array(e.buffer,r,l);n.push({data:u,width:i,height:o}),r+=l,r+=3-(l+3)%4}i=Math.max(1,.5*i),o=Math.max(1,.5*o)}return n}function va(e){if(e.byteLength>=12){var t=new Uint8Array(e,0,12);if(171===t[0]&&75===t[1]&&84===t[2]&&88===t[3]&&32===t[4]&&49===t[5]&&49===t[6]&&187===t[7]&&13===t[8]&&10===t[9]&&26===t[10]&&10===t[11])return!0}return!1}function ga(t){switch(t){case e.GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT:return e.TextureFormat.DXT1;case e.GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT:return e.TextureFormat.DXT5;case e.GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL:return e.TextureFormat.ETC1_RGB;case e.GLCompressedTextureInternalFormat.RGB8_ETC2:return e.TextureFormat.ETC2_RGB;case e.GLCompressedTextureInternalFormat.RGB8_PUNCHTHROUGH_ALPHA1_ETC2:return e.TextureFormat.ETC2_RGBA5;case e.GLCompressedTextureInternalFormat.RGBA8_ETC2_EAC:return e.TextureFormat.ETC2_RGBA8;case e.GLCompressedTextureInternalFormat.RGB_PVRTC_2BPPV1_IMG:return e.TextureFormat.PVRTC_RGB2;case e.GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG:return e.TextureFormat.PVRTC_RGBA2;case e.GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG:return e.TextureFormat.PVRTC_RGB4;case e.GLCompressedTextureInternalFormat.RGBA_PVRTC_4BPPV1_IMG:return e.TextureFormat.PVRTC_RGBA4;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR:return e.TextureFormat.ASTC_4x4;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_5X5_KHR:return e.TextureFormat.ASTC_5x5;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_6X6_KHR:return e.TextureFormat.ASTC_6x6;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_8X8_KHR:return e.TextureFormat.ASTC_8x8;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_10X10_KHR:return e.TextureFormat.ASTC_10x10;case e.GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR:return e.TextureFormat.ASTC_12x12;default:var n=e.GLCompressedTextureInternalFormat[t];throw new Error("this format is not supported in Oasis Engine: ".concat(n))}}Vo.registerHandler("texture",new Yo),Vo.registerHandler("technique",new Qo),Vo.registerHandler("image",new Jo),Vo.registerHandler("video",new Zo),Vo.registerHandler("cubemap",new $o),Vo.registerHandler("canvastexture",new ea),Vo.registerHandler("textureNew",new ta),Vo.registerHandler("cubemapNew",new na);var _a=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!va(e))throw new Error("khronosTextureContainerParser: invalid KTX file, texture missing KTX identifier");var i=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(e,12,13*i),a=o.getUint32(0,!0),s=67305985===a,l={buffer:e,glType:o.getUint32(1*i,s),glTypeSize:o.getUint32(2*i,s),glFormat:o.getUint32(3*i,s),glInternalFormat:o.getUint32(4*i,s),glBaseInternalFormat:o.getUint32(5*i,s),pixelWidth:o.getUint32(6*i,s),pixelHeight:o.getUint32(7*i,s),pixelDepth:o.getUint32(8*i,s),numberOfArrayElements:o.getUint32(9*i,s),numberOfFaces:o.getUint32(10*i,s),numberOfMipmapLevels:o.getUint32(11*i,s),bytesOfKeyValueData:o.getUint32(12*i,s),loadType:0};if(0!==l.glType)throw new Error("only compressed formats currently supported");if(l.numberOfMipmapLevels=Math.max(1,l.numberOfMipmapLevels),0===l.pixelHeight||0!==l.pixelDepth)throw new Error("only 2D textures currently supported");if(0!==l.numberOfArrayElements)throw new Error("texture arrays not currently supported");if(l.numberOfFaces!==t)throw new Error("number of faces expected"+t+", but found "+l.numberOfFaces);return n&&(l.mipmaps=ma(l,!0)),r&&(l.engineFormat=ga(l.glInternalFormat)),l},ya=function(t){ua(r,t);var n=ha(r);function r(e,t,i){var o;return ra(this,r),(o=n.call(this,e,null,ca(ca({},i),{},{flipY:!1})))._mipmaps=void 0,o.isCompressed=!0,o._internalFormat=void 0,t&&o.setCompressedData(t),o}return oa(r,[{key:"setCompressedData",value:function(e){this.mipmaps=e.mipmaps,this._width=e.width,this._height=e.height,this._internalFormat=e.internalFormat}},{key:"updateTexture",value:function(){this.needUpdateWholeTexture=!0,this.needUpdateFilers=!0}},{key:"resetState",value:function(){this.mipmaps&&(this.mipmaps=this.mipmaps),pa(da(r.prototype),"resetState",this).call(this)}},{key:"updateSubTexture",value:function(){A.warn("CompressedTexture2D: cant't updateSubTexture")}},{key:"getImageData",value:function(){A.warn("CompressedTexture2D: cant't getImageData from a compressed texture")}},{key:"configMipmap",value:function(){A.warn("CompressedTexture2D: cant't config mipmap")}},{key:"mipmaps",get:function(){return this._mipmaps},set:function(t){this._mipmaps=t,1===t.length&&this.setFilter(this.filterMag,e.TextureFilter.LINEAR),this.updateTexture()}},{key:"internalFormat",get:function(){return this._internalFormat}},{key:"flipY",get:function(){return!1},set:function(e){!0===e&&A.warn("CompressedTexture2D: flipY is always false")}},{key:"canMipmap",get:function(){return!1},set:function(e){!0===e&&A.warn("CompressedTexture2D: can't generate mipmap")}},{key:"image",get:function(){return A.warn("CompressedTexture2D: cant't get image from a compressed texture"),null},set:function(){A.warn("CompressedTexture2D: cant't set image")}}]),r}(Xn),ba=function(t){ua(r,t);var n=ha(r);function r(t,i,o){var a;return ra(this,r),(a=n.call(this,t,null,ca(ca({},o),{},{flipY:!1})))._mipmapsFaces=void 0,a._internalFormat=void 0,a.isCompressed=!0,a.needUpdateCubeTextureFace=[],a.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE),i&&a.setCompressedCubeData(i),a}return oa(r,[{key:"setCompressedCubeData",value:function(e){this.mipmapsFaces=e.mipmapsFaces,this._width=e.width,this._height=e.height,this._internalFormat=e.internalFormat}},{key:"updateFace",value:function(e,t){this.mipmapsFaces[e]=t,this.needUpdateCubeTextureFace[e]=!0}},{key:"resetState",value:function(){this.images&&(this.images=this.images),pa(da(r.prototype),"resetState",this).call(this)}},{key:"updateImage",value:function(){A.warn("CompressedTextureCubeMap: cant't update image")}},{key:"configMipmap",value:function(){A.warn("CompressedTextureCubeMap: cant't config mipmap")}},{key:"mipmapsFaces",get:function(){return this._mipmapsFaces},set:function(e){this._mipmapsFaces=e,this.updateTexture()}},{key:"internalFormat",get:function(){return this._internalFormat}},{key:"flipY",get:function(){return!1},set:function(e){!0===e&&A.warn("CompressedTextureCubeMap: flipY is always false")}},{key:"canMipmap",get:function(){return!1},set:function(e){!0===e&&A.warn("CompressedTextureCubeMap: can't generate mipmap")}},{key:"images",get:function(){return A.warn("CompressedTextureCubeMap: cant't get images from a compressed texture"),null},set:function(){A.warn("CompressedTextureCubeMap: cant't set images")}},{key:"mipMapLevel",get:function(){return A.warn("CompressedTextureCubeMap: cant't get mipMapLevel"),null}}]),r}(Qn),xa=function(){function e(){ra(this,e)}return oa(e,[{key:"load",value:function(e,t,n){var r=t.url;if(Array.isArray(r)||(r=[t.url]),1===r.length||6===r.length){var i=r.map((function(n){return new Promise((function(r,i){e.load("binary",sa({},t,{url:n}),(function(e,t){e?i("Error loading KTXTexture from "+n):r(t)}))}))}));Promise.all(i).then((function(e){n(null,e)})).catch((function(e){n(e)}))}else n(new Error("KTXTextureLoader: ktx texture should have 1 or 6 url"))}},{key:"open",value:function(e){if(1===e.data.length){var t=e.data[0];e.asset=Ta(e.name,t)}else{if(6!==e.data.length)throw new Error("KTXTextureLoader: ktx texture should have 1 or 6 texture");e.asset=wa(e.name,e.data)}}}]),e}();function wa(e,t,n){for(var r,i,o,a=[],s=0;s<t.length;s++){var l=_a(t[s],1,!0);a.push(l.mipmaps),0===s&&(i=l.pixelWidth,o=l.pixelHeight,r=l.glInternalFormat)}return new ba(e,{mipmapsFaces:a,internalFormat:r,width:i,height:o},n)}function Ta(e,t,n){var r=_a(t,1,!0);return new ya(e,{mipmaps:r.mipmaps,internalFormat:r.glInternalFormat,width:r.pixelWidth,height:r.pixelHeight},n)}var Aa=function(){function t(){ra(this,t)}return oa(t,[{key:"load",value:function(e,t,n){var r=t.url;if(Array.isArray(r)||(r=[t.url]),1===r.length||6===r.length){var i=r.map((function(n){return new Promise((function(r,i){e.load("binary",sa({},t,{url:n}),(function(e,t){e?i("Error loading KTXTexture from "+n):r(t)}))}))}));Promise.all(i).then((function(e){n(null,e)})).catch((function(e){n(e)}))}else n(new Error("KTXTextureLoader: ktx texture should have 1 or 6 url"))}},{key:"open",value:function(t,n){if(1===t.data.length){var r=function(e){var t=_a(e,1,!0,!0);return{mipmaps:t.mipmaps,engineFormat:t.engineFormat,internalFormat:t.glInternalFormat,width:t.pixelWidth,height:t.pixelHeight}}(t.data[0]),i=r.width,o=r.height,a=r.mipmaps,s=r.engineFormat,l=new Xn(n,i,o,s);if(l.name=t.name,!l._glTexture)return;for(var c=0;c<a.length;c++){var u=a[c],d=u.width,f=u.height,h=u.data;l.setPixelBuffer(h,c,0,0,d,f)}t.asset=l}else{if(6!==t.data.length)throw new Error("KTXTextureLoader: ktx texture should have 1 or 6 texture");var p=function(e){for(var t,n,r,i,o=[],a=0;a<e.length;a++){var s=_a(e[a],1,!0,!0);o.push(s.mipmaps),0===a&&(r=s.pixelWidth,i=s.pixelHeight,t=s.glInternalFormat,n=s.engineFormat)}return{mipmapsFaces:o,engineFormat:n,internalFormat:t,width:r,height:i}}(t.data),m=p.width,v=(p.height,p.mipmapsFaces),g=p.engineFormat,_=new Qn(n,m,g,!0);if(_.name=t.name,!_._glTexture)return;for(var y=0;y<6;y++)for(var b=v[y].length,x=0;x<b;x++){var w=v[y][x],T=w.data,A=w.width,E=w.height;_.setPixelBuffer(e.TextureCubeFace.PositiveX+y,T,x,0,0,A,E)}t.asset=_}}}]),t}();function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ma(e,t,n){return t&&Oa(e.prototype,t),n&&Oa(e,n),e}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pa(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ka(e);if(t){var i=ka(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pa(this,n)}}function Ia(e,t,n){return(Ia="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ka(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Da(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}Vo.registerHandler("ktx",new xa),Vo.registerHandler("ktxNew",new Aa);var Na=function(){function e(t){Ea(this,e),this._gl=void 0,this._stateStack=[],this._parameters={},this._gl=t,this._stateStack=[],this._parameters={},this._parameters[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS]=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._parameters[t.MAX_VERTEX_UNIFORM_VECTORS]=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this._parameters[t.MAX_VERTEX_ATTRIBS]=t.getParameter(t.MAX_VERTEX_ATTRIBS),this._parameters[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS]=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._parameters[t.BLEND]=!1,t.disable(t.BLEND),this._parameters[t.CULL_FACE]=!0,t.enable(t.CULL_FACE),this._parameters[t.DEPTH_TEST]=!0,t.enable(t.DEPTH_TEST),this._parameters[t.DITHER]=!1,t.disable(t.DITHER),this._parameters[t.POLYGON_OFFSET_FILL]=!1,t.disable(t.POLYGON_OFFSET_FILL),this._parameters[t.SAMPLE_ALPHA_TO_COVERAGE]=!1,t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),this._parameters[t.SAMPLE_COVERAGE]=!1,t.disable(t.SAMPLE_COVERAGE),this._parameters[t.SCISSOR_TEST]=!1,t.disable(t.SCISSOR_TEST),this._parameters[t.STENCIL_TEST]=!1,t.disable(t.STENCIL_TEST),this._parameters[t.COLOR_WRITEMASK]=[!0,!0,!0,!0],t.colorMask(!0,!0,!0,!0),this._parameters[t.DEPTH_WRITEMASK]=!0,t.depthMask(!0),this._parameters[t.BLEND_SRC_RGB]=t.ONE,this._parameters[t.BLEND_SRC_ALPHA]=t.ONE,this._parameters[t.BLEND_DST_RGB]=t.ZERO,this._parameters[t.BLEND_DST_ALPHA]=t.ZERO,t.blendFunc(t.ONE,t.ZERO),this._parameters[t.BLEND_EQUATION_RGB]=t.FUNC_ADD,this._parameters[t.BLEND_EQUATION_ALPHA]=t.FUNC_ADD,this._parameters[t.CULL_FACE_MODE]=t.BACK,t.cullFace(t.BACK),this._parameters[t.FRONT_FACE]=t.CCW,t.frontFace(t.CCW),this._parameters[t.DEPTH_FUNC]=t.LESS,t.depthFunc(t.LESS),this._parameters[t.DEPTH_RANGE]=[0,1],t.depthRange(0,1),this._parameters[t.POLYGON_OFFSET_FACTOR]=0,this._parameters[t.POLYGON_OFFSET_UNITS]=0,t.polygonOffset(0,0),this._parameters[t.SCISSOR_BOX]=[0,0,t.canvas.width,t.canvas.height],this._parameters[t.STENCIL_FUNC]=t.ALWAYS,this._parameters[t.STENCIL_VALUE_MASK]=255,this._parameters[t.STENCIL_REF]=0,t.stencilFunc(t.ALWAYS,0,255),this._parameters[t.STENCIL_WRITEMASK]=255,t.stencilMask(255),this._parameters[t.STENCIL_FAIL]=t.KEEP,this._parameters[t.STENCIL_PASS_DEPTH_FAIL]=t.KEEP,this._parameters[t.STENCIL_PASS_DEPTH_PASS]=t.KEEP}return Ma(e,[{key:"getParameter",value:function(e){return this._parameters[e]}},{key:"pushStateBlock",value:function(e){this._stateStack.push({name:e,states:[]})}},{key:"popStateBlock",value:function(){var e,t=Da(this._stateStack.pop().states);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.func,i=n.args,o=n.parameters;for(var a in r.apply(this._gl,i),o)this._parameters[a]=o[a]}}catch(e){t.e(e)}finally{t.f()}}},{key:"_getStateStackTop",value:function(){var e=this._stateStack.length;return e>0?this._stateStack[e-1]:null}},{key:"_pushState",value:function(e,t,n){var r=this._getStateStackTop();r&&r.states.push({func:e,args:t,parameters:n})}},{key:"enable",value:function(e){if(!0!==this._parameters[e]){this._parameters[e]=!0,this._gl.enable(e);var t={};t[e]=!1,this._pushState(this._gl.disable,[e],t)}}},{key:"disable",value:function(e){if(!1!==this._parameters[e]){this._parameters[e]=!1,this._gl.disable(e);var t={};t[e]=!0,this._pushState(this._gl.enable,[e],t)}}},{key:"blendFunc",value:function(e,t){var n=this._gl,r=this._parameters;if(r[n.BLEND_SRC_RGB]!==e||r[n.BLEND_SRC_ALPHA]!==e||r[n.BLEND_DST_RGB]!==t||r[n.BLEND_DST_ALPHA]!==t){var i=[r[n.BLEND_SRC_RGB],r[n.BLEND_DST_RGB],r[n.BLEND_SRC_ALPHA],r[n.BLEND_DST_ALPHA]],o={};o[n.BLEND_SRC_RGB]=r[n.BLEND_SRC_RGB],o[n.BLEND_DST_RGB]=r[n.BLEND_DST_RGB],o[n.BLEND_SRC_ALPHA]=r[n.BLEND_SRC_ALPHA],o[n.BLEND_DST_ALPHA]=r[n.BLEND_DST_ALPHA],this._pushState(n.blendFuncSeparate,i,o),r[n.BLEND_SRC_RGB]=e,r[n.BLEND_SRC_ALPHA]=e,r[n.BLEND_DST_RGB]=t,r[n.BLEND_DST_ALPHA]=t,n.blendFunc(e,t)}}},{key:"blendFuncSeparate",value:function(e,t,n,r){var i=this._gl,o=this._parameters;if(o[i.BLEND_SRC_RGB]!==e||o[i.BLEND_SRC_ALPHA]!==n||o[i.BLEND_DST_RGB]!==t||o[i.BLEND_DST_ALPHA]!==r){var a=[o[i.BLEND_SRC_RGB],o[i.BLEND_DST_RGB],o[i.BLEND_SRC_ALPHA],o[i.BLEND_DST_ALPHA]],s={};s[i.BLEND_SRC_RGB]=o[i.BLEND_SRC_RGB],s[i.BLEND_DST_RGB]=o[i.BLEND_DST_RGB],s[i.BLEND_SRC_ALPHA]=o[i.BLEND_SRC_ALPHA],s[i.BLEND_DST_ALPHA]=o[i.BLEND_DST_ALPHA],this._pushState(i.blendFuncSeparate,a,s),o[i.BLEND_SRC_RGB]=e,o[i.BLEND_SRC_ALPHA]=n,o[i.BLEND_DST_RGB]=t,o[i.BLEND_DST_ALPHA]=r,i.blendFuncSeparate(e,t,n,r)}}},{key:"blendEquationSeparate",value:function(e,t){var n=this._gl,r=this._parameters;if(r[n.BLEND_EQUATION_RGB]!==e||r[n.BLEND_EQUATION_ALPHA]!==t){var i=[r[n.BLEND_EQUATION_RGB],r[n.BLEND_EQUATION_ALPHA]],o={};o[n.BLEND_EQUATION_RGB]=r[n.BLEND_EQUATION_RGB],o[n.BLEND_EQUATION_ALPHA]=r[n.BLEND_EQUATION_ALPHA],this._pushState(n.blendEquationSeparate,i,o),r[n.BLEND_EQUATION_RGB]=e,r[n.BLEND_EQUATION_ALPHA]=t,n.blendEquationSeparate(e,t)}}},{key:"colorMask",value:function(e,t,n,r){var i=this._gl,o={};o[i.COLOR_WRITEMASK]=this._parameters[i.COLOR_WRITEMASK],this._pushState(i.colorMask,this._parameters[i.COLOR_WRITEMASK],o),this._parameters[i.COLOR_WRITEMASK]=[e,t,n,r],i.colorMask(e,t,n,r)}},{key:"depthMask",value:function(e){var t=this._gl;if(this._parameters[t.DEPTH_WRITEMASK]!==e){var n={};n[t.DEPTH_WRITEMASK]=this._parameters[t.DEPTH_WRITEMASK],this._pushState(t.depthMask,[this._parameters[t.DEPTH_WRITEMASK]],n),this._parameters[t.DEPTH_WRITEMASK]=e,t.depthMask(e)}}},{key:"cullFace",value:function(e){var t=this._gl;if(this._parameters[t.CULL_FACE_MODE]!==e){var n={};n[t.CULL_FACE_MODE]=this._parameters[t.CULL_FACE_MODE],this._pushState(t.cullFace,[this._parameters[t.CULL_FACE_MODE]],n),this._parameters[t.CULL_FACE_MODE]=e,t.cullFace(e)}}},{key:"frontFace",value:function(e){var t=this._gl;if(this._parameters[t.FRONT_FACE]!==e){var n={};n[t.FRONT_FACE]=this._parameters[t.FRONT_FACE],this._pushState(t.frontFace,[this._parameters[t.FRONT_FACE]],n),this._parameters[t.FRONT_FACE]=e,t.frontFace(e)}}},{key:"depthFunc",value:function(e){var t=this._gl;if(this._parameters[t.DEPTH_FUNC]!==e){var n={};n[t.DEPTH_FUNC]=this._parameters[t.DEPTH_FUNC],this._pushState(t.depthFunc,[this._parameters[t.DEPTH_FUNC]],n),this._parameters[t.DEPTH_FUNC]=e,t.depthFunc(e)}}},{key:"depthRange",value:function(e,t){var n=this._gl,r=this._parameters[n.DEPTH_RANGE];if(r[0]!==e||r[1]!==t){var i={};i[n.DEPTH_RANGE]=r,this._pushState(n.depthRange,[this._parameters[n.DEPTH_RANGE]],i),this._parameters[n.DEPTH_RANGE]=[e,t],n.depthRange(e,t)}}},{key:"polygonOffset",value:function(e,t){var n=this._gl;if(this._parameters[n.POLYGON_OFFSET_FACTOR]!==e||this._parameters[n.POLYGON_OFFSET_UNITS]!==t){var r={};r[n.POLYGON_OFFSET_FACTOR]=this._parameters[n.POLYGON_OFFSET_FACTOR],r[n.POLYGON_OFFSET_UNITS]=this._parameters[n.POLYGON_OFFSET_UNITS],this._pushState(n.polygonOffset,[this._parameters[n.POLYGON_OFFSET_FACTOR],this._parameters[n.POLYGON_OFFSET_UNITS]],r),this._parameters[n.POLYGON_OFFSET_FACTOR]=e,this._parameters[n.POLYGON_OFFSET_UNITS]=t,n.polygonOffset(e,t)}}},{key:"scissor",value:function(e,t,n,r){var i=this._gl,o=this._parameters[i.SCISSOR_BOX];if(o[0]!==e||o[1]!==t||o[2]!==n||o[3]!==r){var a={};a[i.SCISSOR_BOX]=o,this._pushState(i.scissor,o,a),this._parameters[i.SCISSOR_BOX]=[e,t,n,r],i.scissor(e,t,n,r)}}},{key:"stencilFunc",value:function(e,t,n){var r=this._gl;if(this._parameters[r.STENCIL_FUNC]!==e||this._parameters[r.STENCIL_REF]!==t||this._parameters[r.STENCIL_VALUE_MASK]!==n){var i=[this._parameters[r.STENCIL_FUNC],this._parameters[r.STENCIL_REF],this._parameters[r.STENCIL_VALUE_MASK]],o={};o[r.STENCIL_FUNC]=i[0],o[r.STENCIL_REF]=i[1],o[r.STENCIL_VALUE_MASK]=i[2],this._parameters[r.STENCIL_FUNC]=e,this._parameters[r.STENCIL_REF]=t,this._parameters[r.STENCIL_VALUE_MASK]=n,r.stencilFunc(e,t,n)}}},{key:"stencilOp",value:function(e,t,n){var r=this._gl;if(this._parameters[r.STENCIL_FAIL]!==e||this._parameters[r.STENCIL_PASS_DEPTH_FAIL]!==t||this._parameters[r.STENCIL_PASS_DEPTH_PASS]!==n){var i=[this._parameters[r.STENCIL_FAIL],this._parameters[r.STENCIL_PASS_DEPTH_FAIL],this._parameters[r.STENCIL_PASS_DEPTH_PASS]],o={};o[r.STENCIL_FAIL]=i[0],o[r.STENCIL_PASS_DEPTH_FAIL]=i[1],o[r.STENCIL_PASS_DEPTH_PASS]=i[2],this._parameters[r.STENCIL_FAIL]=e,this._parameters[r.STENCIL_BACK_PASS_DEPTH_FAIL]=t,this._parameters[r.STENCIL_PASS_DEPTH_PASS]=n,r.stencilOp(e,t,n)}}}]),e}(),za=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ea(this,t),this._rhi=void 0,this._objectSet=void 0,this._checkList=void 0,this._nextID=void 0,this._enableCollect=void 0,this._rhi=e,this._objectSet={},this._checkList=[],this._nextID=1,this._enableCollect=void 0===n.enableCollect||!!n.enableCollect}return Ma(t,[{key:"requireObject",value:function(t,n){var r=null;if(t.cacheID&&(r=this._objectSet[t.cacheID]),!r||t.needRecreate){var i=this._nextID++,o=this._objectSet;r=new n(this._rhi,t),o[i]=r,r.cacheID=i,r.asset=t,t.cacheID=i,t.needRecreate=!1,this._enableCollect&&t.type===e.AssetType.Cache&&this._checkList.push(r)}return r.activeFrame=this._rhi.frameCount,r}},{key:"compact",value:function(){if(this._enableCollect)for(var e=this._rhi.frameCount,t=this._checkList,n=this._objectSet,r=t.length-1;r>=0;r--){var i=t[r];i.activeFrame<e&&(delete n[i.cacheID],t.splice(r,1),i.finalize())}}},{key:"finalize",value:function(){for(var e in this._objectSet)this._objectSet[e].finalize(!0);this._objectSet={},this._checkList=[]}}]),t}(),ja=function(){function e(t,n){Ea(this,e),this._rhi=void 0,this.asset=void 0,this.activeFrame=void 0,this.cacheID=void 0,this._rhi=t,this.asset=n}return Ma(e,[{key:"rhi",get:function(){return this._rhi}}]),e}(),Ba=function(t){Ra(r,t);var n=La(r);function r(t,i){var o;return Ea(this,r),(o=n.call(this,t,i))._primitive=void 0,o._glIndexBuffer=void 0,o._glVertBuffers=void 0,o._glInstancedBuffer=void 0,o.attribLocArray=void 0,o.canUseInstancedArrays=void 0,o._primitive=i,o.attribLocArray=[],o.canUseInstancedArrays=o.rhi.canIUse(e.GLCapabilityType.instancedArrays),o}return Ma(r,[{key:"initBuffers",value:function(){var e=this.rhi.gl,t=this._primitive,n=t.indexBuffer,r=t.vertexBuffers,i=t.instancedBuffer,o=t.usage;n&&(this._glIndexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._glIndexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),this._glVertBuffers=[];for(var a=0,s=r.length;a<s;a++)this._glVertBuffers[a]=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._glVertBuffers[a]),e.bufferData(e.ARRAY_BUFFER,r[a],o),e.bindBuffer(e.ARRAY_BUFFER,null);i&&(this._glInstancedBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._glInstancedBuffer),e.bufferData(e.ARRAY_BUFFER,i,o),e.bindBuffer(e.ARRAY_BUFFER,null))}},{key:"updateVertexBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.rhi.gl,i=this._primitive,o=i.vertexBuffers[e],a=this._glVertBuffers[e];r.bindBuffer(r.ARRAY_BUFFER,a);var s=new Int8Array(o,t,n);r.bufferSubData(r.ARRAY_BUFFER,t,s),r.bindBuffer(r.ARRAY_BUFFER,null)}},{key:"updateInstancedBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.rhi.gl,r=this._primitive,i=r.instancedBuffer,o=this._glInstancedBuffer;n.bindBuffer(n.ARRAY_BUFFER,o);var a=new Int8Array(i,e,t);n.bufferSubData(n.ARRAY_BUFFER,e,a),n.bindBuffer(n.ARRAY_BUFFER,null)}},{key:"updateIndexBuffer",value:function(){var e=this.rhi.gl,t=this._primitive.indexBuffer;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._glIndexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.DYNAMIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"bindBufferAndAttrib",value:function(e){var t=this.rhi.gl,n=this._primitive;this.attribLocArray=[];var r,i,o=e.attributes,a=n.attributes,s=this._glVertBuffers,l=this._glInstancedBuffer;for(var c in o){var u=o[c].location;if(-1!==u){var d=a[o[c].semantic];d?(i!==(r=d.instanced?l:s[d.vertexBufferIndex])&&(i=r,t.bindBuffer(t.ARRAY_BUFFER,r)),t.enableVertexAttribArray(u),t.vertexAttribPointer(u,d.size,d.type,d.normalized,d.stride,d.offset),this.canUseInstancedArrays&&t.vertexAttribDivisor(u,d.instanced),this.attribLocArray.push(u)):A.warn("vertex attribute not found: "+c)}}t.bindBuffer(t.ARRAY_BUFFER,null)}},{key:"prepareBuffers",value:function(){var t,n=this._primitive;switch(n.updateType){case e.UpdateType.NO_UPDATE:break;case e.UpdateType.UPDATE_ALL:this.initBuffers(),n.updateType=e.UpdateType.NO_UPDATE;break;case e.UpdateType.UPDATE_RANGE:(null===(t=this._glVertBuffers)||void 0===t?void 0:t.length)||this.initBuffers(),n.updateVertex&&this.updateVertexBuffer(0,n.updateRange.byteOffset,n.updateRange.byteLength),n.updateInstanced&&this.updateInstancedBuffer(n.updateRange.byteOffset,n.updateRange.byteLength),n.updateType=e.UpdateType.NO_UPDATE,n.updateInstanced=!1,n.updateVertex=!1,n.resetUpdateRange()}n.indexNeedUpdate&&(n.indexNeedUpdate=!1,this._glIndexBuffer&&this.updateIndexBuffer())}},{key:"draw",value:function(e){var t=this.rhi.gl,n=this._primitive;this.prepareBuffers(),this.bindBufferAndAttrib(e);var r=this._glIndexBuffer;n.isInstanced?this.canUseInstancedArrays?r?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),t.drawElementsInstanced(n.mode,n.indexCount,n.indexType,n.indexOffset,n.instancedCount),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)):t.drawArraysInstanced(n.mode,n.vertexOffset,n.vertexCount,n.instancedCount):A.error("ANGLE_instanced_arrays extension is not supported"):r?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),t.drawElements(n.mode,n.indexCount,n.indexType,n.indexOffset),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)):t.drawArrays(n.mode,n.vertexOffset,n.vertexCount),this.disableAttrib()}},{key:"disableAttrib",value:function(){for(var e=this.rhi.gl,t=0,n=this.attribLocArray.length;t<n;t++)e.disableVertexAttribArray(this.attribLocArray[t])}},{key:"finalize",value:function(){var t=this.rhi.gl,n=this._primitive;if(this._glVertBuffers){for(var r=0;r<this._glVertBuffers.length;r++)t.deleteBuffer(this._glVertBuffers[r]);n.updateType=e.UpdateType.UPDATE_ALL,this._glVertBuffers=null}this._glIndexBuffer&&(t.deleteBuffer(this._glIndexBuffer),this._glIndexBuffer=null)}}]),r}(ja),Ua=function(e){Ra(n,e);var t=La(n);function n(e,r){var i;return Ea(this,n),(i=t.call(this,e,r)).vao=void 0,i.vao=new Map,i}return Ma(n,[{key:"registerVAO",value:function(e){var t=this.rhi.gl,n=t.createVertexArray();t.bindVertexArray(n),this._glIndexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._glIndexBuffer),this.bindBufferAndAttrib(e),t.bindVertexArray(null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this.disableAttrib(),this.vao.set(e.cacheID,n)}},{key:"draw",value:function(e){var t=this.rhi.gl,n=this._primitive;this.prepareBuffers(),this.vao.has(e.cacheID)||this.registerVAO(e);var r=this.vao.get(e.cacheID);t.bindVertexArray(r);var i=this._glIndexBuffer;n.isInstanced?this.canUseInstancedArrays?i?t.drawElementsInstanced(n.mode,n.indexCount,n.indexType,n.indexOffset,n.instancedCount):t.drawArraysInstanced(n.mode,n.vertexOffset,n.vertexCount,n.instancedCount):A.error("ANGLE_instanced_arrays extension is not supported"):i?t.drawElements(n.mode,n.indexCount,n.indexType,n.indexOffset):t.drawArrays(n.mode,n.vertexOffset,n.vertexCount),t.bindVertexArray(null)}},{key:"finalize",value:function(){Ia(ka(n.prototype),"finalize",this).call(this);var e=this.rhi.gl;this.vao.forEach((function(t){e.deleteVertexArray(t)}))}}]),n}(Ba),Va=[],Ha=function(){function e(t){Ea(this,e),this._gl=void 0,this._vertexShader=void 0,this._fragmentShader=void 0,this._vertexShaderSource=void 0,this._fragmentShaderSource=void 0,this._program=void 0,this._attributeCache=void 0,this._uniformCache=void 0,this._gl=t,this._vertexShader=null,this._fragmentShader=null,this._vertexShaderSource=null,this._fragmentShaderSource=null,this._program=null,this._attributeCache={},this._uniformCache={}}return Ma(e,null,[{key:"requireProgram",value:function(t,n){var r=null;return Va.some((function(e){if(e._gl===n&&e._vertexShaderSource===t.vertexShader&&e._fragmentShaderSource===t.fragmentShader)return r=e,!0})),r||((r=new e(n)).createFromSource(t.vertexShader,t.fragmentShader,t.attribLocSet),Va.push(r)),r}},{key:"releaseProgram",value:function(e){var t=Va.indexOf(e);-1!==t&&Va.splice(t,1)}}]),Ma(e,[{key:"createFromSource",value:function(e,t,n){var r=this._gl,i=this._compileShader(r.VERTEX_SHADER,e);if(!i)return!1;var o=this._compileShader(r.FRAGMENT_SHADER,t);if(!o)return!1;var a=r.createProgram();if(r.attachShader(a,i),r.attachShader(a,o),n)for(var s in n)r.bindAttribLocation(a,n[s],s);return r.linkProgram(a),r.validateProgram(a),r.isContextLost()?(A.error("Contex lost while linking program."),r.deleteShader(i),r.deleteShader(o),null):!A.isEnabled||r.getProgramParameter(a,r.LINK_STATUS)||r.isContextLost()?(this._vertexShader=i,this._fragmentShader=o,this._vertexShaderSource=e,this._fragmentShaderSource=t,this._program=a,!0):(A.error("Could not link WebGL program. \n"+r.getProgramInfoLog(a)),r.deleteProgram(a),!1)}},{key:"_compileShader",value:function(e,t){var n=this._gl,r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),n.isContextLost()?(A.error("Contex lost while compiling shader."),n.deleteShader(r),null):!A.isEnabled||n.getShaderParameter(r,n.COMPILE_STATUS)||n.isContextLost()?r:(A.error("Could not compile WebGL shader.\n".concat(function(e){var t,n=e.split("\n"),r=(n.length+1).toString().length+6;return n.map((function(e,n){if((t="0:".concat(n+1)).length>=r)return t.substring(0,r)+e;for(var i=0;i<r-t.length;i++)t+=" ";return t+e})).join("\n")}(t),"\n").concat(n.getShaderInfoLog(r))),n.deleteShader(r),null)}},{key:"getAttribLocation",value:function(e,t){return this._attributeCache.hasOwnProperty(t)?this._attributeCache[t]:this._attributeCache[t]=this._gl.getAttribLocation(e,t)}},{key:"getUniformLocation",value:function(e,t){return this._uniformCache.hasOwnProperty(t)?this._uniformCache[t]:this._uniformCache[t]=this._gl.getUniformLocation(e,t)}},{key:"finalize",value:function(){var t=this._gl;this._vertexShader&&t.deleteShader(this._vertexShader),this._fragmentShader&&t.deleteShader(this._fragmentShader),this._program&&t.deleteProgram(this._program),this._vertexShader=null,this._fragmentShader=null,this._vertexShaderSource=null,this._fragmentShaderSource=null,this._program=null,this._attributeCache={},this._uniformCache={},e.releaseProgram(this)}},{key:"program",get:function(){return this._program}}]),e}(),Ga=function(e){Ra(n,e);var t=La(n);function n(e,r,i){var o;return Ea(this,n),(o=t.call(this,e,r))._gl=void 0,o._glTexture=void 0,o._config=void 0,o._type=void 0,o._isNew=void 0,o._gl=e.gl,r._glTexture?(o._isNew=!0,o._glTexture=r._glTexture):o._glTexture=e.gl.createTexture(),o._config=r,o._type=i,o}return Ma(n,[{key:"activeBinding",value:function(e){var t=this._gl;t.activeTexture(t.TEXTURE0+e),t.bindTexture(this._type,this._glTexture)}},{key:"setPixelStore",value:function(){if(!this._isNew){var e=this._gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,+this._config.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+this._config.premultiplyAlpha)}}},{key:"setFilters",value:function(){if(!this._isNew){var e=this._gl;this._config.needUpdateFilers&&(this._config.needUpdateFilers=!1,e.texParameteri(this._type,e.TEXTURE_MAG_FILTER,this._config.filterMag),e.texParameteri(this._type,e.TEXTURE_MIN_FILTER,this._config.filterMin),e.texParameteri(this._type,e.TEXTURE_WRAP_S,this._config.wrapS),e.texParameteri(this._type,e.TEXTURE_WRAP_T,this._config.wrapT))}}},{key:"generateMipmap",value:function(){this._isNew||this._config.canMipmap&&this._gl.generateMipmap(this._type)}},{key:"finalize",value:function(){if(!this._isNew){var e=this._gl;this._glTexture&&(e.deleteTexture(this._glTexture),this._glTexture=null),this._config.resetState()}}},{key:"glTexture",get:function(){return this._glTexture}}]),n}(ja),Wa=function(t){Ra(r,t);var n=La(r);function r(e,t){return Ea(this,r),n.call(this,e,t,e.gl.TEXTURE_2D)}return Ma(r,[{key:"activeBinding",value:function(e){Ia(ka(r.prototype),"activeBinding",this).call(this,e),this.updateTexture(),Ia(ka(r.prototype),"setFilters",this).call(this)}},{key:"updateTexture",value:function(){if(!this._isNew){var t=this._gl,n=this.rhi.isWebGL2,i=this._config,o=i.isCompressed,a=i.needUpdateWholeTexture,s=i.updateSubRects,l=i.updateSubImageData,c=i.isFloat,u=i.isRaw,d=i.width,f=i.height;if(o){if(o&&a){var h=i;this.rhi.canIUseCompressedTextureInternalFormat(h.internalFormat)||A.warn("GLTexture2D: Attempt to load unsupport compressed texture format");var p=h.mipmaps;if(p){Ia(ka(r.prototype),"setPixelStore",this).call(this);for(var m=0;m<p.length;m++){var v=p[m];t.compressedTexImage2D(t.TEXTURE_2D,m,h.internalFormat,v.width,v.height,0,v.data)}}i.needUpdateWholeTexture=!1}}else{var g=i.image;if(a&&g){if(Ia(ka(r.prototype),"setPixelStore",this).call(this),u)if(c){if(!this.rhi.canIUse(e.GLCapabilityType.textureFloat))return void A.warn("");t.texImage2D(t.TEXTURE_2D,0,n?t.RGBA32F:t.RGBA,d,f,0,t.RGBA,t.FLOAT,g)}else t.texImage2D(t.TEXTURE_2D,0,t.RGBA,d,f,0,t.RGBA,t.UNSIGNED_BYTE,g);else t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,g),Ia(ka(r.prototype),"generateMipmap",this).call(this);i.needUpdateWholeTexture=!1}else if(s&&s.length>0){Ia(ka(r.prototype),"setPixelStore",this).call(this);for(var _=s.length-1;_>=0;_--)this.updateSubTexture(t,i,s[_],l[_]);Ia(ka(r.prototype),"generateMipmap",this).call(this),i.updateSubRects=[],i.updateSubImageData=[]}}}}},{key:"updateSubTexture",value:function(e,t,n,r){if(!this._isNew){var i=r||t.getImageData(n.x,n.y,n.width,n.height);i&&e.texSubImage2D(this._type,0,n.x,n.y,e.RGBA,e.UNSIGNED_BYTE,i)}}}]),r}(Ga),Xa=function(e){Ra(n,e);var t=La(n);function n(e,r){return Ea(this,n),t.call(this,e,r,e.gl.TEXTURE_CUBE_MAP)}return Ma(n,[{key:"activeBinding",value:function(e){Ia(ka(n.prototype),"activeBinding",this).call(this,e),this.updateTexture(),Ia(ka(n.prototype),"setFilters",this).call(this)}},{key:"updateTexture",value:function(){if(!this._isNew){var e=this._gl,t=this._config;if(t.isCompressed)this.updateCompressedTexture();else{var r=t.images;if(t.needUpdateWholeTexture||t.needUpdateCubeTextureFace.includes(!0)){Ia(ka(n.prototype),"setPixelStore",this).call(this);for(var i=0;i<G.length;i++)for(var o=0;o<r.length;o++)(t.needUpdateWholeTexture||t.needUpdateCubeTextureFace[i])&&(t.needUpdateCubeTextureFace[i]=!1,e.texImage2D(G[i],o,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r[o][i]));Ia(ka(n.prototype),"generateMipmap",this).call(this)}}t.needUpdateWholeTexture=!1}}},{key:"updateCompressedTexture",value:function(){if(!this._isNew){var e=this._gl,t=this._config,r=t.mipmapsFaces;if(t.needUpdateWholeTexture||t.needUpdateCubeTextureFace.includes(!0)){this.rhi.canIUseCompressedTextureInternalFormat(t.internalFormat)||A.warn("GLTextureCubeMap: Attempt to load unsupport compressed texture format"),Ia(ka(n.prototype),"setPixelStore",this).call(this);for(var i=0;i<G.length;i++)if(t.needUpdateWholeTexture||t.needUpdateCubeTextureFace[i]){for(var o=r[i],a=0;a<o.length;a++){var s=o[a];e.compressedTexImage2D(G[i],a,t.internalFormat,s.width,s.height,0,s.data)}t.needUpdateCubeTextureFace[i]=!1}}}}}]),n}(Ga),Ya={};Ya[e.DataType.FLOAT]=0,Ya[e.DataType.FLOAT_VEC2]=new Float32Array([0,0]),Ya[e.DataType.FLOAT_VEC3]=new Float32Array([0,0,0]),Ya[e.DataType.FLOAT_VEC4]=new Float32Array([0,0,0,0]),Ya[e.DataType.FLOAT_MAT4]=Ee.create();var qa=function(t){Ra(r,t);var n=La(r);function r(e,t){var i;Ea(this,r),(i=n.call(this,e,t))._tech=void 0,i._activeTextureCount=void 0,i._program=void 0,i._attributes=void 0,i._uniforms=void 0,i._tech=t,i._activeTextureCount=0;var o=e.gl;i._program=Ha.requireProgram(t,o);var a=i._program.program;i._attributes={};var s=t.attributes;for(var l in s)i._attributes[l]={name:l,semantic:s[l].semantic,location:i._program.getAttribLocation(a,l)};i._uniforms={};var c=t.uniforms;for(var u in c){var d=i._program.getUniformLocation(a,u);null!==d&&(i._uniforms[u]={name:u,location:d})}return i}return Ma(r,[{key:"finalize",value:function(e){this._program&&e&&(this._program.finalize(),this._program=null)}},{key:"begin",value:function(e){var t=this.rhi.gl,n=this._program.program;this._activeTextureCount=0,t.useProgram(n);var r=this._uniforms,i=this._tech.uniforms;for(var o in i)r.hasOwnProperty(o)&&this._uploadUniformValue(i[o],r[o].location,e.getValue(o));var a=this.rhi.renderStates;this._tech.states&&(a.pushStateBlock(this._tech.name),this._applyStates(a))}},{key:"end",value:function(){this._tech.states&&this.rhi.renderStates.popStateBlock()}},{key:"_applyStates",value:function(e){var t=this._tech.states,n=t.enable;if(n)for(var r=0,i=n.length;r<i;r++)e.enable(n[r]);var o=t.disable;if(o)for(var a=0,s=o.length;a<s;a++)e.disable(o[a]);var l=t.functions;if(l)for(var c in l){var u=Array.isArray(l[c])?l[c]:[l[c]];e[c].apply(e,u)}}},{key:"_uploadUniformValue",value:function(t,n,r){null==r&&(r=Ya[t.type]);var i=this.rhi.gl;switch(t.type){case e.DataType.FLOAT:r.length?i.uniform1fv(n,r):i.uniform1f(n,r);break;case e.DataType.INT:r.length?i.uniform1iv(n,r):i.uniform1i(n,r);break;case e.DataType.FLOAT_VEC2:i.uniform2fv(n,r);break;case e.DataType.FLOAT_VEC3:i.uniform3fv(n,r);break;case e.DataType.FLOAT_VEC4:i.uniform4fv(n,r);break;case e.DataType.INT_VEC2:i.uniform2iv(n,r);break;case e.DataType.INT_VEC3:i.uniform3iv(n,r);break;case e.DataType.INT_VEC4:i.uniform4iv(n,r);break;case e.DataType.FLOAT_MAT2:i.uniformMatrix2fv(n,!1,r);break;case e.DataType.FLOAT_MAT3:i.uniformMatrix3fv(n,!1,r);break;case e.DataType.FLOAT_MAT4:i.uniformMatrix4fv(n,!1,r);break;case e.DataType.SAMPLER_2D:var o=r;o&&(this._uploadTexture(o,n,Wa),this.bindUvMatrix(o.uvMatrix,t.name));break;case e.DataType.SAMPLER_CUBE:var a=r;a&&this._uploadTexture(a,n,Xa);break;default:A.warn("UNKNOWN uniform type: "+t.type)}}},{key:"bindUvMatrix",value:function(e,t){var n=t+"Matrix";if(!this._uniforms[n]){var r=this._program.program,i=this._program.getUniformLocation(r,n);(0===i||i)&&(this._uniforms[n]={name:n,location:i})}if(this._uniforms[n]){var o=this._uniforms[n].location;this.rhi.gl.uniformMatrix3fv(o,!1,e)}}},{key:"_uploadTexture",value:function(e,t,n){var r=this.rhi.assetsCache.requireObject(e,n);if(r){var i=this._activeTextureCount++;r.activeBinding(i),this.rhi.gl.uniform1i(t,i)}}},{key:"program",get:function(){return this._program}},{key:"attributes",get:function(){return this._attributes}},{key:"uniforms",get:function(){return this._uniforms}}]),r}(ja),Ka=function(){function e(t){Ea(this,e),this.gl=void 0,this._vbo=void 0,this._maxBatchCount=void 0,this._vertBuffer=void 0,this._vertCursor=void 0,this._drawSpriteCount=void 0,this._vertAttributes=void 0,this.gl=t,this._initVertexAttributes(t),this._vbo=t.createBuffer(),this._maxBatchCount=0,this._vertBuffer=null,this._vertCursor=0,this._drawSpriteCount=0}return Ma(e,[{key:"setMaxBatchCount",value:function(e){var t=6*e*9;this._vertBuffer&&this._vertBuffer.length>=t||(this._maxBatchCount=e,this._vertBuffer=new Float32Array(t))}},{key:"beginDraw",value:function(e){this._vertCursor=0,this._drawSpriteCount=0,e>this._maxBatchCount&&this.setMaxBatchCount(e)}},{key:"drawSprite",value:function(e,t,n){if(this._drawSpriteCount++,this._drawSpriteCount>this._maxBatchCount)A.warn("Sprite: sprite count overflow");else{var r=n,i=t.u,o=t.v,a=t.u+t.width,s=t.v+t.height;this._pushVertex(e.leftTop,[i,o],r),this._pushVertex(e.leftBottom,[i,s],r),this._pushVertex(e.rightBottom,[a,s],r),this._pushVertex(e.rightBottom,[a,s],r),this._pushVertex(e.rightTop,[a,o],r),this._pushVertex(e.leftTop,[i,o],r)}}},{key:"endDraw",value:function(){var e=this._vertCursor/9;if(!(e<=0)){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,this._vbo),t.bufferData(t.ARRAY_BUFFER,this._vertBuffer,t.DYNAMIC_DRAW);for(var n=0,r=this._vertAttributes.length;n<r;n++){var i=this._vertAttributes[n];t.vertexAttribPointer(i.lastShaderLoc,i.size,i.type,i.normalized,i.stride,i.offset),t.enableVertexAttribArray(i.lastShaderLoc)}t.drawArrays(t.TRIANGLES,0,e),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,null);for(var o=0,a=this._vertAttributes.length;o<a;o++)t.disableVertexAttribArray(this._vertAttributes[o].lastShaderLoc)}}},{key:"_initVertexAttributes",value:function(e){this._vertAttributes=[{name:"a_pos",size:3,offset:0,lastShaderLoc:0},{name:"a_uv",size:2,offset:12,lastShaderLoc:1},{name:"a_color",size:4,offset:20,lastShaderLoc:2}];var t,n=Da(this._vertAttributes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.type=e.FLOAT,r.normalized=!1,r.stride=36}}catch(e){n.e(e)}finally{n.f()}}},{key:"_pushVertex",value:function(e,t,n){var r=this._vertBuffer,i=this._vertCursor;r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2],r[i+3]=t[0],r[i+4]=t[1],r[i+5]=n[0],r[i+6]=n[1],r[i+7]=n[2],r[i+8]=n[3],this._vertCursor+=9}},{key:"finalize",value:function(){this._vbo&&(this.gl.deleteBuffer(this._vbo),this._vbo=null)}}]),e}(),Qa={name:"spriteTech3D",vertexShader:"\nprecision highp float;\n\nuniform mat4 matProjection;\nuniform mat4 matView;\n\nattribute vec3 a_pos;\nattribute vec2 a_uv;\nattribute vec4 a_color;\n\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvoid main()\n{\n  gl_Position = matProjection * matView * vec4(a_pos,1.0);\n  v_uv = a_uv;\n  v_color = a_color;\n}\n",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\n\nuniform sampler2D s_diffuse;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvoid main()\n{\n  // AlphaMaskTint ColorFade Out\n  vec4 baseColor = texture2D(s_diffuse, v_uv);\n  gl_FragColor = baseColor * v_color;\n}\n",attribLocSet:{a_pos:0,a_uv:1,a_color:2},attributes:{a_pos:{name:"a_pos",semantic:"POSITION",type:e.DataType.FLOAT_VEC3},a_uv:{name:"a_uv",semantic:"TEXCOORD_0",type:e.DataType.FLOAT_VEC2},a_color:{name:"a_color",semantic:"COLOR",type:e.DataType.FLOAT_VEC3}},uniforms:{matProjection:{name:"matProjection",semantic:e.UniformSemantic.PROJECTION,type:e.DataType.FLOAT_MAT4},matView:{name:"matView",semantic:e.UniformSemantic.VIEW,type:e.DataType.FLOAT_MAT4},s_diffuse:{name:"s_diffuse",type:e.DataType.SAMPLER_2D}},states:{disable:[e.RenderState.CULL_FACE],enable:[e.RenderState.BLEND],functions:{blendFunc:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA],depthMask:[!1]}}},Ja=function(){function e(t){var n;Ea(this,e),this._gl=void 0,this._batchedQueue=void 0,this._targetTexture=void 0,this._glSprite=void 0,this._glTech=void 0,this._material=void 0,this._camera=void 0,this._gl=t.gl,this._batchedQueue=[],this._targetTexture=null,this._glSprite=new Ka(t.gl),this._glTech=new qa(t,Qa),this._material={values:n={},setValue:function(e,t){n[e]=t},getValue:function(e){return n[e]}},this._camera=null}return Ma(e,[{key:"flush",value:function(){if(0!==this._batchedQueue.length)if(this._targetTexture){this._material.setValue("s_diffuse",this._targetTexture),this._material.setValue("matView",this._camera.viewMatrix),this._material.setValue("matProjection",this._camera.projectionMatrix),this._glTech.begin(this._material),this._glSprite.beginDraw(this._batchedQueue.length);for(var e=0,t=this._batchedQueue.length;e<t;e++){var n=this._batchedQueue[e].positionQuad,r=this._batchedQueue[e].uvRect,i=this._batchedQueue[e].tintColor;this._glSprite.drawSprite(n,r,i)}this._glSprite.endDraw(),this._glTech.end(),this._batchedQueue=[],this._targetTexture=null,this._camera=null}else A.error("No texture!")}},{key:"canBatch",value:function(e,t,n){return null===this._targetTexture||e===this._targetTexture&&n===this._camera}},{key:"drawSprite",value:function(e,t,n,r,i,o){this.canBatch(r,i,o)||this.flush(),this._targetTexture=r,this._camera=o,this._batchedQueue.push({positionQuad:e,uvRect:t,tintColor:n})}},{key:"finalize",value:function(){this._glSprite.finalize(),this._glTech.finalize()}}]),e}(),Za=function(t){Ra(r,t);var n=La(r);function r(e,t){var i;return Ea(this,r),(i=n.call(this,e,t)).renderTarget=void 0,i.glTexture=void 0,i.glDepthTexture=void 0,i.glCubeTexture=void 0,i.frameBuffer=void 0,i.depthRenderBuffer=void 0,i.MSAAFrameBuffer=void 0,i.MSAAColorRenderBuffer=void 0,i.MSAADepthRenderBuffer=void 0,i._isNew=!1,i.renderTarget=t,t._frameBuffer?(i._isNew=!0,Pa(i)):(i.initialize(),i)}return Ma(r,[{key:"activeRenderTarget",value:function(){var e=this.rhi.gl,t=this.renderTarget,n=t.width,r=t.height,i=t.isMulti;this._isNew?this.renderTarget._activeRenderTarget():this.MSAAFrameBuffer?e.bindFramebuffer(e.FRAMEBUFFER,this.MSAAFrameBuffer):e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.viewport(0,0,n,r),!i&&this.activeTexture()}},{key:"activeTexture",value:function(){if(!this._isNew){var e=this.renderTarget,t=e.texture,n=e.cubeTexture,r=e.depthTexture;n?this.rhi.assetsCache.requireObject(n,Xa):(this.rhi.assetsCache.requireObject(t,Wa),r&&this.rhi.assetsCache.requireObject(r,Wa))}}},{key:"setRenderTargetFace",value:function(e){if(this._isNew)this.renderTarget._setRenderTargetFace(e);else if(this.glCubeTexture){var t=this.rhi.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.glCubeTexture.glTexture,0),this.MSAAFrameBuffer?t.bindFramebuffer(t.FRAMEBUFFER,this.MSAAFrameBuffer):t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer)}}},{key:"getExactSamples",value:function(t){var n=this.rhi.canIUse(e.GLCapabilityType.multipleSample),r=this.rhi.gl;if(n){var i=r.getParameter(r.MAX_SAMPLES);return Q.clamp(t,1,i)}return 1}},{key:"initMSAA",value:function(){if(!this._isNew){var e=this.rhi.gl,t=this.renderTarget,n=t.width,r=t.height,i=t.samples;this.MSAAFrameBuffer=e.createFramebuffer(),this.MSAAColorRenderBuffer=e.createRenderbuffer(),this.MSAADepthRenderBuffer=e.createRenderbuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.MSAAFrameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,this.MSAAColorRenderBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.RGBA8,n,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.MSAAColorRenderBuffer),e.bindRenderbuffer(e.RENDERBUFFER,this.MSAADepthRenderBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH_COMPONENT32F,n,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.MSAADepthRenderBuffer);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);e.FRAMEBUFFER_COMPLETE===o?e.bindFramebuffer(e.FRAMEBUFFER,null):A.error("MSAA Frame buffer error: "+o.toString())}}},{key:"blitRenderTarget",value:function(){if(this._isNew&&this.renderTarget._MSAAFrameBuffer)this.renderTarget._blitRenderTarget();else if(this.MSAAFrameBuffer){var e=this.rhi.gl,t=this.renderTarget,n=t.width,r=t.height,i=e.COLOR_BUFFER_BIT;this.glDepthTexture&&(i=e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.bindFramebuffer(e.READ_FRAMEBUFFER,this.MSAAFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.frameBuffer),e.blitFramebuffer(0,0,n,r,0,0,n,r,i,e.NEAREST)}}},{key:"initialize",value:function(){if(!this._isNew){var e=this.rhi.gl;if(this.frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),!this.renderTarget.isMulti){this.bindFBO();var t=this.renderTarget.samples;(t=this.renderTarget.samples=this.getExactSamples(t))>1&&this.initMSAA()}}}},{key:"bindFBO",value:function(){if(!this._isNew){var t=this.rhi.gl,n=this.renderTarget,r=n.width,i=n.height,o=n.texture,a=n.cubeTexture,s=n.depthTexture;if(a){this.glCubeTexture=this.rhi.assetsCache.requireObject(a,Xa),this.glCubeTexture.activeBinding(0);for(var l=0;l<6;l++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null);this.depthRenderBuffer=this.initDepthRenderBuffer()}else this.glTexture=this.initColorTexture(o,0),s&&this.rhi.canIUse(e.GLCapabilityType.depthTexture)?this.glDepthTexture=this.initDepthTexture(s):this.depthRenderBuffer=this.initDepthRenderBuffer();this.checkFrameBuffer(),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}}},{key:"initColorTexture",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this._isNew){var r=this.rhi.gl,i=this.rhi.canIUse.bind(this.rhi),o=this.renderTarget,a=o.width,s=o.height,l=o.colorBufferFloat,c=i(e.GLCapabilityType.textureFloat),u=i(e.GLCapabilityType.colorBufferFloat);t.filterMin=r.NEAREST,t.filterMag=r.NEAREST;var d=this.rhi.assetsCache.requireObject(t,Wa);return n=r.COLOR_ATTACHMENT0+n,d.activeBinding(0),l&&c&&u?r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,a,s,0,r.RGBA,r.FLOAT,null):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,a,s,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,n,r.TEXTURE_2D,d.glTexture,0),d}}},{key:"initDepthTexture",value:function(t){if(!this._isNew){var n=this.rhi,r=n.gl,i=n.isWebGL2;if(!this.rhi.canIUse(e.GLCapabilityType.depthTexture))return null;t.filterMin=r.NEAREST,t.filterMag=r.NEAREST;var o=this.renderTarget,a=o.width,s=o.height,l=this.rhi.assetsCache.requireObject(t,Wa);l.activeBinding(0),r.texImage2D(r.TEXTURE_2D,0,i?r.DEPTH_COMPONENT32F:r.DEPTH_COMPONENT,a,s,0,r.DEPTH_COMPONENT,i?r.FLOAT:r.UNSIGNED_SHORT,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l.glTexture,0)}}},{key:"initDepthRenderBuffer",value:function(){if(!this._isNew){var e=this.rhi,t=e.gl,n=e.isWebGL2,r=this.renderTarget,i=r.width,o=r.height,a=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,n?t.DEPTH_COMPONENT32F:t.DEPTH_COMPONENT16,i,o),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,a),a}}},{key:"checkFrameBuffer",value:function(){var e=this.rhi.gl,t=e.checkFramebufferStatus(e.FRAMEBUFFER);e.FRAMEBUFFER_COMPLETE===t||A.error("Frame buffer error: "+t.toString())}},{key:"finalize",value:function(){if(!this._isNew){var e=this.rhi.gl;this.glTexture&&this.glTexture.finalize(),this.glDepthTexture&&this.glDepthTexture.finalize(),this.glCubeTexture&&this.glCubeTexture.finalize(),this.frameBuffer&&e.deleteFramebuffer(this.frameBuffer),this.depthRenderBuffer&&e.deleteRenderbuffer(this.depthRenderBuffer),this.MSAAFrameBuffer&&e.deleteFramebuffer(this.MSAAFrameBuffer),this.MSAAColorRenderBuffer&&e.deleteRenderbuffer(this.MSAAColorRenderBuffer),this.MSAADepthRenderBuffer&&e.deleteRenderbuffer(this.MSAADepthRenderBuffer),this.glTexture=null,this.glDepthTexture=null,this.glCubeTexture=null,this.frameBuffer=null,this.depthRenderBuffer=null,this.MSAAFrameBuffer=null,this.MSAAColorRenderBuffer=null,this.MSAADepthRenderBuffer=null}}}]),r}(ja),$a=function(){function e(t){Ea(this,e),this.rhi=void 0,this._requireResult=void 0,this.rhi=t,this._requireResult={}}return Ma(e,[{key:"requireExtension",value:function(e){return void 0!==this._requireResult[e]||(this._requireResult[e]=this.rhi.gl.getExtension(e)),this._requireResult[e]}}]),e}(),es=function(){function t(e){Ea(this,t),this._maxDrawBuffers=void 0,this._maxAnisoLevel=void 0,this._maxAntiAliasing=void 0,this._rhi=void 0,this.capabilityList=void 0,this._rhi=e,this.capabilityList=new Map,this.init(),this.compatibleAllInterface()}return Ma(t,[{key:"maxDrawBuffers",get:function(){return this._maxDrawBuffers||(this.canIUse(e.GLCapabilityType.drawBuffers)?this._maxDrawBuffers=this._rhi.gl.getParameter(this._rhi.gl.MAX_DRAW_BUFFERS):this._maxDrawBuffers=1),this._maxDrawBuffers}},{key:"maxAnisoLevel",get:function(){if(!this._maxAnisoLevel){var t=this._rhi.requireExtension(e.GLCapabilityType.textureFilterAnisotropic);this._maxAnisoLevel=t?this._rhi.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}return this._maxAnisoLevel}},{key:"maxAntiAliasing",get:function(){if(!this._maxAntiAliasing){var t=this._rhi.gl,n=this.canIUse(e.GLCapabilityType.multipleSample);this._maxAntiAliasing=n?t.getParameter(t.MAX_SAMPLES):1}return this._maxAntiAliasing}},{key:"rhi",get:function(){return this._rhi}}]),Ma(t,[{key:"canIUse",value:function(e){return this.capabilityList.get(e)}},{key:"canIUseCompressedTextureInternalFormat",value:function(t){var n=e.GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR,r=e.GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR,i=e.GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ASTC_4X4_KHR,o=e.GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ASTC_12X12_KHR,a=e.GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL,s=e.GLCompressedTextureInternalFormat.R11_EAC,l=e.GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ETC2_EAC,c=e.GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG,u=e.GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG,d=e.GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT,f=e.GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT;return t>=n&&r<=r||t>=i&&t<=o?this.canIUse(e.GLCapabilityType.astc):t===a?this.canIUse(e.GLCapabilityType.etc1):t>=s&&t<=l?this.canIUse(e.GLCapabilityType.etc):t>=c&&t<=u?this.canIUse(e.GLCapabilityType.pvrtc):t>=d&&t<=f&&this.canIUse(e.GLCapabilityType.s3tc)}},{key:"init",value:function(){var t=this.capabilityList,n=this.rhi.isWebGL2,r=this.rhi.requireExtension.bind(this.rhi),i=e.GLCapabilityType.standardDerivatives,o=e.GLCapabilityType.shaderTextureLod,a=e.GLCapabilityType.elementIndexUint,s=e.GLCapabilityType.depthTexture,l=e.GLCapabilityType.vertexArrayObject,c=e.GLCapabilityType.instancedArrays,u=e.GLCapabilityType.multipleSample,d=e.GLCapabilityType.drawBuffers,f=e.GLCapabilityType.astc,h=e.GLCapabilityType.astc_webkit,p=e.GLCapabilityType.etc,m=e.GLCapabilityType.etc_webkit,v=e.GLCapabilityType.etc1,g=e.GLCapabilityType.etc1_webkit,_=e.GLCapabilityType.pvrtc,y=e.GLCapabilityType.pvrtc_webkit,b=e.GLCapabilityType.s3tc,x=e.GLCapabilityType.s3tc_webkit,w=e.GLCapabilityType.textureFloat,T=e.GLCapabilityType.textureHalfFloat,A=e.GLCapabilityType.WEBGL_colorBufferFloat,E=e.GLCapabilityType.colorBufferFloat,O=e.GLCapabilityType.colorBufferHalfFloat,M=e.GLCapabilityType.textureFilterAnisotropic;t.set(i,n||!!r(i)),t.set(o,n||!!r(o)),t.set(a,n||!!r(a)),t.set(s,n||!!r(s)),t.set(l,n||!!r(l)),t.set(c,n||!!r(c)),t.set(u,n),t.set(d,n||!!r(d)),t.set(w,n||!!r(w)),t.set(T,n||!!r(T)),t.set(E,n&&!!r(E)||!!r(A)),t.set(O,n&&!!r(E)||!!r(O)),t.set(M,!!r(M)),t.set(f,!(!r(f)&&!r(h))),t.set(p,!(!r(p)&&!r(m))),t.set(v,!(!r(v)&&!r(g))),t.set(_,!(!r(_)&&!r(y))),t.set(b,!(!r(b)&&!r(x)))}},{key:"compatibleInterface",value:function(e,t){var n,r=this.rhi,i=r.gl;if(n=r.requireExtension(e))for(var o in t){var a=n[t[o]];i[o]=a instanceof Function?a.bind(n):a}}},{key:"compatibleAllInterface",value:function(){var t=e.GLCapabilityType.depthTexture,n=e.GLCapabilityType.vertexArrayObject,r=e.GLCapabilityType.instancedArrays,i=e.GLCapabilityType.drawBuffers,o=e.GLCapabilityType.textureFilterAnisotropic,a=e.GLCapabilityType.textureHalfFloat,s=e.GLCapabilityType.colorBufferHalfFloat,l=e.GLCapabilityType.WEBGL_colorBufferFloat;if(!this.rhi.isWebGL2){this.compatibleInterface(t,{UNSIGNED_INT_24_8:"UNSIGNED_INT_24_8_WEBGL"}),this.compatibleInterface(n,{createVertexArray:"createVertexArrayOES",deleteVertexArray:"deleteVertexArrayOES",isVertexArray:"isVertexArrayOES",bindVertexArray:"bindVertexArrayOES"}),this.compatibleInterface(r,{drawArraysInstanced:"drawArraysInstancedANGLE",drawElementsInstanced:"drawElementsInstancedANGLE",vertexAttribDivisor:"vertexAttribDivisorANGLE"}),this.compatibleInterface(i,{MAX_DRAW_BUFFERS:"MAX_DRAW_BUFFERS_WEBGL"});var c={};if(this.canIUse(e.GLCapabilityType.drawBuffers)){for(var u=0;u<this.rhi.requireExtension(i).MAX_DRAW_BUFFERS_WEBGL;u++)0!=u&&(c["COLOR_ATTACHMENT".concat(u)]="COLOR_ATTACHMENT".concat(u,"_WEBGL")),c["DRAW_BUFFER0".concat(u)]="DRAW_BUFFER".concat(u,"_WEBGL");this.compatibleInterface(i,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){Sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({drawBuffers:"drawBuffersWEBGL"},c))}this.compatibleInterface(a,{HAFL_FLOAT:"HALF_FLOAT_OES"}),this.compatibleInterface(s,{RGBA16F:"RBGA16F_EXT"}),this.compatibleInterface(l,{RGBA32F:"RBGA32F_EXT"})}this.compatibleInterface(o,{TEXTURE_MAX_ANISOTROPY_EXT:"TEXTURE_MAX_ANISOTROPY_EXT"})}},{key:"canIUseMoreJoints",get:function(){return this.canIUse(e.GLCapabilityType.textureFloat)&&this.rhi.renderStates.getParameter(this.rhi.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0}}]),t}(),ts=function(e){Ra(n,e);var t=La(n);function n(e,r){var i;return Ea(this,n),(i=t.call(this,e,r))._glTextures=[],i.buffers=[],i._isNew?Pa(i):(i.activeRenderTarget(),r.depthTexture?i.glDepthTexture=i.initDepthTexture(r.depthTexture):i.depthRenderBuffer=i.initDepthRenderBuffer(),r.textures.forEach((function(e,t){i._glTextures.push(i.initColorTexture(e,t)),i.buffers.push(i.rhi.gl.COLOR_ATTACHMENT0+t)})),i.checkFrameBuffer(),i.rhi.gl.drawBuffers(i.buffers),i)}return Ma(n,[{key:"finalize",value:function(){this._isNew||(Ia(ka(n.prototype),"finalize",this).call(this),this._glTextures.forEach((function(e){e.finalize()})),this._glTextures=[],this.buffers=[])}}]),n}(Za),ns=function(){function t(e,n){if(Ea(this,t),this._canvas=void 0,this._gl=void 0,this._renderStates=void 0,this._assetsCache=void 0,this._extensions=void 0,this._frameCount=void 0,this._spriteBatcher=void 0,this._capability=void 0,this._isWebGL2=void 0,this._canvas="string"==typeof e?document.getElementById(e):e,n.disableWebGL2||(this._gl=this._canvas.getContext("webgl2",n)||this._canvas.getContext("experimental-webgl2",n),this._isWebGL2=!0),this._gl||(this._gl=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n),this._isWebGL2=!1),!this._gl)throw new Error("Get GL Context FAILED.");this._renderStates=new Na(this._gl),this._assetsCache=new za(this,n),this._extensions=new $a(this),this._capability=new es(this),this._frameCount=0}return Ma(t,[{key:"isWebGL2",get:function(){return this._isWebGL2}}]),Ma(t,[{key:"requireExtension",value:function(e){return this._extensions.requireExtension(e)}},{key:"canIUse",value:function(e){return this.capability.canIUse(e)}},{key:"canIUseCompressedTextureInternalFormat",value:function(e){return this.capability.canIUseCompressedTextureInternalFormat(e)}},{key:"viewport",value:function(e,t,n,r){var i=this._gl;i.viewport(e,i.drawingBufferHeight-t-r,n,r)}},{key:"colorMask",value:function(e,t,n,r){this._gl.colorMask(e,t,n,r)}},{key:"beginFrame",value:function(){this._frameCount++}},{key:"clearRenderTarget",value:function(t,n){var r=this._gl;switch(t){case e.ClearMode.SOLID_COLOR:r.clearColor(n[0],n[1],n[2],n[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);break;case e.ClearMode.DEPTH_ONLY:r.clear(r.DEPTH_BUFFER_BIT);break;case e.ClearMode.COLOR_ONLY:r.clearColor(n[0],n[1],n[2],n[3]),r.clear(r.COLOR_BUFFER_BIT);break;case e.ClearMode.STENCIL_ONLY:r.clear(r.STENCIL_BUFFER_BIT);break;case e.ClearMode.ALL_CLEAR:r.clearColor(n[0],n[1],n[2],n[3]),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT);break;case e.ClearMode.DONT_CLEAR:}}},{key:"drawPrimitive",value:function(t,n){var r=this._assetsCache.requireObject(t,this.canIUse(e.GLCapabilityType.vertexArrayObject)&&!t.targets.length?Ua:Ba),i=this._assetsCache.requireObject(n.technique,qa);r&&i?(i.begin(n),r.draw(i),i.end()):A.error("draw primitive failed.")}},{key:"drawSprite",value:function(e,t,n,r,i,o){this._spriteBatcher||(this._spriteBatcher=new Ja(this)),this._spriteBatcher.drawSprite(e,t,n,r,i,o)}},{key:"flushSprite",value:function(){this._spriteBatcher&&this._spriteBatcher.flush()}},{key:"activeRenderTarget",value:function(e,t){if(e){var n=e.isMulti?ts:Za;this._assetsCache.requireObject(e,n).activeRenderTarget()}else{var r=this._gl;r.bindFramebuffer(r.FRAMEBUFFER,null),this.viewport(t.viewport[0],t.viewport[1],t.viewport[2],t.viewport[3])}}},{key:"blitRenderTarget",value:function(e){e&&this._assetsCache.requireObject(e,Za).blitRenderTarget()}},{key:"setRenderTargetFace",value:function(e,t){e&&this._assetsCache.requireObject(e,Za).setRenderTargetFace(t)}},{key:"endFrame",value:function(){this._frameCount%8==0&&this._assetsCache.compact()}},{key:"destroy",value:function(){this._assetsCache.finalize()}},{key:"gl",get:function(){return this._gl}},{key:"canvas",get:function(){return this._canvas}},{key:"assetsCache",get:function(){return this._assetsCache}},{key:"renderStates",get:function(){return this._renderStates}},{key:"capability",get:function(){return this._capability}},{key:"frameCount",get:function(){return this._frameCount}},{key:"canIUseMoreJoints",get:function(){return this.capability.canIUseMoreJoints}}]),t}();function rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t,n){return t&&is(e.prototype,t),n&&is(e,n),e}function as(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ss(e){return(ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ss(e);if(t){var i=ss(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ls(this,n)}}var us=0,ds=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RENDER_PASS".concat(us++),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;rs(this,t),this.name=void 0,this.enabled=void 0,this.priority=void 0,this.renderTarget=void 0,this.replaceMaterial=void 0,this.mask=void 0,this.renderOverride=void 0,this.clearMode=void 0,this._clearParam=void 0,this.name=n,this.enabled=!0,this.priority=r,this.renderTarget=i,this.replaceMaterial=o,this.mask=a||e.MaskList.EVERYTHING,this.renderOverride=!1,this.clearMode=e.ClearMode.SOLID_COLOR,this._clearParam=null}return os(t,[{key:"render",value:function(){}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"clearParam",get:function(){return this.renderTarget&&this.renderTarget.clearColor||this._clearParam},set:function(e){this._clearParam=e}}]),t}(),fs=function(){function e(){rs(this,e),this._items=void 0,this._items=[]}return os(e,[{key:"clear",value:function(){this._items=[]}},{key:"pushPrimitive",value:function(e,t,n){this._items.push({nodeAbility:e,primitive:t,mtl:n})}},{key:"sortByDistance",value:function(e){var t=this._items;t.length>1&&(this._items=t.sort((function(t,n){if(t.nodeAbility.renderPriority===n.nodeAbility.renderPriority){var r=t.nodeAbility.node.worldPosition,i=n.nodeAbility.node.worldPosition;return xt.squaredDistance(i,e)-xt.squaredDistance(r,e)}return t.nodeAbility.renderPriority-n.nodeAbility.renderPriority})))}},{key:"sortByTechnique",value:function(){var e=this._items;e.length>1&&(this._items=e.sort((function(e,t){if(e.nodeAbility.renderPriority===t.nodeAbility.renderPriority){var n=e.mtl.technique,r=t.mtl.technique;return n&&r?n.name.localeCompare(r.name):0}return e.nodeAbility.renderPriority-t.nodeAbility.renderPriority})))}},{key:"pushSprite",value:function(e,t,n,r,i,o,a){this._items.push({nodeAbility:e,positionQuad:t,uvRect:n,tintColor:r,texture:i,renderMode:o,camera:a})}},{key:"render",value:function(e,t,n){var r=e.renderHardware,i=this._items;if(0!==i.length){this.updateMaxJointsNum(this._items,t);for(var o=0,a=i.length;o<a;o++){var s=i[o],l=s.nodeAbility,c=(s.primitive,s.mtl);if(l.renderPassFlag&n)if(this._isPrimitive(s)){var u,d;r.flushSprite();var f=t||c;null===(u=f.preRender)||void 0===u||u.call(f,s.nodeAbility,s.primitive),f.prepareDrawing(e,s.nodeAbility,s.primitive,c),r.drawPrimitive(s.primitive,f),null===(d=f.postRender)||void 0===d||d.call(f,s.nodeAbility,s.primitive)}else r.drawSprite(s.positionQuad,s.uvRect,s.tintColor,s.texture,s.renderMode,s.camera)}r.flushSprite()}}},{key:"updateMaxJointsNum",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n],o=i.nodeAbility,a=i.mtl,s=t||a;o.jointNodes&&(s.maxJointsNum=Math.max(s.maxJointsNum,o.jointNodes.length))}}},{key:"_isPrimitive",value:function(e){return!!e.primitive}},{key:"items",get:function(){return this._items}}]),e}(),hs=function(t){as(r,t);var n=cs(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SeparateSprite",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return rs(this,r),(t=n.call(this,i,o))._spriteItems=void 0,t.clearMode=e.ClearMode.DONT_CLEAR,t.renderOverride=!0,t._spriteItems=[],t}return os(r,[{key:"preRender",value:function(){this.enabled=this.isUsed}},{key:"render",value:function(e){var t=e.renderHardware;this._sortByDistance(e.eyePos);for(var n=this._spriteItems,r=0;r<n.length;r++){var i=n[r];t.drawSprite(i.positionQuad,i.uvRect,i.tintColor,i.texture,i.renderMode,i.camera)}n.length=0}},{key:"postRender",value:function(e){this.enabled&&e.renderHardware.flushSprite()}},{key:"_sortByDistance",value:function(e){this._spriteItems.length>1&&(this._spriteItems=this._spriteItems.sort((function(t,n){if(t.nodeAbility.renderPriority===n.nodeAbility.renderPriority){var r=t.nodeAbility.node.worldPosition,i=n.nodeAbility.node.worldPosition;return xt.squaredDistance(i,e)-xt.squaredDistance(r,e)}return t.nodeAbility.renderPriority-n.nodeAbility.renderPriority})))}},{key:"pushSprite",value:function(e,t,n,r,i,o,a){this._spriteItems.push({nodeAbility:e,positionQuad:t,uvRect:n,tintColor:r,texture:i,renderMode:o,camera:a})}},{key:"isUsed",get:function(){return this._spriteItems.length>0}}]),r}(ds),ps=function(t){as(r,t);var n=cs(r);function r(e){var t;return rs(this,r),(t=n.call(this))._camera=void 0,t._opaqueQueue=void 0,t._transparentQueue=void 0,t._defaultPass=void 0,t._renderPassArray=void 0,t._canvasDepthPass=void 0,t._separateSpritePass=void 0,t._camera=e,t._opaqueQueue=new fs,t._transparentQueue=new fs,t._renderPassArray=[],t._defaultPass=new ds("default",0,null,null,0),t.addRenderPass(t._defaultPass),t}return os(r,[{key:"addRenderPass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("string"==typeof e){var o=new ds(e,t,n,r,i);this._renderPassArray.push(o)}else e instanceof ds&&this._renderPassArray.push(e);this._renderPassArray.sort((function(e,t){return e.priority-t.priority}))}},{key:"removeRenderPass",value:function(e){var t;if("string"==typeof e?t=this.getRenderPass(e):e instanceof ds&&(t=e),t){var n=this._renderPassArray.indexOf(t);this._renderPassArray.splice(n,1)}}},{key:"getRenderPass",value:function(e){for(var t=0,n=this._renderPassArray.length;t<n;t++){var r=this._renderPassArray[t];if(r.name===e)return r}return null}},{key:"destroy",value:function(){}},{key:"render",value:function(){var t=this._camera;if(t.renderHardware){var n=this._opaqueQueue,r=this._transparentQueue;n.clear(),r.clear(),t.scene._componentsManager.callRender(t),n.sortByTechnique(),r.sortByDistance(t.eyePos),this._canvasDepthPass&&(this._canvasDepthPass.enabled=!1),this._separateSpritePass&&this._separateSpritePass.isUsed&&this._defaultPass.renderTarget&&(this._canvasDepthPass||(this._canvasDepthPass=new ds("CanvasDepthRenderPass",0,null,null,0),this._canvasDepthPass.clearMode=e.ClearMode.DONT_CLEAR,this.addRenderPass(this._canvasDepthPass)),this._canvasDepthPass.enabled=!0);for(var i=0,o=this._renderPassArray.length;i<o;i++)this._drawRenderPass(this._renderPassArray[i],t)}}},{key:"_drawRenderPass",value:function(e,t){e.preRender(t,this.opaqueQueue,this.transparentQueue);var n=t.renderHardware;n.activeRenderTarget(e.renderTarget,t),e.enabled&&(n.clearRenderTarget(e.clearMode,e.clearParam),e.renderOverride?e.render(t,this.opaqueQueue,this.transparentQueue):(this.opaqueQueue.render(t,e.replaceMaterial,e.mask),this.transparentQueue.render(t,e.replaceMaterial,e.mask))),n.blitRenderTarget(e.renderTarget),e.postRender(t,this.opaqueQueue,this.transparentQueue)}},{key:"pushPrimitive",value:function(t,n,r){r.renderType===e.MaterialType.TRANSPARENT?this._transparentQueue.pushPrimitive(t,n,r):this._opaqueQueue.pushPrimitive(t,n,r)}},{key:"pushSprite",value:function(e,t,n,r,i,o,a){if(e.separateDraw)return this._separateSpritePass||(this._separateSpritePass=new hs,this.addRenderPass(this._separateSpritePass)),void this._separateSpritePass.pushSprite(e,t,n,r,i,o,a);this._transparentQueue.pushSprite(e,t,n,r,i,o,a)}},{key:"acceptNode",value:function(e){return e.isActive}},{key:"acceptAbility",value:function(e){if(e.enabled&&e.isRenderable){var t=!1;if(e.cullDistanceSq>0){var n=xt.squaredDistance(this._camera.eyePos,e.node.worldPosition);t=e.cullDistanceSq<n}t||e.render(this._camera)}}},{key:"defaultRenderPass",get:function(){return this._defaultPass}},{key:"opaqueQueue",get:function(){return this._opaqueQueue}},{key:"transparentQueue",get:function(){return this._transparentQueue}}]),r}(cn);function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gs(e,t,n){return t&&vs(e.prototype,t),n&&vs(e,n),e}function _s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ys(Object(n),!0).forEach((function(t){_s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ws(e){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ts(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function As(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Ts(e):n}function Es(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ws(e);if(t){var i=ws(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return As(this,n)}}function Os(e,t,n){return(Os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ws(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var Ms,Ss,Cs=function(t){xs(r,t);var n=Es(r);function r(t,i){var o;ms(this,r);var a,s={RHI:i.RHI||ns,SceneRenderer:i.SceneRenderer||ps,canvas:i.canvas,attributes:i.attributes||{}};(o=n.call(this,t,s)).canvas=void 0,o._fov=void 0,o.lastWidth=void 0,o.lastHeight=void 0,o._pixelRatio=void 0,a="string"==typeof i.canvas?document.getElementById(i.canvas):i.canvas,o.canvas=a;var l=i.target||[0,0,0],c=i.up||[0,1,0];t.position=i.position||[0,10,20],t.lookAt(l,c),o._fov=i.fov||45,o.zNear=i.near||.01,o.zFar=i.far||1e3,o.pixelRatio=i.pixelRatio||window.devicePixelRatio;var u=void 0!==i.clearMode?i.clearMode:e.ClearMode.SOLID_COLOR,d=i.clearParam||[.25,.25,.25,1];return o.setClearMode(u,d),o}return gs(r,[{key:"updateSizes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(this._pixelRatio=e),t&&(this._fov=t);var n=this.canvas.clientWidth*this.pixelRatio|0,r=this.canvas.clientHeight*this.pixelRatio|0;return(n!==this.lastWidth||r!==this.lastHeight)&&(this.lastWidth=n,this.lastHeight=r,this.canvas.width=n,this.canvas.height=r,this.setPerspective(this.fov,n,r,this.near,this.far),this.setViewport(0,0,n,r),!0)}},{key:"pixelRatio",get:function(){return this._pixelRatio},set:function(e){e&&this._pixelRatio!==e&&(this._pixelRatio=e,this.updateSizes())}},{key:"fov",get:function(){return this._fov},set:function(e){e!==this.fov&&(this._fov=e,this.setPerspective(this.fov,this.canvas.width,this.canvas.height,this.near,this.far))}},{key:"near",get:function(){return this.zNear},set:function(e){e!==this.near&&this.setPerspective(this.fov,this.canvas.width,this.canvas.height,e,this.far)}},{key:"far",get:function(){return this.zFar},set:function(e){e!==this.far&&this.setPerspective(this.fov,this.canvas.width,this.canvas.height,this.near,e)}}]),r}(pn),Rs=xt.create(),ks=function(e){xs(n,e);var t=Es(n);function n(e,r){var i;ms(this,n),(i=t.call(this,e,r)).zNear=void 0,i.zFar=void 0,i.colorWriteMask=void 0,i.viewport=void 0,i.leftHand=void 0,i._rhi=void 0,i._sceneRenderer=void 0,i._isOrtho=void 0,i._viewMat=void 0,i._matProjection=void 0,i._inverseViewMatrix=void 0,i._matInverseProjection=void 0;var o=r.SceneRenderer,a=r.canvas;return i._sceneRenderer=new o(Ts(i)),i._isOrtho=!1,i._viewMat=Ee.create(),i._matProjection=Ee.create(),i._inverseViewMatrix=Ee.create(),i._matInverseProjection=Ee.create(),i.zNear=1,i.zFar=100,i.colorWriteMask=[!0,!0,!0,!0],i.leftHand=!1,a&&i.attachToScene(a),i}return gs(n,[{key:"renderHardware",get:function(){return this._rhi}},{key:"sceneRenderer",get:function(){return this._sceneRenderer}},{key:"viewMatrix",get:function(){return this._viewMat}},{key:"inverseViewMatrix",get:function(){return this._inverseViewMatrix}},{key:"projectionMatrix",get:function(){return this._matProjection}},{key:"inverseProjectionMatrix",get:function(){return this._matInverseProjection}},{key:"eyePos",get:function(){return this.node.worldPosition}}]),gs(n,[{key:"attachToScene",value:function(e,t){this.node.scene.attachRenderCamera(this);var n=this.node.scene.engine;this._rhi=n.requireRHI(this._props.RHI,e,bs(bs({},this._props.attributes),t)),this.viewport=[0,0,this._rhi.canvas.width,this._rhi.canvas.height]}},{key:"render",value:function(){this._sceneRenderer.render()}},{key:"setClearMode",value:function(e,t){var n=this._sceneRenderer.defaultRenderPass;n.clearMode=e,n.clearParam=t}},{key:"setPerspective",value:function(e,t,n,r,i){this._isOrtho=!1,this.zNear=r,this.zFar=i,Ee.perspective(this._matProjection,Q.toRadian(e),t/n,r,i),Ee.invert(this._matInverseProjection,this._matProjection)}},{key:"setViewport",value:function(e,t,n,r){this.viewport=[e,t,n,r],this._rhi.viewport(e,t,n,r)}},{key:"setOrtho",value:function(e,t,n,r,i,o){this._isOrtho=!0,this.zNear=i,this.zFar=o,Ee.ortho(this._matProjection,e,t,n,r,i,o),Ee.invert(this._matInverseProjection,this._matProjection)}},{key:"worldToScreen",value:function(e){var t=this.viewport,n=t[2]-t[0],r=t[3]-t[1],i=Ee.create();Ee.mul(i,this.projectionMatrix,this.viewMatrix);var o=Ct.fromValues(e[0],e[1],e[2],1),a=Ct.create();Ct.transformMat4(a,o,i);var s=a[0]/a[3],l=a[1]/a[3],c=a[2]/a[3],u=.5*(s+1)*n,d=.5*(1-l)*r,f=this._rhi.canvas,h=f.clientWidth,p=f.clientHeight;return u=u*h/f.width,d=d*p/f.height,xt.fromValues(u,d,c)}},{key:"screenToWorld",value:function(e,t){void 0===t&&(t=0);var n=this._rhi.canvas,r=n.clientWidth,i=n.clientHeight,o=n.width,a=n.height,s=e[0]/r*o,l=e[1]/i*a,c=this.viewport,u=c[2]-c[0],d=c[3]-c[1],f=(s-c[0])/u*2-1,h=1-(l-c[1])/d*2,p=Ct.fromValues(f,h,t,1),m=Ee.create();Ee.mul(m,this.projectionMatrix,this.viewMatrix);var v=Ee.create();Ee.invert(v,m);var g=Ct.create();return Ct.transformMat4(g,p,v),xt.fromValues(g[0]/g[3],g[1]/g[3],g[2]/g[3])}},{key:"screenPointToRay",value:function(e,t){var n=this._isOrtho?this.worldToScreen([e,t]):this.eyePos,r=this.screenToWorld([e,t],.5);return xt.sub(r,r,n),xt.normalize(r,r),{origin:n,direction:r}}},{key:"destroy",value:function(){Os(ws(n.prototype),"destroy",this).call(this),this.node.scene.detachRenderCamera(this),this._sceneRenderer&&this._sceneRenderer.destroy(),this._rhi&&this._rhi.destroy()}},{key:"update",value:function(e){Os(ws(n.prototype),"update",this).call(this,e),this.node.getModelMatrix(),xt.copy(Rs,this.node.forward),this.leftHand&&xt.scale(Rs,Rs,-1),xt.add(Rs,this.node.position,Rs),Ee.lookAt(this._viewMat,this.node.position,Rs,this.node.up),Ee.invert(this._inverseViewMatrix,this._viewMat)}}]),n}(Kt),Ps=function(t){xs(r,t);var n=Es(r);function r(t,i){var o;ms(this,r);var a={RHI:i.RHI||ns,SceneRenderer:i.SceneRenderer||ps,canvas:i.canvas,attributes:i.attributes||{}};(o=n.call(this,t,a)).canvas=void 0,o._near=void 0,o._far=void 0,o._size=void 0,o.lastWidth=void 0,o.lastHeight=void 0,o._pixelRatio=void 0,i.canvas&&(o.canvas="string"==typeof i.canvas?document.getElementById(i.canvas):i.canvas),o._size=i.size||10,o._near=i.near||0,o._far=i.far||1e3,o._pixelRatio=i.pixelRatio||window.devicePixelRatio;var s=void 0!==i.clearMode?i.clearMode:e.ClearMode.SOLID_COLOR,l=i.clearParam||[.25,.25,.25,1];return o.setClearMode(s,l),o}return gs(r,[{key:"attachToScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e="string"==typeof e?document.getElementById(e):e,Os(ws(r.prototype),"attachToScene",this).call(this,e,t),this.canvas=e,this.updateSizes()}},{key:"updateSizes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(this._pixelRatio=e);var t=this.canvas.clientWidth*this.pixelRatio|0,n=this.canvas.clientHeight*this.pixelRatio|0;return(t!==this.lastWidth||n!==this.lastHeight)&&(this.lastWidth=t,this.lastHeight=n,this.canvas.width=t,this.canvas.height=n,this.setOrthoFromThis(),this.setViewport(0,0,t,n),!0)}},{key:"setOrthoFromThis",value:function(){var e=this._size*this.lastWidth/this.lastHeight,t=this._size;this.setOrtho(-e,e,-t,t,this._near,this._far)}},{key:"pixelRatio",get:function(){return this._pixelRatio},set:function(e){e&&this._pixelRatio!==e&&(this._pixelRatio=e,this.updateSizes())}},{key:"size",set:function(e){this._size=e,this.setOrthoFromThis()},get:function(){return this._size}},{key:"near",get:function(){return this._near},set:function(e){this._near=e,this.setOrthoFromThis()}},{key:"far",get:function(){return this._far},set:function(e){this._far=e,this.setOrthoFromThis()}}]),r}(ks),Ls=function(t){xs(r,t);var n=Es(r);function r(t,i){var o;ms(this,r);var a={RHI:i.RHI||ns,SceneRenderer:i.SceneRenderer||ps,canvas:i.canvas,attributes:i.attributes||{}};(o=n.call(this,t,a)).canvas=void 0,o._fov=void 0,o._near=void 0,o._far=void 0,o.lastWidth=void 0,o.lastHeight=void 0,o._pixelRatio=void 0,i.canvas&&(o.canvas="string"==typeof i.canvas?document.getElementById(i.canvas):i.canvas),o._fov=i.fov||45,o._near=i.near||.01,o._far=i.far||1e3,o._pixelRatio=i.pixelRatio||window.devicePixelRatio;var s=void 0!==i.clearMode?i.clearMode:e.ClearMode.SOLID_COLOR,l=i.clearParam||[.25,.25,.25,1];return o.setClearMode(s,l),o}return gs(r,[{key:"attachToScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e="string"==typeof e?document.getElementById(e):e,Os(ws(r.prototype),"attachToScene",this).call(this,e,t),this.canvas=e,this.updateSizes()}},{key:"updateSizes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(this._pixelRatio=e),t&&(this._fov=t);var n=this.canvas.clientWidth*this.pixelRatio|0,r=this.canvas.clientHeight*this.pixelRatio|0;return(n!==this.lastWidth||r!==this.lastHeight)&&(this.lastWidth=n,this.lastHeight=r,this.canvas.width=n,this.canvas.height=r,this.setPerspective(this._fov,n,r,this._near,this._far),this.setViewport(0,0,n,r),!0)}},{key:"pixelRatio",get:function(){return this._pixelRatio},set:function(e){e&&this._pixelRatio!==e&&(this._pixelRatio=e,this.updateSizes())}},{key:"fov",get:function(){return this._fov},set:function(e){this._fov=e,this.setPerspective(this._fov,this.lastWidth,this.lastHeight,this._near,this._far)}},{key:"near",get:function(){return this._near},set:function(e){this._near=e,this.setPerspective(this._fov,this.lastWidth,this.lastHeight,this._near,this._far)}},{key:"far",get:function(){return this._far},set:function(e){this._far=e,this.setPerspective(this._fov,this.lastWidth,this.lastHeight,this._near,this._far)}}]),r}(ks),Is=function e(){ms(this,e)};Is.tempMat4=Ee.create(),Is.tempVec4=Ct.create(),Is.tempVec3=xt.create(),function(e){e[e.DepthSky=0]="DepthSky",e[e.DepthColor=1]="DepthColor",e[e.Depth=2]="Depth",e[e.None=3]="None"}(Ss||(Ss={}));var Fs=Yt(Jt)(Ms=function(t){xs(r,t);var n=Es(r);function r(e,t){var i,o,a,s,l,c,u,d,f,h;ms(this,r),(h=n.call(this,e,t)).priority=0,h.cullingMask=0,h._isOrthographic=!1,h._projectionMatrix=Ee.create(),h._isProjMatSetting=!1,h._viewMatrix=Ee.create(),h._clearFlags=void 0,h._clearParam=void 0,h._clearMode=void 0,h._sceneRenderer=void 0,h._viewportNormalized=Ct.create(),h._viewport=[0,0,1,1],h._nearClipPlane=void 0,h._farClipPlane=void 0,h._fieldOfView=void 0,h._orthographicSize=10,h._inverseProjectionMatrix=Ee.create(),h._inverseViewMatrix=Ee.create(),h._isProjectionDirty=!0,h._isInvProjMatDirty=!0,h._customAspectRatio=void 0,h._invViewProjMat=Ee.create(),h._transform=void 0,h._isViewMatrixDirty=void 0,h._isInvViewProjDirty=void 0,h._rhi=void 0,h._pixelRatio=1,h._transform=h.node.transform,h._isViewMatrixDirty=h._transform.registerWorldChangeFlag(),h._isInvViewProjDirty=h._transform.registerWorldChangeFlag();var p=t.SceneRenderer,m=t.canvas,v=t.attributes,g=t.clearParam,_=void 0===g?[.25,.25,.25,1]:g,y=t.clearMode,b=t.near,x=t.far,w=t.fov,T=h.engine;h._nearClipPlane=null!=b?b:.1,h._farClipPlane=null!=x?x:100,h._fieldOfView=null!=w?w:45,h._pixelRatio=null!==(i=t.pixelRatio)&&void 0!==i?i:null,h._viewportNormalized=[0,0,1,1];var A=null!==(o=t.target)&&void 0!==o?o:[0,0,0],E=null!==(a=t.up)&&void 0!==a?a:[0,1,0];e.position=null!==(s=t.position)&&void 0!==s?s:[0,10,20],e.lookAt(A,E);var O=null!==(l=null==T||null===(c=T.config)||void 0===c?void 0:c.canvas)&&void 0!==l?l:m,M=null!==(u=null!==(d=null==T||null===(f=T.config)||void 0===f?void 0:f.attributes)&&void 0!==d?d:v)&&void 0!==u?u:{},S=null!=p?p:ps;return O&&h.attachToScene(O,M),h._sceneRenderer=new S(Ts(h)),h.setClearMode(y,_),h}return gs(r,[{key:"nearClipPlane",get:function(){return this._nearClipPlane},set:function(e){this._nearClipPlane=e,this.projMatChange()}},{key:"farClipPlane",get:function(){return this._farClipPlane},set:function(e){this._farClipPlane=e,this.projMatChange()}},{key:"fieldOfView",get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=e,this.projMatChange()}},{key:"aspectRatio",get:function(){var e;return null!==(e=this._customAspectRatio)&&void 0!==e?e:this._viewport[2]/this._viewport[3]},set:function(e){this._customAspectRatio=e,this.projMatChange()}},{key:"viewport",get:function(){return this._viewport},set:function(){throw"not implemented."}},{key:"isOrthographic",get:function(){return this._isOrthographic},set:function(e){this._isOrthographic=e,this.projMatChange()}},{key:"orthographicSize",get:function(){return this._orthographicSize},set:function(e){this._orthographicSize=e,this.projMatChange()}},{key:"clearFlags",get:function(){throw"not implemented"},set:function(){throw"not implemented"}},{key:"backgroundColor",get:function(){return this._clearParam},set:function(e){this.setClearMode(this._clearMode,e)}},{key:"backgroundSky",get:function(){throw new Error("")}},{key:"viewMatrix",get:function(){if(this._isViewMatrixDirty.flag){this._isViewMatrixDirty.flag=!1;var e=this._transform.worldMatrix;Ds(Is.tempMat4,e),Ee.invert(this._viewMatrix,Is.tempMat4)}return this._viewMatrix}},{key:"projectionMatrix",set:function(e){this._projectionMatrix=e,this._isProjMatSetting=!0,this.projMatChange()},get:function(){if(!this._isProjectionDirty||this._isProjMatSetting)return this._projectionMatrix;this._isProjectionDirty=!1;var e=this.aspectRatio;if(this._isOrthographic){var t=this._orthographicSize*e,n=this._orthographicSize;Ee.ortho(this._projectionMatrix,-t,t,-n,n,this._nearClipPlane,this._farClipPlane)}else Ee.perspective(this._projectionMatrix,Q.toRadian(this._fieldOfView),e,this._nearClipPlane,this._farClipPlane);return this._projectionMatrix}},{key:"enableHDR",get:function(){throw new Error("not implemention")},set:function(){throw new Error("not implemention")}},{key:"renderTarget",get:function(){throw new Error("not implemention")},set:function(){throw new Error("not implemention")}}]),gs(r,[{key:"resetProjectionMatrix",value:function(){this._isProjMatSetting=!1,this.projMatChange()}},{key:"resetAspectRatio",value:function(){this._customAspectRatio=void 0,this.projMatChange()}},{key:"worldToViewportPoint",value:function(e,t){var n=Ee.mul(Is.tempMat4,this.projectionMatrix,this.viewMatrix),r=Ct.set(Is.tempVec4,e[0],e[1],e[2],1),i=Ct.transformMat4(Is.tempVec4,r,n),o=i[3],a=i[0]/o,s=i[1]/o,l=i[2]/o;return t[0]=.5*(a+1),t[1]=.5*(1-s),t[2]=l,t[3]=o,t}},{key:"viewportToWorldPoint",value:function(e,t){var n=this.invViewProjMat;return this.innerViewportToWorldPoint(e,n,t)}},{key:"viewportPointToRay",value:function(e,t){xt.set(Is.tempVec3,e[0],e[1],0);var n=this.viewportToWorldPoint(Is.tempVec3,t.origin),r=xt.set(Is.tempVec3,e[0],e[1],1),i=this.innerViewportToWorldPoint(r,this._invViewProjMat,Is.tempVec3),o=xt.sub(t.direction,i,n);return xt.normalize(o,o),t}},{key:"screenToViewportPoint",value:function(e,t){var n=this.viewportNormalized;return t[0]=(e[0]-n[0])/n[2],t[1]=(e[1]-n[1])/n[3],t}},{key:"viewportToScreenPoint",value:function(e,t){var n=this.viewportNormalized,r=n[2],i=n[3],o=e[0],a=e[1];return t[0]=n[0]+r*o,t[1]=n[1]+i*a,t}},{key:"render",value:function(){this._sceneRenderer.render()}},{key:"_onActive",value:function(){Os(ws(r.prototype),"_onActive",this).call(this),this.node.scene.attachRenderCamera(this)}},{key:"_onInActive",value:function(){Os(ws(r.prototype),"_onInActive",this).call(this),this.node.scene.detachRenderCamera(this)}},{key:"_onDestroy",value:function(){var e;null===(e=this._sceneRenderer)||void 0===e||e.destroy(),this._isInvViewProjDirty.destroy(),this._isViewMatrixDirty.destroy()}},{key:"setClearMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.ClearMode.SOLID_COLOR,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.25,.25,.25,1];this._clearMode=t,this._clearParam=n,this._sceneRenderer.defaultRenderPass.clearParam=n,this._sceneRenderer.defaultRenderPass.clearMode=t}},{key:"attachToScene",value:function(e,t){var n,r;"string"==typeof e&&(e=document.getElementById(e));var i=this.node.scene.engine;this._rhi=i.requireRHI(null!==(n=this._props.RHI)&&void 0!==n?n:ns,e,bs(bs({},this._props.attributes),t)),this.updateSizes(null!==(r=this._pixelRatio)&&void 0!==r?r:window.devicePixelRatio,e)}},{key:"updateSizes",value:function(e,t){var n=t.clientWidth*e|0,r=t.clientHeight*e|0;t.width=n,t.height=r,this.viewportNormalized=this.viewportNormalized}},{key:"projMatChange",value:function(){this._isProjectionDirty=!0,this._isInvProjMatDirty=!0,this._isInvViewProjDirty.flag=!0}},{key:"innerViewportToWorldPoint",value:function(e,t,n){var r=2*e[2]-1,i=Ct.set(Is.tempVec4,2*e[0]-1,1-2*e[1],r,1),o=Ct.transformMat4(Is.tempVec4,i,t),a=o[3];return n[0]=o[0]/a,n[1]=o[1]/a,n[2]=o[2]/a,n}},{key:"viewportNormalized",get:function(){return this._viewportNormalized},set:function(e){var t=this._viewportNormalized;if(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.renderHardware){var n=this.renderHardware.canvas,r=n.width,i=n.height,o=this._viewport;o[0]=r*e[0],o[1]=i*e[1],o[2]=r*e[2],o[3]=i*e[3],this.projMatChange()}}},{key:"invViewProjMat",get:function(){if(this._isInvViewProjDirty.flag){this._isInvViewProjDirty.flag=!1;var e=this.inverseViewMatrix,t=this.inverseProjectionMatrix;Ee.mul(this._invViewProjMat,e,t)}return this._invViewProjMat}},{key:"inverseProjectionMatrix",get:function(){if(this._isInvProjMatDirty){this._isInvProjMatDirty=!1;var e=this.projectionMatrix;Ee.invert(this._inverseProjectionMatrix,e)}return this._inverseProjectionMatrix}},{key:"sceneRenderer",get:function(){return this._sceneRenderer}},{key:"inverseViewMatrix",get:function(){return Ds(this._inverseViewMatrix,this._transform.worldMatrix),this._inverseViewMatrix}},{key:"eyePos",get:function(){return this._transform.worldPosition}},{key:"aspect",get:function(){return this.aspectRatio}},{key:"pixelRatio",get:function(){return this._pixelRatio},set:function(e){this._pixelRatio=e,this.renderHardware&&this.updateSizes(e,this.renderHardware.canvas)}},{key:"renderHardware",get:function(){return this._rhi}}]),r}(Kt))||Ms;function Ds(e,t){return e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e}function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bs(e,t,n){return t&&js(e.prototype,t),n&&js(e,n),e}var Us=function(){function e(t,n){var r=this;zs(this,e),this._worker=void 0,this._costs={},this._currentLoad=0,this._callbacks={},this._worker=new Worker(t),this._worker.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t.geometry);break;case"error":r._callbacks[t.id].reject(t);break;default:A.error('DRACOWorker: Unexpected message, "'+t.type+'"')}},n?this._worker.postMessage({type:"init",decoderConfig:{wasmBinary:n}}):this._worker.postMessage({type:"init",decoderConfig:{}})}return Bs(e,[{key:"currentLoad",get:function(){return this._currentLoad}}]),Bs(e,[{key:"setCosts",value:function(e,t){this._costs[e]=t}},{key:"addCurrentLoad",value:function(e){this._currentLoad+=e}},{key:"setCallback",value:function(e,t,n){this._callbacks[e]={resolve:t,reject:n}}},{key:"decode",value:function(e,t,n){this._worker.postMessage({type:"decode",id:e,taskConfig:t,buffer:n},[n])}},{key:"releaseTask",value:function(e){this._currentLoad-=this._costs[e],delete this._callbacks[e],delete this._costs[e]}}]),e}(),Vs="https://gw.alipayobjects.com/os/lib/alipay/draco-javascript/1.3.6/lib/",Hs=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"wasm",workerLimit:4};zs(this,e),this.pool=[],this.workerLimit=Math.min(navigator.hardwareConcurrency||4,4),this.useJS=void 0,this.currentTaskId=1,this.taskCache=new WeakMap,this.loadLibPromise=void 0,n.workerLimit>this.workerLimit?A.warn("DRACOWorkerPool: Can not initialize worker pool with limit:"+n.workerLimit):this.workerLimit=null!==(t=n.workerLimit)&&void 0!==t?t:4,this.useJS="object"!==("undefined"==typeof WebAssembly?"undefined":Ns(WebAssembly))||"js"===n.type,this.loadLibPromise=this.preloadLib()}return Bs(e,[{key:"preloadLib",value:function(){var e=this;if(this.loadLibPromise)return this.loadLibPromise;var t={};return this.useJS?t.js={type:"text",props:{url:"".concat(Vs).concat("draco_decoder_gltf.js")}}:(t.wasm={type:"binary",props:{url:"".concat(Vs).concat("draco_decoder_gltf.r3bin")}},t.wrapper={type:"text",props:{url:"".concat(Vs).concat("draco_wasm_wrapper_gltf.js")}}),new Promise((function(n,r){Mo(t,(function(t,i){if(t)r(t);else{var o=[e.useJS?i.js:i.wrapper,'let decoderPending;\nlet decoderConfig;\n\nonmessage = function(e) {\n  const message = e.data;\n\n  switch (message.type) {\n    case "init":\n      decoderConfig = message.decoderConfig;\n      decoderPending = new Promise(function(resolve /*, reject*/) {\n        decoderConfig.onModuleLoaded = function(draco) {\n          // Module is Promise-like. Wrap before resolving to avoid loop.\n          resolve({ draco: draco });\n        };\n        DracoDecoderModule(decoderConfig);\n      });\n      break;\n\n    case "decode":\n      const buffer = message.buffer;\n      const taskConfig = message.taskConfig;\n      decoderPending.then(module => {\n        const draco = module.draco;\n        const decoder = new draco.Decoder();\n        const decoderBuffer = new draco.DecoderBuffer();\n        decoderBuffer.Init(new Int8Array(buffer), buffer.byteLength);\n        try {\n          const geometry = decodeGeometry(draco, decoder, decoderBuffer, taskConfig);\n          const buffers = geometry.attributes.map(attr => attr.array.buffer);\n          if (geometry.index) buffers.push(geometry.index.array.buffer);\n          self.postMessage({ type: "decode", id: message.id, geometry }, buffers);\n        } catch (error) {\n          console.error(error);\n          self.postMessage({ type: "error", id: message.id, error: error.message });\n        } finally {\n          draco.destroy(decoderBuffer);\n          draco.destroy(decoder);\n        }\n      });\n      break;\n  }\n};\n\nfunction decodeGeometry(draco, decoder, decoderBuffer, taskConfig) {\n  const attributeIDs = taskConfig.attributeIDs;\n  const attributeTypes = taskConfig.attributeTypes;\n\n  let dracoGeometry;\n  let decodingStatus;\n\n  const geometryType = decoder.GetEncodedGeometryType(decoderBuffer);\n  if (geometryType === draco.TRIANGULAR_MESH) {\n    dracoGeometry = new draco.Mesh();\n    decodingStatus = decoder.DecodeBufferToMesh(decoderBuffer, dracoGeometry);\n  } else {\n    throw new Error("DRACODecoder worker: Unexpected geometry type.");\n  }\n\n  if (!decodingStatus.ok() || dracoGeometry.ptr === 0) {\n    throw new Error("DRACODecoder worker: Decoding failed: " + decodingStatus.error_msg());\n  }\n\n  const geometry = { index: null, attributes: [] };\n\n  // Gather all vertex attributes.\n  for (let attributeName in attributeIDs) {\n    const attributeType = self[attributeTypes[attributeName]];\n    if (!attributeType) {\n      throw new Error(`DRACODecoder: can\'t find attribute "${attributeName}"\'s type from attributeMap`);\n    }\n    let attribute;\n    let attributeID;\n\n    // A Draco file may be created with default vertex attributes, whose attribute IDs\n    // are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n    // a Draco file may contain a custom set of attributes, identified by known unique\n    // IDs. glTF files always do the latter, and `.drc` files typically do the former.\n    if (taskConfig.useUniqueIDs) {\n      attributeID = attributeIDs[attributeName];\n      attribute = decoder.GetAttributeByUniqueId(dracoGeometry, attributeID);\n    } else {\n      attributeID = decoder.GetAttributeId(dracoGeometry, draco[attributeIDs[attributeName]]);\n      if (attributeID === -1) continue;\n      attribute = decoder.GetAttribute(dracoGeometry, attributeID);\n    }\n    geometry.attributes.push(decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute));\n  }\n  // Add index.\n  if (geometryType === draco.TRIANGULAR_MESH) {\n    // Generate mesh faces.\n    const numFaces = dracoGeometry.num_faces();\n    const numIndices = numFaces * 3;\n    let dataSize;\n    let ptr;\n    let index;\n    const indexType = self[taskConfig.indexType];\n\n    switch (indexType) {\n      case Uint16Array:\n        dataSize = numIndices * 2;\n        ptr = draco._malloc(dataSize);\n        decoder.GetTrianglesUInt16Array(dracoGeometry, dataSize, ptr);\n        index = new Uint16Array(draco.HEAPU16.buffer, ptr, numIndices).slice();\n        draco._free(ptr);\n        break;\n      case Uint32Array:\n        dataSize = numIndices * 4;\n        ptr = draco._malloc(dataSize);\n        decoder.GetTrianglesUInt32Array(dracoGeometry, dataSize, ptr);\n        index = new Uint32Array(draco.HEAPU32.buffer, ptr, numIndices).slice();\n        draco._free(ptr);\n        break;\n      default:\n        throw new Error("DRACODecoder: Unexpected index type.");\n    }\n    geometry.index = { array: index, itemSize: 1 };\n  }\n  draco.destroy(dracoGeometry);\n  return geometry;\n}\n\nfunction decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute) {\n  const numComponents = attribute.num_components();\n  const numPoints = dracoGeometry.num_points();\n  const numValues = numPoints * numComponents;\n  let ptr;\n  let array;\n  let dataSize;\n  switch (attributeType) {\n    case Float32Array:\n      dataSize = numValues * 4;\n      ptr = draco._malloc(dataSize);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_FLOAT32, dataSize, ptr);\n      array = new Float32Array(draco.HEAPF32.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Int8Array:\n      ptr = draco._malloc(numValues);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT8, numValues, ptr);\n      array = new Int8Array(draco.HEAP8.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Int16Array:\n      dataSize = numValues * 2;\n      ptr = draco._malloc(dataSize);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT16, dataSize, ptr);\n      array = new Int16Array(draco.HEAP16.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Int32Array:\n      dataSize = numValues * 4;\n      ptr = draco._malloc(dataSize);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT32, dataSize, ptr);\n      array = new Int32Array(draco.HEAP32.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Uint8Array:\n      ptr = draco._malloc(numValues);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT8, numValues, ptr);\n      array = new Uint8Array(draco.HEAPU8.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Uint16Array:\n      dataSize = numValues * 2;\n      ptr = draco._malloc(dataSize);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT16, dataSize, ptr);\n      array = new Uint16Array(draco.HEAPU16.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    case Uint32Array:\n      dataSize = numValues * 4;\n      ptr = draco._malloc(dataSize);\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT32, dataSize, ptr);\n      array = new Uint32Array(draco.HEAPU32.buffer, ptr, numValues).slice();\n      draco._free(ptr);\n      break;\n\n    default:\n      throw new Error(`DRACODecoder: Unexpected attribute type: ${attributeType}, attribute name: ${attributeName}`);\n  }\n\n  return {\n    name: attributeName,\n    array: array,\n    itemSize: numComponents\n  };\n}\n'].join("\n"),a=URL.createObjectURL(new Blob([o])),s=e.useJS?null:i.wasm;n({workerSourceURL:a,decoderWASMBinary:s})}}))}))}},{key:"getWorker",value:function(){var e=this;return this.preloadLib().then((function(t){if(e.pool.length<e.workerLimit){var n=new Us(t.workerSourceURL,t.decoderWASMBinary);e.pool.push(n)}else e.pool.sort((function(e,t){return e.currentLoad>t.currentLoad?-1:1}));return e.pool[e.pool.length-1]}))}},{key:"decode",value:function(e,t){var n=this,r=JSON.stringify(t);if(this.taskCache.has(e)){var i=this.taskCache.get(e);if(i.key===r)return i.promise;if(0===e.byteLength)throw new Error("DRACODecoder: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var o,a=this.currentTaskId++,s=e.byteLength,l=new Promise((function(r,i){n.getWorker().then((function(n){o=n,n.setCosts(a,s),n.addCurrentLoad(s),n.setCallback(a,r,i),n.decode(a,t,e)})).catch((function(e){i(e)}))}));return l.finally((function(){o&&a&&o.releaseTask(a)})),this.taskCache.set(e,{key:r,promise:l}),l}}]),e}();function Gs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xs(e,t,n){return t&&Ws(e.prototype,t),n&&Ws(e,n),e}function Ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach((function(t){Ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Js(e){return(Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $s(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Zs(e):n}function el(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Js(e);if(t){var i=Js(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $s(this,n)}}function tl(e,t,n){return(tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Js(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var nl=0,rl=function(t){Qs(r,t);var n=el(r);function r(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Gs(this,r),(i=n.call(this,t,o)).cacheId=void 0,i.isCube=void 0,i.oriClipPlane=void 0,i._camera=void 0,i.excludeRenderList=void 0,i.renderAll=void 0,i.renderList=void 0,i.renderPass=void 0,i.renderTarget=void 0,i.renderTargetSwap=void 0,i.clipPlanes=void 0,i._isNew=!1,i.cacheId=nl++,i.renderPass=new ds("_renderPass"+i.cacheId,-10),i.renderPass.renderOverride=!0,i.renderPass.preRender=i.preRender.bind(Zs(i)),i.renderPass.render=i.render.bind(Zs(i)),i.renderPass.postRender=i.postRender.bind(Zs(i)),i.isCube=!!o.isCube,i.camera=o.camera||i.scene.activeCameras[0],i.excludeRenderList=o.excludeRenderList||[],i.renderAll=!!o.renderAll,i.renderList=o.renderList||[],i.clipPlanes=o.clipPlanes||[],i.rhi){i._isNew=!0;var a=o.width||1024,s=o.height||1024,l=o.samples||1;i.renderTarget=new Zn(i.rhi,a,s,new er(i.rhi,a,s,void 0,!1,i.isCube),e.RenderBufferDepthFormat.Depth,l),i.renderTargetSwap=new Zn(i.rhi,a,s,new er(i.rhi,a,s,void 0,!1,i.isCube),e.RenderBufferDepthFormat.Depth,l)}else i.renderTarget=new Zn("_renderTarget"+i.cacheId,o),i.renderTargetSwap=new Zn("_renderTarget_swap"+i.cacheId,o);return i.renderPass.renderTarget=i.renderTarget,i.addEventListener("enabled",(function(){i.renderPass.enabled=!0})),i.addEventListener("disabled",(function(){i.renderPass.enabled=!1})),i.garbageCollection(!1),i}return Xs(r,[{key:"camera",set:function(e){e!==this._camera&&(this._camera&&this.sceneRenderer.removeRenderPass(this.renderPass),this._camera=e,e&&this.sceneRenderer.addRenderPass(this.renderPass))},get:function(){return this._camera}},{key:"texture",get:function(){var e,t;return this._isNew?null===(t=this.renderPass.renderTarget)||void 0===t?void 0:t.getColorTexture():null===(e=this.renderPass.renderTarget)||void 0===e?void 0:e.texture}},{key:"depthTexture",get:function(){var e,t;return this._isNew?null===(t=this.renderPass.renderTarget)||void 0===t?void 0:t.depthTextureNew:null===(e=this.renderPass.renderTarget)||void 0===e?void 0:e.depthTexture}},{key:"cubeTexture",get:function(){var e,t;return this._isNew?null===(t=this.renderPass.renderTarget)||void 0===t?void 0:t.getColorTexture():null===(e=this.renderPass.renderTarget)||void 0===e?void 0:e.cubeTexture}},{key:"sceneRenderer",get:function(){return this.camera.sceneRenderer}},{key:"rhi",get:function(){return this.camera.renderHardware}},{key:"renderItems",get:function(){var e=this,t=this.sceneRenderer.opaqueQueue,n=this.sceneRenderer.transparentQueue;return t.items.concat(n.items).filter((function(t){return!!t.primitive&&!e.excludeRenderList.includes(t.mtl)&&(!!e.renderAll||!!e.renderList.includes(t.mtl)||void 0)}))}},{key:"samples",get:function(){return this.renderTarget.samples},set:function(e){this.renderTarget.samples=this.renderTargetSwap.samples=e}}]),Xs(r,[{key:"preRender",value:function(){this.oriClipPlane=this.scene.clipPlanes,this.scene.clipPlanes=this.clipPlanes}},{key:"render",value:function(){var e=this;this.renderItems.forEach((function(t){var n=t.nodeAbility,r=t.primitive,i=t.mtl;n.renderPassFlag&e.renderPassFlag&&(i.prepareDrawing(e.camera,n,r),e.rhi.drawPrimitive(r,i))}))}},{key:"postRender",value:function(){this.scene.clipPlanes=this.oriClipPlane,this.renderPass.enabled&&(this.onTextureChange&&(this.isCube?this.onTextureChange(this.cubeTexture):this.onTextureChange(this.texture,this.depthTexture)),this.renderPass.renderTarget===this.renderTarget?this.renderPass.renderTarget=this.renderTargetSwap:this.renderPass.renderTarget=this.renderTarget)}},{key:"garbageCollection",value:function(t){if(!this._isNew){var n=t?e.AssetType.Cache:e.AssetType.Scene;this.renderTarget.type=this.renderTargetSwap.type=n,this.isCube?this.renderTarget.cubeTexture.type=this.renderTargetSwap.cubeTexture.type=n:this.renderTarget.texture.type=this.renderTargetSwap.texture.type=n}}},{key:"destroy",value:function(){this.enabled=!1,this.sceneRenderer.removeRenderPass(this.renderPass),tl(Js(r.prototype),"destroy",this).call(this),this.garbageCollection(!0),this._isNew&&(this.renderTarget.destroy(),this.renderTargetSwap.destroy())}},{key:"onTextureChange",value:function(){}}]),r}(Kt),il=function(t){Qs(r,t);var n=el(r);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gs(this,r),n.call(this,e,t)}return Xs(r,[{key:"storeMaterial",value:function(){this.renderItems.forEach((function(t){var n=t.mtl;t.initialSide=n.side,n.side=e.Side.BACK}))}},{key:"restoreMaterial",value:function(){this.renderItems.forEach((function(e){e.mtl.side=e.initialSide,delete e.initialSide}))}},{key:"preRender",value:function(){tl(Js(r.prototype),"preRender",this).call(this),this.storeMaterial()}},{key:"postRender",value:function(){tl(Js(r.prototype),"postRender",this).call(this),this.restoreMaterial()}},{key:"width",set:function(e){if(!this._isNew){var t=this.renderTarget,n=this.renderTargetSwap;t.width=n.width=e,t.needRecreate=n.needRecreate=!0}}},{key:"height",set:function(e){if(!this._isNew){var t=this.renderTarget,n=this.renderTargetSwap;t.height=n.height=e,t.needRecreate=n.needRecreate=!0}}}]),r}(rl),ol=xt.create(),al=xt.create(),sl=xt.create(),ll=90*Math.PI/180,cl=function(e){Qs(n,e);var t=el(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gs(this,n),(r=t.call(this,e,Ks(Ks({},i),{},{isCube:!0}))).position=[0,0,0],r.oriViewMatrix=Ee.create(),r.oriInverseViewMatrix=Ee.create(),r.oriProjectionMatrix=Ee.create(),r.oriInverseProjectionMatrix=Ee.create(),r.position=i.position||[0,0,0],r.size=i.size||1024,r}return Xs(n,[{key:"storeCamera",value:function(){Ee.copy(this.oriViewMatrix,this.camera.viewMatrix),Ee.copy(this.oriInverseViewMatrix,this.camera.inverseViewMatrix),Ee.copy(this.oriProjectionMatrix,this.camera.projectionMatrix),Ee.copy(this.oriInverseProjectionMatrix,this.camera.inverseProjectionMatrix)}},{key:"restoreCamera",value:function(){Ee.copy(this.camera.viewMatrix,this.oriViewMatrix),Ee.copy(this.camera.inverseViewMatrix,this.oriInverseViewMatrix),Ee.copy(this.camera.projectionMatrix,this.oriProjectionMatrix),Ee.copy(this.camera.inverseProjectionMatrix,this.oriInverseProjectionMatrix)}},{key:"preRender",value:function(){tl(Js(n.prototype),"preRender",this).call(this),this.storeCamera()}},{key:"render",value:function(){for(var e=0;e<6;e++)this.rhi.setRenderTargetFace(this.renderPass.renderTarget,e),this.rhi.clearRenderTarget(this.renderPass.clearMode,this.renderPass.clearParam),this.setCamera(e),tl(Js(n.prototype),"render",this).call(this),e<5&&this.rhi.blitRenderTarget(this.renderPass.renderTarget)}},{key:"postRender",value:function(){tl(Js(n.prototype),"postRender",this).call(this),this.restoreCamera()}},{key:"setCamera",value:function(e){switch(e){case 0:xt.set(al,0,-1,0),xt.set(sl,1,0,0);break;case 1:xt.set(al,0,-1,0),xt.set(sl,-1,0,0);break;case 2:xt.set(al,0,0,1),xt.set(sl,0,1,0);break;case 3:xt.set(al,0,0,-1),xt.set(sl,0,-1,0);break;case 4:xt.set(al,0,-1,0),xt.set(sl,0,0,1);break;case 5:xt.set(al,0,-1,0),xt.set(sl,0,0,-1)}xt.add(ol,this.position,sl),Ee.lookAt(this.camera.viewMatrix,this.position,ol,al),Ee.invert(this.camera.inverseViewMatrix,this.camera.viewMatrix),Ee.perspective(this.camera.projectionMatrix,ll,1,this.camera.zNear,this.camera.zFar),Ee.invert(this.camera.inverseProjectionMatrix,this.camera.projectionMatrix)}},{key:"size",set:function(e){if(!this._isNew){var t=this.renderTarget,n=this.renderTargetSwap;t.width=n.width=t.height=n.height=e,t.needRecreate=n.needRecreate=!0}}}]),n}(rl);function ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fl(e,t,n){return t&&dl(e.prototype,t),n&&dl(e,n),e}function hl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function pl(e){return(pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function vl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pl(e);if(t){var i=pl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ml(this,n)}}var gl=function(e){hl(n,e);var t=vl(n);function n(e,r){var i;return ul(this,n),(i=t.call(this,e,r)).color=void 0,i.color=void 0===r.color?[1,0,0]:r.color,i}return fl(n,[{key:"_onEnable",value:function(){this.scene.findFeature(yl).fog=this}},{key:"_onDisable",value:function(){this.scene.findFeature(yl).fog=null}},{key:"bindMaterialValues",value:function(){}}]),n}(Kt),_l=function(e){hl(n,e);var t=vl(n);function n(e,r){var i;return ul(this,n),(i=t.call(this,e,r)).density=void 0,i.density=void 0===r.density?.0025:r.density,i}return fl(n,[{key:"bindMaterialValues",value:function(e){e.setValue("u_fogColor",this.color),e.setValue("u_fogDensity",this.density)}}]),n}(gl),yl=function(e){hl(n,e);var t=vl(n);function n(){var e;return ul(this,n),(e=t.call(this))._fog=void 0,e._macros=void 0,e._fog=null,e._macros=[],e}return fl(n,[{key:"bindFogToMaterial",value:function(e){return this.fog&&e.useFog&&this.fog.bindMaterialValues(e),this}},{key:"fog",get:function(){return this._fog},set:function(e){if(e!==this._fog){this._fog=e;var t=[];e instanceof gl&&(t.push("O3_HAS_FOG"),e instanceof _l&&t.push("O3_FOG_EXP2")),this._macros.length!==t.length&&(this._macros=t)}}},{key:"macro",get:function(){return this._macros}}]),n}(un),bl=function(e){hl(n,e);var t=vl(n);function n(e,r){var i;return ul(this,n),(i=t.call(this,e,r)).near=void 0,i.far=void 0,i.color=void 0,i.near=void 0===r.near?1:r.near,i.far=void 0===r.far?1e3:r.far,i}return fl(n,[{key:"bindMaterialValues",value:function(e){e.setValue("u_fogColor",this.color),e.setValue("u_fogNear",this.near),e.setValue("u_fogFar",this.far)}}]),n}(gl);function xl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tl(e,t,n){return t&&wl(e.prototype,t),n&&wl(e,n),e}function Al(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ol(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Ml(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=El(e);if(t){var i=El(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ol(this,n)}}function Sl(e,t,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=El(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}nn.registerFeature(yl),nn.prototype.hasFogFeature=function(){return!0},nn.prototype.getFogMacro=function(){return this.findFeature(yl).macro},nn.prototype.bindFogToMaterial=function(e){this.findFeature(yl).bindFogToMaterial(e)};var Cl=function(t){Al(r,t);var n=Ml(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"FRAMEBUFFER_PICKER_COLOR_MATERIAL";return xl(this,r),(e=n.call(this,t))._currentId=0,e._primitivesMap=[],e._technique=void 0,e.reset(),e}return Tl(r,[{key:"reset",value:function(){this._currentId=0,this._primitivesMap=[]}},{key:"id2Color",value:function(e){if(e>=16777215)return A.warn("Framebuffer Picker encounter primitive's id greater than 16777215"),new Float32Array([0,0,0]);var t=new Float32Array(3);return t[0]=(255&e)/255,t[1]=((65280&e)>>8)/255,t[2]=((16711680&e)>>16)/255,t}},{key:"color2Id",value:function(e){return e[0]|e[1]<<8|e[2]<<16}},{key:"getObjectByColor",value:function(e){return this._primitivesMap[this.color2Id(e)]}},{key:"prepareDrawing",value:function(e,t,n,i){var o;this._technique||this.generateTechnique(),this.technique.states=null==i||null===(o=i.technique)||void 0===o?void 0:o.states,this._currentId+=1,this._primitivesMap[this._currentId]={component:t,primitive:n},this.setValue("u_colorId",this.id2Color(this._currentId)),Sl(El(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"generateTechnique",value:function(){var t=new Kn("Framebuffer_Picker_Color_Material");t.isValid=!0,t.uniforms={u_colorId:{name:"u_colorId",type:e.DataType.FLOAT_VEC3}},t.fragmentPrecision="highp",t.vertexShader="#include <common>\n#include <common_vert>\n#include <morph_target_vert>\n\nvoid main() {\n\n    #include <begin_position_vert>\n    #include <begin_normal_vert>\n\n    #include <morph_vert>\n    #include <skinning_vert>\n    #include <position_vert>\n\n}\n",t.fragmentShader="#include <common>\n#include <common_frag>\n\nuniform vec3 u_colorId;\n\nvoid main() {\n\n    gl_FragColor = vec4( u_colorId, 1.0 );\n\n}\n",this._technique=t}}]),r}(Yn),Rl=function(e){Al(n,e);var t=Ml(n);function n(e,r,i,o){var a;return xl(this,n),(a=t.call(this,e,r,i,new Cl,o))._needPick=void 0,a.onPick=void 0,a._pickPos=void 0,a._needPick=!1,a.onPick=function(e){return console.log(e)},a}return Tl(n,[{key:"preRender",value:function(){this._needPick?(this.enabled=!0,this.replaceMaterial.reset()):this.enabled=!1}},{key:"postRender",value:function(e){if(this._needPick){var t=this.readColorFromRenderTarget(e),n=this.replaceMaterial.getObjectByColor(t);this._needPick=!1,this.onPick&&this.onPick(n)}}},{key:"pick",value:function(e,t){this._pickPos=[e,t],this._needPick=!0}},{key:"readColorFromRenderTarget",value:function(e){var t=e.renderHardware.gl,n=this._pickPos,r=e.renderHardware.canvas,i=r.clientWidth,o=r.clientHeight,a=r.width,s=r.height,l=n[0]/i*a,c=n[1]/o*s,u=e.viewport,d=u[2]-u[0],f=u[3]-u[1],h=(l-u[0])/d,p=(c-u[1])/f,m=Math.floor(h*(this.renderTarget.width-1)),v=Math.floor((1-p)*(this.renderTarget.height-1)),g=new Uint8Array(4);return t.readPixels(m,v,1,1,t.RGBA,t.UNSIGNED_BYTE,g),g}}]),n}(ds),kl=function(e){Al(n,e);var t=Ml(n);function n(e,r){var i;return xl(this,n),(i=t.call(this,e,r)).camera=void 0,i.colorRenderTarget=void 0,i.colorRenderPass=void 0,i._needPick=void 0,i._pickPos=void 0,i.camera=r.camera,i.colorRenderTarget=new Zn("ColorRenderTarget_FBP",{width:r.width||1024,height:r.height||1024,clearColor:[1,1,1,1]}),i.colorRenderPass=new Rl("ColorRenderTarget_FBP",-1,i.colorRenderTarget,r.mask||0),i.camera.sceneRenderer.addRenderPass(i.colorRenderPass),r.onPick&&(i.onPick=r.onPick),i}return Tl(n,[{key:"pick",value:function(e,t){this.enabled&&(this._needPick=!0,this._pickPos=[e,t])}},{key:"update",value:function(e){Sl(El(n.prototype),"update",this).call(this,e),this.enabled&&this._needPick&&(this.colorRenderPass.pick(this._pickPos[0],this._pickPos[1]),this._needPick=!1)}},{key:"destroy",value:function(){Sl(El(n.prototype),"destroy",this).call(this),this.camera.sceneRenderer.removeRenderPass(this.colorRenderPass)}},{key:"onPick",set:function(e){"function"==typeof e&&(this.colorRenderPass.onPick=e)}}]),n}(Kt);function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ll(e){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e,t){return(Il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dl(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Fl(e):n}function Nl(e,t,n){return(Nl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ll(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var zl=Q.EPSILON;function jl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.some((function(t){return-1!==e.indexOf(t)}))}var Bl=new Dr,Ul=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Il(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ll(e);if(t){var i=Ll(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dl(this,n)}}(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e)).camera=void 0,n.mainElement=void 0,n.domElement=void 0,n.movementSpeed=void 0,n.rotateSpeed=void 0,n.floorMock=void 0,n.floorY=void 0,n.jumpY=void 0,n.jumpDuration=void 0,n.press=void 0,n.keysForward=void 0,n.keysBackward=void 0,n.keysLeft=void 0,n.keysRight=void 0,n.keysJump=void 0,n._theta=void 0,n._phi=void 0,n._moveForward=void 0,n._moveBackward=void 0,n._moveLeft=void 0,n._moveRight=void 0,n._moveJump=void 0,n._v3Cache=void 0,n._spherical=void 0,n._rotateOri=void 0,n._events=void 0,n.tempVec3=xt.create(),n.camera=e;var o=e.scene.activeCameras[0];return n.mainElement=t.mainElement||o.renderHardware.canvas,n.domElement=t.domElement||document,n.mainElement instanceof HTMLCanvasElement?(n.movementSpeed=1,n.rotateSpeed=1,n.floorMock=!0,n.floorY=0,n.jumpY=1,n.jumpDuration=600,n.press=!1,n.keysForward=["KeyW","ArrowUp"],n.keysBackward=["KeyS","ArrowDown"],n.keysLeft=["KeyA","ArrowLeft"],n.keysRight=["KeyD","ArrowRight"],n.keysJump=["Space"],n._theta=0,n._phi=0,n._moveForward=!1,n._moveBackward=!1,n._moveLeft=!1,n._moveRight=!1,n._moveJump=!1,n._v3Cache=xt.create(),n._spherical=new kt,n._rotateOri=[0,0],n._events=[{type:"mousemove",listener:n.onMouseMove.bind(Fl(n))},{type:"touchmove",listener:n.onMouseMove.bind(Fl(n))},{type:"mousedown",listener:n.onMouseDown.bind(Fl(n))},{type:"touchstart",listener:n.onMouseDown.bind(Fl(n))},{type:"mouseup",listener:n.onMouseUp.bind(Fl(n))},{type:"touchend",listener:n.onMouseUp.bind(Fl(n))},{type:"keydown",listener:n.onKeyDown.bind(Fl(n)),element:window},{type:"keyup",listener:n.onKeyUp.bind(Fl(n)),element:window},{type:"contextmenu",listener:n.onContextMenu.bind(Fl(n))}],n.initEvents(),n.updateSpherical(),n):(A.warn("AFreeControls must have a legal mainElement"),Dl(n,null))}return t=i,(n=[{key:"onContextMenu",value:function(e){e.preventDefault()}},{key:"onKeyDown",value:function(e){var t=e.code,n=e.key,r=e.keyCode;jl(this.keysForward,t,n,r)?this._moveForward=!0:jl(this.keysBackward,t,n,r)?this._moveBackward=!0:jl(this.keysLeft,t,n,r)?this._moveLeft=!0:jl(this.keysRight,t,n,r)?this._moveRight=!0:jl(this.keysJump,t,n,r)&&this.jump()}},{key:"onKeyUp",value:function(e){var t=e.code,n=e.key,r=e.keyCode;jl(this.keysForward,t,n,r)?this._moveForward=!1:jl(this.keysBackward,t,n,r)?this._moveBackward=!1:jl(this.keysLeft,t,n,r)?this._moveLeft=!1:jl(this.keysRight,t,n,r)&&(this._moveRight=!1)}},{key:"onMouseDown",value:function(e){e.stopPropagation(),e=e.changedTouches&&e.changedTouches[0]||e,this.domElement!==document&&this.domElement.focus(),this.press=!0,this._rotateOri=[e.clientX,e.clientY]}},{key:"onMouseUp",value:function(e){e.preventDefault(),e.stopPropagation(),this.press=!1}},{key:"onMouseMove",value:function(e){if(!1!==this.press&&!1!==this.enabled){e.preventDefault(),e.stopPropagation();var t=(e=e.changedTouches&&e.changedTouches[0]||e).clientX-this._rotateOri[0],n=e.clientY-this._rotateOri[1];this._rotateOri[0]=e.clientX,this._rotateOri[1]=e.clientY;var r=t*(180/this.mainElement.width),i=n*(180/this.mainElement.height);this.rotate(-r,i)}}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._theta+=Q.toRadian(e),this._phi+=Q.toRadian(t),this._phi=Q.clamp(this._phi,zl,Math.PI-zl),this._spherical.theta=this._theta,this._spherical.phi=this._phi,this._spherical.setToVec3(this._v3Cache),xt.add(this._v3Cache,this.camera.position,this._v3Cache),this.camera.lookAt(this._v3Cache,[0,1,0])}},{key:"jump",value:function(){var e=this;if(!this._moveJump){this._moveJump=!0;var t=this.camera.position;ci.Translate(this.camera,[t[0],this.jumpY,t[2]],this.jumpDuration/2,{easing:$r.easeOutSine,onComplete:function(){ci.Translate(e.camera,[t[0],e.floorY,t[2]],e.jumpDuration/2,{easing:$r.easeInSine,onComplete:function(){e._moveJump=!1}}).start(Bl)}}).start(Bl)}}},{key:"translateOnAxis",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.position,r=xt.create();xt.normalize(r,e),xt.scale(r,r,t),xt.add(n,n,r)}},{key:"update",value:function(e){if(!1!==this.enabled){var t=e/1e3*this.movementSpeed;this._moveForward&&this.translateOnAxis(this.camera.forward,t),this._moveBackward&&this.translateOnAxis(this.camera.forward,-t),this._moveLeft&&this.translateOnAxis(this.camera.right,t),this._moveRight&&this.translateOnAxis(this.camera.right,-t),Bl.update(e);var n=this.camera.transform.position;this.floorMock&&!this._moveJump&&(this.camera.transform.position=xt.set(this.tempVec3,n[0],this.floorY,n[2]))}}},{key:"initEvents",value:function(){var e=this;this._events.forEach((function(t){t.element?t.element.addEventListener(t.type,t.listener,!1):e.mainElement.addEventListener(t.type,t.listener,!1)}))}},{key:"destroy",value:function(){var e=this;this._events.forEach((function(t){t.element?t.element.removeEventListener(t.type,t.listener,!1):e.mainElement.removeEventListener(t.type,t.listener,!1)})),Nl(Ll(i.prototype),"destroy",this).call(this)}},{key:"lookAt",value:function(e,t){this.camera.lookAt(e,t||[0,1,0]),this.updateSpherical()}},{key:"updateSpherical",value:function(){xt.set(this._v3Cache,0,0,1),xt.transformQuat(this._v3Cache,this._v3Cache,this.camera.rotation),this._spherical.setFromVec3(this._v3Cache),this._theta=this._spherical.theta,this._phi=this._spherical.phi}}])&&Pl(t.prototype,n),i}(Kt);function Vl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gl(e,t,n){return t&&Hl(e.prototype,t),n&&Hl(e,n),e}function Wl(e){return(Wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yl(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kl(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ql(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var Ql=function(){},Jl=function(){function e(t){Vl(this,e),this.name=void 0,this.currentState=void 0,this.machineTime=void 0,this.states=void 0,this.transitions=void 0,this.name=t,this.currentState={name:"init",onEnter:Ql,onExit:Ql,onTick:Ql},this.machineTime=0,this.states={},this.transitions={}}return Gl(e,[{key:"addState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ql,n={name:"",onEnter:Ql,onExit:Ql,onTick:Ql,_startTime:0};"string"==typeof e?(n.name=e,n.onEnter=t):n=e,this.states[n.name]=n}},{key:"addTransition",value:function(e){var t=e.from,n=e.to,r=e.trigger,i=t;"string"==typeof i&&(i=[t]);var o,a=Kl(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;this.transitions[[r,s]]=n}}catch(e){a.e(e)}finally{a.f()}}},{key:"addTransitions",value:function(e){var t,n=Kl(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addTransition(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"is",value:function(e){return this.currentState.name===e}},{key:"to",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.currentState||{},r=this.states[e];n.onExit&&(n.startTime=0,n.onExit.call(this,e,t)),this.currentState=r,r&&r.onEnter&&(r.startTime=this.machineTime,r.onEnter.call(this,n.name,t))}},{key:"dispatch",value:function(e,t){var n=this.transitions[[e,this.currentState.name]];n&&this.to(n,t)}},{key:"update",value:function(e){if(this.machineTime+=e,this.currentState&&this.currentState.onTick){var t=this.machineTime-this.currentState.startTime;this.currentState.onTick(e,t)}}}]),e}(),Zl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wl(e);if(t){var i=Wl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yl(this,n)}}(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vl(this,n),(r=t.call(this,e,i))._machine=void 0,r._machine=new Jl(i.name),r}return Gl(n,[{key:"update",value:function(e){this.machine.update(e)}},{key:"machine",get:function(){return this._machine}}]),n}(Kt);function $l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tc(e,t,n){return t&&ec(e.prototype,t),n&&ec(e,n),e}function nc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){nc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ac(e){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sc(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function lc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ac(e);if(t){var i=ac(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sc(this,n)}}function cc(e,t,n){return(cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ac(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var uc=0,dc=function(t){oc(r,t);var n=lc(r);function r(t){var i;return $l(this,r),(i=n.call(this,void 0!==t?t:"DEFAULT_PRIMITIVENAME_"+uc)).id=void 0,i.mode=e.DrawMode.TRIANGLES,i.usage=e.BufferUsage.STATIC_DRAW,i.updateType=e.UpdateType.UPDATE_ALL,i.updateRange={byteOffset:-1,byteLength:0},i.vertexBuffers=[],i.vertexAttributes={},i.vertexOffset=0,i.vertexCount=0,i.indexType=e.DataType.UNSIGNED_SHORT,i.indexCount=0,i.indexBuffer=null,i.indexOffset=0,i.indexNeedUpdate=!1,i.material=null,i.materialIndex=void 0,i.targets=[],i.boundingBox=null,i.boundingSphere=null,i.isInFrustum=!0,i.instancedBuffer=null,i.instancedAttributes={},i.isInstanced=!1,i.updateVertex=void 0,i.updateInstanced=void 0,i.instancedCount=void 0,i.id=uc++,i}return tc(r,[{key:"addAttribute",value:function(e){var t=e.size,n=e.type,r=e.stride,i=e.offset,o=e.semantic,a=e.normalized,s=e.instanced,l=void 0===s?0:s,c=e.vertexBufferIndex,u=void 0===c?0:c;this[l?"instancedAttributes":"vertexAttributes"][o]={size:t,type:n,stride:r,offset:i,semantic:o,instanced:l,normalized:a,vertexBufferIndex:u},l&&(this.isInstanced=!0)}},{key:"updateWeightsIndices",value:function(e){var t=this;if(this.targets.length===e.length&&0!==e.length)for(var n=function(n){var r=e[n];Object.keys(t.targets[n]).forEach((function(e){var i=t.targets[n][e].name,o=t.targets[r][e].vertexBufferIndex;t.updateAttribBufferIndex(i,o)}))},r=0;r<e.length;r++)n(r)}},{key:"updateAttribBufferIndex",value:function(e,t){this.vertexAttributes[e].vertexBufferIndex=t}},{key:"resetUpdateRange",value:function(){this.updateRange.byteOffset=-1,this.updateRange.byteLength=0}},{key:"getMinMax",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.vertexCount,r=this.vertexBuffers,i=this.vertexAttributes.POSITION,o=i.size,a=i.offset,s=i.stride,l=i.vertexBufferIndex,c=r[l];c instanceof ArrayBuffer||(c=c.buffer),0===s&&(s=4*o);for(var u=new DataView(c,a),d=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0],h=0;h<n;h++){var p=a+s*h,m=[u.getFloat32(p,t),u.getFloat32(p+4,t),u.getFloat32(p+8,t)];e&&xt.transformMat4(m,m,e),xt.min(d,d,m),xt.max(f,f,m)}return{min:d,max:f}}},{key:"finalize",value:function(){}},{key:"attributes",get:function(){return ic(ic({},this.vertexAttributes),this.instancedAttributes)}}]),r}(ln),fc=function(e){oc(n,e);var t=lc(n);function n(e){var r;return $l(this,n),(r=t.call(this,e)).primitive=void 0,r.renderable=!0,r.primitive=null,r}return tc(n,[{key:"render",value:function(e){this.primitive&&this.primitive.material?e.sceneRenderer.pushPrimitive(this,this.primitive,this.primitive.material):A.error("primitive or  material is null ")}},{key:"destroy",value:function(){cc(ac(n.prototype),"destroy",this).call(this),this.primitive=null}}]),n}(Kt);function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vc(e,t,n){return t&&mc(e.prototype,t),n&&mc(e,n),e}function gc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(n),!0).forEach((function(t){gc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wc(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Tc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xc(e);if(t){var i=xc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return wc(this,n)}}function Ac(e,t,n){return(Ac="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ec(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var Mc={};function Sc(e){return Mc[e]}Mc[e.DataType.BYTE]=1,Mc[e.DataType.UNSIGNED_BYTE]=1,Mc[e.DataType.SHORT]=2,Mc[e.DataType.UNSIGNED_SHORT]=2,Mc[e.DataType.INT]=4,Mc[e.DataType.UNSIGNED_INT]=4,Mc[e.DataType.FLOAT]=4;var Cc={};function Rc(e){return Cc[e]}Cc[e.DataType.BYTE]=Int8Array,Cc[e.DataType.UNSIGNED_BYTE]=Uint8Array,Cc[e.DataType.SHORT]=Int16Array,Cc[e.DataType.UNSIGNED_SHORT]=Uint16Array,Cc[e.DataType.INT]=Int32Array,Cc[e.DataType.UNSIGNED_INT]=Uint32Array,Cc[e.DataType.FLOAT]=Float32Array;var kc=0,Pc=function(t){bc(r,t);var n=Tc(r);function r(e){var t;return pc(this,r),e=e||"bufferGeometry"+kc++,(t=n.call(this,e)).primitive=void 0,t.stride=void 0,t.instancedStride=void 0,t.instancedBufferCount=void 0,t.attributes=void 0,t.primitive=new dc,t.stride=0,t.instancedStride=0,t}return vc(r,[{key:"initialize",value:function(e,t,n){var r=e.filter((function(e){return e.instanced})),i=e.filter((function(e){return!e.instanced})),o=r.length>0;!o||this.instancedCount?(this.initializeVertex(i,t,n),o&&this.initializeInstanced(r,this.instancedCount)):A.error("Need set instanced count")}},{key:"initializeVertex",value:function(e,t,n){for(var r=e.length,i=0,o=0;o<r;o++){var a=e[o];e[o].offset=i,i+=this._getSizeInByte(a.size,a.type)}for(var s=0;s<r;s++){var l=e[s];this.primitive.addAttribute(yc(yc({},l),{},{stride:i}))}this.primitive.vertexBuffers[0]=new ArrayBuffer(t*i),this.primitive.vertexCount=t,n&&(this.primitive.usage=n),this.attributes=e,this.stride=i}},{key:"initializeInstanced",value:function(e,t){for(var n=e.length,r=e.sort((function(e,t){return e.instanced-t.instanced}))[0].instanced,i=0,o=0;o<n;o++){var a=e[o];e[o].offset=i,i+=this._getSizeInByte(a.size,a.type)}for(var s=0;s<n;s++){var l=e[s];this.primitive.addAttribute(yc(yc({},l),{},{stride:i}))}var c=t/r,u=c*i;this.primitive.instancedBuffer=new ArrayBuffer(u),this.primitive.instancedCount=t,this.attributes=e,this.instancedStride=i,this.instancedBufferCount=c}},{key:"setAllVertexValues",value:function(e){var t=this;Array.isArray(e)&&e.forEach((function(e,n){t.setVertexValues(n,e)}))}},{key:"setVertexValues",value:function(e,t){if("object"===hc(t))for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];this.setValue(n,e,r)}}},{key:"setAllInstancedValues",value:function(e){var t=this;Array.isArray(e)&&e.forEach((function(e,n){n<t.instancedBufferCount&&t.setInstancedValues(n,e)}))}},{key:"setInstancedValues",value:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];this.setInstancedValue(n,e,r)}}},{key:"setValue",value:function(t,n,r){var i=this.primitive.vertexAttributes[t];if(null==i)return A.error("UNKNOWN semantic: "+t),!1;if(n>=this.primitive.vertexCount)return A.error("vertexIndex: "+n+" out of range: "+this.primitive.vertexCount),!1;if(r.length!==i.size)return A.error("value size MUST be equal to vertexAttrib size: "+r.length),!1;var o=Rc(i.type),a=i.offset+i.stride*n,s=i.size;if(new o(this.primitive.vertexBuffers[0],a,s).set(r),this.primitive.updateType===e.UpdateType.NO_UPDATE&&(this.primitive.updateType=e.UpdateType.UPDATE_RANGE,this.primitive.updateVertex=!0),this.primitive.updateType===e.UpdateType.UPDATE_RANGE){var l=this._getSizeInByte(i.size,i.type);this.primitive.updateRange.byteOffset<0?(this.primitive.updateRange.byteOffset=a,this.primitive.updateRange.byteLength=l):this._getUpdateRange(a,l)}return!0}},{key:"getVertexValues",value:function(e){var t=this.primitive.vertexAttributes,n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=this.getValue(r,e));return n}},{key:"getValue",value:function(e,t){var n=this.primitive.vertexAttributes[e];return void 0===n?(A.error("UNKNOWN name: "+e),null):t>=this.primitive.vertexCount?(A.error("vertexIndex: "+t+" out of range: "+this.primitive.vertexCount),null):new(Rc(n.type))(this.primitive.vertexBuffers[0],n.offset+n.stride*t,n.size)}},{key:"setInstancedValue",value:function(t,n,r){var i=this.primitive.instancedAttributes[t];if(null==i)return A.error("UNKNOWN semantic: "+t),!1;if(n>=this.primitive.instancedCount)return A.error("instancedIndex: "+n+" out of range: "+this.primitive.instancedCount),!1;if(r.length!==i.size)return A.error("value size MUST be equal to instancedAttrib size: "+r.length),!1;var o=Rc(i.type),a=i.offset+i.stride*n,s=i.size;if(new o(this.primitive.instancedBuffer,a,s).set(r),this.primitive.updateType===e.UpdateType.NO_UPDATE&&(this.primitive.updateType=e.UpdateType.UPDATE_RANGE,this.primitive.updateInstanced=!0),this.primitive.updateType===e.UpdateType.UPDATE_RANGE){var l=this._getSizeInByte(i.size,i.type);this.primitive.updateRange.byteOffset<0?(this.primitive.updateRange.byteOffset=a,this.primitive.updateRange.byteLength=l):this._getUpdateRange(a,l)}return!0}},{key:"_getUpdateRange",value:function(e,t){var n=this.primitive.updateRange,r=n.byteOffset+n.byteLength;n.byteOffset=Math.min(e,n.byteOffset);var i=e+t;n.byteLength=r<=i?i-n.byteOffset:r-n.byteOffset}},{key:"_getSizeInByte",value:function(e,t){var n=Sc(t);return n?e*n:(A.error("UNKNOWN vertex attribute type: "+t),0)}},{key:"_finalize",value:function(){Ac(xc(r.prototype),"_finalize",this).call(this),this.primitive.finalize(),this.primitive=null}},{key:"vertexCount",get:function(){return this.primitive.vertexCount}},{key:"instancedCount",get:function(){return this.primitive.instancedCount},set:function(e){this.primitive.instancedCount=e}},{key:"mode",set:function(e){this.primitive.mode=e},get:function(){return this.primitive.mode}}]),r}(ln),Lc=function(e){bc(n,e);var t=Tc(n);function n(e){var r;return pc(this,n),(r=t.call(this,e)).primitive.indexNeedUpdate=!1,r}return vc(n,[{key:"initialize",value:function(e,t,r,i){Ac(xc(n.prototype),"initialize",this).call(this,e,t,i),this.primitive.indexCount=r.length;var o=Sc(this.primitive.indexType);this.primitive.indexBuffer=new ArrayBuffer(r.length*o),this._setAllIndex(r)}},{key:"_setAllIndex",value:function(e){new(Rc(this.primitive.indexType))(this.primitive.indexBuffer).set(e)}},{key:"setAllIndex",value:function(e){this._setAllIndex(e),this.primitive.indexNeedUpdate=!0}},{key:"getAllIndex",value:function(){return new(Rc(this.primitive.indexType))(this.primitive.indexBuffer)}},{key:"getIndex",value:function(e){var t=Rc(this.primitive.indexType),n=Sc(this.primitive.indexType)*e,r=Sc(this.primitive.indexType);return new t(this.primitive.indexBuffer,n,r)}}]),n}(Pc),Ic=function(e){bc(n,e);var t=Tc(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pc(this,n),(r=t.call(this,e,i))._geometry=void 0,r._material=void 0,r._geometry=i.geometry,r._material=i.material,r}return vc(n,[{key:"setMaterial",value:function(e){this._material=e}},{key:"getMaterial",value:function(){return this._material}},{key:"render",value:function(e){var t=this._geometry;t&&(t.primitive&&this._material?e.sceneRenderer.pushPrimitive(this,t.primitive,this._material):A.error("primitive or  material is null"))}},{key:"destroy",value:function(){Ac(xc(n.prototype),"destroy",this).call(this),this._geometry=null,this._material=null}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,e&&e.primitive&&e.primitive.material&&(this._material=e.primitive.material),this.trigger(new g("geometryChange"))}},{key:"material",set:function(e){this._material=e},get:function(){return this._material}}]),n}(fn),Fc=function(){function t(e){pc(this,t),this._geometryList=void 0,this._mergedGeometry=void 0,this._geometryList=e||[],this._mergedGeometry=[]}return vc(t,[{key:"add",value:function(e){e instanceof Array?this._geometryList.concat(e):this._geometryList.push(e)}},{key:"merge",value:function(){var t,n=[],r=[],i=[],o=Oc(this._geometryList);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.primitive.usage==e.BufferUsage.STATIC_DRAW?a instanceof Lc?r.push(a):a instanceof Pc?n.push(a):(i.push(a),console.assert(!1,"unknown geometry type")):i.push(a)}}catch(e){o.e(e)}finally{o.f()}var s=[],l=[];return this._mergeBufferGeometry(s,n),this._mergeIndexBufferGeometry(l,r),[].concat(s,l,i)}},{key:"_mergeBufferGeometry",value:function(e,t){var n,r=new Map,i=Oc(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.primitive;r.has(a.material)?r.get(a.material).push(o):r.set(a.material,[o])}}catch(e){i.e(e)}finally{i.f()}r.forEach((function(t){var n=t[0],r=t[1];if(1==r.length)e.push(r[0]);else{console.assert(r.every((function(e){return e.primitive.mode==r[0].primitive.mode&&0==e.primitive.targets.length&&null==e.primitive.indexBuffer&&e.stride==r[0].stride})));var i=new Pc("merged-geometry"),o=r.reduce((function(e,t){return e+t.primitive.vertexCount}),0);i.initialize(r[0].attributes,o),i.primitive.material=n,i.primitive.vertexBuffers[0]=new ArrayBuffer(r.reduce((function(e,t){return e+t.primitive.vertexBuffers[0].byteLength}),0));var a,s=0,l=Oc(r);try{for(l.s();!(a=l.n()).done;){var c=a.value,u=new Uint8Array(c.primitive.vertexBuffers[0]),d=c.primitive.vertexBuffers[0].byteLength;new Uint8Array(i.primitive.vertexBuffers[0],s).set(u),s+=d}}catch(e){l.e(e)}finally{l.f()}e.push(i)}}))}},{key:"_mergeIndexBufferGeometry",value:function(t,n){var r,i=new Map,o=Oc(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.primitive;i.has(s.material)?i.get(s.material).push(a):i.set(s.material,[a])}}catch(e){o.e(e)}finally{o.f()}i.forEach((function(n){var r=n[0],i=n[1];1==i.length?t.push(i[0]):function(){console.assert(i.every((function(e){return e.primitive.mode==i[0].primitive.mode&&0==e.primitive.targets.length&&null!=e.primitive.indexBuffer&&e.stride==i[0].stride})));var n,o=i.reduce((function(e,t){return e+t.primitive.vertexCount}),0),a=i.reduce((function(e,t){return e+t.primitive.indexCount}),0),s=o>65535?e.DataType.UNSIGNED_INT:e.DataType.UNSIGNED_SHORT,l=Sc(s),c=Rc(i[0].primitive.indexType),u=Rc(s),d=i.reduce((function(e,t){return e+t.primitive.vertexBuffers[0].byteLength}),0),f=new ArrayBuffer(d),h=new ArrayBuffer(a*l),p=0,m=0,v=0,g=Oc(i);try{for(g.s();!(n=g.n()).done;){var _=n.value,y=new Uint8Array(_.primitive.vertexBuffers[0]),b=_.primitive.vertexBuffers[0].byteLength;new Uint8Array(f,m).set(y);var x=new c(_.primitive.indexBuffer),w=new u(h,v);c==u?w.set(x.map((function(e){return e+p}))):(w.set(x),w.set(w.map((function(e){return e+p})))),m+=b,v+=_.primitive.indexCount*l,p+=_.primitive.vertexCount}}catch(e){g.e(e)}finally{g.f()}var T=new Lc("merged-index-geometry");T.initialize(i[0].attributes,o,[],i[0].usage),T.primitive.material=r,T.primitive.vertexBuffers[0]=f,T.primitive.indexBuffer=h,T.primitive.indexCount=a,t.push(T)}()}))}}]),t}();function Dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zc(e,t,n){return t&&Nc(e.prototype,t),n&&Nc(e,n),e}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Hc(e){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wc(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Gc(e):n}function Xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hc(e);if(t){var i=Hc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wc(this,n)}}var Yc=function(e){Vc(n,e);var t=Xc(n);function n(e,r){var i;return Dc(this,n),(i=t.call(this,e,r))._viewMat=void 0,i._modelMat=void 0,i.name=void 0,e.addEventListener("removedFromScene",i._onDisable.bind(Gc(i))),i}return zc(n,null,[{key:"getUniformDefine",value:function(){return{}}}]),zc(n,[{key:"_onEnable",value:function(){this.scene.findFeature(eu).attachRenderLight(this)}},{key:"_onDisable",value:function(){this.scene.findFeature(eu).detachRenderLight(this)}},{key:"viewMatrix",get:function(){return this._viewMat||(this._viewMat=Ee.create()),Ee.invert(this._viewMat,this.inverseViewMatrix),this._viewMat}},{key:"inverseViewMatrix",get:function(){return this._modelMat||(this._modelMat=Ee.create()),Ee.rotate(this._modelMat,this.node.getModelMatrix(),Math.PI,[0,1,0]),this._modelMat}}]),n}(Kt),qc=function(t){Vc(r,t);var n=Xc(r);function r(e,t){var i;return Dc(this,r),(i=n.call(this,e))._lightColor=void 0,i.color=void 0,i.intensity=void 0,i.name=t.name||"ambientLight",i.color=t.color||xt.fromValues(1,1,1),i.intensity=t.intensity||1,i._lightColor=xt.create(),i}return zc(r,null,[{key:"getUniformDefine",value:function(t){var n;return jc(n={},t+".color",{name:t+".color",type:e.DataType.FLOAT_VEC3}),jc(n,t+".lightColor",{name:t+".lightColor",type:e.DataType.FLOAT_VEC3}),jc(n,t+".intensity",{name:t+".intensity",type:e.DataType.FLOAT}),n}}]),zc(r,[{key:"bindMaterialValues",value:function(e,t){e.setValue(t+".color",this.color),e.setValue(t+".lightColor",this.lightColor),e.setValue(t+".intensity",this.intensity)}},{key:"lightColor",get:function(){return xt.scale(this._lightColor,this.color,this.intensity),this._lightColor}}]),r}(Yc),Kc=function(t){Vc(r,t);var n=Xc(r);function r(e,t){var i;return Dc(this,r),(i=n.call(this,e))._lightColor=void 0,i._reverseDirection=void 0,i.color=void 0,i.intensity=void 0,i.name=t.name||"directLight",i.color=t.color||xt.fromValues(1,1,1),i.intensity=t.intensity||1,i._lightColor=xt.create(),i._reverseDirection=xt.create(),i}return zc(r,[{key:"bindMaterialValues",value:function(e,t){e.setValue(t+".color",this.color),e.setValue(t+".lightColor",this.lightColor),e.setValue(t+".intensity",this.intensity),e.setValue(t+".direction",this.direction)}},{key:"direction",get:function(){return this.node.getForward()}},{key:"lightColor",get:function(){return xt.scale(this._lightColor,this.color,this.intensity),this._lightColor}},{key:"reverseDirection",get:function(){return xt.scale(this._reverseDirection,this.direction,-1),this._reverseDirection}}],[{key:"getUniformDefine",value:function(t){var n={};return n[t+".color"]={name:t+".color",type:e.DataType.FLOAT_VEC3},n[t+".lightColor"]={name:t+".lightColor",type:e.DataType.FLOAT_VEC3},n[t+".intensity"]={name:t+".intensity",type:e.DataType.FLOAT},n[t+".direction"]={name:t+".direction",type:e.DataType.FLOAT_VEC3},n}}]),r}(Yc),Qc=function(t){Vc(r,t);var n=Xc(r);function r(e,t){var i;return Dc(this,r),(i=n.call(this,e,t)).color=void 0,i.intensity=void 0,i.distance=void 0,i.decay=void 0,i._lightColor=void 0,i.name=t.name||"pointLight",i.color=t.color||xt.fromValues(1,1,1),i.intensity=t.intensity||1,i.distance=void 0!==t.distance?t.distance:0,i.decay=void 0!==t.decay?t.decay:0,i._lightColor=xt.create(),i}return zc(r,[{key:"bindMaterialValues",value:function(e,t){e.setValue(t+".position",this.position),e.setValue(t+".color",this.color),e.setValue(t+".lightColor",this.lightColor),e.setValue(t+".intensity",this.intensity),e.setValue(t+".distance",this.distance),e.setValue(t+".decay",this.decay)}},{key:"position",get:function(){return this.node.worldPosition}},{key:"lightColor",get:function(){return xt.scale(this._lightColor,this.color,this.intensity),this._lightColor}}],[{key:"getUniformDefine",value:function(t){var n={};return n[t+".position"]={name:t+".position",type:e.DataType.FLOAT_VEC3},n[t+".color"]={name:t+".color",type:e.DataType.FLOAT_VEC3},n[t+".lightColor"]={name:t+".lightColor",type:e.DataType.FLOAT_VEC3},n[t+".intensity"]={name:t+".intensity",type:e.DataType.FLOAT},n[t+".distance"]={name:t+".distance",type:e.DataType.FLOAT},n[t+".decay"]={name:t+".decay",type:e.DataType.FLOAT},n}}]),r}(Yc),Jc=function(t){Vc(r,t);var n=Xc(r);function r(e,t){var i;return Dc(this,r),(i=n.call(this,e))._lightColor=void 0,i._inverseDirection=void 0,i.color=void 0,i.penumbra=void 0,i.distance=void 0,i.intensity=void 0,i.decay=void 0,i.angle=void 0,i.name=t.name||"spotLight",i.color=t.color||xt.fromValues(1,1,1),i.intensity=t.intensity||1,i.distance=t.distance||0,i.decay=t.decay||0,i.penumbra=t.penumbra||0,i.angle=t.angle||Math.PI/6,i._lightColor=xt.create(),i._inverseDirection=xt.create(),i}return zc(r,[{key:"bindMaterialValues",value:function(e,t){e.setValue(t+".position",this.position),e.setValue(t+".direction",this.direction),e.setValue(t+".color",this.color),e.setValue(t+".lightColor",this.lightColor),e.setValue(t+".intensity",this.intensity),e.setValue(t+".distance",this.distance),e.setValue(t+".decay",this.decay),e.setValue(t+".angle",this.angle),e.setValue(t+".penumbra",this.penumbra),e.setValue(t+".coneCos",Math.cos(this.angle)),e.setValue(t+".penumbraCos",Math.cos(this.angle*(1-this.penumbra)))}},{key:"position",get:function(){return this.node.worldPosition}},{key:"direction",get:function(){return this.node.getForward()}},{key:"reverseDirection",get:function(){return xt.scale(this._inverseDirection,this.direction,-1),this._inverseDirection}},{key:"lightColor",get:function(){return xt.scale(this._lightColor,this.color,this.intensity),this._lightColor}}],[{key:"getUniformDefine",value:function(t){var n={};return n[t+".position"]={name:t+".position",type:e.DataType.FLOAT_VEC3},n[t+".direction"]={name:t+".direction",type:e.DataType.FLOAT_VEC3},n[t+".color"]={name:t+".color",type:e.DataType.FLOAT_VEC3},n[t+".lightColor"]={name:t+".lightColor",type:e.DataType.FLOAT_VEC3},n[t+".intensity"]={name:t+".intensity",type:e.DataType.FLOAT},n[t+".distance"]={name:t+".distance",type:e.DataType.FLOAT},n[t+".decay"]={name:t+".decay",type:e.DataType.FLOAT},n[t+".angle"]={name:t+".angle",type:e.DataType.FLOAT},n[t+".penumbra"]={name:t+".penumbra",type:e.DataType.FLOAT},n[t+".coneCos"]={name:t+".coneCos",type:e.DataType.FLOAT},n[t+".penumbraCos"]={name:t+".penumbraCos",type:e.DataType.FLOAT},n}}]),r}(Yc),Zc=se.create(),$c=function(t){Vc(r,t);var n=Xc(r);function r(e,t){var i;Dc(this,r),(i=n.call(this,e)).diffuseMap=void 0,i.specularMap=void 0,i.diffuse=void 0,i.specular=void 0,i.diffuseIntensity=void 0,i.specularIntensity=void 0;var o=t.name,a=t.diffuseMap,s=t.specularMap,l=t.diffuse,c=t.specular,u=t.diffuseIntensity,d=t.specularIntensity;return i.name=o,i.diffuseMap=a,i.specularMap=s,i.diffuse=l||[.3,.3,.3],i.specular=c||[.5,.5,.5],i.diffuseIntensity=void 0===u?1:u,i.specularIntensity=void 0===d?1:d,i}return zc(r,null,[{key:"getUniformDefine",value:function(t){var n={};return n.u_env_diffuseSampler={name:"u_env_diffuseSampler",type:e.DataType.SAMPLER_CUBE},n.u_env_specularSampler={name:"u_env_specularSampler",type:e.DataType.SAMPLER_CUBE},n[t+".diffuse"]={name:t+".diffuse",type:e.DataType.FLOAT_VEC3},n[t+".specular"]={name:t+".specular",type:e.DataType.FLOAT_VEC3},n[t+".mipMapLevel"]={name:t+".mipMapLevel",type:e.DataType.FLOAT},n[t+".transformMatrix"]={name:t+".transformMatrix",type:e.DataType.FLOAT_MAT3},n[t+".diffuseIntensity"]={name:t+".diffuseIntensity",type:e.DataType.FLOAT},n[t+".specularIntensity"]={name:t+".specularIntensity",type:e.DataType.FLOAT},n}}]),zc(r,[{key:"bindMaterialValues",value:function(e,t){e.setValue(t+".diffuseIntensity",this.diffuseIntensity),e.setValue(t+".specularIntensity",this.specularIntensity),this.useDiffuseMap?e.setValue("u_env_diffuseSampler",this.diffuseMap):e.setValue(t+".diffuse",this.diffuse),this.useSpecularMap?(e.setValue("u_env_specularSampler",this.specularMap),e.setValue(t+".mipMapLevel",this.specularMap.mipMapLevel)):e.setValue(t+".specular",this.specular);var n=this.node.getModelMatrix();e.setValue(t+".transformMatrix",se.fromMat4(Zc,n))}},{key:"useDiffuseMap",get:function(){return!!this.diffuseMap}},{key:"useSpecularMap",get:function(){return!!this.specularMap}}]),r}(Yc),eu=function(e){Vc(n,e);var t=Xc(n);function n(){var e;return Dc(this,n),(e=t.call(this)).visibleLights=void 0,e.visibleLights=[],e}return zc(n,[{key:"lightSortAmount",get:function(){for(var e=0,t=0,n=0,r=0,i=0,o=!1,a=!1,s=this.visibleLights,l=0,c=s.length;l<c;l++){var u=s[l];u instanceof qc?e++:u instanceof Kc?t++:u instanceof Qc?n++:u instanceof Jc?r++:u instanceof $c&&(i++,o=u.useDiffuseMap,a=u.useSpecularMap)}return{ambientLightCount:e,directLightCount:t,pointLightCount:n,spotLightCount:r,envMapLightCount:i,useDiffuseEnv:o,useSpecularEnv:a}}}]),zc(n,[{key:"attachRenderLight",value:function(e){-1==this.visibleLights.indexOf(e)?this.visibleLights.push(e):A.warn("Light already attached.")}},{key:"detachRenderLight",value:function(e){var t=this.visibleLights.indexOf(e);-1!=t&&this.visibleLights.splice(t,1)}},{key:"bindMaterialValues",value:function(e){for(var t=0,n=0,r=0,i=this.visibleLights,o=0,a=i.length;o<a;o++){var s=i[o];s instanceof qc?s.bindMaterialValues(e,"u_ambientLight"):s instanceof Kc?s.bindMaterialValues(e,"u_directLights[".concat(t++,"]")):s instanceof Qc?s.bindMaterialValues(e,"u_pointLights[".concat(n++,"]")):s instanceof Jc?s.bindMaterialValues(e,"u_spotLights[".concat(r++,"]")):s instanceof $c&&s.bindMaterialValues(e,"u_envMapLight")}}},{key:"getUniformDefine",value:function(){for(var e={},t=0,n=0,r=0,i=0,o=0,a=this.visibleLights,s=0,l=a.length;s<l;s++){var c=a[s];c instanceof qc&&!t++?e=Uc(Uc({},e),qc.getUniformDefine("u_ambientLight")):c instanceof Kc?e=Uc(Uc({},e),Kc.getUniformDefine("u_directLights[".concat(n++,"]"))):c instanceof Qc?e=Uc(Uc({},e),Qc.getUniformDefine("u_pointLights[".concat(r++,"]"))):c instanceof Jc?e=Uc(Uc({},e),Jc.getUniformDefine("u_spotLights[".concat(i++,"]"))):c instanceof $c&&!o++&&(e=Uc(Uc({},e),$c.getUniformDefine("u_envMapLight")))}return e}}]),n}(un);function tu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ru(e,t,n){return t&&nu(e.prototype,t),n&&nu(e,n),e}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ou(){return(ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){iu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function cu(e){return(cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uu(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function du(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cu(e);if(t){var i=cu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uu(this,n)}}function fu(e,t,n){return(fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}nn.registerFeature(eu),nn.prototype.hasLight=function(){return this.findFeature(eu).visibleLights.length>0};var hu=function(t){lu(r,t);var n=du(r);function r(e){var t;return tu(this,r),(t=n.call(this,e))._ambientLightCount=void 0,t.renderStates={enable:[],disable:[],functions:{}},t.emission=Ct.fromValues(0,0,0,1),t.ambient=Ct.fromValues(0,0,0,1),t.renderStates={},t}return ru(r,[{key:"prepareDrawing",value:function(e,t,n){var i=e.scene.findFeature(eu);i.bindMaterialValues(this);var o=i.lightSortAmount.ambientLightCount;this._technique&&this._ambientLightCount===o||(this._ambientLightCount=o,this._generateTechnique(),this.bindLightUniformDefine(e)),fu(cu(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"bindLightUniformDefine",value:function(e){var t=e.scene.findFeature(eu);this._technique.uniforms=su(su({},t.getUniformDefine()),this._technique.uniforms)}},{key:"_internalGenerate",value:function(e,t){var n=this._generateMacros(),r=this._generateFragmentUniform(),i=new Kn(e);i.isValid=!0,i.uniforms=r,i.attributes={},i.states=this.renderStates,i.customMacros=n,i.vertexShader="#include <common>\n#include <common_vert>\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <uv_transform_vert_define>\n#include <normal_share>\n#include <worldpos_share>\n#include <shadow_share>\n#include <morph_target_vert>\n\n#include <fog_share>\n\nvoid main() {\n\n    #include <begin_position_vert>\n    #include <begin_normal_vert>\n\n    #include <morph_vert>\n    #include <skinning_vert>\n    #include <uv_vert>\n    #include <uv_transform_vert>\n    #include <normal_vert>\n    #include <worldpos_vert>\n    #include <shadow_vert>\n    #include <position_vert>\n\n    #include <fog_vert>\n\n}\n",i.fragmentShader=t,this._technique=i}},{key:"_generateMacros",value:function(){var e=[];return this.emission instanceof Xn&&e.push("O3_EMISSION_TEXTURE"),this.ambient instanceof Xn&&e.push("O3_AMBIENT_TEXTURE"),this._ambientLightCount&&e.push("O3_HAS_AMBIENT_LIGHT"),e}},{key:"_generateFragmentUniform",value:function(){var t={u_emission:{name:"u_emission",type:e.DataType.FLOAT_VEC4},u_ambient:{name:"u_ambient",type:e.DataType.FLOAT_VEC4}};return this.emission instanceof Xn&&(t.u_emission.type=e.DataType.SAMPLER_2D),this.ambient instanceof Xn&&(t.u_ambient.type=e.DataType.SAMPLER_2D),t}},{key:"emission",get:function(){return this.getValue("u_emission")},set:function(e){this.setValue("u_emission",e)}},{key:"ambient",get:function(){return this.getValue("u_ambient")},set:function(e){this.setValue("u_ambient",e)}}]),r}(Yn),pu=function(e){lu(n,e);var t=du(n);function n(){return tu(this,n),t.apply(this,arguments)}return ru(n,[{key:"_generateTechnique",value:function(){this._internalGenerate("ConstantMaterial","#include <common>\n#include <common_frag>\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <mobile_material_frag>\n\n#include <fog_share>\n#include <ambient_light_frag>\n\nvoid main() {\n\n    #include <begin_mobile_frag>\n\n    gl_FragColor = emission + ambient;\n\n    #include <fog_frag>\n\n}\n")}}]),n}(hu),mu=function(t){lu(r,t);var n=du(r);function r(e){var t;return tu(this,r),(t=n.call(this,e))._directLightCount=void 0,t._directLightCount=0,t.diffuse=Ct.fromValues(1,1,1,1),t}return ru(r,[{key:"_generateTechnique",value:function(){this._internalGenerate("LambertMaterial","#include <common>\n#include <common_frag>\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <normal_share>\n\n#include <ambient_light_frag>\n#include <direct_light_frag>\n#include <mobile_material_frag>\n\n#include <fog_share>\n\nvoid main() {\n\n    #include <begin_mobile_frag>\n    #include <begin_normal_frag>\n    #include <mobile_lambert_frag>\n\n    gl_FragColor = emission + ambient + diffuse;\n\n    #include <fog_frag>\n\n}\n")}},{key:"prepareDrawing",value:function(e,t,n){var i=e.scene.findFeature(eu).lightSortAmount.directLightCount;null!==this._technique&&this._directLightCount==i||(this._directLightCount=i,this._generateTechnique(),this.bindLightUniformDefine(e)),fu(cu(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"_generateFragmentUniform",value:function(){var t={};return this.diffuse instanceof Xn?t.u_diffuse={name:"u_diffuse",type:e.DataType.SAMPLER_2D}:t.u_diffuse={name:"u_diffuse",type:e.DataType.FLOAT_VEC4},ou(fu(cu(r.prototype),"_generateFragmentUniform",this).call(this),t)}},{key:"_generateMacros",value:function(){var e=fu(cu(r.prototype),"_generateMacros",this).call(this);return e.push("O3_NEED_WORLDPOS"),this._directLightCount>0&&e.push("O3_DIRECT_LIGHT_COUNT ".concat(this._directLightCount)),this.diffuse instanceof Xn&&e.push("O3_DIFFUSE_TEXTURE"),e}},{key:"diffuse",get:function(){return this.getValue("u_diffuse")},set:function(e){this.setValue("u_diffuse",e)}}]),r}(hu),vu=function(t){lu(r,t);var n=du(r);function r(e){var t;return tu(this,r),(t=n.call(this,e))._directLightCount=void 0,t._spotLightCount=void 0,t._pointLightCount=void 0,t._directLightCount=0,t._pointLightCount=0,t._spotLightCount=0,t.diffuse=Ct.fromValues(1,1,1,1),t.specular=Ct.fromValues(1,1,1,1),t.shininess=16,t}return ru(r,[{key:"_generateTechnique",value:function(){this._internalGenerate("BlinnPhongMaterial","#include <common>\n#include <common_frag>\n\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <normal_share>\n#include <worldpos_share>\n\n#include <ambient_light_frag>\n#include <direct_light_frag>\n#include <point_light_frag>\n#include <spot_light_frag>\n#include <mobile_material_frag>\n\n#include <fog_share>\n\nvoid main() {\n\n    #include <begin_mobile_frag>\n    #include <begin_normal_frag>\n    #include <begin_viewdir_frag>\n    #include <mobile_blinnphong_frag>\n\n    gl_FragColor = emission + ambient + diffuse + specular;\n\n    #include <fog_frag>\n\n}\n")}},{key:"_generateMacros",value:function(){var e=fu(cu(r.prototype),"_generateMacros",this).call(this);return e.push("O3_NEED_WORLDPOS"),this.diffuse instanceof Xn&&e.push("O3_DIFFUSE_TEXTURE"),this.specular instanceof Xn&&e.push("O3_SPECULAR_TEXTURE"),this._directLightCount>0&&e.push("O3_DIRECT_LIGHT_COUNT ".concat(this._directLightCount)),this._pointLightCount>0&&e.push("O3_POINT_LIGHT_COUNT ".concat(this._pointLightCount)),this._spotLightCount>0&&e.push("O3_SPOT_LIGHT_COUNT ".concat(this._spotLightCount)),e}},{key:"prepareDrawing",value:function(e,t,n){var i=e.scene.findFeature(eu).lightSortAmount,o=i.directLightCount,a=i.pointLightCount,s=i.spotLightCount;null!==this._technique&&this._directLightCount==o&&this._pointLightCount==a&&this._spotLightCount==s||(this._directLightCount=o,this._pointLightCount=a,this._spotLightCount=s,this._generateTechnique(),this.bindLightUniformDefine(e)),fu(cu(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"_generateFragmentUniform",value:function(){var t={};return this.diffuse instanceof Xn?t.u_diffuse={name:"u_diffuse",type:e.DataType.SAMPLER_2D}:t.u_diffuse={name:"u_diffuse",type:e.DataType.FLOAT_VEC4},this.specular instanceof Xn?t.u_specular={name:"u_specular",type:e.DataType.SAMPLER_2D}:t.u_specular={name:"u_specular",type:e.DataType.FLOAT_VEC4},t.u_shininess={name:"u_shininess",type:e.DataType.FLOAT},ou(fu(cu(r.prototype),"_generateFragmentUniform",this).call(this),t)}},{key:"diffuse",get:function(){return this.getValue("u_diffuse")},set:function(e){this.setValue("u_diffuse",e)}},{key:"specular",get:function(){return this.getValue("u_specular")},set:function(e){this.setValue("u_specular",e)}},{key:"shininess",get:function(){return this.getValue("u_shininess")},set:function(e){this.setValue("u_shininess",e)}}]),r}(hu),gu="#include <common>\n#include <common_frag>\n#include <uv_transform_share_define>\n\nuniform sampler2D u_diffuse;\nvarying vec3 v_pos;\nuniform vec4 u_tintColor;\nuniform float u_opacity;\n\nvoid main()\n{\n  #ifdef O3_DIFFUSE_TEXTURE\n    gl_FragColor = texture2D(u_diffuse, v_uv_diffuseTexture);\n  #else\n    gl_FragColor = vec4(1);\n  #endif\n}\n",_u=function(t){lu(r,t);var n=du(r);function r(e){return tu(this,r),n.call(this,e||"TextureMaterial")}return ru(r,[{key:"_generateTechnique",value:function(){this._internalGenerate("Texture",gu)}},{key:"setValue",value:function(e,t){"doubleSided"===e&&this._setDoubleSidedDisplay(t),fu(cu(r.prototype),"setValue",this).call(this,e,t)}},{key:"_generateFragmentUniform",value:function(){var t={};return this.texture instanceof Xn&&(t.u_diffuse={name:"u_diffuse",paramName:"_MainTex",type:e.DataType.SAMPLER_2D}),su(su({},fu(cu(r.prototype),"_generateFragmentUniform",this).call(this)),t)}},{key:"_generateMacros",value:function(){var e=fu(cu(r.prototype),"_generateMacros",this).call(this);return this.texture instanceof Xn&&e.push("O3_DIFFUSE_TEXTURE"),e}},{key:"_setDoubleSidedDisplay",value:function(t){this._technique.states.disable=[],t&&this._technique.states.disable.push(e.RenderState.CULL_FACE)}},{key:"texture",set:function(e){this.setValue("u_diffuse",e)},get:function(){return this.getValue("u_diffuse")}},{key:"doubleSided",set:function(e){this.setValue("doubleSided",e)},get:function(){return this.getValue("doubleSided")}}]),r}(hu);_u.TECH_NAME="Texture",_u.DISABLE_SHARE=!0;var yu=function(t){lu(r,t);var n=du(r);function r(e){return tu(this,r),n.call(this,e||"TransparentMaterial")}return ru(r,[{key:"_generateTechnique",value:function(){this.renderStates={enable:[e.RenderState.BLEND],disable:[e.RenderState.CULL_FACE],functions:{blendFunc:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA],depthMask:[!1]}},this.renderType=e.MaterialType.TRANSPARENT,this._internalGenerate("Transparent",gu)}},{key:"_generateFragmentUniform",value:function(){var t={};return this.texture instanceof Xn&&(t.u_diffuse={name:"u_diffuse",paramName:"_MainTex",type:e.DataType.SAMPLER_2D}),su(su({},fu(cu(r.prototype),"_generateFragmentUniform",this).call(this)),t)}},{key:"_generateMacros",value:function(){var e=fu(cu(r.prototype),"_generateMacros",this).call(this);return this.texture instanceof Xn&&e.push("O3_DIFFUSE_TEXTURE"),e}},{key:"texture",set:function(e){this.setValue("u_diffuse",e)},get:function(){return this.getValue("u_diffuse")}}]),r}(hu);yu.TECH_NAME="Transparent",yu.DISABLE_SHARE=!0;var bu=function(t){lu(r,t);var n=du(r);function r(t){var i;return tu(this,r),(i=n.call(this,t)).vertexShader="",i.fragmentShader="",i.isValid=!0,i.attributes={},i._uniforms=r.commonUniforms,i._renderStates={enable:[],disable:[],functions:{}},i._enableConfig=[],i._disableConfig=[],i._functionsConfig={blendFunc:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA]},i}return ru(r,[{key:"prepareDrawing",value:function(e,t,n){if(!this._technique){var i=this._generateTechnique(e,t,n);this._technique=i}fu(cu(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"updateTechnique",value:function(){this._technique=null}},{key:"_generateTechnique",value:function(){var e=new Kn("ShaderMaterial");return e.isValid=this.isValid,e.uniforms=this.uniforms,e.attributes=this.attributes,e.states=this.renderStates,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e}},{key:"addState",value:function(e,t){this.renderStates[e]=xu(this.renderStates[e],t)}},{key:"removeState",value:function(e,t){this.renderStates[e]=this.renderStates[e].filter((function(e){return e!==t}))}},{key:"renderStates",get:function(){return this._renderStates},set:function(e){var t=e.enable,n=void 0===t?[]:t,i=e.disable,o=void 0===i?[]:i,a=e.functions,s=void 0===a?{}:a,l=n.filter((function(e){return r.commonEnable.indexOf(e)<0})),c=o.filter((function(e){return r.commonDisable.indexOf(e)<0}));this._renderStates.enable=xu(l,this._enableConfig),this._renderStates.disable=xu(c,this._disableConfig),this._renderStates.functions=ou({},s,this._functionsConfig)}},{key:"uniforms",get:function(){return this._uniforms},set:function(e){this._uniforms=ou({},r.commonUniforms,e)}},{key:"blend",set:function(t){t?this._enableConfig=xu(this._enableConfig,[e.RenderState.BLEND]):(this._enableConfig=this._enableConfig.filter((function(t){return t!==e.RenderState.BLEND})),this.removeState("enable",e.RenderState.BLEND)),this.renderStates=this._renderStates}},{key:"blendSrcFactor",set:function(e){this._functionsConfig.blendFunc[0]=e,this.renderStates=this._renderStates}},{key:"blendDstFactor",set:function(e){this._functionsConfig.blendFunc[1]=e,this.renderStates=this._renderStates}},{key:"doubleSide",set:function(t){t?this._disableConfig=xu(this._disableConfig,[e.RenderState.CULL_FACE]):(this._disableConfig=this._disableConfig.filter((function(t){return t!==e.RenderState.CULL_FACE})),this.removeState("disable",e.RenderState.CULL_FACE)),this.renderStates=this._renderStates}},{key:"depthTest",set:function(t){t?(this._disableConfig=this._disableConfig.filter((function(t){return t!==e.RenderState.DEPTH_TEST})),this.removeState("disable",e.RenderState.DEPTH_TEST)):this._disableConfig=xu(this._disableConfig,[e.RenderState.DEPTH_TEST]),this.renderStates=this._renderStates}}]),r}(Yn);function xu(e,t){return e.concat(t.filter((function(t){return!(e.indexOf(t)>-1)})))}function wu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e,t,n){return t&&Tu(e.prototype,t),n&&Tu(e,n),e}function Eu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Ou(e){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mu(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ou(e);if(t){var i=Ou(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mu(this,n)}}function Cu(e,t,n){return(Cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ou(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}bu.commonUniforms={matModelViewProjection:{name:"matModelViewProjection",semantic:e.UniformSemantic.MODELVIEWPROJECTION,type:e.DataType.FLOAT_MAT4},matModelView:{name:"matModelView",semantic:e.UniformSemantic.MODELVIEW,type:e.DataType.FLOAT_MAT4}},bu.commonEnable=[e.RenderState.BLEND],bu.commonDisable=[e.RenderState.CULL_FACE,e.RenderState.DEPTH_TEST];var Ru,ku=function(t){Eu(r,t);var n=Su(r);function r(e,t,i){var o;return wu(this,r),(o=n.call(this))._parameters=void 0,o._verts=void 0,o._normals=void 0,o._uvs=void 0,o._indexs=void 0,o._parameters={width:e||1,height:t||1,depth:i||1},o._verts=[[-1,-1,-1],[1,-1,-1],[-1,1,-1],[1,1,-1],[-1,-1,1],[1,-1,1],[-1,1,1],[1,1,1]],o._indexs=[7,5,1,3,7,1,2,0,4,6,2,4,2,6,7,3,2,7,4,0,1,5,4,1,6,4,5,7,6,5,3,1,0,2,3,0],o._normals=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o._uvs=[[0,1],[0,0],[1,0],[1,1],[0,1],[1,0]],o.initialize(),o}return Au(r,[{key:"initialize",value:function(){var t=this;Cu(Ou(r.prototype),"initialize",this).call(this,[{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"NORMAL",size:3,type:e.DataType.FLOAT,normalized:!0},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],36);var n=this._parameters.width/2,i=this._parameters.height/2,o=this._parameters.depth/2;this._indexs.forEach((function(e,r){var a=t._verts[e],s=[a[0]*n,a[1]*i,a[2]*o],l=Math.floor(r/6),c=Math.ceil(r%6);t.setVertexValues(r,{POSITION:s,NORMAL:t._normals[l],TEXCOORD_0:t._uvs[c]})}))}}]),r}(Pc),Pu=function(t){Eu(r,t);var n=Su(r);function r(e,t,i,o,a,s,l){var c;return wu(this,r),(c=n.call(this))._parameters=void 0,c._thetaEnd=void 0,c._parameters={radius:e||1,horizontalSegments:Math.max(3,Math.floor(t)||8),verticalSegments:Math.max(2,Math.floor(i)||6),alphaStart:o||0,alphaRange:a||2*Math.PI,thetaStart:s||0,thetaRange:l||Math.PI},c._thetaEnd=c._parameters.thetaStart+c._parameters.thetaRange,c.initialize(),c}return Au(r,[{key:"initialize",value:function(){for(var t=(this._parameters.verticalSegments+1)*(this._parameters.horizontalSegments+1),n=0,i=[],o=[],a=[],s=0;s<=this._parameters.verticalSegments;s++){for(var l=[],c=s/this._parameters.verticalSegments,u=0;u<=this._parameters.horizontalSegments;u++){var d=u/this._parameters.horizontalSegments,f=-this._parameters.radius*Math.cos(this._parameters.alphaStart+d*this._parameters.alphaRange)*Math.sin(this._parameters.thetaStart+c*this._parameters.thetaRange),h=this._parameters.radius*Math.cos(this._parameters.thetaStart+c*this._parameters.thetaRange),p=this._parameters.radius*Math.sin(this._parameters.alphaStart+d*this._parameters.alphaRange)*Math.sin(this._parameters.thetaStart+c*this._parameters.thetaRange);f=Math.abs(f)<1e-6?0:f,h=Math.abs(h)<1e-6?0:h,p=Math.abs(p)<1e-6?0:p,o.push({POSITION:[f,h,p],NORMAL:[f,h,p],TEXCOORD_0:[d,1-c]}),l.push(n++)}i.push(l)}for(var m=0;m<this._parameters.verticalSegments;m++)for(var v=0;v<this._parameters.horizontalSegments;v++){var g=i[m][v+1],_=i[m][v],y=i[m+1][v],b=i[m+1][v+1];(0!==m||this._parameters.thetaStart>0)&&a.push(g,_,b),(m!==this._parameters.verticalSegments-1||this._thetaEnd<Math.PI)&&a.push(_,y,b)}Cu(Ou(r.prototype),"initialize",this).call(this,[{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"NORMAL",size:3,type:e.DataType.FLOAT,normalized:!0},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],t,a),this.setAllVertexValues(o)}}]),r}(Lc),Lu=function(t){Eu(r,t);var n=Su(r);function r(e,t,i,o){var a;return wu(this,r),(a=n.call(this))._parameters=void 0,a.halfWidth=void 0,a.halfHeight=void 0,a._parameters={width:e||1,height:t||1,horizontalSegments:Math.floor(i)||1,verticalSegments:Math.floor(o)||1},a.halfWidth=a._parameters.width/2,a.halfHeight=a._parameters.height/2,a.initialize(),a}return Au(r,[{key:"initialize",value:function(){for(var t=(this._parameters.verticalSegments+1)*(this._parameters.horizontalSegments+1),n=0,i=[],o=[],a=[],s=0;s<=this._parameters.verticalSegments;s++){for(var l=[],c=s/this._parameters.verticalSegments,u=0;u<=this._parameters.horizontalSegments;u++){var d=u/this._parameters.horizontalSegments,f=d*this._parameters.width-this.halfWidth,h=c*this._parameters.height-this.halfHeight;o.push({POSITION:[f,h,0],NORMAL:[0,0,1],TEXCOORD_0:[d,1-c]}),l.push(n++)}i.push(l)}for(var p=0;p<this._parameters.verticalSegments;p++)for(var m=0;m<this._parameters.horizontalSegments;m++){var v=i[p][m+1],g=i[p][m],_=i[p+1][m],y=i[p+1][m+1];a.push(v,_,g),a.push(v,y,_)}Cu(Ou(r.prototype),"initialize",this).call(this,[{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"NORMAL",size:3,type:e.DataType.FLOAT,normalized:!0},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],t,a),this.setAllVertexValues(o)}}]),r}(Lc),Iu=function(t){Eu(r,t);var n=Su(r);function r(t,i,o,a,s,l,c,u,d){var f;return wu(this,r),(f=n.call(this)).FrontFace=void 0,f.index=void 0,f.indexArray=void 0,f.halfHeight=void 0,f._parameters=void 0,f._indexs=void 0,f._verts=void 0,f._normals=void 0,f._uvs=void 0,f.FrontFace=d||e.FrontFace.CCW,f._parameters={radiusTop:t||1,radiusBottom:i||1,height:o||1,radialSegments:a||8,heightSegments:s||1,openEnded:l||!1,thetaStart:c||0,thetaLength:u||2*Math.PI},f.initialize(),f}return Au(r,[{key:"initialize",value:function(){var t=this;this._indexs=[],this._verts=[],this._normals=[],this._uvs=[],this.index=0,this.indexArray=[],this.halfHeight=this._parameters.height/2,this.generateTorso(),!1===this._parameters.openEnded&&(this._parameters.radiusTop>0&&this.generateCap(!0),this._parameters.radiusBottom>0&&this.generateCap(!1)),Cu(Ou(r.prototype),"initialize",this).call(this,[{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"NORMAL",size:3,type:e.DataType.FLOAT,normalized:!0},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],this._indexs.length),this._indexs.forEach((function(e,n){t.setVertexValues(n,{POSITION:t._verts[e],NORMAL:t._normals[e],TEXCOORD_0:t._uvs[e]})}))}},{key:"generateTorso",value:function(){var t,n,r=xt.create(),i=(this._parameters.radiusBottom-this._parameters.radiusTop)/this._parameters.height;for(n=0;n<=this._parameters.heightSegments;n++){var o=[],a=n/this._parameters.heightSegments,s=a*(this._parameters.radiusBottom-this._parameters.radiusTop)+this._parameters.radiusTop;for(t=0;t<=this._parameters.radialSegments;t++){var l=t/this._parameters.radialSegments,c=l*this._parameters.thetaLength+this._parameters.thetaStart,u=Math.sin(c),d=Math.cos(c),f=-a*this._parameters.height+this.halfHeight;this._verts.push([s*u,f,s*d]),xt.set(r,u,i,d),xt.normalize(r,r),this._normals.push([r[0],r[1],r[2]]),this.FrontFace===e.FrontFace.CCW?this._uvs.push([l,a]):this._uvs.push([1-l,a]),o.push(this.index++)}this.indexArray.push(o)}for(t=0;t<this._parameters.radialSegments;t++)for(n=0;n<this._parameters.heightSegments;n++){var h=this.indexArray[n][t],p=this.indexArray[n+1][t],m=this.indexArray[n+1][t+1],v=this.indexArray[n][t+1];this._indexs.push(h,p,v),this._indexs.push(p,m,v)}}},{key:"generateCap",value:function(e){var t,n=!0===e?this._parameters.radiusTop:this._parameters.radiusBottom,r=!0===e?1:-1,i=this.index;for(t=1;t<=this._parameters.radialSegments;t++)this._verts.push([0,this.halfHeight*r,0]),this._normals.push([0,r,0]),this._uvs.push([.5,.5]),this.index++;var o=this.index;for(t=0;t<=this._parameters.radialSegments;t++){var a=t/this._parameters.radialSegments*this._parameters.thetaLength+this._parameters.thetaStart,s=Math.cos(a),l=Math.sin(a),c=this.halfHeight*r;this._verts.push([n*l,c,n*s]),this._normals.push([0,r,0]),this._uvs.push([.5*s+.5,.5*l*r+.5]),this.index++}for(t=0;t<this._parameters.radialSegments;t++){var u=i+t,d=o+t;!0===e?this._indexs.push(d,d+1,u):this._indexs.push(d+1,d,u)}}}]),r}(Pc),Fu=function(t){Eu(r,t);var n=Su(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wu(this,r),(t=n.call(this,"name")).vertices=void 0,t.normals=void 0,t.uvs=void 0,t.indices=void 0,t.radius=1,t.segments=16,t.thetaStart=0,t.thetaLength=2*Math.PI,t.mode=e.DrawMode.TRIANGLES,t.update(i),t}return Au(r,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.vertices=[],this.normals=[],this.uvs=[],this.indices=[],this.radius=e.radius||this.radius,this.segments=e.segments||this.segments,this.thetaStart=e.thetaStart||this.thetaStart,this.thetaLength=e.thetaLength||this.thetaLength,this.vertices.push([0,0,0]),this.normals.push([0,0,1]),this.uvs.push([.5,.5]);for(var t=0;t<=this.segments;t++){var n=this.thetaStart+t/this.segments*this.thetaLength,r=this.radius*Math.cos(n),i=this.radius*Math.sin(n);this.vertices.push([r,i,0]),this.normals.push([0,0,1]),this.uvs.push([(r/this.radius+1)/2,(i/this.radius+1)/2])}for(var o=1;o<=this.segments;o++)this.indices.push(o,o+1,0);this.initialize(this.indices.length)}},{key:"initialize",value:function(t){var n=this;Cu(Ou(r.prototype),"initialize",this).call(this,[{name:"a_position",semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"NORMAL",size:3,type:e.DataType.FLOAT,normalized:!0},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],t,this.indices,e.BufferUsage.STATIC_DRAW),this.vertices.forEach((function(e,t){n.setValue("POSITION",t,Float32Array.from(e))})),this.uvs.forEach((function(e,t){n.setValue("TEXCOORD_0",t,Float32Array.from(e))})),this.normals.forEach((function(e,t){n.setValue("NORMAL",t,Float32Array.from(e))}))}}]),r}(Lc),Du=function(t){Eu(r,t);var n=Su(r);function r(){var e;return wu(this,r),(e=n.call(this)).initialize(),e}return Au(r,[{key:"initialize",value:function(){Cu(Ou(r.prototype),"initialize",this).call(this,[{name:"a_position",semantic:"POSITION",size:2,type:e.DataType.FLOAT,normalized:!1},{name:"a_uv",semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!1}],4),this.setValue("POSITION",0,ft.fromValues(-1,-1)),this.setValue("TEXCOORD_0",0,ft.fromValues(0,0)),this.setValue("POSITION",1,ft.fromValues(1,-1)),this.setValue("TEXCOORD_0",1,ft.fromValues(1,0)),this.setValue("POSITION",2,ft.fromValues(1,1)),this.setValue("TEXCOORD_0",2,ft.fromValues(1,1)),this.setValue("POSITION",3,ft.fromValues(-1,1)),this.setValue("TEXCOORD_0",3,ft.fromValues(0,1)),this.primitive.mode=e.DrawMode.TRIANGLE_FAN}}]),r}(Pc),Nu=function(t){Eu(r,t);var n=Su(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wu(this,r),(t=n.call(this)).parameters=i,t.type="TorusBufferGeometry";for(var o=t.parameters.radius||1,a=t.parameters.tube||.4,s=Math.floor(t.parameters.radialSegments)||8,l=Math.floor(t.parameters.tubularSegments)||6,c=t.parameters.arc||2*Math.PI,u=[],d=[],f=[],h=Float32Array.from([0,0,0]),p=Float32Array.from([0,0,0]),m=Float32Array.from([0,0,0]),v=0;v<=s;v++)for(var g=0;g<=l;g++){var _=g/l*c,y=v/s*Math.PI*2;p[0]=(o+a*Math.cos(y))*Math.cos(_),p[1]=(o+a*Math.cos(y))*Math.sin(_),p[2]=a*Math.sin(y),d.push([p[0],p[1],p[2]]),h[0]=o*Math.cos(_),h[1]=o*Math.sin(_),xt.sub(m,p,h),xt.normalize(m,m),f.push(m[0],m[1],m[2])}for(var b=1;b<=s;b++)for(var x=1;x<=l;x++){var w=(l+1)*b+x-1,T=(l+1)*(b-1)+x-1,A=(l+1)*(b-1)+x,E=(l+1)*b+x;u.push(w,T,E),u.push(T,A,E)}return t.initialize([{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1}],d.length,u),d.forEach((function(e,n){t.setValue("POSITION",n,e)})),t}return r}(Lc),zu=function(e){Eu(n,e);var t=Su(n);function n(e,r){var i;wu(this,n),(i=t.call(this,e,r))._geometryType=void 0;var o=r.geometryType,a=void 0===o?Ru.Box:o;return r.material||(i._material=new vu("mtl")),i.geometryType=a,i}return Au(n,[{key:"geometryType",set:function(e){if(this._geometryType!==e){switch(e){case"Sphere":var t=this._props,n=t.sphereRadius,r=t.sphereHorizontalSegments,i=t.sphereVerticalSegments,o=t.sphereAlphaStart,a=t.sphereAlphaRange,s=t.sphereThetaStart,l=t.sphereThetaRange;this.geometry=new Pu(n,r,i,o,a,s,l);break;case"Cylinder":var c=this._props,u=c.cylinderRadiusTop,d=c.cylinderRadiusBottom,f=c.cylinderHeight,h=c.cylinderRadialSegments,p=c.cylinderHeightSegments,m=c.cylinderOpenEnded;this.geometry=new Iu(u,d,f,h,p,m);break;case"Plane":var v=this._props,g=v.planeWidth,_=v.planeHeight,y=v.planeHorizontalSegments,b=v.planeVerticalSegments;this.geometry=new Lu(g,_,y,b);break;case"Box":var x=this._props,w=x.boxWidth,T=x.boxHeight,A=x.boxDepth;this.geometry=new ku(w,T,A)}this._geometryType=e}},get:function(){return this._geometryType}}]),Au(n,[{key:"material",get:function(){return this._material},set:function(e){this._material=e||new vu("mtl")}}]),n}(Ic);function ju(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uu(e,t,n){return t&&Bu(e.prototype,t),n&&Bu(e,n),e}function Vu(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Hu(e){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gu(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Wu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hu(e);if(t){var i=Hu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gu(this,n)}}function Xu(e,t,n){return(Xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Yu(e,t,n,r,i,o){var a={};return a.depth=e,a.coverRect=t,a.occupied=!1,a.parentCell=n,a.childCells=[r,i,o],a.isLeaf=!0,a}!function(e){e.Box="Box",e.Cylinder="Cylinder",e.Plane="Plane",e.Sphere="Sphere"}(Ru||(Ru={}));var qu=function(){function e(t,n){ju(this,e),this._width=void 0,this._height=void 0,this._maxDepth=void 0,this._rootCell=void 0,this._freshWidgets=void 0,this._sprites=void 0,this._width=t,this._height=n,this._maxDepth=10,this._rootCell=Yu(0,{x:0,y:0,width:this._width,height:this._height}),this._freshWidgets=[],this._sprites={}}return Uu(e,[{key:"needAllocSprite",value:function(e){e&&!e.allotted&&this._freshWidgets.push(e)}},{key:"allocSprites",value:function(){if(!(this._freshWidgets.length<=0)){this._freshWidgets.sort((function(e,t){return e.spriteRect.height-t.spriteRect.height}));for(var e=this._freshWidgets.length-1;e>=0;e--){var t=this._freshWidgets[e],n=this._sprites[t.spriteID];if(n)t.setSpriteInfo(n),n.referenceCount++;else{var r=t.spriteRect.width,i=t.spriteRect.height,o=this._allocRectangle(r,i),a=this._generateSpriteData(o);this._sprites[t.spriteID]=a,t.allotted=!0,t.setSpriteInfo(a)}}this._freshWidgets=[]}}},{key:"releaseSprite",value:function(e){var t=this._sprites[e];if(t&&(t.referenceCount--,0===t.referenceCount)){var n=t.spriteRect;return this._releaseRectangle(t.cell),delete this._sprites[e],n}return!1}},{key:"_allocRectangle",value:function(e,t){var n=this._findAvailableRectangle(this._rootCell,e,t);return n?this._placeRectangle(n,e,t):(A.warn("Alloc rectangle fail!"),!1)}},{key:"_releaseRectangle",value:function(e){if(e&&e.isLeaf){e.occupied=!1;for(var t=e.parentCell;t;){for(var n=t.childCells,r=!1,i=0,o=n.length;i<o;i++)if(!n[i].isLeaf||n[i].occupied){r=!0;break}if(r)break;t.occupied=!1,t.isLeaf=!0;for(var a=0,s=e.childCells.length;a<s;a++)e.childCells[a]=null;t=t.parentCell}}}},{key:"_generateSpriteData",value:function(e){if(!e)return{valid:!1,uvRect:{u:0,v:0,width:1,height:1}};var t=this._width,n=this._height;return{valid:!0,uvRect:{u:e.coverRect.x/t,v:e.coverRect.y/n,width:e.coverRect.width/t,height:e.coverRect.height/n},spriteRect:e.coverRect,referenceCount:1,cell:e}}},{key:"_findAvailableRectangle",value:function(e,t,n){if(!e||e.occupied||e.depth>this._maxDepth)return!1;if(e.coverRect.width<t||e.coverRect.height<n)return!1;if(e.isLeaf)return e;for(var r=e.childCells,i=0,o=r.length;i<o;i++){var a=this._findAvailableRectangle(r[i],t,n);if(a)return a}return!1}},{key:"_placeRectangle",value:function(e,t,n){e.isLeaf=!1;var r=e.coverRect.x,i=e.coverRect.y,o=e.coverRect.width,a=e.coverRect.height,s={x:r,y:i,width:t,height:n};e.childCells[0]=Yu(e.depth+1,s,e),e.childCells[0].occupied=!0;var l={x:r+s.width+1,y:i,width:o-s.width-2,height:s.height};e.childCells[1]=Yu(e.depth+1,l,e);var c={x:r,y:i+s.height+1,width:o,height:a-s.height-2};return e.childCells[2]=Yu(e.depth+1,c,e),e.childCells[0]}}]),e}(),Ku=function(e){Vu(n,e);var t=Wu(n);function n(e,r,i){var o;ju(this,n),(o=t.call(this,e))._canvas=void 0,o._resetWholeTexture=void 0,o._maxTexSubWidth=void 0,o._maxTexSubHeight=void 0,o.context=void 0,o.isAndroid=void 0,o._canvas=document.createElement("canvas"),o._canvas.width=r,o._canvas.height=i,o.context=o._canvas.getContext("2d"),o.image=o._canvas,o._resetWholeTexture=!0,o._maxTexSubWidth=Math.min(1,512/r),o._maxTexSubHeight=Math.min(1,512/i);var a=window.navigator.userAgent;return o.isAndroid=a.indexOf("Android")>-1||a.indexOf("Linux")>-1,o}return Uu(n,[{key:"updateDirtyRects",value:function(e){if(0!==e.length)if(this.isAndroid&&(this._resetWholeTexture=!0),this._resetWholeTexture)this.updateTexture(),this._resetWholeTexture=!1;else for(var t=this._getMergedTexSubRects(e),n=0,r=t.length;n<r;n++)this.updateSubTexture(t[n])}},{key:"clearRect",value:function(e){if(e){var t=e.x,n=e.y,r=e.width,i=e.height;this.context.clearRect(t,n,r,i),this.updateSubTexture(e)}}},{key:"_getMergedTexSubRects",value:function(e){if(1===e.length)return[e[0]];for(var t=[],n=0,r=e.length;n<r;n++){for(var i=e[n],o=!1,a=0,s=t.length;a<s;a++)if(this._tryToMergeRect(t[a],i)){o=!0;break}o||t.push(O.clone(i))}return t}},{key:"_tryToMergeRect",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),i=Math.max(e.x+e.width,t.x+t.width),o=Math.max(e.y+e.height,t.y+t.height);return i-n<=this._maxTexSubWidth&&o-r<=this._maxTexSubHeight&&(e.x=Math.max(0,n),e.y=Math.max(0,r),e.width=Math.min(this._canvas.width,i-n),e.height=Math.min(this._canvas.width,o-r),!0)}},{key:"canvas",get:function(){return this._canvas}}]),n}(Xn),Qu=function(e){Vu(n,e);var t=Wu(n);function n(){var e;return ju(this,n),(e=t.call(this))._widgets=void 0,e._dirtyRects=void 0,e._texture=void 0,e._textureMapper=void 0,e._widgets=[],e._dirtyRects=[],e}return Uu(n,[{key:"initTexture",value:function(e,t){e=e||512,t=t||512,this._texture=new Ku("hud_texture",e,t),this._textureMapper=new qu(e,t)}},{key:"attachWidget",value:function(e){this._texture||this.initTexture(),-1===this._widgets.indexOf(e)?(this._widgets.push(e),this._textureMapper.needAllocSprite(e)):A.warn("Widget already attached.")}},{key:"detachWidget",value:function(e){var t=this._widgets.indexOf(e);-1!==t&&this._widgets.splice(t,1)}},{key:"releaseWidget",value:function(e){if(this._textureMapper){var t=this._textureMapper.releaseSprite(e.spriteID);t&&this._texture.clearRect(t)}}},{key:"addDirtyRect",value:function(e){this._dirtyRects.push(e)}},{key:"preUpdate",value:function(){this._texture||this.initTexture(),this._textureMapper.allocSprites()}},{key:"preRender",value:function(){this._dirtyRects.length>0&&(this._texture.updateDirtyRects(this._dirtyRects),this._dirtyRects=[])}},{key:"context2D",get:function(){return this._texture.context}},{key:"texture",get:function(){return this._texture}}]),n}(un),Ju=1e3,Zu=function(e){Vu(n,e);var t=Wu(n);function n(e,r){var i;return ju(this,n),(i=t.call(this,e))._spriteRect=void 0,i._canvasDirty=void 0,i._spriteID=void 0,i._renderMode=void 0,i._screenSize=void 0,i._worldSize=void 0,i._anchor=void 0,i._rotationAngle=void 0,i._scale=void 0,i._positionQuad=void 0,i._uvRect=void 0,i._tintColor=void 0,i._valid=void 0,i._hudFeature=void 0,i.separateDraw=void 0,i._spriteRect={x:0,y:0,width:10,height:10},i._spriteRect.width=r.textureSize[0],i._spriteRect.height=r.textureSize[1],i._spriteID=r.spriteID?r.spriteID:"widget_"+Ju++,i._renderMode=r.renderMode||"2D",i._screenSize=r.screenSize||r.textureSize,i._worldSize=r.worldSize||[1,1],i._anchor=[.5,.5],i._rotationAngle=r.rotationAngle||0,i._scale=r.scale||[1,1],i._positionQuad={leftTop:xt.create(),leftBottom:xt.create(),rightTop:xt.create(),rightBottom:xt.create()},i._uvRect={u:0,v:0,width:1,height:1},i._tintColor=Ct.fromValues(1,1,1,1),i._canvasDirty=!0,i._valid=!1,i._hudFeature=i.scene.findFeature(Qu),i.separateDraw=!1,i}return Uu(n,[{key:"_onEnable",value:function(){this._hudFeature.attachWidget(this)}},{key:"_onDisable",value:function(){this._hudFeature.detachWidget(this)}},{key:"destroy",value:function(){Xu(Hu(n.prototype),"destroy",this).call(this),this._hudFeature.releaseWidget(this)}},{key:"setSpriteInfo",value:function(e){this._valid=e.valid,this._uvRect=e.uvRect,this._spriteRect=e.spriteRect}},{key:"setRenderMode",value:function(e,t){"2D"!==e&&"3D"!==e||(this._renderMode=e,"2D"===e?this._screenSize=t:this._worldSize=t)}},{key:"render",value:function(e){this._valid&&(this._updatePositionQuad(e),this._canvasDirty&&(this.drawWidget(this._hudFeature.context2D),this._canvasDirty=!1,this._hudFeature.addDirtyRect(this._spriteRect)),e.sceneRenderer.pushSprite(this,this._positionQuad,this._uvRect,this._tintColor,this._hudFeature.texture,this._renderMode,e))}},{key:"drawWidget",value:function(e){if(this._valid){var t=this._spriteRect.x,n=this._spriteRect.y,r=this._spriteRect.width,i=this._spriteRect.height;e.clearRect(t,n,r,i)}}},{key:"_updatePositionQuad",value:function(e){var t=e.viewMatrix,n=xt.fromValues(t[0],t[4],t[8]),r=xt.fromValues(t[1],t[5],t[9]),i=this.node.worldPosition,o=this._getHalfWorldSize(e);if(xt.scale(n,n,o[0]*this._scale[0]),xt.scale(r,r,o[1]*this._scale[1]),0!==this._rotationAngle){var a=xt.fromValues(t[2],t[6],t[10]),s=tt.create();tt.setAxisAngle(s,a,this._rotationAngle),xt.transformQuat(n,n,s),xt.transformQuat(r,r,s)}var l=xt.create(),c=xt.create();xt.scale(l,n,2*(this._anchor[0]-.5)),xt.scale(c,r,2*(this._anchor[1]-.5)),xt.sub(i,i,l),xt.add(i,i,c);var u=xt.create();xt.sub(u,i,n),xt.add(u,u,r);var d=xt.create();xt.sub(d,i,n),xt.sub(d,d,r);var f=xt.create();xt.add(f,i,n),xt.sub(f,f,r);var h=xt.create();xt.add(h,i,n),xt.add(h,h,r),this._positionQuad.leftTop=u,this._positionQuad.leftBottom=d,this._positionQuad.rightTop=h,this._positionQuad.rightBottom=f}},{key:"_getHalfWorldSize",value:function(e){var t=null;if("2D"===this._renderMode){var n=e.renderHardware.canvas,r=n.clientWidth,i=n.clientHeight,o=n.width,a=n.height,s=this._screenSize,l=s[0]/r*o,c=s[1]/i*a,u=e.viewport,d=l/u[2],f=c/u[3],h=e.worldToScreen(this.node.worldPosition)[2],p=Ct.fromValues(d,f,h,1),m=Ct.create();Ct.transformMat4(m,p,e.inverseProjectionMatrix),t=[Math.abs(m[0]/m[3]),Math.abs(m[1]/m[3])]}else t=ft.create(),ft.scale(t,this._worldSize,.5);return t}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor=ft.fromValues(e[0],e[1])}},{key:"spriteRect",get:function(){return this._spriteRect}},{key:"spriteID",get:function(){return this._spriteID}},{key:"tintColor",get:function(){return this._tintColor},set:function(e){this._tintColor=Ct.fromValues(e[0],e[1],e[2],e[3])}},{key:"rotationAngle",get:function(){return this._rotationAngle},set:function(e){this._rotationAngle=e}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}}]),n}(fn);function $u(e){return($u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function td(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nd(e,t,n){return t&&td(e.prototype,t),n&&td(e,n),e}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function id(){return(id=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?od(Object(n),!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sd(e){return(sd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ld(e,t){return(ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cd(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}nn.registerFeature(Qu),nn.prototype.hasHUDWidget=function(){return this.findFeature(Qu)._widgets.length>0};var ud,dd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fd={5120:"Int8Array",5121:"Uint8Array",5122:"Int16Array",5123:"Uint16Array",5125:"Uint32Array",5126:"Float32Array"};function hd(e,t,n){for(var r in e)if(e[r][t]===n)return e[r];return null}function pd(e){return{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}[e]}function md(e){return dd[e]}function vd(e){return fd[e]}function gd(e,t,n){var r,i,o=e.bufferViews[t.bufferView],a=n[o.buffer],s=t.hasOwnProperty("byteOffset")?t.byteOffset:0,l=o.hasOwnProperty("byteOffset")?o.byteOffset:0,c=pd(t.type),u=c*t.count,d=null!==(r=o.byteStride)&&void 0!==r?r:0,f=md(t.componentType);if(d){i=new Uint8Array(u*f.BYTES_PER_ELEMENT);for(var h=new Uint8Array(a,l,o.byteLength),p=0,m=c*f.BYTES_PER_ELEMENT,v=0;v<t.count;v++){p=v*d+s;for(var g=0;g<m;g++)i[v*m+g]=h[p+g]}}else i=new Uint8Array(a,s+l,u*f.BYTES_PER_ELEMENT),i=new Uint8Array(i);return new f(i.buffer)}function _d(e,t){var n=t[e.buffer],r=e.byteOffset||0;return n.slice(r,r+e.byteLength)}function yd(e,t,n,r){e.bufferViews[n.bufferView];var i=pd(n.type),o=i*md(n.componentType).BYTES_PER_ELEMENT;return{name:t,size:i,type:n.componentType,normalized:!1,stride:o,offset:0,vertexBufferIndex:r||0}}function bd(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=0;a<n.length;a++){var s,l=n[a],c=l.uri;if(!c)return;var u=void 0,d=Xo.isRelativePath(l.uri)?Xo.join(e,l.uri):l.uri;i[c]?d=i[c]:"data:"===c.substr(0,5)&&(d=null),(d||u)&&(t[l.uri]={type:null!==(s=l.fileType)&&void 0!==s?s:r,props:{url:d,reSample:o.reSample,timeout:o.timeout,data:u}})}}function xd(e,t){e.asset={techniques:[],textures:[],meshes:[],skins:[],materials:[],animations:[],scenes:[],nodes:[],rootScene:{}};for(var n=t.technique||[],r=0;r<n.length;r++){var i=n[r];e.asset.techniques.push(i.asset)}}var wd,Td={translation:"position",rotation:"rotation",scale:"scale",weights:"weights"},Ad=0,Ed={},Od={},Md={PBRMaterial:"PBRMaterial",KHR_lights:"KHR_lights",KHR_materials_unlit:"KHR_materials_unlit",KHR_materials_pbrSpecularGlossiness:"KHR_materials_pbrSpecularGlossiness",KHR_techniques_webgl:"KHR_techniques_webgl",KHR_draco_mesh_compression:"KHR_draco_mesh_compression"},Sd=null,Cd=null,Rd={KHR_lights:Cd,KHR_materials_unlit:Sd,KHR_materials_pbrSpecularGlossiness:Sd,KHR_techniques_webgl:Yn,KHR_draco_mesh_compression:{init:function(){ud||(ud=new Hs)},parse:function(e,t,n,r,i){var o=r.bufferViews,a=r.accessors,s=e.bufferView,l=e.attributes,c={},u={};for(var d in l)c[d]=l[d];for(var f in n.attributes)if(void 0!==l[f]){var h=a[n.attributes[f]];u[f]=vd(h.componentType)}var p=a[n.indices],m={attributeIDs:c,attributeTypes:u,useUniqueIDs:!0,indexType:vd(p.componentType)},v=_d(o[s],i);return ud.decode(v,m).then((function(e){for(var i=0,o=0;o<e.attributes.length;o++){var l=e.attributes[o],c=n.attributes[l.name],u=a[c];u.bufferView=void 0===u.bufferView?s:u.bufferView,t.vertexBuffers.push(l.array),t.vertexAttributes[l.name]=yd(r,l.name,u,i++)}var d=n.attributes.POSITION,f=a[d];return t.vertexCount=f.count,t.indexCount=p.count,t.indexType=p.componentType,t.indexOffset=0,t.indexBuffer=e.index.array,t}))}}};function kd(e){Object.keys(e).forEach((function(t){if(void 0===Ed[t])switch(Ed[t]=e[t],t){case Md.PBRMaterial:Sd=e[t],Rd.KHR_materials_unlit=Sd;break;case Md.KHR_lights:Cd=e[t],Rd.KHR_lights=Cd;break;default:Yn.isPrototypeOf(e[t])&&e[t].TECH_NAME&&(Od[e[t].TECH_NAME]=e[t])}}))}function Pd(e){var t=e.data,n={asset:e.asset,assetType:e.assetType,images:t.images,gltf:t.gltf,buffers:t.buffers,shaders:t.shaders};return n.gltf.asset&&n.gltf.asset.version&&(n.gltf.version=Number(n.gltf.asset.version),n.gltf.isGltf2=n.gltf.version>=2&&n.gltf.version<=3),function(e){var t=e.gltf,n=e.asset,r=t.extensions,i=t.extensionsUsed,o=t.extensionsRequired;if(i){A.info("extensionsUsed: ",i);for(var a=0;a<i.length;a++)Object.keys(Rd).indexOf(i[a])>-1?Rd[i[a]]||A.warn("extension "+i[a]+" is used, you can add this extension into gltf"):A.warn("extensionsUsed has unsupported extension "+i[a])}if(o){A.info("extensionsRequired: ".concat(o));for(var s=0;s<o.length;s++)(Object.keys(Rd).indexOf(o[s])<0||!Rd[o[s]])&&A.error("model has not supported required extension ".concat(o[s])),o[s]===Md.KHR_draco_mesh_compression&&Rd.KHR_draco_mesh_compression.init()}r&&Cd&&r.KHR_lights&&(n.lights=Cd.parseLights(r.KHR_lights.lights))}(n),Ld(n,"textures",Fd).then((function(){return Ld(n,"techniques",Dd)})).then((function(){return Ld(n,"materials",Nd)})).then((function(){return Ld(n,"meshes",jd)})).then((function(){return Ld(n,"nodes",Ud)})).then((function(){return Ld(n,"scenes",Vd)})).then((function(){return Ld(n,"skins",zd)})).then((function(){return Ld(n,"animations",Bd)})).then((function(){return function(e){var t,n=e.asset,r=e.gltf,i=r.nodes||[];n.rootScene=Hd("scenes",null!==(t=r.scene)&&void 0!==t?t:0,e);for(var o=i.length-1;o>=0;o--){var a=i[o],s=Hd("nodes",o,e);if(a.hasOwnProperty("children"))for(var l=a.children||[],c=l.length-1;c>=0;c--){var u=Hd("nodes",l[c],e);s.addChild(u)}if(a.hasOwnProperty("mesh")){var d=Hd("meshes",a.mesh,e);if(a.hasOwnProperty("skin")||d.hasOwnProperty("weights")){var f=Hd("skins",a.skin,e),h=d.weights;s.createAbility(mr,{skin:f,mesh:d,weights:h})}else s.createAbility(pr,{mesh:d})}}return e}(n)}))}function Ld(e,t,n){var r=e.gltf,i=e.asset;if(r.hasOwnProperty(t)){var o=r[t]||[];A.debug(t+":",o);for(var a=[],s=o.length-1;s>=0;s--)a.push(n(o[s],e));return Promise.all(a).then((function(e){for(var n=0;n<e.length;n++)i[t].push(e[n])}))}return Promise.resolve()}var Id=0;function Fd(t,n){var r,i=n.gltf,o=n.images;r=void 0===t.sampler?{magFilter:e.TextureFilter.NEAREST,minFilter:e.TextureFilter.NEAREST,wrapS:e.TextureWrapMode.REPEAT,wrapT:e.TextureWrapMode.REPEAT}:id({magFilter:e.TextureFilter.LINEAR,minFilter:e.TextureFilter.LINEAR_MIPMAP_LINEAR,wrapS:e.TextureWrapMode.REPEAT,wrapT:e.TextureWrapMode.REPEAT},i.samplers[t.sampler]);var a=o[t.source],s=i.images[t.source];Id++;var l,c=t.name||s.name||s.uri||"GLTF_TEX_"+Id;return(l=a.fileType?"ktx"===a.fileType?Ta(c,a.data,r):new Xn(c,a.data,r):new Xn(c,a,r)).type=n.assetType,Promise.resolve(l)}function Dd(e,t){var n=t.gltf,r=t.shaders,i=n.programs[e.program],o=Ko(e,r[i.vertexShader],r[i.fragmentShader]);return o.type=t.assetType,Promise.resolve(o)}function Nd(t,n){var r,i=n.gltf,o=n.asset;if(i.isGltf2&&void 0===t.technique&&Sd){var a={},s={},l=t.pbrMetallicRoughness,c=t.normalTexture,u=t.emissiveTexture,d=(t.emissiveFactor,t.occlusionTexture),f=t.alphaMode,h=t.alphaCutoff,p=t.doubleSided,m=t.extensions;if(l){var v=l.baseColorFactor,g=l.baseColorTexture,_=l.metallicFactor,y=l.roughnessFactor,b=l.metallicRoughnessTexture;g&&(a.baseColorTexture=Hd("textures",g.index||0,n)),v&&(a.baseColorFactor=v),a.metallicFactor=void 0!==_?_:1,a.roughnessFactor=void 0!==y?y:1,b&&(a.metallicRoughnessTexture=Hd("textures",b.index||0,n))}if(c){var x=c.index,w=(c.texCoord,c.scale);a.normalTexture=Hd("textures",x||0,n),void 0!==$u(w)&&(a.normalScale=w)}if(u&&(a.emissiveTexture=Hd("textures",u.index||0,n)),d&&(a.occlusionTexture=Hd("textures",d.index||0,n),void 0!==d.strength&&(a.occlusionStrength=d.strength)),s.doubleSided=!!p,s.alphaMode=f||"OPAQUE","MASK"===f&&(a.alphaCutoff=void 0===h?.5:h),m&&(m.KHR_materials_unlit&&(s.unlit=!0),m.KHR_materials_pbrSpecularGlossiness)){var T=m.KHR_materials_pbrSpecularGlossiness,E=T.diffuseFactor,M=T.diffuseTexture,S=T.specularFactor,C=T.glossinessFactor,R=T.specularGlossinessTexture;s.isMetallicWorkflow=!1,E&&(a.baseColorFactor=E),M&&(a.baseColorTexture=Hd("textures",M.index||0,n)),S&&(a.specularFactor=S),void 0!==C&&(a.glossinessFactor=C),R&&(a.specularGlossinessTexture=Hd("textures",R.index||0,n))}var k=t.unlit,P=t.srgb,L=t.gamma,I=t.clearCoat,F=t.clearCoatRoughness,D=t.blendFunc,N=t.depthMask;k&&(s.unlit=!0),P&&(s.srgb=!0),L&&(s.gamma=!0),I&&(a.clearCoat=I),void 0!==F&&(a.clearCoatRoughness=F),D&&(s.blendFunc=D),void 0!==N&&(s.depthMask=N),r=new Sd(t.name||Sd.MATERIAL_NAME,id({},a,s))}else{var z=t.technique;if(r=new Yn(t.name),Number.isInteger(z)){r.technique=Hd("techniques",z,n);var j=r.technique;j&&j.states&&j.states.enable&&j.states.enable.indexOf(e.RenderState.BLEND)>-1&&(r.renderType=e.MaterialType.TRANSPARENT)}else if("string"==typeof z&&Od[z])A.warn("Deprecated: Please use a model that meets the glTF 2.0 specification"),r=new(0,Od[z]);else{for(var B=0;B<o.techniques.length;B++)if(o.techniques[B].name===z){r.technique=o.techniques[B];break}var U=r.technique;U&&U.states&&U.states.enable&&U.states.enable.indexOf(e.RenderState.BLEND)>-1&&(r.renderType=e.MaterialType.TRANSPARENT)}}if(t.hasOwnProperty("values"))for(var V in A.warn("Deprecated: Please use a model that meets the glTF 2.0 specification"),t.values)if(r.technique){var H=hd(r.technique.uniforms,"paramName",V);if(H){var G=H.name;if(H.type===e.DataType.SAMPLER_2D){var W=t.values[V];O.isArray(W)&&(W=W[0]);var X=Hd("textures",W,n);r.setValue(G,X)}else r.setValue(G,t.values[V])}else A.warn("Cant not find uniform: "+V)}else A.warn("Cant not find technique");return Promise.resolve(r)}function zd(e,t){for(var n=t.gltf,r=t.buffers,i=e.joints.length,o=new hr(e.name),a=gd(n,n.accessors[e.inverseBindMatrices],r),s=0;s<i;s++){var l=16*s;o.inverseBindMatrices[s]=a.subarray(l,l+16)}for(var c=0;c<i;c++){var u=Hd("nodes",e.joints[c],t);o.joints[c]=u.name}var d=Hd("nodes",null==e.skeleton?e.joints[0]:e.skeleton,t);return o.skeleton=d.name,Promise.resolve(o)}function jd(t,n){var r=n.gltf,i=n.buffers,o=new dr(t.name);o.type=n.assetType;for(var a=[],s=function(s){a.push(new Promise((function(a,l){var c,u=t.primitives[s],d=new dc(u.name||t.name||s);if(d.type=n.assetType,d.mode=null==u.mode?e.DrawMode.TRIANGLES:u.mode,u.hasOwnProperty("targets")&&(d.targets=[],o.weights=t.weights||new Array(u.targets.length).fill(0)),u.extensions&&u.extensions[Md.KHR_draco_mesh_compression]){var f=Rd.KHR_draco_mesh_compression,h=u.extensions[Md.KHR_draco_mesh_compression];c=f.parse(h,d,u,r,i)}else c=function(e,t,n,r){var i=0;for(var o in t.attributes){var a=t.attributes[o],s=n.accessors[a],l=gd(n,s,r);e.vertexBuffers.push(l),e.vertexAttributes[o]=yd(n,o,s,i++)}var c=t.attributes.POSITION,u=n.accessors[c];e.vertexCount=u.count;var d=n.accessors[t.indices],f=gd(n,d,r);return e.indexCount=d.count,e.indexType=d.componentType,e.indexOffset=0,e.indexBuffer=f,Promise.resolve(e)}(d,u,r,i);c.then((function(){!function(e,t,n,r){if(t.hasOwnProperty("targets"))for(var i,o,a,s=e.vertexBuffers.length,l=0;l<t.targets.length;l++){var c=t.targets[l];for(var u in c){switch(u){case"POSITION":i=c.POSITION,a=gd(n,o=n.accessors[i],r),e.vertexBuffers.push(a);var d=yd(n,"POSITION_".concat(l),o,s++);e.vertexAttributes["POSITION_".concat(l)]=d,c.POSITION=ad({},d);break;case"NORMAL":i=c.NORMAL,a=gd(n,o=n.accessors[i],r),e.vertexBuffers.push(a);var f=yd(n,"NORMAL_".concat(l),o,s++);e.vertexAttributes["NORMAL_".concat(l)]=f,c.NORMAL=ad({},f);break;case"TANGENT":i=c.TANGENT,a=gd(n,o=n.accessors[i],r),e.vertexBuffers.push(a);var h=yd(n,"TANGENT_".concat(l),o,s++);e.vertexAttributes["TANGENT_".concat(l)]=h,c.TANGENT=ad({},h);break;default:A.error('unknown morth target semantic "'.concat(u,'"'))}e.targets.push(c)}}}(d,u,r,i),function(e,t,n){if(void 0!==t.material){var r=Hd("materials",t.material,n);r.constructor.DISABLE_SHARE&&(r=r.clone()),e.materialIndex=t.material,e.material=r}else e.material=(wd||((wd=new pu("default")).emission=[.749,.749,.749,1]),wd)}(d,u,n),a(d)})).catch((function(e){l(e)}))})))},l=0;l<t.primitives.length;l++)s(l);return Promise.all(a).then((function(e){for(var t=0;t<e.length;t++)o.primitives.push(e[t]);return o}))}function Bd(t,n){for(var r=n.gltf,i=n.buffers,o=t.samplers||[],a=t.channels||[],s=r.animations.indexOf(t),l=new Or(t.name||"Animation".concat(s)),c=0;c<o.length;c++){var u=o[c],d=r.accessors[u.input],f=r.accessors[u.output],h=gd(r,d,i),p=gd(r,f,i),m=pd(f.type);m*h.length!==p.length&&(m=p.length/h.length);var v=e.InterpolationType.LINEAR;switch(u.interpolation){case"CUBICSPLINE":v=e.InterpolationType.CUBICSPLINE;break;case"STEP":v=e.InterpolationType.STEP}l.addSampler(h,p,m,v)}for(var g=0;g<a.length;g++){var _=a[g],y=_.target,b=_.sampler,x=Hd("nodes",y.node,n),w=Td[y.path];l.addChannel(b,x.name,w)}return Promise.resolve(l)}function Ud(e,t){var n=new Zt(null,null,e.name||"GLTF_NODE_".concat(Ad++));if(e.hasOwnProperty("matrix")){var r=e.matrix,i=Ee.fromValues(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),o=xt.create(),a=xt.fromValues(1,1,1),s=tt.create();Ee.decompose(i,o,s,a),n.position=o,n.rotation=s,n.scale=a}else for(var l in Td)e.hasOwnProperty(l)&&(n[Td[l]]=e[l]);if(e.extensions&&Cd&&e.extensions.KHR_lights){var c=e.extensions.KHR_lights.light;if(void 0!==c){var u=Hd("lights",c,t);u&&n.createAbility(u.ability,u.props)}}return Promise.resolve(n)}function Vd(e,t){for(var n=[],r=0;r<e.nodes.length;r++){var i=Hd("nodes",e.nodes[r],t);n.push(i)}if(e.extensions&&Cd&&e.extensions.KHR_lights){var o=e.extensions.KHR_lights.light;if(void 0!==o){var a=Hd("lights",o,t);a&&n[0].createAbility(a.ability,a.props)}}return Promise.resolve({nodes:n})}function Hd(e,t,n){var r=n.asset,i=r[e].length-t-1;return r[e][i]}var Gd=function(){function e(){ed(this,e)}return nd(e,[{key:"load",value:function(e,t,n){var r={images:[],gltf:{},buffers:[],shaders:[]},i=t.filesMap||{},o=!!t.reSample;e.load("json",t,(function(a,s){if(a)n("Error loading glTF JSON from "+t.url);else{var l;r.gltf=s;var c={},u={},d=Xo.getDirectory(t.url);bd(d,c,s.buffers,"binary",i,{timeout:t.timeout}),bd(d,c,null!==(l=function(e){if(e)return e.map((function(e){return{uri:e.url,fileType:"ktx"===e.fileType?"binary":"image"}}))}(t.images))&&void 0!==l?l:s.images,"image",i,{reSample:o,timeout:t.timeout}),bd(d,c,s.shaders,"text",i,{}),e.loadAll(c,(function(i,o){if(i)n(i);else{if(s.hasOwnProperty("buffers"))for(var a=0;a<s.buffers.length;a++){var l=s.buffers[a];if("data:"!==l.uri.substr(0,5))r.buffers[a]=o[l.uri];else{for(var c=l.uri.indexOf(";base64,")+";base64,".length,d=window.atob(l.uri.substr(c)),f=new Uint8Array(d.length),h=0;h<d.length;h++)f[h]=d.charCodeAt(h);r.buffers[a]=f.buffer}}if(t.images)for(var p=0;p<t.images.length;p++){var m=t.images[p];r.images[p]={fileType:m.fileType,data:o[m.url]}}else if(s.hasOwnProperty("images"))for(var v=0;v<s.images.length;v++){var g=s.images[v];if(g.uri)if("data:"!==g.uri.substr(0,5))r.images[v]=o[g.uri];else{var _=new Image;_.src=g.uri,r.images[v]=_}else{var y=_d(s.bufferViews[g.bufferView],r.buffers),b=g.mimeType||"image/jpeg";u[v]={type:"imageBuffer",props:{imageBuffer:y,type:b}}}}if(s.hasOwnProperty("shaders"))for(var x=0;x<s.shaders.length;x++){var w=s.shaders[x],T=w.uri.indexOf(";base64,")+";base64,".length;r.shaders[x]=o[w.uri]||window.atob(w.uri.substr(T))}e.loadAll(u,(function(e,t){if(s.hasOwnProperty("images"))for(var i=0;i<s.images.length;i++)s.images[i].hasOwnProperty("bufferView")&&(r.images[i]=t[i]);n(null,r)}))}}))}}),!0)}},{key:"patch",value:function(e,t){xd(e,t)}},{key:"open",value:function(e){return Pd(e)}}]),e}(),Wd=function(){function e(){ed(this,e)}return nd(e,[{key:"load",value:function(e,t,n){var r={images:[],gltf:{},buffers:[],shaders:[]};e.load("binary",t,(function(i,o){if(i)n("Error loading GLB from "+t.url);else{var a=function(e){var t=new DataView(e),n={magic:t.getUint32(0,!0),version:t.getUint32(4,!0),length:t.getUint32(8,!0)};if(1179937895!==n.magic)return console.error("Invalid glb magic number. Expected 0x46546C67, found 0x"+n.magic.toString(16)),null;var r=t.getUint32(12,!0),i=t.getUint32(16,!0);if(1313821514!==i)return console.error("Invalid glb chunk type. Expected 0x004E4942, found 0x"+i.toString(16)),null;for(var o=new Uint8Array(e,20,r),a=JSON.parse(function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(encodeURIComponent(t))}(o)),s=[],l=20+r;l<n.length;){if(r=t.getUint32(l,!0),5130562!==(i=t.getUint32(l+4,!0)))return console.error("Invalid glb chunk type. Expected 0x004E4942, found 0x"+i.toString(16)),null;var c=l+8,u=e.slice(c,c+r);s.push(u),l+=r+8}return{gltf:a,buffers:s}}(o);r.gltf=a.gltf,r.buffers=a.buffers;for(var s={},l=0,c=r.gltf.images||[],u=0;u<c.length;u++){var d=c[u],f=d.uri;if(f){if("data:"===f.substr(0,5)){var h=new Image;h.src=f,r.images[u]=h}}else{var p=_d(r.gltf.bufferViews[d.bufferView],a.buffers);s[u]={type:"imageBuffer",props:{imageBuffer:p,type:d.mimeType||"image/jpeg"}}}l++}for(var m=r.gltf.shaders||[],v=0;v<m.length;v++){var g=m[v],_=_d(r.gltf.bufferViews[g.bufferView],a.buffers);s[l]={type:"shaderBuffer",props:{shaderBuffer:_,type:"text/plain"}},l++}e.loadAll(s,(function(e,t){for(var i in t)t[i]instanceof Image?r.images[i]=t[i]:r.shaders.push(t[i]);n(null,r)}))}}))}},{key:"patch",value:function(e,t){xd(e,t)}},{key:"open",value:function(e){return Pd(e)}}]),e}(),Xd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ld(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sd(e);if(t){var i=sd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cd(this,n)}}(n);function n(e,r){var i;ed(this,n),(i=t.call(this,e,r))._animator=void 0,i.animationsNames=void 0,i._asset=void 0,i.GLTFNode=void 0,i._loop=void 0,i._autoPlay=void 0,i._hasBuiltNode=!1;var o=r.asset,a=void 0===o?null:o,s=r.isAnimate,l=r.autoPlay,c=r.loop;if(r.isClone){var u=i._props.gltfRootName;u&&(i.GLTFNode=i.node.findChildByName(u))}if(i.GLTFNode)i._hasBuiltNode=!0;else{var d="GLTF-".concat(Date.now());i._props.gltfRootName=d,i.GLTFNode=i.node.createChild(d),i._hasBuiltNode=!1}return i.asset=a,i.isAnimate=s,i.loop=c,i.autoPlay=l,i.addEventListener("enabled",(function(){i.GLTFNode.isActive=!0})),i.addEventListener("disabled",(function(){i.GLTFNode.isActive=!1})),i}return nd(n,[{key:"asset",get:function(){return this._asset},set:function(e){var t=this;this._hasBuiltNode||(this.GLTFNode.clearChildren(),null!==e&&e.rootScene.nodes.forEach((function(e){t.GLTFNode.addChild(e.clone())}))),this._asset=e}},{key:"animator",get:function(){return this._animator}},{key:"isAnimate",set:function(e){var t=this;if(this._asset&&this._asset&&this._asset.animations&&this._asset.animations.length&&e){if(!this._animator){var n=this._asset.animations;this._animator=this.node.createAbility(Er),n.forEach((function(e){t._animator.addAnimationClip(e,e.name)})),this._autoPlay&&(this.autoPlay=this._autoPlay)}}else this.node.detachAbility(this._animator),this._animator=null}},{key:"autoPlay",get:function(){return this._autoPlay},set:function(e){this._animator&&e&&this._animator.playAnimationClip(e,{wrapMode:this._loop}),this._autoPlay=e}},{key:"loop",get:function(){return this._loop},set:function(e){this._animator&&this.autoPlay&&this._animator.playAnimationClip(this._autoPlay,{wrapMode:e}),this._loop=e}}]),n}(Kt);function Yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qd(e){return(qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kd(e,t){return(Kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jd(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?Qd(e):n}function Zd(e,t,n){return(Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}Vo.registerHandler("gltf",new Gd),Vo.registerHandler("glb",new Wd);var $d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kd(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qd(e);if(t){var i=qd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jd(this,n)}}(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,e)).camera=void 0,n.domElement=void 0,n.mainElement=void 0,n.fov=void 0,n.target=void 0,n.up=void 0,n.minDistance=void 0,n.maxDistance=void 0,n.minZoom=void 0,n.maxZoom=void 0,n.enableDamping=void 0,n.zoomFactor=void 0,n.enableRotate=void 0,n.keyPanSpeed=void 0,n.minPolarAngle=void 0,n.maxPolarAngle=void 0,n.minAzimuthAngle=void 0,n.maxAzimuthAngle=void 0,n.enableZoom=void 0,n.dampingFactor=void 0,n.zoomSpeed=void 0,n.enablePan=void 0,n.autoRotate=void 0,n.autoRotateSpeed=void 0,n.rotateSpeed=void 0,n.enableKeys=void 0,n.keys=void 0,n.mouseButtons=void 0,n.touchFingers=void 0,n._position=void 0,n._offset=void 0,n._spherical=void 0,n._sphericalDelta=void 0,n._sphericalDump=void 0,n._zoomFrag=void 0,n._scale=void 0,n._panOffset=void 0,n._isMouseUp=void 0,n._rotateStart=void 0,n._vPan=void 0,n.constEvents=void 0,n._state=void 0,n._rotateEnd=void 0,n._rotateDelta=void 0,n._panStart=void 0,n._panEnd=void 0,n._zoomStart=void 0,n._panDelta=void 0,n._zoomEnd=void 0,n._zoomDelta=void 0,n.STATE=void 0,n.mouseUpEvents=void 0,n.camera=e;var o=e.scene._activeCameras[0];return n.mainElement=t.mainElement||o._rhi.canvas,n.domElement=t.domElement||document,n.fov=t.fov||45,n.mainElement instanceof HTMLCanvasElement?(n.target=t.target||xt.create(),n.up=xt.fromValues(0,1,0),n.minDistance=.1,n.maxDistance=1/0,n.minZoom=0,n.maxZoom=1/0,n.minPolarAngle=0,n.maxPolarAngle=Math.PI,n.minAzimuthAngle=-1/0,n.maxAzimuthAngle=1/0,n.enableDamping=!1,n.dampingFactor=.08,n.zoomFactor=.2,n.enableZoom=!0,n.zoomSpeed=1,n.enableRotate=!0,n.rotateSpeed=1,n.enablePan=!0,n.keyPanSpeed=7,n.autoRotate=!1,n.autoRotateSpeed=2,n.enableKeys=!1,n.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},n.mouseButtons={ORBIT:0,ZOOM:1,PAN:2},n.touchFingers={ORBIT:1,ZOOM:2,PAN:3},n._position=xt.create(),n._offset=xt.create(),n._spherical=new kt,n._sphericalDelta=new kt,n._sphericalDump=new kt,n._zoomFrag=0,n._scale=1,n._panOffset=xt.create(),n._isMouseUp=!0,n._vPan=xt.create(),n._rotateStart=ft.create(),n._rotateEnd=ft.create(),n._rotateDelta=ft.create(),n._panStart=ft.create(),n._panEnd=ft.create(),n._panDelta=ft.create(),n._zoomStart=ft.create(),n._zoomEnd=ft.create(),n._zoomDelta=ft.create(),n.STATE={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5},n._state=n.STATE.NONE,n.constEvents=[{type:"mousedown",listener:n.onMouseDown.bind(Qd(n))},{type:"wheel",listener:n.onMouseWheel.bind(Qd(n))},{type:"keydown",listener:n.onKeyDown.bind(Qd(n)),element:window},{type:"touchstart",listener:n.onTouchStart.bind(Qd(n))},{type:"touchmove",listener:n.onTouchMove.bind(Qd(n))},{type:"touchend",listener:n.onTouchEnd.bind(Qd(n))},{type:"contextmenu",listener:n.onContextMenu.bind(Qd(n))}],n.mouseUpEvents=[{type:"mousemove",listener:n.onMouseMove.bind(Qd(n))},{type:"mouseup",listener:n.onMouseUp.bind(Qd(n))}],n.constEvents.forEach((function(e){e.element?e.element.addEventListener(e.type,e.listener,!1):n.mainElement.addEventListener(e.type,e.listener,!1)})),n.addEventListener("disabled",(function(){var e=n.domElement===document?n.domElement.body:n.domElement;n.mainElement.removeEventListener(n.mouseUpEvents[0].type,n.mouseUpEvents[0].listener,!1),e.removeEventListener(n.mouseUpEvents[1].type,n.mouseUpEvents[1].listener,!1)})),n):(A.warn("AOrbitControls must have a legal mainElement"),Jd(n,null))}return t=i,(n=[{key:"destroy",value:function(){var e=this;this.constEvents.forEach((function(t){t.element?t.element.removeEventListener(t.type,t.listener,!1):e.mainElement.removeEventListener(t.type,t.listener,!1)}));var t=this.domElement===document?this.domElement.body:this.domElement;this.mainElement.removeEventListener(this.mouseUpEvents[0].type,this.mouseUpEvents[0].listener,!1),t.removeEventListener(this.mouseUpEvents[1].type,this.mouseUpEvents[1].listener,!1),Zd(qd(i.prototype),"destroy",this).call(this)}},{key:"setOneFingerRotate",value:function(){this.touchFingers.ORBIT=1,this.touchFingers.ZOOM=2,this.touchFingers.PAN=3}},{key:"setOneFingerPan",value:function(){this.touchFingers.ORBIT=3,this.touchFingers.ZOOM=2,this.touchFingers.PAN=1}},{key:"update",value:function(e){if(this.enabled){Zd(qd(i.prototype),"update",this).call(this,e);var t=this.camera.position;xt.copy(this._offset,t),xt.sub(this._offset,this._offset,this.target),this._spherical.setFromVec3(this._offset),this.autoRotate&&this._state===this.STATE.NONE&&this.rotateLeft(this.getAutoRotationAngle(e)),this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi,this._spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),1!==this._scale&&(this._zoomFrag=this._spherical.radius*(this._scale-1)),this._spherical.radius+=this._zoomFrag,this._spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this._spherical.radius)),xt.add(this.target,this.target,this._panOffset),this._spherical.setToVec3(this._offset),xt.copy(this._position,this.target),xt.add(this._position,this._position,this._offset),this.camera.position=this._position,this.camera.lookAt(this.target,this.up),!0===this.enableDamping?(this._sphericalDump.theta*=1-this.dampingFactor,this._sphericalDump.phi*=1-this.dampingFactor,this._zoomFrag*=1-this.zoomFactor,this._isMouseUp?(this._sphericalDelta.theta=this._sphericalDump.theta,this._sphericalDelta.phi=this._sphericalDump.phi):this._sphericalDelta.set(0,0,0)):(this._sphericalDelta.set(0,0,0),this._zoomFrag=0),this._scale=1,xt.set(this._panOffset,0,0,0)}}},{key:"getAutoRotationAngle",value:function(e){return 2*Math.PI/this.autoRotateSpeed/1e3*e}},{key:"getZoomScale",value:function(){return Math.pow(.95,this.zoomSpeed)}},{key:"rotateLeft",value:function(e){this._sphericalDelta.theta-=e,this.enableDamping&&(this._sphericalDump.theta=-e)}},{key:"rotateUp",value:function(e){this._sphericalDelta.phi-=e,this.enableDamping&&(this._sphericalDump.phi=-e)}},{key:"panLeft",value:function(e,t){xt.set(this._vPan,t[0],t[1],t[2]),xt.scale(this._vPan,this._vPan,e),xt.add(this._panOffset,this._panOffset,this._vPan)}},{key:"panUp",value:function(e,t){xt.set(this._vPan,t[4],t[5],t[6]),xt.scale(this._vPan,this._vPan,e),xt.add(this._panOffset,this._panOffset,this._vPan)}},{key:"pan",value:function(e,t){var n=this.domElement===document?this.domElement.body:this.domElement,r=this.camera.position;xt.copy(this._vPan,r),xt.sub(this._vPan,this._vPan,this.target);var i=xt.len(this._vPan);i*=this.fov/2*(Math.PI/180),this.panLeft(2*e*(i/n.clientHeight),this.camera.getModelMatrix()),this.panUp(2*t*(i/n.clientHeight),this.camera.getModelMatrix())}},{key:"zoomIn",value:function(e){this._scale*=e}},{key:"zoomOut",value:function(e){this._scale/=e}},{key:"handleMouseDownRotate",value:function(e){ft.set(this._rotateStart,e.clientX,e.clientY)}},{key:"handleMouseDownZoom",value:function(e){ft.set(this._zoomStart,e.clientX,e.clientY)}},{key:"handleMouseDownPan",value:function(e){ft.set(this._panStart,e.clientX,e.clientY)}},{key:"handleMouseMoveRotate",value:function(e){ft.set(this._rotateEnd,e.clientX,e.clientY),ft.sub(this._rotateDelta,this._rotateEnd,this._rotateStart);var t=this.domElement===document?document.body:this.domElement;this.rotateLeft(2*Math.PI*(this._rotateDelta[0]/t.clientWidth)*this.rotateSpeed),this.rotateUp(2*Math.PI*(this._rotateDelta[1]/t.clientHeight)*this.rotateSpeed),ft.copy(this._rotateStart,this._rotateEnd)}},{key:"handleMouseMoveZoom",value:function(e){ft.set(this._zoomEnd,e.clientX,e.clientY),ft.sub(this._zoomDelta,this._zoomEnd,this._zoomStart),this._zoomDelta[1]>0?this.zoomOut(this.getZoomScale()):this._zoomDelta[1]<0&&this.zoomIn(this.getZoomScale()),ft.copy(this._zoomStart,this._zoomEnd)}},{key:"handleMouseMovePan",value:function(e){ft.set(this._panEnd,e.clientX,e.clientY),ft.sub(this._panDelta,this._panEnd,this._panStart),this.pan(this._panDelta[0],this._panDelta[1]),ft.copy(this._panStart,this._panEnd)}},{key:"handleMouseWheel",value:function(e){e.deltaY<0?this.zoomIn(this.getZoomScale()):e.deltaY>0&&this.zoomOut(this.getZoomScale())}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case this.keys.UP:this.pan(0,this.keyPanSpeed);break;case this.keys.BOTTOM:this.pan(0,-this.keyPanSpeed);break;case this.keys.LEFT:this.pan(this.keyPanSpeed,0);break;case this.keys.RIGHT:this.pan(-this.keyPanSpeed,0)}}},{key:"handleTouchStartRotate",value:function(e){ft.set(this._rotateStart,e.touches[0].pageX,e.touches[0].pageY)}},{key:"handleTouchStartZoom",value:function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);ft.set(this._zoomStart,0,r)}},{key:"handleTouchStartPan",value:function(e){ft.set(this._panStart,e.touches[0].pageX,e.touches[0].pageY)}},{key:"handleTouchMoveRotate",value:function(e){ft.set(this._rotateEnd,e.touches[0].pageX,e.touches[0].pageY),ft.sub(this._rotateDelta,this._rotateEnd,this._rotateStart);var t=this.domElement===document?this.domElement.body:this.domElement;this.rotateLeft(2*Math.PI*this._rotateDelta[0]/t.clientWidth*this.rotateSpeed),this.rotateUp(2*Math.PI*this._rotateDelta[1]/t.clientHeight*this.rotateSpeed),ft.copy(this._rotateStart,this._rotateEnd)}},{key:"handleTouchMoveZoom",value:function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);ft.set(this._zoomEnd,0,r),ft.sub(this._zoomDelta,this._zoomEnd,this._zoomStart),this._zoomDelta[1]>0?this.zoomIn(this.getZoomScale()):this._zoomDelta[1]<0&&this.zoomOut(this.getZoomScale()),ft.copy(this._zoomStart,this._zoomEnd)}},{key:"handleTouchMovePan",value:function(e){ft.set(this._panEnd,e.touches[0].pageX,e.touches[0].pageY),ft.sub(this._panDelta,this._panEnd,this._panStart),this.pan(this._panDelta[0],this._panDelta[1]),ft.copy(this._panStart,this._panEnd)}},{key:"onMouseDown",value:function(e){if(!1!==this.enabled){switch(e.preventDefault(),this._isMouseUp=!1,e.button){case this.mouseButtons.ORBIT:if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this._state=this.STATE.ROTATE;break;case this.mouseButtons.ZOOM:if(!1===this.enableZoom)return;this.handleMouseDownZoom(e),this._state=this.STATE.ZOOM;break;case this.mouseButtons.PAN:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this._state=this.STATE.PAN}if(this._state!==this.STATE.NONE){var t=this.domElement===document?this.domElement.body:this.domElement;this.mainElement.addEventListener(this.mouseUpEvents[0].type,this.mouseUpEvents[0].listener,!1),t.addEventListener(this.mouseUpEvents[1].type,this.mouseUpEvents[1].listener,!1)}}}},{key:"onMouseMove",value:function(e){if(!1!==this.enabled)switch(e.preventDefault(),this._state){case this.STATE.ROTATE:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case this.STATE.ZOOM:if(!1===this.enableZoom)return;this.handleMouseMoveZoom(e);break;case this.STATE.PAN:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}}},{key:"onMouseUp",value:function(){var e=this;!1!==this.enabled&&(this._isMouseUp=!0,this.mouseUpEvents.forEach((function(t){(e.domElement===document?e.domElement.body:e.domElement).removeEventListener(t.type,t.listener,!1),e.mainElement.removeEventListener(t.type,t.listener,!1)})),this._state=this.STATE.NONE)}},{key:"onMouseWheel",value:function(e){!1===this.enabled||!1===this.enableZoom||this._state!==this.STATE.NONE&&this._state!==this.STATE.ROTATE||(e.preventDefault(),e.stopPropagation(),this.handleMouseWheel(e))}},{key:"onKeyDown",value:function(e){!1!==this.enabled&&!1!==this.enableKeys&&!1!==this.enablePan&&this.handleKeyDown(e)}},{key:"onTouchStart",value:function(e){if(!1!==this.enabled)switch(this._isMouseUp=!1,e.touches.length){case this.touchFingers.ORBIT:if(!1===this.enableRotate)return;this.handleTouchStartRotate(e),this._state=this.STATE.TOUCH_ROTATE;break;case this.touchFingers.ZOOM:if(!1===this.enableZoom)return;this.handleTouchStartZoom(e),this._state=this.STATE.TOUCH_ZOOM;break;case this.touchFingers.PAN:if(!1===this.enablePan)return;this.handleTouchStartPan(e),this._state=this.STATE.TOUCH_PAN;break;default:this._state=this.STATE.NONE}}},{key:"onTouchMove",value:function(e){if(!1!==this.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case this.touchFingers.ORBIT:if(!1===this.enableRotate)return;if(this._state!==this.STATE.TOUCH_ROTATE)return;this.handleTouchMoveRotate(e);break;case this.touchFingers.ZOOM:if(!1===this.enableZoom)return;if(this._state!==this.STATE.TOUCH_ZOOM)return;this.handleTouchMoveZoom(e);break;case this.touchFingers.PAN:if(!1===this.enablePan)return;if(this._state!==this.STATE.TOUCH_PAN)return;this.handleTouchMovePan(e);break;default:this._state=this.STATE.NONE}}},{key:"onTouchEnd",value:function(){!1!==this.enabled&&(this._isMouseUp=!0,this._state=this.STATE.NONE)}},{key:"onContextMenu",value:function(e){!1!==this.enabled&&e.preventDefault()}}])&&Yd(t.prototype,n),i}(Kt);function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rf(e,t,n){return t&&nf(e.prototype,t),n&&nf(e,n),e}function of(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){of(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function cf(e){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uf(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function df(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cf(e);if(t){var i=cf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uf(this,n)}}function ff(e,t,n){return(ff="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var hf=function(t){lf(r,t);var n=df(r);function r(e){var t;return tf(this,r),(t=n.call(this,e))._time=void 0,t._isInit=void 0,t._isStart=void 0,t.maxCount=void 0,t.options=void 0,t.getOptions=void 0,t.rotateToVelocity=void 0,t.blendFunc=void 0,t.blendFuncSeparate=void 0,t.useOriginColor=void 0,t.fragmentShader=void 0,t.vertexShader=void 0,t.particleTex=void 0,t.fadeIn=void 0,t.fadeOut=void 0,t.particleMaskTex=void 0,t.isScaleByLifetime=void 0,t.scaleFactor=void 0,t.spriteSheet=void 0,t.is2d=void 0,t._time=0,t._isInit=!1,t._isStart=!1,t}return rf(r,[{key:"initialize",value:function(t){this.maxCount=void 0!==t.maxCount?t.maxCount:1e3,this.once=t.once||!1,this.options=t.options||{},this.getOptions=t.getOptions,this.rotateToVelocity=t.rotateToVelocity||!1,t.blendFuncSeparate&&(this.blendFuncSeparate=t.blendFuncSeparate),this.blendFunc=t.blendFunc||[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA],this.useOriginColor=void 0===t.useOriginColor||t.useOriginColor,this.fragmentShader=t.fragmentShader||null,this.vertexShader=t.vertexShader||null,this.particleTex=t.texture||null,this.fadeIn=t.fadeIn||!1,this.fadeOut=void 0===t.fadeOut||t.fadeOut,this.particleMaskTex=t.maskTexture||null,this.isScaleByLifetime=t.isScaleByLifetime||!1,this.scaleFactor=t.scaleFactor||1,this.spriteSheet=t.spriteSheet||null,this.is2d=void 0===t.is2d||t.is2d,this.setMaterial(),this.geometry=this._createGeometry(),this._isInit=!0;for(var n=this.getOptions?this.getOptions(this._time):this.options,r=0;r<this.maxCount;r++)this._spawnParticle(n,r);return this}},{key:"update",value:function(e){this._isInit&&this._isStart&&(this._time+=e/1e3,this._material.setValue("uTime",this._time))}},{key:"setOptions",value:function(e){return void 0!==e&&(this.options=sf(sf({},this.options),e)),this}},{key:"start",value:function(){this._isStart=!0,this._time=0,this._material.setValue("uActive",1)}},{key:"stop",value:function(){this._material.setValue("uActive",0)}},{key:"destroy",value:function(){ff(cf(r.prototype),"destroy",this).call(this),this.options=null,this.particleTex&&(this.particleTex=null),this.particleMaskTex&&(this.particleMaskTex=null)}},{key:"setMaterial",value:function(){var t=this._createTechnique(),n=new Yn("particleMaterial");n.technique=t,n.renderType=e.MaterialType.TRANSPARENT,n.setValue("uOnce",this.once?1:0),this.particleTex&&(this.particleTex.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE),n.setValue("particleTex",this.particleTex)),this.particleMaskTex&&(this.particleMaskTex.setWrapMode(e.TextureWrapMode.CLAMP_TO_EDGE,e.TextureWrapMode.CLAMP_TO_EDGE),n.setValue("particleMaskTex",this.particleMaskTex)),ff(cf(r.prototype),"setMaterial",this).call(this,n),this._material=n}},{key:"_createTechnique",value:function(){var t={attributes:{positionStart:{name:"positionStart",semantic:"POSITIONSTART",type:e.DataType.FLOAT_VEC3},color:{name:"color",semantic:"COLOR",type:e.DataType.FLOAT_VEC3},alpha:{name:"alpha",semantic:"ALPHA",type:e.DataType.FLOAT},acceleration:{name:"acceleration",semantic:"ACCELERATION",type:e.DataType.FLOAT_VEC3},velocity:{name:"velocity",semantic:"VELOCITY",type:e.DataType.FLOAT_VEC3},startAngle:{name:"startAngle",semantic:"STARTANGLE",type:e.DataType.FLOAT},lifeTime:{name:"lifeTime",semantic:"LIFETIME",type:e.DataType.FLOAT},startTime:{name:"startTime",semantic:"STARTTIME",type:e.DataType.FLOAT},size:{name:"size",semantic:"SIZE",type:e.DataType.FLOAT},rotateRate:{name:"rotateRate",semantic:"ROTATERATE",type:e.DataType.FLOAT},scaleFactor:{name:"scaleFactor",semantic:"SCALEFACTOR",type:e.DataType.FLOAT},uv:{name:"uv",semantic:"UV",type:e.DataType.FLOAT_VEC3},normalizedUv:{name:"normalizedUv",semantic:"NORMALIZED_UV",type:e.DataType.FLOAT_VEC2}},uniforms:{uOnce:{name:"uOnce",type:e.DataType.FLOAT},uActive:{name:"uActive",type:e.DataType.FLOAT},uTime:{name:"uTime",type:e.DataType.FLOAT},matModelViewProjection:{name:"matModelViewProjection",semantic:e.UniformSemantic.MODELVIEWPROJECTION,type:e.DataType.FLOAT_MAT4},matModelView:{name:"matModelView",semantic:e.UniformSemantic.MODELVIEW,type:e.DataType.FLOAT_MAT4}},states:{enable:[e.RenderState.BLEND],functions:{depthMask:[!1]}}};this.is2d?(t.uniforms.matViewInverse={name:"matViewInverse",semantic:e.UniformSemantic.VIEWINVERSE,type:e.DataType.FLOAT_MAT4},t.uniforms.matProjection={name:"matProjection",semantic:e.UniformSemantic.PROJECTION,type:e.DataType.FLOAT_MAT4},t.uniforms.matView={name:"matView",semantic:e.UniformSemantic.VIEW,type:e.DataType.FLOAT_MAT4},t.uniforms.matWorld={name:"matWorld",semantic:e.UniformSemantic.MODEL,type:e.DataType.FLOAT_MAT4}):t.states.disable=[e.RenderState.CULL_FACE],this.blendFuncSeparate?t.states.functions.blendFuncSeparate=this.blendFuncSeparate:t.states.functions.blendFunc=this.blendFunc,this.particleTex&&(t.uniforms.particleTex={name:"particleTex",type:e.DataType.SAMPLER_2D}),this.particleMaskTex&&(t.uniforms.particleMaskTex={name:"particleMaskTex",type:e.DataType.SAMPLER_2D});var n=new Kn("particleTech");return n.isValid=!0,n.uniforms=t.uniforms,n.attributes=t.attributes,n.states=t.states,n.vertexShader=this._createVertexShader(),n.fragmentShader=this._createFragmentShader(),n}},{key:"_createGeometry",value:function(){var t=new Lc("particleGeometry");t.mode=e.DrawMode.TRIANGLES;for(var n=e.DataType.FLOAT,r=new Uint16Array(6*this.maxCount),i=0,o=0;o<this.maxCount;++o){var a=4*o;r[i++]=a+0,r[i++]=a+1,r[i++]=a+2,r[i++]=a+0,r[i++]=a+2,r[i++]=a+3}return t.initialize([{semantic:"POSITIONSTART",size:3,type:n,normalized:!1},{semantic:"VELOCITY",size:3,type:n,normalized:!1},{semantic:"ACCELERATION",size:3,type:n,normalized:!1},{semantic:"COLOR",size:3,type:n,normalized:!1},{semantic:"ALPHA",size:1,type:n,normalized:!1},{semantic:"SIZE",size:1,type:n,normalized:!1},{semantic:"ROTATERATE",size:1,type:n,normalized:!1},{semantic:"STARTTIME",size:1,type:n,normalized:!1},{semantic:"LIFETIME",size:1,type:n,normalized:!1},{semantic:"STARTANGLE",size:1,type:n,normalized:!1},{semantic:"SCALEFACTOR",size:1,type:n,normalized:!1},{semantic:"UV",size:3,type:n,normalized:!1},{semantic:"NORMALIZED_UV",size:2,type:n,normalized:!1}],4*this.maxCount,r,e.BufferUsage.DYNAMIC_DRAW),t}},{key:"_spawnParticle",value:function(e,t){var n=void 0!==e.position?xt.clone(e.position):xt.fromValues(0,0,0),r=void 0!==e.positionRandomness?this._get3DData(e.positionRandomness):[0,0,0],i=e.positionArray,o=void 0!==e.velocity?xt.clone(e.velocity):xt.fromValues(0,0,0),a=void 0!==e.velocityRandomness?this._get3DData(e.velocityRandomness):[0,0,0],s=void 0!==e.color?this._getColor(e.color):xt.fromValues(1,1,1),l=void 0!==e.colorRandomness?e.colorRandomness:1,c=void 0!==e.alpha?e.alpha:1,u=void 0!==e.alphaRandomness?e.alphaRandomness:0,d=void 0!==e.lifetime?e.lifetime:5,f=void 0!==e.size?e.size:1,h=void 0!==e.sizeRandomness?e.sizeRandomness:0,p=void 0!==e.smoothPosition&&e.smoothPosition,m=void 0!==e.startTimeRandomness?e.startTimeRandomness:0,v=void 0!==e.acceleration?this._get3DData(e.acceleration):[0,0,0],g=void 0!==e.accelerationRandomness?this._get3DData(e.accelerationRandomness):[0,0,0],_=void 0!==e.startAngle?e.startAngle:0,y=void 0!==e.startAngleRandomness?e.startAngleRandomness:0,b=void 0!==e.rotateRate?e.rotateRate:0,x=void 0!==e.rotateRateRandomness?e.rotateRateRandomness:0,w=void 0!==e.scaleFactor?e.scaleFactor:1,T=n[0],A=n[1],E=n[2];if(i){if(i.length!==this.maxCount)throw Error("The length of positionArray must be equal to maxCount.");T+=i[t][0],A+=i[t][1],E+=i[t][2]}else T+=this._getRandom()*r[0],A+=this._getRandom()*r[1],E+=this._getRandom()*r[2];!0===p&&(T+=-o[0]*this._getRandom(),A+=-o[1]*this._getRandom(),E+=-o[2]*this._getRandom());var O=o[0]+this._getRandom()*a[0],M=o[1]+this._getRandom()*a[1],S=o[2]+this._getRandom()*a[2],C=v[0]+this._getRandom()*g[0],R=v[1]+this._getRandom()*g[1],k=v[2]+this._getRandom()*g[2];s[0]=this._clamp(s[0]+this._getRandom()*l,0,1),s[1]=this._clamp(s[1]+this._getRandom()*l,0,1),s[2]=this._clamp(s[2]+this._getRandom()*l,0,1),f=Math.max(f+this._getRandom()*h*f*2,0);for(var P=[d+this._getRandom()*d],L=[_+this._getRandom()*Math.PI*y*2],I=[b+this._getRandom()*x],F=this._clamp(c+this._getRandom()*u,0,1),D=[Math.random()*m],N=0;N<4;N++){var z=4*t+N;this.geometry.setValue("POSITIONSTART",z,[T,A,E]),this.geometry.setValue("STARTTIME",z,D),this.geometry.setValue("VELOCITY",z,[O,M,S]),this.geometry.setValue("ACCELERATION",z,[C,R,k]),this.geometry.setValue("COLOR",z,[s[0],s[1],s[2]]),this.geometry.setValue("SIZE",z,[f]),this.geometry.setValue("LIFETIME",z,P),this.geometry.setValue("STARTANGLE",z,L),this.geometry.setValue("ROTATERATE",z,I),this.geometry.setValue("SCALEFACTOR",z,[w]),this.geometry.setValue("ALPHA",z,[F]),this._setUvs(t,N,z)}}},{key:"_setUvs",value:function(e,t,n){var r,i=this.spriteSheet,o=this.particleTex;if(o){var a=o.image?o.image.width:o.width,s=o.image?o.image.height:o.height;if(i){var l=i[e%i.length],c=l.x,u=l.y,d=l.w,f=l.h,h=c/a,p=u/s,m=h+d/a,v=p+f/s;r=[[h,v,f/d],[m,v,f/d],[m,p,f/d],[h,p,f/d]]}else r=[[0,0,s/a],[1,0,s/a],[1,1,s/a],[0,1,s/a]]}else r=[[0,0,1],[1,0,1],[1,1,1],[0,1,1]];this.geometry.setValue("UV",n,r[t]),this.geometry.setValue("NORMALIZED_UV",n,[[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]][t])}},{key:"_getRandom",value:function(){return Math.random()-.5}},{key:"_getShader",value:function(){return{vertexShader:"\n        precision highp float;\n        precision highp int;\n\n        attribute float lifeTime;\n        attribute float startTime;\n        attribute float size;\n        attribute float rotateRate;\n        attribute vec3 velocity;\n        attribute vec3 acceleration;\n        attribute vec3 positionStart;\n        attribute vec3 color;\n        attribute float alpha;\n        attribute float startAngle;\n        attribute float scaleFactor;\n        attribute vec3 uv;\n        attribute vec2 normalizedUv;\n        \n        uniform float uTime;\n        uniform float uOnce;\n        uniform float uActive;\n        uniform mat4 matModelViewProjection;\n        uniform mat4 matModelView;\n        uniform mat4 matViewInverse;\n        uniform mat4 matView;\n        uniform mat4 matProjection;\n        uniform mat4 matWorld;\n\n        varying vec3 v_color;\n        varying float v_alpha;\n        varying float lifeLeft;\n        varying mat2 vTextureMat;\n        varying vec2 v_uv;\n\n        mat2 rotation2d(float angle) {\n          float s = sin(angle);\n          float c = cos(angle);\n        \n          return mat2(\n            c, -s,\n            s, c\n          );\n        }\n\n        void main()\n        {\n          v_color = color;\n          v_uv = uv.xy;\n          v_alpha = alpha;\n          \n          // float deltaTime = max(mod(uTime, lifeTime), 0.0);\n          // \n          float life = lifeTime + startTime;\n          // \n          float deltaTime = max(mod(uTime, life) - startTime, 0.0);\n\n          bool isDying = false;\n\n          if (uOnce == 1.0 || uActive == 0.0) {\n            isDying = true;\n          }\n\n          if ((isDying && uTime > life)) {\n            deltaTime = life;\n          }\n\n          // \n          if (deltaTime == 0.0) {\n            deltaTime = life;\n          }\n\n          lifeLeft = 1.0 - deltaTime / lifeTime;\n          float scale = size;\n          vec3 position = positionStart + (velocity + acceleration * deltaTime * 0.5) * deltaTime;\n      ",postionShader:"\n        gl_Position = matModelViewProjection * vec4(position, 1.0 );\n      ",sizeVertexShader:"\n          scale *= pow(scaleFactor, deltaTime);\n      ",isScaleByLifetimeVertexShader:"\n          scale *= lifeLeft;\n      ",rotateToVelocityVertexShader:"\n        vec3 v = velocity + acceleration * deltaTime;\n        float angle = atan(v.z, v.x) * 2.0;\n        float s = sin(angle);\n        float c = cos(angle);\n      ",rotationVertexShader:"\n        float deltaAngle = deltaTime * rotateRate;\n        float angle = startAngle + deltaAngle;\n        float s = sin(angle);\n        float c = cos(angle);\n\n      ",rotation2dShader:"\n        vec2 rotatedPoint = rotation2d(angle) * vec2(normalizedUv.x, normalizedUv.y * uv.z);\n\n        vec3 basisX = matViewInverse[0].xyz;\n        vec3 basisZ = matViewInverse[1].xyz;\n\n        vec3 localPosition = vec3(basisX * rotatedPoint.x + \n                    basisZ * rotatedPoint.y) * scale + position;\n\n        gl_Position = matProjection * matView * vec4(localPosition + matWorld[3].xyz, 1.);\n      ",rotation3dShader:"\n        vec4 rotatedPoint = vec4((normalizedUv.x * c + normalizedUv.y * uv.z * s) * scale , 0., \n                                 (normalizedUv.x * s - normalizedUv.y * uv.z * c) * scale, 1.);\n      \n        vec4 orientation = vec4(0, 0, 0, 1);\n        vec4 q2 = orientation + orientation;\n        vec4 qx = orientation.xxxw * q2.xyzx;\n        vec4 qy = orientation.xyyw * q2.xyzy;\n        vec4 qz = orientation.xxzw * q2.xxzz;\n      \n        mat4 localMatrix = mat4(\n            (1.0 - qy.y) - qz.z, \n            qx.y + qz.w, \n            qx.z - qy.w,\n            0,\n      \n            qx.y - qz.w, \n            (1.0 - qx.x) - qz.z, \n            qy.z + qx.w,\n            0,\n      \n            qx.z + qy.w, \n            qy.z - qx.w, \n            (1.0 - qx.x) - qy.y,\n            0,\n      \n            position.x, position.y, position.z, 1);\n\n        rotatedPoint = localMatrix * rotatedPoint;\n\n        gl_Position = matModelViewProjection * rotatedPoint;\n      ",fragmentShader:"\n        precision mediump float;\n        precision mediump int;\n\n        varying vec3 v_color;\n        varying float v_alpha;\n        varying float lifeLeft;\n        varying vec2 v_uv;\n        uniform sampler2D particleTex;\n        uniform sampler2D particleMaskTex;\n\n        void main()\n        {\n          float alphaFactor = 1.0;\n      ",fadeInFragmentShader:"\n        float fadeInFactor = step(0.5, lifeLeft);\n        alphaFactor = 2.0 * fadeInFactor * (1.0 - lifeLeft) + (1.0 - fadeInFactor);\n      ",fadeOutFragmentShader:"\n        float fadeOutFactor = step(0.5, lifeLeft);\n        alphaFactor = alphaFactor * 2.0 * (1.0 - fadeOutFactor) * lifeLeft + alphaFactor * fadeOutFactor;\n      ",noImgFragmentShader:" \n        gl_FragColor = vec4( v_color, alphaFactor * v_alpha);\n      ",imgFragmentShader:"\n        vec4 tex = texture2D(particleTex, v_uv);\n      ",originColorFragmentShader:"\n        gl_FragColor = vec4(tex.rgb, alphaFactor * tex.a * v_alpha);\n      ",createColorFragmentShader:"\n        gl_FragColor = vec4(v_color * tex.rgb, alphaFactor * tex.a * v_alpha);\n      ",createColorWithMaskFragmentShader:"\n        vec4 maskTex = texture2D( particleMaskTex, v_uv);\n        gl_FragColor = vec4(v_color * tex.rgb + maskTex.a, alphaFactor * tex.a * v_alpha);\n      "}}},{key:"_createVertexShader",value:function(){var e=this._getShader(),t="";return this.vertexShader?t=this.vertexShader:(t=e.vertexShader,this.isScaleByLifetime?t+=e.isScaleByLifetimeVertexShader:t+=e.sizeVertexShader,this.rotateToVelocity?t+=e.rotateToVelocityVertexShader:t+=e.rotationVertexShader,this.is2d?t+=e.rotation2dShader:t+=e.rotation3dShader,t+="}"),t}},{key:"_createFragmentShader",value:function(){var e=this._getShader(),t="";return this.fragmentShader?t=this.fragmentShader:(t=e.fragmentShader,this.fadeIn&&(t+=e.fadeInFragmentShader),this.fadeOut&&(t+=e.fadeOutFragmentShader),this.particleTex?(t+=e.imgFragmentShader,this.useOriginColor?t+=e.originColorFragmentShader:this.particleMaskTex?t+=e.createColorWithMaskFragmentShader:t+=e.createColorFragmentShader):t+=e.noImgFragmentShader,t+="}"),t}},{key:"_clamp",value:function(e,t,n){return e>n?n:e<t?t:e}},{key:"_getRGBFromHex",value:function(e){var t=((e=Math.floor(e))>>16&255)/255,n=(e>>8&255)/255,r=(255&e)/255;return xt.fromValues(t,n,r)}},{key:"_getColor",value:function(e){return"number"==typeof e?this._getRGBFromHex(e):Array.isArray(e)?xt.fromValues(e[0],e[1],e[2]):xt.clone(e)}},{key:"_get3DData",value:function(e){var t=[];return Array.isArray(e)?t=e:(t.push(e),t.push(e),t.push(e)),t}}]),r}(Ic),pf=function(t){lf(r,t);var n=df(r);function r(t,i){var o;if(tf(this,r),(o=n.call(this,t))._config=void 0,o._options=void 0,o._options={position:i.__position,positionRandomness:i.__positionRandomness,velocity:i.__velocity,velocityRandomness:i.__velocityRandomness,acceleration:i.__acceleration,accelerationRandomness:i.__accelerationRandomness,color:i.__color,colorRandomness:i.__colorRandomness,lifetime:i.__lifetime,size:i.__size,sizeRandomness:i.__sizeRandomness,startAngle:i.__startAngle,startAngleRandomness:i.__startAngleRandomness,rotateRate:i.__rotateRate,rotateRateRandomness:i.__rotateRateRandomness,scaleFactor:i.__scaleFactor,alpha:i.__alpha,alphaRandomness:i.__alphaRandomness,startTimeRandomness:i.__startTimeRandomness},o._config={maxCount:i.__maxCount,once:i.__once,rotateToVelocity:i.__rotateToVelocity,isScaleByLifetime:i.__isScaleByLifetime,fadeIn:i.__fadeIn,fadeOut:i.__fadeOut,texture:i.__texture?i.__texture:null,maskTexture:i.__maskTexture?i.__maskTexture:null,useOriginColor:i.__useOriginColor,is2d:i.__is2d,options:o._options},i.__spriteSheet)if("object"===ef(i.__spriteSheet)&&i.__spriteSheet.length)o._config.spriteSheet=i.__spriteSheet;else if("string"==typeof i.__spriteSheet)try{var a=JSON.parse(i.__spriteSheet);a.length&&(o._config.spriteSheet=a)}catch(e){}if(i.__positionArray)if("object"===ef(i.__positionArray)&&i.__positionArray.length)o._options.positionArray=i.__positionArray;else if("string"==typeof i.__positionArray)try{var s=JSON.parse(i.__positionArray);s.length&&(o._options.positionArray=s)}catch(e){}return i.__separate?o._config.blendFuncSeparate=[e.BlendFunc[i.__srcRGB||"SRC_ALPHA"],e.BlendFunc[i.__dstRGB||"ONE_MINUS_SRC_ALPHA"],e.BlendFunc[i.__srcAlpha||"SRC_ALPHA"],e.BlendFunc[i.__dstAlpha||"ONE_MINUS_SRC_ALPHA"]]:i.__src&&i.__dst&&(o._config.blendFunc=[e.BlendFunc[i.__src],e.BlendFunc[i.__dst]]),o.initialize(o._config),!0!==i.__defaultStart&&void 0!==i.__defaultStart||o.start(),o}return rf(r,[{key:"updateOption",value:function(e,t){this._options=sf(sf({},this._options),{},of({},e,t)),this._config=sf(sf({},this._config),{},{options:sf({},this._options)}),this.initialize(this._config),this.start()}},{key:"updateConfig",value:function(e,t){this._config=sf(sf({},this._config),{},of({},e,t)),this.initialize(this._config),this.start()}},{key:"__position",set:function(e){this.updateOption("position",e)}},{key:"__positionRandomness",set:function(e){this.updateOption("positionRandomness",e)}},{key:"__velocity",set:function(e){this.updateOption("velocity",e)}},{key:"__velocityRandomness",set:function(e){this.updateOption("velocityRandomness",e)}},{key:"__acceleration",set:function(e){this.updateOption("acceleration",e)}},{key:"__accelerationRandomness",set:function(e){this.updateOption("accelerationRandomness",e)}},{key:"__color",set:function(e){this.updateOption("color",e)}},{key:"__colorRandomness",set:function(e){this.updateOption("colorRandomness",e)}},{key:"__lifetime",set:function(e){this.updateOption("lifetime",e)}},{key:"__size",set:function(e){this.updateOption("size",e)}},{key:"__sizeRandomness",set:function(e){this.updateOption("sizeRandomness",e)}},{key:"__startAngle",set:function(e){this.updateOption("startAngle",e)}},{key:"__startAngleRandomness",set:function(e){this.updateOption("startAngleRandomness",e)}},{key:"__rotateRate",set:function(e){this.updateOption("rotateRate",e)}},{key:"__rotateRateRandomness",set:function(e){this.updateOption("rotateRateRandomness",e)}},{key:"__scaleFactor",set:function(e){this.updateOption("scaleFactor",e)}},{key:"__alpha",set:function(e){this.updateOption("alpha",e)}},{key:"__alphaRandomness",set:function(e){this.updateOption("alphaRandomness",e)}},{key:"__startTimeRandomness",set:function(e){this.updateOption("startTimeRandomness",e)}},{key:"__positionArray",set:function(e){if("object"===ef(e)&&e.length)this.updateOption("positionArray",e);else if("string"==typeof e)try{var t=JSON.parse(e);t.length?this.updateOption("positionArray",t):this.updateOption("positionArray",null)}catch(e){this.updateOption("positionArray",null)}else this.updateOption("positionArray",null)}},{key:"__maxCount",set:function(e){this.updateConfig("maxCount",e)}},{key:"__useOriginColor",set:function(e){this.updateConfig("useOriginColor",e)}},{key:"__once",set:function(e){this.updateConfig("once",e)}},{key:"__rotateToVelocity",set:function(e){this.updateConfig("rotateToVelocity",e)}},{key:"__isScaleByLifetime",set:function(e){this.updateConfig("isScaleByLifetime",e)}},{key:"__fadeIn",set:function(e){this.updateConfig("fadeIn",e)}},{key:"__fadeOut",set:function(e){this.updateConfig("fadeOut",e)}},{key:"__texture",set:function(e){this.updateConfig("texture",e)}},{key:"__maskTexture",set:function(e){this.updateConfig("maskTexture",e)}},{key:"__spriteSheet",set:function(e){if("object"===ef(e)&&e.length)this.updateConfig("spriteSheet",e);else if("string"==typeof e)try{var t=JSON.parse(e);t.length?this.updateConfig("spriteSheet",t):this.updateConfig("spriteSheet",null)}catch(e){this.updateConfig("spriteSheet",null)}else this.updateConfig("spriteSheet",null)}},{key:"__is2d",set:function(e){this.updateConfig("is2d",e)}}]),r}(hf);function mf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _f(){return(_f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(n),!0).forEach((function(t){gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xf(e){return(xf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wf(e,t){return(wf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tf(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Af(e,t,n){return(Af="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var Ef=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wf(e,t)}(o,t);var n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xf(e);if(t){var i=xf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tf(this,n)}}(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.MATERIAL_NAME,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mf(this,o),(e=i.call(this,t))._uniformObj=void 0,e._stateObj=void 0,e._ambientLightCount=void 0,e._envMapLightCount=void 0,e._spotLightCount=void 0,e._directLightCount=void 0,e._pointLightCount=void 0,e._useDiffuseEnv=void 0,e._useSpecularEnv=void 0,e._clipPlaneCount=void 0,e._useOIT=void 0,e.createDefaulteValues(),e.setUniforms(n),e.setStates(n),e}return n=o,(r=[{key:"createDefaulteValues",value:function(){var t=this;this._uniformObj={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1,metallicRoughness:[1,1],normalScale:1,emissiveFactor:[0,0,0],occlusionStrength:1,alphaCutoff:.5,clearCoat:0,clearCoatRoughness:1,specularFactor:[1,1,1],glossinessFactor:0,envMapIntensity:1,refractionRatio:1/1.33,refractionDepth:1,perturbationUOffset:0,perturbationVOffset:0},this._stateObj={alphaMode:"OPAQUE",doubleSided:!1,side:e.Side.FRONT,unlit:!1,srgb:!1,srgbFast:!1,gamma:!1,blendFunc:[],blendFuncSeparate:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA,e.BlendFunc.ONE,e.BlendFunc.ONE],depthMask:[!1],getOpacityFromRGB:!1,isMetallicWorkflow:!0,envMapModeRefract:!1},Object.keys(this._uniformObj).forEach((function(e){return t.setValueByParamName(e,t._uniformObj[e])}))}},{key:"setUniforms",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"baseColorFactor":t.baseColorFactor=e[n];break;case"opacity":t.opacity=e[n];break;case"opacityTexture":t.opacityTexture=e[n];break;case"baseColorTexture":t.baseColorTexture=e[n];break;case"metallicFactor":t.metallicFactor=e[n];break;case"roughnessFactor":t.roughnessFactor=e[n];break;case"metallicTexture":t.metallicTexture=e[n];break;case"roughnessTexture":t.roughnessTexture=e[n];break;case"metallicRoughnessTexture":t.metallicRoughnessTexture=e[n];break;case"normalTexture":t.normalTexture=e[n];break;case"normalScale":t.normalScale=e[n];break;case"emissiveTexture":t.emissiveTexture=e[n];break;case"emissiveFactor":t.emissiveFactor=e[n];break;case"occlusionTexture":t.occlusionTexture=e[n];break;case"occlusionStrength":t.occlusionStrength=e[n];break;case"alphaCutoff":t.alphaCutoff=e[n];break;case"clearCoat":t.clearCoat=e[n];break;case"clearCoatRoughness":t.clearCoatRoughness=e[n];break;case"specularFactor":t.specularFactor=e[n];break;case"glossinessFactor":t.glossinessFactor=e[n];break;case"specularGlossinessTexture":t.specularGlossinessTexture=e[n];break;case"reflectionTexture":t.reflectionTexture=e[n];break;case"envMapIntensity":t.envMapIntensity=e[n];break;case"refractionRatio":t.refractionRatio=e[n];break;case"refractionDepth":t.refractionDepth=e[n];break;case"refractionTexture":t.refractionTexture=e[n];break;case"perturbationTexture":t.perturbationTexture=e[n];break;case"perturbationUOffset":t.perturbationUOffset=e[n];break;case"perturbationVOffset":t.perturbationVOffset=e[n]}}))}},{key:"setStates",value:function(e){var t=this;Object.keys(e).forEach((function(n){switch(n){case"doubleSided":t.doubleSided=e[n];break;case"side":t.side=e[n];break;case"alphaMode":t.alphaMode=e[n];break;case"unlit":t.unlit=e[n];break;case"srgb":t.srgb=e[n];break;case"srgbFast":t.srgbFast=e[n];break;case"gamma":t.gamma=e[n];break;case"blendFunc":t.blendFunc=e[n];break;case"blendFuncSeparate":t.blendFuncSeparate=e[n];break;case"depthMask":t.depthMask=e[n];break;case"getOpacityFromRGB":t.getOpacityFromRGB=e[n];break;case"isMetallicWorkflow":t.isMetallicWorkflow=e[n];break;case"envMapModeRefract":t.envMapModeRefract=e[n]}}))}},{key:"setValueByParamName",value:function(e,t){var n=o.TECH_CONFIG.uniforms,r=Object.keys(n).find((function(t){return n[t].paramName===e}));r&&this.setValue(r,t)}},{key:"updateTechnique",value:function(t,n){var r;if(this[t]!==n){this._stateObj[t]=n;var i=null===(r=this.technique)||void 0===r?void 0:r.states;if(i)switch(t){case"doubleSided":case"side":if(this.doubleSided)i.disable.push(e.RenderState.CULL_FACE);else{var o=i.disable.indexOf(e.RenderState.CULL_FACE);switch(o>-1&&i.disable.splice(o,1),this.side){case e.Side.FRONT:i.functions.cullFace=[e.CullFace.BACK];break;case e.Side.BACK:i.functions.cullFace=[e.CullFace.FRONT];break;case e.Side.NONE:i.functions.cullFace=[e.CullFace.FRONT_AND_BACK];break;default:delete i.functions.cullFace}}break;case"blendFunc":case"blendFuncSeparate":this.blendFunc.length?i.functions.blendFunc=this.blendFunc:i.functions.blendFuncSeparate=this.blendFuncSeparate;break;case"depthMask":i.functions.depthMask=n;break;default:this._technique=null}}}},{key:"prepareDrawing",value:function(e,t,n){var r,i=e.scene,a=i.findFeature(eu),s=e.sceneRenderer.canOIT;a.bindMaterialValues(this),this.setValue("u_resolution",[e._rhi.canvas.width,e._rhi.canvas.height]);for(var l=0;l<this._clipPlaneCount;l++)this.setValue("u_clipPlanes[".concat(l,"]"),i.clipPlanes[l]);s&&this.setValue("u_depthSampler",e.sceneRenderer.depthTexture);var c,u=a.lightSortAmount,d=u.ambientLightCount,f=u.directLightCount,h=u.pointLightCount,p=u.spotLightCount,m=u.envMapLightCount,v=u.useDiffuseEnv,g=u.useSpecularEnv;this._technique&&this._ambientLightCount===d&&this._envMapLightCount===m&&this._useDiffuseEnv===v&&this._useSpecularEnv===g&&this._directLightCount===f&&this._pointLightCount===h&&this._spotLightCount===p&&this._clipPlaneCount===(null===(r=i.clipPlanes)||void 0===r?void 0:r.length)&&this._useOIT===s||(this._ambientLightCount=d,this._envMapLightCount=m,this._useDiffuseEnv=v,this._useSpecularEnv=g,this._directLightCount=f,this._pointLightCount=h,this._spotLightCount=p,this._clipPlaneCount=null===(c=i.clipPlanes)||void 0===c?void 0:c.length,this._useOIT=s,this._generateTechnique(e,t,n)),Af(xf(o.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"_generateTechnique",value:function(e,t,n){var r=this._generateShaderMacros(e,t,n),i=o.TECHNIQUE_NAME,a=o.STATIC_VERTEX_SHADER,s=o.STATIC_FRAGMENT_SHADER,l=this._generateConfig(),c=e.scene.findFeature(eu),u=new Kn(i);return u.isValid=!0,u.uniforms=bf(bf({},c.getUniformDefine()),l.uniforms),u.attributes=l.attributes,u.fragmentPrecision="highp",u.customMacros=r,u.states=l.states,u.vertexShader=a,u.fragmentShader=s,this._technique=u,u}},{key:"_generateShaderMacros",value:function(t,n,r){var i=t._rhi,o=["O3_NEED_WORLDPOS"];r.vertexAttributes.NORMAL&&r.vertexAttributes.TANGENT||i.canIUse(e.GLCapabilityType.standardDerivatives)&&o.push("HAS_DERIVATIVES");var a=Object.keys(this._values);return a.indexOf("u_baseColorSampler")>-1&&o.push("HAS_BASECOLORMAP"),a.indexOf("u_normalSampler")>-1&&o.push("O3_HAS_NORMALMAP"),a.indexOf("u_metallicSampler")>-1&&o.push("HAS_METALMAP"),a.indexOf("u_roughnessSampler")>-1&&o.push("HAS_ROUGHNESSMAP"),a.indexOf("u_metallicRoughnessSampler")>-1&&o.push("HAS_METALROUGHNESSMAP"),a.indexOf("u_emissiveSampler")>-1&&o.push("HAS_EMISSIVEMAP"),a.indexOf("u_occlusionSampler")>-1&&o.push("HAS_OCCLUSIONMAP"),a.indexOf("u_specularGlossinessSampler")>-1&&o.push("HAS_SPECULARGLOSSINESSMAP"),a.indexOf("u_perturbationSampler")>-1&&o.push("HAS_PERTURBATIONMAP"),a.indexOf("u_reflectionSampler")>-1&&o.push("HAS_REFLECTIONMAP"),a.indexOf("u_refractionSampler")>-1&&(this.setValueByParamName("PTMMatrix",[.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1]),o.push("HAS_REFRACTIONMAP")),"MASK"===this.alphaMode?o.push("ALPHA_MASK"):"BLEND"!==this.alphaMode||this.refractionTexture||(o.push("ALPHA_BLEND"),a.indexOf("u_opacitySampler")>-1&&(o.push("HAS_OPACITYMAP"),this.getOpacityFromRGB&&o.push("GETOPACITYFROMRGB"))),this._envMapLightCount&&(o.push("O3_HAS_ENVMAP_LIGHT"),this._useDiffuseEnv&&o.push("O3_USE_DIFFUSE_ENV"),this._useSpecularEnv&&o.push("O3_USE_SPECULAR_ENV"),i.canIUse(e.GLCapabilityType.shaderTextureLod)&&o.push("HAS_TEX_LOD")),this._ambientLightCount&&o.push("O3_HAS_AMBIENT_LIGHT"),this._directLightCount&&o.push("O3_DIRECT_LIGHT_COUNT ".concat(this._directLightCount)),this._pointLightCount&&o.push("O3_POINT_LIGHT_COUNT ".concat(this._pointLightCount)),this._spotLightCount&&o.push("O3_SPOT_LIGHT_COUNT ".concat(this._spotLightCount)),this._clipPlaneCount&&o.push("O3_CLIPPLANE_NUM ".concat(this._clipPlaneCount)),this._stateObj.unlit&&o.push("UNLIT"),this._stateObj.srgb&&o.push("MANUAL_SRGB"),this._stateObj.srgbFast&&o.push("SRGB_FAST_APPROXIMATION"),this._stateObj.gamma&&o.push("GAMMA"),this._stateObj.isMetallicWorkflow&&o.push("IS_METALLIC_WORKFLOW"),this._stateObj.envMapModeRefract&&o.push("ENVMAPMODE_REFRACT"),t.sceneRenderer.canOIT&&o.push("OIT_ENABLE"),o}},{key:"_generateConfig",value:function(){var t=o.TECH_CONFIG.states,n={disable:t.disable.slice(),enable:t.enable.slice(),functions:_f({},t.functions)};if(this.doubleSided)n.disable.push(e.RenderState.CULL_FACE);else switch(this.side){case e.Side.FRONT:n.functions.cullFace=[e.CullFace.BACK];break;case e.Side.BACK:n.functions.cullFace=[e.CullFace.FRONT];break;case e.Side.NONE:n.functions.cullFace=[e.CullFace.FRONT_AND_BACK];break;default:delete n.functions.cullFace}"BLEND"!==this.alphaMode||this.refractionTexture?this.renderType=e.MaterialType.OPAQUE:(n.enable.push(e.RenderState.BLEND),this.blendFunc.length?n.functions.blendFunc=this._stateObj.blendFunc:n.functions.blendFuncSeparate=this._stateObj.blendFuncSeparate,n.functions.depthMask=this._stateObj.depthMask,this.renderType=e.MaterialType.TRANSPARENT);for(var r={},i=0;i<this._clipPlaneCount;i++)r["u_clipPlanes[".concat(i,"]")]={name:"u_clipPlanes[".concat(i,"]"),type:e.DataType.FLOAT_VEC4};return o.TECH_CONFIG.uniforms=_f({},o.TECH_CONFIG.uniforms,r),_f({},o.TECH_CONFIG,{states:n})}},{key:"clone",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new o(e||this.name);for(var r in n.renderType=this.renderType,n.useFog=this.useFog,this._uniformObj){var i=this._uniformObj[r];if(i instanceof Xn)if(t){var a=i.name,s=i.image,l=i.type,c=i.config,u=new Xn(a,s,c);u.type=l,n[r]=u}else n[r]=i;else n[r]=O.clone(i)}return this._stateObj&&(n._stateObj=O.clone(this._stateObj)),n}},{key:"baseColorFactor",get:function(){return this._uniformObj.baseColorFactor},set:function(e){this._uniformObj.baseColorFactor=e,this.setValueByParamName("baseColorFactor",e)}},{key:"opacity",get:function(){return this.baseColorFactor[3]},set:function(e){this.baseColorFactor[3]=e}},{key:"baseColorTexture",get:function(){return this._uniformObj.baseColorTexture},set:function(e){this.setValueByParamName("baseColorTexture",e),this._uniformObj.baseColorTexture=e}},{key:"opacityTexture",get:function(){return this._uniformObj.opacityTexture},set:function(e){this.setValueByParamName("opacityTexture",e),this._uniformObj.opacityTexture=e}},{key:"metallicFactor",get:function(){return this._uniformObj.metallicFactor},set:function(e){this._uniformObj.metallicFactor=e,this._uniformObj.metallicRoughness[0]=e,this.setValueByParamName("metallicRoughness",this._uniformObj.metallicRoughness)}},{key:"roughnessFactor",get:function(){return this._uniformObj.roughnessFactor},set:function(e){this._uniformObj.roughnessFactor=e,this._uniformObj.metallicRoughness[1]=e,this.setValueByParamName("metallicRoughness",this._uniformObj.metallicRoughness)}},{key:"metallicTexture",get:function(){return this._uniformObj.metallicTexture},set:function(e){this.setValueByParamName("metallicTexture",e),this._uniformObj.metallicTexture=e}},{key:"roughnessTexture",get:function(){return this._uniformObj.roughnessTexture},set:function(e){this.setValueByParamName("roughnessTexture",e),this._uniformObj.roughnessTexture=e}},{key:"metallicRoughnessTexture",get:function(){return this._uniformObj.metallicRoughnessTexture},set:function(e){this.setValueByParamName("metallicRoughnessTexture",e),this._uniformObj.metallicRoughnessTexture=e}},{key:"normalTexture",get:function(){return this._uniformObj.normalTexture},set:function(e){this.setValueByParamName("normalTexture",e),this._uniformObj.normalTexture=e}},{key:"normalScale",get:function(){return this._uniformObj.normalScale},set:function(e){this._uniformObj.normalScale=e,this.setValueByParamName("normalScale",e)}},{key:"emissiveTexture",get:function(){return this._uniformObj.emissiveTexture},set:function(e){this.setValueByParamName("emissiveTexture",e),this._uniformObj.emissiveTexture=e}},{key:"emissiveFactor",get:function(){return this._uniformObj.emissiveFactor},set:function(e){this._uniformObj.emissiveFactor=e,this.setValueByParamName("emissiveFactor",e)}},{key:"occlusionTexture",get:function(){return this._uniformObj.occlusionTexture},set:function(e){this.setValueByParamName("occlusionTexture",e),this._uniformObj.occlusionTexture=e}},{key:"occlusionStrength",get:function(){return this._uniformObj.occlusionStrength},set:function(e){this._uniformObj.occlusionStrength=e,this.setValueByParamName("occlusionStrength",e)}},{key:"alphaCutoff",get:function(){return this._uniformObj.alphaCutoff},set:function(e){this._uniformObj.alphaCutoff=e,this.setValueByParamName("alphaCutoff",e)}},{key:"clearCoat",get:function(){return this._uniformObj.clearCoat},set:function(e){this._uniformObj.clearCoat=e,this.setValueByParamName("clearCoat",e)}},{key:"clearCoatRoughness",get:function(){return this._uniformObj.clearCoatRoughness},set:function(e){this._uniformObj.clearCoatRoughness=e,this.setValueByParamName("clearCoatRoughness",e)}},{key:"specularFactor",get:function(){return this._uniformObj.specularFactor},set:function(e){this.setValueByParamName("specularFactor",e),this._uniformObj.specularFactor=e}},{key:"glossinessFactor",get:function(){return this._uniformObj.glossinessFactor},set:function(e){this.setValueByParamName("glossinessFactor",e),this._uniformObj.glossinessFactor=e}},{key:"specularGlossinessTexture",get:function(){return this._uniformObj.specularGlossinessTexture},set:function(e){this.setValueByParamName("specularGlossinessTexture",e),this._uniformObj.specularGlossinessTexture=e}},{key:"reflectionTexture",get:function(){return this._uniformObj.reflectionTexture},set:function(e){this.setValueByParamName("reflectionTexture",e),this._uniformObj.reflectionTexture=e}},{key:"envMapIntensity",get:function(){return this._uniformObj.envMapIntensity},set:function(e){this.setValueByParamName("envMapIntensity",e),this._uniformObj.envMapIntensity=e}},{key:"refractionRatio",get:function(){return this._uniformObj.refractionRatio},set:function(e){this.setValueByParamName("refractionRatio",e),this._uniformObj.refractionRatio=e}},{key:"refractionDepth",get:function(){return this._uniformObj.refractionDepth},set:function(e){this.setValueByParamName("refractionDepth",e),this._uniformObj.refractionDepth=e}},{key:"refractionTexture",get:function(){return this._uniformObj.refractionTexture},set:function(e){this.setValueByParamName("refractionTexture",e),this._uniformObj.refractionTexture=e}},{key:"perturbationTexture",get:function(){return this._uniformObj.perturbationTexture},set:function(e){this.setValueByParamName("perturbationTexture",e),this._uniformObj.perturbationTexture=e}},{key:"perturbationUOffset",get:function(){return this._uniformObj.perturbationUOffset},set:function(e){this.setValueByParamName("perturbationUOffset",e),this._uniformObj.perturbationUOffset=e}},{key:"perturbationVOffset",get:function(){return this._uniformObj.perturbationVOffset},set:function(e){this.setValueByParamName("perturbationVOffset",e),this._uniformObj.perturbationVOffset=e}},{key:"alphaMode",get:function(){return this._stateObj.alphaMode},set:function(e){this.updateTechnique("alphaMode",e)}},{key:"doubleSided",get:function(){return this._stateObj.doubleSided},set:function(t){t?this._stateObj.side=e.Side.DOUBLE:this._stateObj.side===e.Side.DOUBLE&&(this._stateObj.side=e.Side.FRONT),this.updateTechnique("doubleSided",t)}},{key:"side",get:function(){return this._stateObj.side},set:function(t){t===e.Side.DOUBLE?this._stateObj.doubleSided=!0:this._stateObj.doubleSided=!1,this.updateTechnique("side",t)}},{key:"unlit",get:function(){return this._stateObj.unlit},set:function(e){this.updateTechnique("unlit",e)}},{key:"srgb",get:function(){return this._stateObj.srgb},set:function(e){this.updateTechnique("srgb",e)}},{key:"srgbFast",get:function(){return this._stateObj.srgbFast},set:function(e){this.updateTechnique("srgbFast",e)}},{key:"gamma",get:function(){return this._stateObj.gamma},set:function(e){this.updateTechnique("gamma",e)}},{key:"blendFunc",get:function(){return this._stateObj.blendFunc},set:function(e){this.updateTechnique("blendFunc",e)}},{key:"blendFuncSeparate",get:function(){return this._stateObj.blendFuncSeparate},set:function(e){this.updateTechnique("blendFuncSeparate",e)}},{key:"depthMask",get:function(){return this._stateObj.depthMask},set:function(e){this.updateTechnique("depthMask",e)}},{key:"getOpacityFromRGB",get:function(){return this._stateObj.getOpacityFromRGB},set:function(e){this.updateTechnique("getOpacityFromRGB",e)}},{key:"isMetallicWorkflow",get:function(){return this._stateObj.isMetallicWorkflow},set:function(e){this.updateTechnique("isMetallicWorkflow",e)}},{key:"envMapModeRefract",get:function(){return this._stateObj.envMapModeRefract},set:function(e){this.updateTechnique("envMapModeRefract",e)}}])&&vf(n.prototype,r),o}(Yn);function Of(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sf(e,t,n){return t&&Mf(e.prototype,t),n&&Mf(e,n),e}function Cf(e){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rf(e,t){return(Rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kf(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Pf(e,t,n){return(Pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}Ef.MATERIAL_NAME="PBR_MATERIAL",Ef.TECHNIQUE_NAME="PBR_TECHNIQUE",Ef.STATIC_VERTEX_SHADER="#include <common>\n#include <common_vert>\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <uv_transform_vert_define>\n#include <color_share>\n#include <normal_share>\n#include <worldpos_share>\n#include <clipPlane_vert_define>\n#include <morph_target_vert>\n\n#include <fog_share>\n\nvoid main() {\n\n    #include <begin_position_vert>\n    #include <begin_normal_vert>\n\n    #include <morph_vert>\n    #include <skinning_vert>\n    #include <uv_vert>\n    #include <uv_transform_vert>\n    #include <color_vert>\n    #include <normal_vert>\n    #include <worldpos_vert>\n    #include <clipPlane_vert>\n    #include <position_vert>\n\n    #include <fog_vert>\n\n}\n",Ef.STATIC_FRAGMENT_SHADER="#include <common>\n#include <common_frag>\n#include <pbr_common_frag_define>\n#include <pbr_util_frag_define>\n\n#include <fog_share>\n\n#include <uv_share>\n#include <uv_transform_share_define>\n#include <normal_share>\n#include <color_share>\n#include <worldpos_share>\n#include <refraction_share>\n#include <perturbation_share>\n#include <clipPlane_frag_define>\n\n// light\n#include <ambient_light_frag>\n#include <direct_light_frag>\n#include <point_light_frag>\n#include <spot_light_frag>\n#include <pbr_envmap_light_frag_define>\n\n// prop & texture\n#include <pbr_base_frag_define>\n#include <pbr_texture_frag_define>\n\n// runtime context\n#include <pbr_runtime_frag_define>\n\n// todo: generalize\n#include <pbr_normal_frag_define>\n\n\n// todo: BxDF\n#include <pbr_brdf_cook_torrance_frag_define>\n\n\n// direct + indirect\n#include <pbr_direct_irradiance_frag_define>\n#include <pbr_ibl_diffuse_frag_define>\n#include <pbr_ibl_specular_frag_define>\n\n#include <oit_frag_define>\n\n\nvoid main() {\n    #include <clipPlane_frag>\n\n    #include <pbr_begin_frag>\n    #include <pbr_direct_irradiance_frag>\n    #include <pbr_ibl_diffuse_frag>\n    #include <pbr_ibl_specular_frag>\n    // todo: generalize texture logic\n    #include <pbr_end_frag>\n    #include <gamma_frag>\n    #include <refraction_frag>\n    #include <perturbation_frag>\n    #include <fog_frag>\n\n    #include <oit_frag>\n}\n",Ef.attribUniformVec4=12,Ef.TECH_CONFIG={attributes:{},uniforms:_f({u_baseColorSampler:{name:"u_baseColorSampler",paramName:"baseColorTexture",type:e.DataType.SAMPLER_2D},u_baseColorFactor:{name:"u_baseColorFactor",paramName:"baseColorFactor",type:e.DataType.FLOAT_VEC4},u_normalSampler:{name:"u_normalSampler",paramName:"normalTexture",type:e.DataType.SAMPLER_2D},u_normalScale:{name:"u_normalScale",paramName:"normalScale",type:e.DataType.FLOAT},u_lightDirection:{name:"u_lightDirection",type:e.DataType.FLOAT_VEC3},u_lightColor:{name:"u_lightColor",type:e.DataType.FLOAT_VEC3},u_metallicRoughnessValue:{name:"u_metallicRoughnessValue",paramName:"metallicRoughness",type:e.DataType.FLOAT_VEC2},u_metallicSampler:{name:"u_metallicSampler",paramName:"metallicTexture",type:e.DataType.SAMPLER_2D},u_roughnessSampler:{name:"u_roughnessSampler",paramName:"roughnessTexture",type:e.DataType.SAMPLER_2D},u_metallicRoughnessSampler:{name:"u_metallicRoughnessSampler",paramName:"metallicRoughnessTexture",type:e.DataType.SAMPLER_2D},u_emissiveFactor:{name:"u_emissiveFactor",paramName:"emissiveFactor",type:e.DataType.FLOAT_VEC3},u_emissiveSampler:{name:"u_emissiveSampler",paramName:"emissiveTexture",type:e.DataType.SAMPLER_2D},u_occlusionSampler:{name:"u_occlusionSampler",paramName:"occlusionTexture",type:e.DataType.SAMPLER_2D},u_occlusionStrength:{name:"u_occlusionStrength",paramName:"occlusionStrength",type:e.DataType.FLOAT},u_alphaCutoff:{name:"u_alphaCutoff",paramName:"alphaCutoff",type:e.DataType.FLOAT},u_clearCoat:{name:"u_clearCoat",paramName:"clearCoat",type:e.DataType.FLOAT},u_clearCoatRoughness:{name:"u_clearCoatRoughness",paramName:"clearCoatRoughness",type:e.DataType.FLOAT},u_opacitySampler:{name:"u_opacitySampler",paramName:"opacityTexture",type:e.DataType.SAMPLER_2D},u_specularFactor:{name:"u_specularFactor",paramName:"specularFactor",type:e.DataType.FLOAT_VEC3},u_glossinessFactor:{name:"u_glossinessFactor",paramName:"glossinessFactor",type:e.DataType.FLOAT},u_specularGlossinessSampler:{name:"u_specularGlossinessSampler",paramName:"specularGlossinessTexture",type:e.DataType.SAMPLER_2D},u_reflectionSampler:{name:"u_reflectionSampler",paramName:"reflectionTexture",type:e.DataType.SAMPLER_CUBE},u_PTMMatrix:{name:"u_PTMMatrix",paramName:"PTMMatrix",type:e.DataType.FLOAT_MAT4},u_envMapIntensity:{name:"u_envMapIntensity",paramName:"envMapIntensity",type:e.DataType.FLOAT},u_refractionRatio:{name:"u_refractionRatio",paramName:"refractionRatio",type:e.DataType.FLOAT},u_refractionDepth:{name:"u_refractionDepth",paramName:"refractionDepth",type:e.DataType.FLOAT},u_refractionSampler:{name:"u_refractionSampler",paramName:"refractionTexture",type:e.DataType.SAMPLER_2D},u_resolution:{name:"u_resolution",paramName:"resolution",type:e.DataType.FLOAT_VEC2},u_perturbationSampler:{name:"u_perturbationSampler",paramName:"perturbationTexture",type:e.DataType.SAMPLER_2D},u_perturbationUOffset:{name:"u_perturbationUOffset",paramName:"perturbationUOffset",type:e.DataType.FLOAT},u_perturbationVOffset:{name:"u_perturbationVOffset",paramName:"perturbationVOffset",type:e.DataType.FLOAT},u_depthSampler:{name:"u_depthSampler",type:e.DataType.SAMPLER_2D}}),states:{disable:[],enable:[],functions:{}}};var Lf=function(){function e(){Of(this,e),this._planes=void 0,this._planes=[];for(var t=0;t<6;t++)this._planes[t]=[]}return Sf(e,[{key:"update",value:function(e){var t=this._planes,n=Ee.create();Ee.mul(n,e.projectionMatrix,e.viewMatrix),t[0][0]=n[3]-n[0],t[0][1]=n[7]-n[4],t[0][2]=n[11]-n[8],t[0][3]=n[15]-n[12];var r=Math.sqrt(t[0][0]*t[0][0]+t[0][1]*t[0][1]+t[0][2]*t[0][2]);t[0][0]/=r,t[0][1]/=r,t[0][2]/=r,t[0][3]/=r,t[1][0]=n[3]+n[0],t[1][1]=n[7]+n[4],t[1][2]=n[11]+n[8],t[1][3]=n[15]+n[12],r=Math.sqrt(t[1][0]*t[1][0]+t[1][1]*t[1][1]+t[1][2]*t[1][2]),t[1][0]/=r,t[1][1]/=r,t[1][2]/=r,t[1][3]/=r,t[2][0]=n[3]+n[1],t[2][1]=n[7]+n[5],t[2][2]=n[11]+n[9],t[2][3]=n[15]+n[13],r=Math.sqrt(t[2][0]*t[2][0]+t[2][1]*t[2][1]+t[2][2]*t[2][2]),t[2][0]/=r,t[2][1]/=r,t[2][2]/=r,t[2][3]/=r,t[3][0]=n[3]-n[1],t[3][1]=n[7]-n[5],t[3][2]=n[11]-n[9],t[3][3]=n[15]-n[13],r=Math.sqrt(t[3][0]*t[3][0]+t[3][1]*t[3][1]+t[3][2]*t[3][2]),t[3][0]/=r,t[3][1]/=r,t[3][2]/=r,t[3][3]/=r,t[4][0]=n[3]-n[2],t[4][1]=n[7]-n[6],t[4][2]=n[11]-n[10],t[4][3]=n[15]-n[14],r=Math.sqrt(t[4][0]*t[4][0]+t[4][1]*t[4][1]+t[4][2]*t[4][2]),t[4][0]/=r,t[4][1]/=r,t[4][2]/=r,t[4][3]/=r,t[5][0]=n[3]+n[2],t[5][1]=n[7]+n[6],t[5][2]=n[11]+n[10],t[5][3]=n[15]+n[14],r=Math.sqrt(t[5][0]*t[5][0]+t[5][1]*t[5][1]+t[5][2]*t[5][2]),t[5][0]/=r,t[5][1]/=r,t[5][2]/=r,t[5][3]/=r}},{key:"planes",get:function(){return this._planes}}]),e}(),If=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rf(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cf(e);if(t){var i=Cf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kf(this,n)}}(n);function n(e){var r;return Of(this,n),(r=t.call(this,e))._frustum=void 0,r._frustum=new Lf,r}return Sf(n,[{key:"render",value:function(){this._frustum.update(this._camera),Pf(Cf(n.prototype),"render",this).call(this)}},{key:"pushPrimitive",value:function(e,t,r){var i,o=e.node;if(!t.boundingBox){var a=t.getMinMax(),s=a.min,l=a.max;t.boundingBox=new Hi(s,l,o.getModelMatrix())}t.boundingBox.updateByModelMatrix(o.getModelMatrix()),i=t.boundingBox.isInFrustum(this.frustum.planes),t.isInFrustum=i,i&&Pf(Cf(n.prototype),"pushPrimitive",this).call(this,e,t,r)}},{key:"frustum",get:function(){return this._frustum}}]),n}(ps);function Ff(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nf(e,t,n){return t&&Df(e.prototype,t),n&&Df(e,n),e}function zf(){return(zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Bf(e){return(Bf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uf(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Vf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bf(e);if(t){var i=Bf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Uf(this,n)}}function Hf(e,t,n){return(Hf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Gf(e){return function(e){if(Array.isArray(e))return Wf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xf=function(t){jf(r,t);var n=Vf(r);function r(t){var i;return Ff(this,r),(i=n.call(this,t))._diffuse=void 0,i._opacity=void 0,i._uvOffset=void 0,i._maskUvOffset=void 0,i._mask=void 0,i._uvVelocity=void 0,i.emission=Ct.fromValues(0,0,0,0),i.ambient=Ct.fromValues(0,0,0,0),i.transparent=!0,i.renderType=e.MaterialType.TRANSPARENT,i._diffuse=Ct.fromValues(1,1,1,1),i._opacity=1,i._uvOffset=ft.fromValues(0,0),i._maskUvOffset=ft.fromValues(0,0),i}return Nf(r,[{key:"_generateTechnique",value:function(){this._internalGenerate("RfuiMaterial","#include <uv_share>\n#include <uv_transform_share_define>\n#include <normal_share>\n#include <common_frag>\n#include <mobile_material_frag>\n#include <ambient_light_frag>\n\nuniform float u_opacity;\nuniform vec2 u_uvOffset;\nuniform vec2 u_maskUvOffset;\n\n#ifdef O3_MASK_TEXTURE\n\nuniform sampler2D u_mask;\n\n#endif\n\n#ifdef O3_UV_ANIMATE\n\nuniform vec2 u_uvVelocity;\n\n#endif\n\n\nvoid main() {\n\n  #include <begin_mobile_frag>\n\n  #ifdef O3_DIFFUSE_TEXTURE\n\n    vec2 uvDelta = v_uv + u_uvOffset;\n\t\tfloat filterX = step(0.0, uvDelta.x) * (1.0 - step(1.0, uvDelta.x));\n\t  float filterY = step(0.0, uvDelta.y) * (1.0 - step(1.0, uvDelta.y));\n\t\tdiffuse = texture2D(u_diffuse, uvDelta) * filterX * filterY;\n\n\t#endif\n\n  #ifdef O3_UV_ANIMATE\n\n\t\tdiffuse = texture2D(u_diffuse, v_uv + u_uvVelocity * u_time);\n\n\t#endif\n\n  vec4 fragColor = (emission + ambient + diffuse) * u_opacity;\n\n\t#ifdef O3_MASK_TEXTURE\n\n\t\tvec2 maskUvDelta = v_uv + u_maskUvOffset;\n\t\tfloat maskFilterX = step(0.0, maskUvDelta.x) * (1.0 - step(1.0, maskUvDelta.x));\n\t  float maskFilterY = step(0.0, maskUvDelta.y) * (1.0 - step(1.0, maskUvDelta.y));\n\t\tvec4 mask = texture2D(u_mask, maskUvDelta) * maskFilterX * maskFilterY;\n\t\tfloat hasmask = 1.0 - step(0.5, mask.a);\n\t\tfragColor *= hasmask;\n\n\t#endif\n\n  gl_FragColor = fragColor;\n}\n"),this.setValue("u_diffuse",this._diffuse),this.setValue("u_opacity",this._opacity),this.setValue("u_uvOffset",this._uvOffset),this.setValue("u_maskUvOffset",this._maskUvOffset),this._mask&&this.setValue("u_mask",this._mask),this._uvVelocity&&this.setValue("u_uvVelocity",this._uvVelocity)}},{key:"_generateFragmentUniform",value:function(){var t={u_opacity:{name:"u_opacity",type:e.DataType.FLOAT},u_uvOffset:{name:"u_uvOffset",type:e.DataType.FLOAT_VEC2},u_maskUvOffset:{name:"u_maskUvOffset",type:e.DataType.FLOAT_VEC2}};return this._diffuse instanceof Xn?t.u_diffuse={name:"u_diffuse",type:e.DataType.SAMPLER_2D}:t.u_diffuse={name:"u_diffuse",type:e.DataType.FLOAT_VEC4},this._mask&&(t.u_mask={name:"u_mask",type:e.DataType.SAMPLER_2D}),this._uvVelocity&&(t.u_uvVelocity={name:"u_uvVelocity",type:e.DataType.FLOAT_VEC2}),zf(Hf(Bf(r.prototype),"_generateFragmentUniform",this).call(this),t)}},{key:"_generateMacros",value:function(){var e=Hf(Bf(r.prototype),"_generateMacros",this).call(this);return this._diffuse instanceof Xn&&e.push("O3_DIFFUSE_TEXTURE"),this._mask&&e.push("O3_MASK_TEXTURE"),this._uvVelocity&&e.push("O3_UV_ANIMATE"),e}},{key:"diffuse",get:function(){return this._diffuse},set:function(e){this._diffuse=e,this.setValue("u_diffuse",e)}},{key:"opacity",get:function(){return this._opacity},set:function(e){this._opacity=e,this.setValue("u_opacity",e)}},{key:"uvOffset",get:function(){return this._uvOffset},set:function(e){this._uvOffset=e,this.setValue("u_uvOffset",e)}},{key:"maskUvOffset",get:function(){return this._maskUvOffset},set:function(e){this._maskUvOffset=e,this.setValue("u_maskUvOffset",e)}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask=e,this.setValue("u_mask",e)}},{key:"uvVelocity",get:function(){return this._uvVelocity},set:function(e){this._uvVelocity=e,this.setValue("u_uvVelocity",e)}}]),r}(hu),Yf=new Dr,qf=function(e){jf(n,e);var t=Vf(n);function n(){return Ff(this,n),t.apply(this,arguments)}return Nf(n,[{key:"preTick",value:function(e){Yf.update(e._time._deltaTime)}}]),n}(sn);function Kf(e,t,n){return ci.Translate(e,t,n.duration||300,n).start(Yf)}function Qf(e,t,n){return ci.Scale(e,t,n.duration||300,n).start(Yf)}function Jf(e,t,n){return ci.Rotate(e,t,n.duration||300,n).start(Yf)}function Zf(e,t,n,r){return ci.DataType(e,t,n,r.duration||300,r).start(Yf)}function $f(t,n,r,i){return i.dataType=e.DataType.FLOAT_VEC2,ci.DataType(t,n,r,i.duration||300,i).start(Yf)}an.registerFeature(qf);var eh=function(){function t(e,n){var r=this;Ff(this,t),this.node=void 0,this.material=void 0,this.defaultParam=void 0,this.onStart=void 0,this.started=void 0,this.node=e,this.material=n.material,this.defaultParam=n.param,this.started=!1,this.onStart=function(){r.started||(r.node.isActive=!0,r.started=!0)}}return Nf(t,[{key:"scaleIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.node.scale=n,t.onComplete&&t.onComplete()}});return this.node.scale=r.start||[1e-12,1e-12,1e-12],Qf(this.node,n,r)}},{key:"scaleXIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.node.scale=n,t.onComplete&&t.onComplete()}});return this.node.scale=[r.start||1e-12,n[1],n[2]],Qf(this.node,n,r)}},{key:"scaleYIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.node.scale=n,t.onComplete&&t.onComplete()}});return this.node.scale=[n[0],r.start||1e-12,n[2]],Qf(this.node,n,r)}},{key:"translateIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=this.node.position.slice(0),r=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.node.position=n,t.onComplete&&t.onComplete()}});return this.node.position=r.start||[n[0]+5,n[1]+5,n[2]+5],Kf(this.node,n,r)}},{key:"rotateIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=this.node.rotation.slice(0),r=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.node.rotation=n,t.onComplete&&t.onComplete()}}),i=r.start||[0,0,180];return this.node.setRotationAngles(i[0],i[1],i[2]),Jf(this.node,n,r)}},{key:"fadeIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var n=zf({},this.defaultParam,t,{onTick:this.onStart.bind(this),onComplete:function(){e.node.isActive=!0,e.material.opacity=1,t.onComplete&&t.onComplete()}});return this.material.opacity=0,Zf(0,(function(t){e.material.opacity=t}),1,n)}},{key:"slideIn",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var r=zf({},this.defaultParam,n,{onTick:this.onStart.bind(this),onComplete:function(){t.node.isActive=!0,t.material.uvOffset=ft.fromValues(0,0),n.onComplete&&n.onComplete()}});return this.material.uvOffset=r.uvOffset||ft.fromValues(-1,0),this.material.diffuse.setWrapMode(r.wrapS||e.TextureWrapMode.CLAMP_TO_EDGE,r.wrapT||e.TextureWrapMode.CLAMP_TO_EDGE),$f(this.material.uvOffset,(function(e){t.material.uvOffset=e}),ft.fromValues(0,0),r)}},{key:"maskSlideIn",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1;var r=n.maskUvOffset||ft.fromValues(0,-1),i=zf({},this.defaultParam,n,{onTick:this.onStart.bind(this),onComplete:function(){t.node.isActive=!0,t.material.maskUvOffset=r,n.onComplete&&n.onComplete()}});return this.material.maskUvOffset=ft.fromValues(0,0),this.material.mask.setWrapMode(i.wrapS||e.TextureWrapMode.CLAMP_TO_EDGE,i.wrapT||e.TextureWrapMode.CLAMP_TO_EDGE),$f(ft.fromValues(0,0),(function(e){t.material.maskUvOffset=e}),r,i)}},{key:"scaleOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onComplete:function(){e.node.scale=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}}),i=r.end||[1e-12,1e-12,1e-12];return Qf(this.node,i,r)}},{key:"scaleXOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onComplete:function(){e.node.scale=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}}),i=[r.end||1e-12,n[1],n[2]];return Qf(this.node,i,r)}},{key:"scaleYOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.node.scale.slice(0),r=zf({},this.defaultParam,t,{onComplete:function(){e.node.scale=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}}),i=[n[0],r.end||1e-12,n[2]];return Qf(this.node,i,r)}},{key:"translateOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.node.position.slice(0),r=zf({},this.defaultParam,t,{onComplete:function(){e.node.position=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}}),i=r.end||[n[0]+5,n[1]+5,n[2]+5];return Kf(this.node,i,r)}},{key:"rotateOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.node.rotation.slice(0),r=zf({},this.defaultParam,t,{onComplete:function(){e.node.rotation=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}}),i=tt.create();return r.end?tt.fromEuler.apply(tt,[i].concat(Gf(r.end))):tt.fromEuler(i,0,0,180),Jf(this.node,i,r)}},{key:"fadeOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=1,r=zf({},this.defaultParam,t,{onComplete:function(){e.material.opacity=n,e.node.isActive=!1,t.onComplete&&t.onComplete()}});return this.material.opacity=n,Zf(n,(function(t){e.material.opacity=t}),0,r)}},{key:"slideOut",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=ft.fromValues(0,0),i=zf({},this.defaultParam,n,{onComplete:function(){t.material.uvOffset=r,t.node.isActive=!1,n.onComplete&&n.onComplete()}}),o=i.uvOffset||ft.fromValues(-1,0);return this.material.uvOffset=r,this.material.diffuse.setWrapMode(i.wrapS||e.TextureWrapMode.CLAMP_TO_EDGE,i.wrapT||e.TextureWrapMode.CLAMP_TO_EDGE),$f(r,(function(e){t.material.uvOffset=e}),o,i)}},{key:"maskSlideOut",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.maskUvOffset||ft.fromValues(0,-1),i=zf({},this.defaultParam,n,{onComplete:function(){t.material.maskUvOffset=r,t.node.isActive=!1,n.onComplete&&n.onComplete()}});return this.material.maskUvOffset=r,this.material.mask.setWrapMode(i.wrapS||e.TextureWrapMode.CLAMP_TO_EDGE,i.wrapT||e.TextureWrapMode.CLAMP_TO_EDGE),$f(r,(function(e){t.material.maskUvOffset=e}),ft.fromValues(0,0),i)}}]),t}(),th=function(t){jf(r,t);var n=Vf(r);function r(t,i){var o;return Ff(this,r),(o=n.call(this,t,i)).type=void 0,o.texrureType=void 0,o.geometryType=void 0,o.animationManager=void 0,o._animationParam=void 0,o._geometryParam=void 0,o._blendFunc=void 0,o._diffuse=void 0,o._mask=void 0,o._uvVelocity=void 0,o._isAnimatingTexture=void 0,o._states=void 0,o._material=void 0,o.type="rfui",o.texrureType=i.texrureType||"image",o.geometryType=i.geometryType||"plane",o._animationParam=i.animationParam,o._geometryParam=i.geometryParam||{},o._blendFunc=i.blendFunc||[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA],o._diffuse=i.diffuse||Ct.fromValues(1,1,1,1),o._mask=i.mask,o._uvVelocity=i.uvVelocity,o._isAnimatingTexture=i.isAnimatingTexture||!1,o._states={enable:[e.RenderState.BLEND],functions:{blendFunc:o._blendFunc,depthMask:[!1]}},o.initGeometry(),o.initMaterial(),o.initAnimation(),o}return Nf(r,[{key:"initGeometry",value:function(){if(this._props.geometry)this.geometry=this._props.geometry;else if("plane"===this.geometryType){var t=this._geometryParam.horizontalSegments||1,n=this._geometryParam.verticalSegments||1;this.geometry=new Lu(1,1,t,n)}else{var r=this._geometryParam.thetaLength||Math.PI/6,i=this._geometryParam.thetaStart||Math.PI-r/2;this.geometry=new Iu(1,1,1,12,1,!0,i,r,e.FrontFace.CW)}}},{key:"initMaterial",value:function(){this._props.material?this._material=this._props._material:("cylinder"===this.geometryType&&(this._states.functions.frontFace=[e.FrontFace.CW]),this._material=new Xf("rfui_mtl"),this._material.renderStates=zf({},this._states,this._props.renderStates),this._material.diffuse=this._diffuse,this._material.mask=this._mask,this._material.uvVelocity=this._uvVelocity),this.setMaterial(this._material)}},{key:"initAnimation",value:function(){this.animationManager=new eh(this.node,{material:this.getMaterial(),param:this._animationParam})}},{key:"update",value:function(){this._isAnimatingTexture&&this._diffuse.updateTexture()}},{key:"diffuse",set:function(e){this._diffuse=e,this._material.diffuse=this._diffuse}}]),r}(Ic),nh=function(e){jf(n,e);var t=Vf(n);function n(e,r){var i;Ff(this,n),(i=t.call(this,e)).geometry=void 0,i.hCount=void 0,i.vCount=void 0,i.index=void 0,i.vIndexList=void 0,i.speed=void 0,i._time=void 0,i.geometry=r.geometry,i.vCount=i.geometry._parameters.verticalSegments,i.hCount=i.geometry._parameters.horizontalSegments,i.index=i.geometry.getAllIndex().slice(0),i.vIndexList=[];for(var o=0;o<i.vCount;o++)i.vIndexList.push(i.index.slice(6*i.hCount*o,6*i.hCount*(o+1)));return i._time=0,i.speed=10,i.switch=!1,i.geometry.setAllIndex(i.index.slice(0).fill(0)),i}return Nf(n,[{key:"update",value:function(e){this.switch&&(this._time+=e/1e3,this.setValues())}},{key:"start",value:function(){this.switch=!0,this._time=0}},{key:"stop",value:function(){this.switch=!1}},{key:"setValues",value:function(){for(var e=[],t=Math.floor(this._time*this.speed)%(this.index.length/6)+1,n=this.vCount-Math.ceil(t/this.hCount),r=(t-1)%this.hCount,i=[],o=0;o<this.vCount;o++)i[o]=o<n?this.vIndexList[o].slice(0).fill(0):o===n?this.vIndexList[o].slice(0).fill(0,6*r):this.vIndexList[o].slice(0);i.forEach((function(t){e=function(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];t+=s.length}for(var l=new e(t),c=0,u=0,d=r;u<d.length;u++){var f=d[u];l.set(f,c),c+=f.length}return l}(Uint16Array,e,t)})),this.geometry.setAllIndex(e),0===n&&r===this.hCount-1&&this.stop()}}]),n}(Kt),rh=function(e){jf(n,e);var t=Vf(n);function n(e,r){var i;return Ff(this,n),(i=t.call(this,r.scene,r.parent,e)).outAnimations=void 0,i.nodesConfig=void 0,i.animationParam=void 0,i.inAnimations=void 0,i.nodesConfig=r.nodesConfig,i.animationParam=r.animationParam||{},i.inAnimations=[],i.outAnimations=[],i._initNode(),i}return Nf(n,[{key:"_initNode",value:function(){var e=this;this.nodesConfig.forEach((function(t){var n=e.createChild(t.name);t.position&&(n.position=t.position),t.scale&&(n.scale=t.scale),t.rotation&&n.setRotationAngles(t.rotation[0],t.rotation[1],t.rotation[2]);var r=e.initRenderer(n,t),i=e.initAniamtion(n,t,r);e.initAbility(n,t,r,i)}))}},{key:"initRenderer",value:function(e,t){var n=zf({},this.animationParam,t.rendererConfig.animationParam||{});return t.rendererConfig.animationParam=n,e.createAbility(th,t.rendererConfig)}},{key:"initAniamtion",value:function(e,t,n){var r={manager:n.animationManager,animations:[]};t.animationsConfig.in.forEach((function(e){r.animations.push({type:e.type,param:e.param})})),this.inAnimations.push(r);var i={manager:n.animationManager,animations:[]};return t.animationsConfig.out.forEach((function(e){i.animations.push({type:e.type,param:e.param})})),this.outAnimations.push(i),r}},{key:"initAbility",value:function(e,t,n,r){t.abilities&&t.abilities.forEach((function(t){if("ARenderEachRow"===t){var i=e.createAbility(nh,{geometry:n.geometry});if(r.animations.length>0){var o=0,a=0;r.animations.forEach((function(e,t){e.param&&e.param.delay&&e.param.delay>a&&(o=t,a=e.param.delay)})),r.animations[o].param.onComplete=function(){i.start()}}else i.start()}}))}},{key:"animationIn",value:function(){this.inAnimations.forEach((function(e){e.animations.forEach((function(t){t.tweener=e.manager[t.type](t.param)}))}))}},{key:"animationInStop",value:function(){this.inAnimations.forEach((function(e){e.animations.forEach((function(e){e.tweener&&e.tweener.stop()}))}))}},{key:"animationOut",value:function(){this.outAnimations.forEach((function(e){e.animations.forEach((function(t){t.tweener=e.manager[t.type](t.param)}))}))}},{key:"animationOutStop",value:function(){this.outAnimations.forEach((function(e){e.animations.forEach((function(e){e.tweener&&e.tweener.stop()}))}))}}]),n}(Zt);function ih(e,t,n,r){var i;e.save(),zf(e,r),i="right"===r.align?e.canvas.width-e.measureText(t).width-n.x:"center"===r.align?((i=e.canvas.width-e.measureText(t).width-n.x)+n.x)/2:n.x,r.strokeStyle?e.strokeText(t,i,n.y):e.fillText(t,i,n.y),e.restore()}function oh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sh(e,t,n){return t&&ah(e.prototype,t),n&&ah(e,n),e}function lh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ch(e){return(ch=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uh(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function dh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ch(e);if(t){var i=ch(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uh(this,n)}}function fh(e,t,n){return(fh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ch(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var hh=function(e){lh(n,e);var t=dh(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultName;return oh(this,n),(e=t.call(this,r))._cacheMat1=void 0,e._cacheMat2=void 0,e.modelMatrix=void 0,e}return sh(n,[{key:"setModel",value:function(e){this.modelMatrix=e}},{key:"prepareDrawing",value:function(e,t){null===this._technique&&this._generateTechnique(),this._cacheMat1||(this._cacheMat1=Ee.create(),this._cacheMat2=Ee.create());var r=e.viewMatrix,i=e.projectionMatrix;Ee.mul(this._cacheMat1,r,this.modelMatrix),this._cacheMat1[12]=this._cacheMat1[13]=this._cacheMat1[14]=0,Ee.mul(this._cacheMat2,i,this._cacheMat1),this.setValue("u_mvpNoscale",this._cacheMat2),fh(ch(n.prototype),"prepareDrawing",this).call(this,e,t,void 0)}},{key:"_generateTechnique",value:function(){var e=new Kn(n.techniqueName);e.isValid=!0,e.uniforms=n.techniqueConfig.uniforms,e.attributes=n.techniqueConfig.attributes,e.states=n.techniqueConfig.states,e.vertexShader=n.vertexShader,e.fragmentShader=n.fragmentShader,this._technique=e}}]),n}(Yn);hh.defaultName="SKY_BOX_MATERIAL",hh.techniqueName="SKY_BOX_TECHNIQUE",hh.vertexShader="#include <common_vert>\n\nuniform mat4 u_mvpNoscale;\n\nvarying vec3 v_cubeUV;\n\nvoid main() {\n\n    v_cubeUV = a_position.xyz;\n    gl_Position = u_mvpNoscale * vec4( a_position, 1.0 );\n    gl_Position.z = gl_Position.w;\n\n}\n",hh.fragmentShader="uniform samplerCube u_cube;\n\nvarying vec3 v_cubeUV;\n\nvoid main() {\n\n    gl_FragColor = textureCube( u_cube, v_cubeUV );\n\n}\n",hh.techniqueConfig={attributes:{},uniforms:{u_mvpNoscale:{name:"u_mvpNoscale",type:e.DataType.FLOAT_MAT4},u_cube:{name:"u_cube",type:e.DataType.SAMPLER_CUBE}},states:{disable:[e.RenderState.CULL_FACE],functions:{depthFunc:e.CompFunc.LEQUAL}}};var ph,mh,vh,gh,_h=function(e){lh(n,e);var t=dh(n);function n(e,r){var i;oh(this,n),(i=t.call(this,e,r))._skyBoxMap=void 0;var o=r.skyBoxMap;return i.geometry=new ku(2,2,2),i.setMaterial(new hh),i.skyBoxMap=o,i}return sh(n,[{key:"onUpdate",value:function(){this.material.setModel(this.node.getModelMatrix())}},{key:"render",value:function(e){this._skyBoxMap&&fh(ch(n.prototype),"render",this).call(this,e)}},{key:"skyBoxMap",get:function(){return this._skyBoxMap},set:function(e){this._skyBoxMap=e,this.getMaterial().setValue("u_cube",e)}}]),n}(Ic),yh=(ph=function(e,t){return(ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ph(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function bh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wh(e,t,n){return t&&xh(e.prototype,t),n&&xh(e,n),e}function Th(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Ah(e){return(Ah=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eh(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Oh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ah(e);if(t){var i=Ah(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Eh(this,n)}}function Mh(e,t,n){return(Mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ah(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}!function(e){var t,n,r,i=function(){function e(e,t,n){if(null==e)throw new Error("name cannot be null.");if(null==t)throw new Error("timelines cannot be null.");this.name=e,this.timelines=t,this.timelineIds=[];for(var r=0;r<t.length;r++)this.timelineIds[t[r].getPropertyId()]=!0;this.duration=n}return e.prototype.hasTimeline=function(e){return 1==this.timelineIds[e]},e.prototype.apply=function(e,t,n,r,i,o,a,s){if(null==e)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,t>0&&(t%=this.duration));for(var l=this.timelines,c=0,u=l.length;c<u;c++)l[c].apply(e,t,n,i,o,a,s)},e.binarySearch=function(e,t,n){void 0===n&&(n=1);var r=0,i=e.length/n-2;if(0==i)return n;for(var o=i>>>1;;){if(e[(o+1)*n]<=t?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},e.linearSearch=function(e,t,n){for(var r=0,i=e.length-n;r<=i;r+=n)if(e[r]>t)return r;return-1},e}();e.Animation=i,function(e){e[e.setup=0]="setup",e[e.first=1]="first",e[e.replace=2]="replace",e[e.add=3]="add"}(t=e.MixBlend||(e.MixBlend={})),function(e){e[e.mixIn=0]="mixIn",e[e.mixOut=1]="mixOut"}(n=e.MixDirection||(e.MixDirection={})),function(e){e[e.rotate=0]="rotate",e[e.translate=1]="translate",e[e.scale=2]="scale",e[e.shear=3]="shear",e[e.attachment=4]="attachment",e[e.color=5]="color",e[e.deform=6]="deform",e[e.event=7]="event",e[e.drawOrder=8]="drawOrder",e[e.ikConstraint=9]="ikConstraint",e[e.transformConstraint=10]="transformConstraint",e[e.pathConstraintPosition=11]="pathConstraintPosition",e[e.pathConstraintSpacing=12]="pathConstraintSpacing",e[e.pathConstraintMix=13]="pathConstraintMix",e[e.twoColor=14]="twoColor"}(r=e.TimelineType||(e.TimelineType={}));var o=function(){function t(n){if(n<=0)throw new Error("frameCount must be > 0: "+n);this.curves=e.Utils.newFloatArray((n-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var n=e*t.BEZIER_SIZE;if(n==this.curves.length)return t.LINEAR;var r=this.curves[n];return r==t.LINEAR?t.LINEAR:r==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,n,r,i,o){var a=.03*(2*-n+i),s=.03*(2*-r+o),l=.006*(3*(n-i)+1),c=.006*(3*(r-o)+1),u=2*a+l,d=2*s+c,f=.3*n+a+.16666667*l,h=.3*r+s+.16666667*c,p=e*t.BEZIER_SIZE,m=this.curves;m[p++]=t.BEZIER;for(var v=f,g=h,_=p+t.BEZIER_SIZE-1;p<_;p+=2)m[p]=v,m[p+1]=g,f+=u,h+=d,u+=l,d+=c,v+=f,g+=h},t.prototype.getCurvePercent=function(n,r){r=e.MathUtils.clamp(r,0,1);var i=this.curves,o=n*t.BEZIER_SIZE,a=i[o];if(a==t.LINEAR)return r;if(a==t.STEPPED)return 0;for(var s=0,l=++o,c=o+t.BEZIER_SIZE-1;o<c;o+=2)if((s=i[o])>=r){var u=void 0,d=void 0;return o==l?(u=0,d=0):(u=i[o-2],d=i[o-1]),d+(i[o+1]-d)*(r-u)/(s-u)}var f=i[o-1];return f+(1-f)*(r-s)/(1-s)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}();e.CurveTimeline=o;var a=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t<<1),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},o.prototype.setFrame=function(e,t,n){e<<=1,this.frames[e]=t,this.frames[e+o.ROTATION]=n},o.prototype.apply=function(e,n,r,a,s,l){var c=this.frames,u=e.bones[this.boneIndex];if(u.active)if(r<c[0])switch(l){case t.setup:return void(u.rotation=u.data.rotation);case t.first:var d=u.data.rotation-u.rotation;u.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*s}else if(r>=c[c.length-o.ENTRIES]){var f=c[c.length+o.PREV_ROTATION];switch(l){case t.setup:u.rotation=u.data.rotation+f*s;break;case t.first:case t.replace:f+=u.data.rotation-u.rotation,f-=360*(16384-(16384.499999999996-f/360|0));case t.add:u.rotation+=f*s}}else{var h=i.binarySearch(c,r,o.ENTRIES),p=c[h+o.PREV_ROTATION],m=c[h],v=this.getCurvePercent((h>>1)-1,1-(r-m)/(c[h+o.PREV_TIME]-m)),g=c[h+o.ROTATION]-p;switch(g=p+(g-360*(16384-(16384.499999999996-g/360|0)))*v,l){case t.setup:u.rotation=u.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*s;break;case t.first:case t.replace:g+=u.data.rotation-u.rotation;case t.add:u.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*s}}},o.ENTRIES=2,o.PREV_TIME=-2,o.PREV_ROTATION=-1,o.ROTATION=1,o}(o);e.RotateTimeline=a;var s=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},o.prototype.setFrame=function(e,t,n,r){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.X]=n,this.frames[e+o.Y]=r},o.prototype.apply=function(e,n,r,a,s,l){var c=this.frames,u=e.bones[this.boneIndex];if(u.active)if(r<c[0])switch(l){case t.setup:return u.x=u.data.x,void(u.y=u.data.y);case t.first:u.x+=(u.data.x-u.x)*s,u.y+=(u.data.y-u.y)*s}else{var d=0,f=0;if(r>=c[c.length-o.ENTRIES])d=c[c.length+o.PREV_X],f=c[c.length+o.PREV_Y];else{var h=i.binarySearch(c,r,o.ENTRIES);d=c[h+o.PREV_X],f=c[h+o.PREV_Y];var p=c[h],m=this.getCurvePercent(h/o.ENTRIES-1,1-(r-p)/(c[h+o.PREV_TIME]-p));d+=(c[h+o.X]-d)*m,f+=(c[h+o.Y]-f)*m}switch(l){case t.setup:u.x=u.data.x+d*s,u.y=u.data.y+f*s;break;case t.first:case t.replace:u.x+=(u.data.x+d-u.x)*s,u.y+=(u.data.y+f-u.y)*s;break;case t.add:u.x+=d*s,u.y+=f*s}}},o.ENTRIES=3,o.PREV_TIME=-3,o.PREV_X=-2,o.PREV_Y=-1,o.X=1,o.Y=2,o}(o);e.TranslateTimeline=s;var l=function(o){function a(e){return o.call(this,e)||this}return yh(a,o),a.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},a.prototype.apply=function(r,o,s,l,c,u,d){var f=this.frames,h=r.bones[this.boneIndex];if(h.active)if(s<f[0])switch(u){case t.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case t.first:h.scaleX+=(h.data.scaleX-h.scaleX)*c,h.scaleY+=(h.data.scaleY-h.scaleY)*c}else{var p=0,m=0;if(s>=f[f.length-a.ENTRIES])p=f[f.length+a.PREV_X]*h.data.scaleX,m=f[f.length+a.PREV_Y]*h.data.scaleY;else{var v=i.binarySearch(f,s,a.ENTRIES);p=f[v+a.PREV_X],m=f[v+a.PREV_Y];var g=f[v],_=this.getCurvePercent(v/a.ENTRIES-1,1-(s-g)/(f[v+a.PREV_TIME]-g));p=(p+(f[v+a.X]-p)*_)*h.data.scaleX,m=(m+(f[v+a.Y]-m)*_)*h.data.scaleY}if(1==c)u==t.add?(h.scaleX+=p-h.data.scaleX,h.scaleY+=m-h.data.scaleY):(h.scaleX=p,h.scaleY=m);else{var y=0,b=0;if(d==n.mixOut)switch(u){case t.setup:y=h.data.scaleX,b=h.data.scaleY,h.scaleX=y+(Math.abs(p)*e.MathUtils.signum(y)-y)*c,h.scaleY=b+(Math.abs(m)*e.MathUtils.signum(b)-b)*c;break;case t.first:case t.replace:y=h.scaleX,b=h.scaleY,h.scaleX=y+(Math.abs(p)*e.MathUtils.signum(y)-y)*c,h.scaleY=b+(Math.abs(m)*e.MathUtils.signum(b)-b)*c;break;case t.add:y=h.scaleX,b=h.scaleY,h.scaleX=y+(Math.abs(p)*e.MathUtils.signum(y)-h.data.scaleX)*c,h.scaleY=b+(Math.abs(m)*e.MathUtils.signum(b)-h.data.scaleY)*c}else switch(u){case t.setup:y=Math.abs(h.data.scaleX)*e.MathUtils.signum(p),b=Math.abs(h.data.scaleY)*e.MathUtils.signum(m),h.scaleX=y+(p-y)*c,h.scaleY=b+(m-b)*c;break;case t.first:case t.replace:y=Math.abs(h.scaleX)*e.MathUtils.signum(p),b=Math.abs(h.scaleY)*e.MathUtils.signum(m),h.scaleX=y+(p-y)*c,h.scaleY=b+(m-b)*c;break;case t.add:y=e.MathUtils.signum(p),b=e.MathUtils.signum(m),h.scaleX=Math.abs(h.scaleX)*y+(p-Math.abs(h.data.scaleX)*y)*c,h.scaleY=Math.abs(h.scaleY)*b+(m-Math.abs(h.data.scaleY)*b)*c}}}},a}(s);e.ScaleTimeline=l;var c=function(e){function n(t){return e.call(this,t)||this}return yh(n,e),n.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},n.prototype.apply=function(e,r,o,a,s,l){var c=this.frames,u=e.bones[this.boneIndex];if(u.active)if(o<c[0])switch(l){case t.setup:return u.shearX=u.data.shearX,void(u.shearY=u.data.shearY);case t.first:u.shearX+=(u.data.shearX-u.shearX)*s,u.shearY+=(u.data.shearY-u.shearY)*s}else{var d=0,f=0;if(o>=c[c.length-n.ENTRIES])d=c[c.length+n.PREV_X],f=c[c.length+n.PREV_Y];else{var h=i.binarySearch(c,o,n.ENTRIES);d=c[h+n.PREV_X],f=c[h+n.PREV_Y];var p=c[h],m=this.getCurvePercent(h/n.ENTRIES-1,1-(o-p)/(c[h+n.PREV_TIME]-p));d+=(c[h+n.X]-d)*m,f+=(c[h+n.Y]-f)*m}switch(l){case t.setup:u.shearX=u.data.shearX+d*s,u.shearY=u.data.shearY+f*s;break;case t.first:case t.replace:u.shearX+=(u.data.shearX+d-u.shearX)*s,u.shearY+=(u.data.shearY+f-u.shearY)*s;break;case t.add:u.shearX+=d*s,u.shearY+=f*s}}},n}(s);e.ShearTimeline=c;var u=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},o.prototype.setFrame=function(e,t,n,r,i,a){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.R]=n,this.frames[e+o.G]=r,this.frames[e+o.B]=i,this.frames[e+o.A]=a},o.prototype.apply=function(e,n,r,a,s,l){var c=e.slots[this.slotIndex];if(c.bone.active){var u=this.frames;if(r<u[0])switch(l){case t.setup:return void c.color.setFromColor(c.data.color);case t.first:var d=c.color,f=c.data.color;d.add((f.r-d.r)*s,(f.g-d.g)*s,(f.b-d.b)*s,(f.a-d.a)*s)}else{var h=0,p=0,m=0,v=0;if(r>=u[u.length-o.ENTRIES]){var g=u.length;h=u[g+o.PREV_R],p=u[g+o.PREV_G],m=u[g+o.PREV_B],v=u[g+o.PREV_A]}else{var _=i.binarySearch(u,r,o.ENTRIES);h=u[_+o.PREV_R],p=u[_+o.PREV_G],m=u[_+o.PREV_B],v=u[_+o.PREV_A];var y=u[_],b=this.getCurvePercent(_/o.ENTRIES-1,1-(r-y)/(u[_+o.PREV_TIME]-y));h+=(u[_+o.R]-h)*b,p+=(u[_+o.G]-p)*b,m+=(u[_+o.B]-m)*b,v+=(u[_+o.A]-v)*b}1==s?c.color.set(h,p,m,v):(d=c.color,l==t.setup&&d.setFromColor(c.data.color),d.add((h-d.r)*s,(p-d.g)*s,(m-d.b)*s,(v-d.a)*s))}}},o.ENTRIES=5,o.PREV_TIME=-5,o.PREV_R=-4,o.PREV_G=-3,o.PREV_B=-2,o.PREV_A=-1,o.R=1,o.G=2,o.B=3,o.A=4,o}(o);e.ColorTimeline=u;var d=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},o.prototype.setFrame=function(e,t,n,r,i,a,s,l,c){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.R]=n,this.frames[e+o.G]=r,this.frames[e+o.B]=i,this.frames[e+o.A]=a,this.frames[e+o.R2]=s,this.frames[e+o.G2]=l,this.frames[e+o.B2]=c},o.prototype.apply=function(e,n,r,a,s,l){var c=e.slots[this.slotIndex];if(c.bone.active){var u=this.frames;if(r<u[0])switch(l){case t.setup:return c.color.setFromColor(c.data.color),void c.darkColor.setFromColor(c.data.darkColor);case t.first:var d=c.color,f=c.darkColor,h=c.data.color,p=c.data.darkColor;d.add((h.r-d.r)*s,(h.g-d.g)*s,(h.b-d.b)*s,(h.a-d.a)*s),f.add((p.r-f.r)*s,(p.g-f.g)*s,(p.b-f.b)*s,0)}else{var m=0,v=0,g=0,_=0,y=0,b=0,x=0;if(r>=u[u.length-o.ENTRIES]){var w=u.length;m=u[w+o.PREV_R],v=u[w+o.PREV_G],g=u[w+o.PREV_B],_=u[w+o.PREV_A],y=u[w+o.PREV_R2],b=u[w+o.PREV_G2],x=u[w+o.PREV_B2]}else{var T=i.binarySearch(u,r,o.ENTRIES);m=u[T+o.PREV_R],v=u[T+o.PREV_G],g=u[T+o.PREV_B],_=u[T+o.PREV_A],y=u[T+o.PREV_R2],b=u[T+o.PREV_G2],x=u[T+o.PREV_B2];var A=u[T],E=this.getCurvePercent(T/o.ENTRIES-1,1-(r-A)/(u[T+o.PREV_TIME]-A));m+=(u[T+o.R]-m)*E,v+=(u[T+o.G]-v)*E,g+=(u[T+o.B]-g)*E,_+=(u[T+o.A]-_)*E,y+=(u[T+o.R2]-y)*E,b+=(u[T+o.G2]-b)*E,x+=(u[T+o.B2]-x)*E}1==s?(c.color.set(m,v,g,_),c.darkColor.set(y,b,x,1)):(d=c.color,f=c.darkColor,l==t.setup&&(d.setFromColor(c.data.color),f.setFromColor(c.data.darkColor)),d.add((m-d.r)*s,(v-d.g)*s,(g-d.b)*s,(_-d.a)*s),f.add((y-f.r)*s,(b-f.g)*s,(x-f.b)*s,0))}}},o.ENTRIES=8,o.PREV_TIME=-8,o.PREV_R=-7,o.PREV_G=-6,o.PREV_B=-5,o.PREV_A=-4,o.PREV_R2=-3,o.PREV_G2=-2,o.PREV_B2=-1,o.R=1,o.G=2,o.B=3,o.A=4,o.R2=5,o.G2=6,o.B2=7,o}(o);e.TwoColorTimeline=d;var f=function(){function o(t){this.frames=e.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return o.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(e,t,n){this.frames[e]=t,this.attachmentNames[e]=n},o.prototype.apply=function(e,r,o,a,s,l,c){var u=e.slots[this.slotIndex];if(u.bone.active)if(c!=n.mixOut||l!=t.setup){var d=this.frames;if(o<d[0]){if(l==t.setup||l==t.first){var f=u.data.attachmentName;u.setAttachment(null==f?null:e.getAttachment(this.slotIndex,f))}}else{var h;h=o>=d[d.length-1]?d.length-1:i.binarySearch(d,o,1)-1;var p=this.attachmentNames[h];e.slots[this.slotIndex].setAttachment(null==p?null:e.getAttachment(this.slotIndex,p))}}else{var m=u.data.attachmentName;u.setAttachment(null==m?null:e.getAttachment(this.slotIndex,m))}},o}();e.AttachmentTimeline=f;var h=null,p=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t),r.frameVertices=new Array(t),null==h&&(h=e.Utils.newFloatArray(64)),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},o.prototype.setFrame=function(e,t,n){this.frames[e]=t,this.frameVertices[e]=n},o.prototype.apply=function(n,r,o,a,s,l){var c=n.slots[this.slotIndex];if(c.bone.active){var u=c.getAttachment();if(u instanceof e.VertexAttachment&&u.deformAttachment==this.attachment){var d=c.deform;0==d.length&&(l=t.setup);var f=this.frameVertices,h=f[0].length,p=this.frames;if(o<p[0]){var m=u;switch(l){case t.setup:return void(d.length=0);case t.first:if(1==s){d.length=0;break}var v=e.Utils.setArraySize(d,h);if(null==m.bones)for(var g=m.vertices,_=0;_<h;_++)v[_]+=(g[_]-v[_])*s;else for(s=1-s,_=0;_<h;_++)v[_]*=s}}else{var y=e.Utils.setArraySize(d,h);if(o>=p[p.length-1]){var b=f[p.length-1];if(1==s)if(l==t.add)if(null==(m=u).bones){g=m.vertices;for(var x=0;x<h;x++)y[x]+=b[x]-g[x]}else for(var w=0;w<h;w++)y[w]+=b[w];else e.Utils.arrayCopy(b,0,y,0,h);else switch(l){case t.setup:var T=u;if(null==T.bones){g=T.vertices;for(var A=0;A<h;A++){var E=g[A];y[A]=E+(b[A]-E)*s}}else for(var O=0;O<h;O++)y[O]=b[O]*s;break;case t.first:case t.replace:for(var M=0;M<h;M++)y[M]+=(b[M]-y[M])*s;break;case t.add:if(null==(m=u).bones){g=m.vertices;for(var S=0;S<h;S++)y[S]+=(b[S]-g[S])*s}else for(var C=0;C<h;C++)y[C]+=b[C]*s}}else{var R=i.binarySearch(p,o),k=f[R-1],P=f[R],L=p[R],I=this.getCurvePercent(R-1,1-(o-L)/(p[R-1]-L));if(1==s)if(l==t.add)if(null==(m=u).bones){g=m.vertices;for(var F=0;F<h;F++){var D=k[F];y[F]+=D+(P[F]-D)*I-g[F]}}else for(var N=0;N<h;N++)D=k[N],y[N]+=D+(P[N]-D)*I;else for(var z=0;z<h;z++)D=k[z],y[z]=D+(P[z]-D)*I;else switch(l){case t.setup:var j=u;if(null==j.bones){g=j.vertices;for(var B=0;B<h;B++)D=k[B],E=g[B],y[B]=E+(D+(P[B]-D)*I-E)*s}else for(var U=0;U<h;U++)D=k[U],y[U]=(D+(P[U]-D)*I)*s;break;case t.first:case t.replace:for(var V=0;V<h;V++)D=k[V],y[V]+=(D+(P[V]-D)*I-y[V])*s;break;case t.add:if(null==(m=u).bones){g=m.vertices;for(var H=0;H<h;H++)D=k[H],y[H]+=(D+(P[H]-D)*I-g[H])*s}else for(var G=0;G<h;G++)D=k[G],y[G]+=(D+(P[G]-D)*I)*s}}}}}},o}(o);e.DeformTimeline=p;var m=function(){function t(t){this.frames=e.Utils.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return r.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(e,t){this.frames[e]=t.time,this.events[e]=t},t.prototype.apply=function(e,t,n,r,o,a,s){if(null!=r){var l=this.frames,c=this.frames.length;if(t>n)this.apply(e,t,Number.MAX_VALUE,r,o,a,s),t=-1;else if(t>=l[c-1])return;if(!(n<l[0])){var u=0;if(t<l[0])u=0;else for(var d=l[u=i.binarySearch(l,t)];u>0&&l[u-1]==d;)u--;for(;u<c&&n>=l[u];u++)r.push(this.events[u])}}},t}();e.EventTimeline=m;var v=function(){function o(t){this.frames=e.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return o.prototype.getPropertyId=function(){return r.drawOrder<<24},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(e,t,n){this.frames[e]=t,this.drawOrders[e]=n},o.prototype.apply=function(r,o,a,s,l,c,u){var d=r.drawOrder,f=r.slots;if(u!=n.mixOut||c!=t.setup){var h=this.frames;if(a<h[0])c!=t.setup&&c!=t.first||e.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else{var p;p=a>=h[h.length-1]?h.length-1:i.binarySearch(h,a)-1;var m=this.drawOrders[p];if(null==m)e.Utils.arrayCopy(f,0,d,0,f.length);else for(var v=0,g=m.length;v<g;v++)d[v]=f[m[v]]}}else e.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length)},o}();e.DrawOrderTimeline=v;var g=function(o){function a(t){var n=o.call(this,t)||this;return n.frames=e.Utils.newFloatArray(t*a.ENTRIES),n}return yh(a,o),a.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(e,t,n,r,i,o,s){e*=a.ENTRIES,this.frames[e]=t,this.frames[e+a.MIX]=n,this.frames[e+a.SOFTNESS]=r,this.frames[e+a.BEND_DIRECTION]=i,this.frames[e+a.COMPRESS]=o?1:0,this.frames[e+a.STRETCH]=s?1:0},a.prototype.apply=function(e,r,o,s,l,c,u){var d=this.frames,f=e.ikConstraints[this.ikConstraintIndex];if(f.active)if(o<d[0])switch(c){case t.setup:return f.mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,void(f.stretch=f.data.stretch);case t.first:f.mix+=(f.data.mix-f.mix)*l,f.softness+=(f.data.softness-f.softness)*l,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}else if(o>=d[d.length-a.ENTRIES])c==t.setup?(f.mix=f.data.mix+(d[d.length+a.PREV_MIX]-f.data.mix)*l,f.softness=f.data.softness+(d[d.length+a.PREV_SOFTNESS]-f.data.softness)*l,u==n.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=d[d.length+a.PREV_BEND_DIRECTION],f.compress=0!=d[d.length+a.PREV_COMPRESS],f.stretch=0!=d[d.length+a.PREV_STRETCH])):(f.mix+=(d[d.length+a.PREV_MIX]-f.mix)*l,f.softness+=(d[d.length+a.PREV_SOFTNESS]-f.softness)*l,u==n.mixIn&&(f.bendDirection=d[d.length+a.PREV_BEND_DIRECTION],f.compress=0!=d[d.length+a.PREV_COMPRESS],f.stretch=0!=d[d.length+a.PREV_STRETCH]));else{var h=i.binarySearch(d,o,a.ENTRIES),p=d[h+a.PREV_MIX],m=d[h+a.PREV_SOFTNESS],v=d[h],g=this.getCurvePercent(h/a.ENTRIES-1,1-(o-v)/(d[h+a.PREV_TIME]-v));c==t.setup?(f.mix=f.data.mix+(p+(d[h+a.MIX]-p)*g-f.data.mix)*l,f.softness=f.data.softness+(m+(d[h+a.SOFTNESS]-m)*g-f.data.softness)*l,u==n.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=d[h+a.PREV_BEND_DIRECTION],f.compress=0!=d[h+a.PREV_COMPRESS],f.stretch=0!=d[h+a.PREV_STRETCH])):(f.mix+=(p+(d[h+a.MIX]-p)*g-f.mix)*l,f.softness+=(m+(d[h+a.SOFTNESS]-m)*g-f.softness)*l,u==n.mixIn&&(f.bendDirection=d[h+a.PREV_BEND_DIRECTION],f.compress=0!=d[h+a.PREV_COMPRESS],f.stretch=0!=d[h+a.PREV_STRETCH]))}},a.ENTRIES=6,a.PREV_TIME=-6,a.PREV_MIX=-5,a.PREV_SOFTNESS=-4,a.PREV_BEND_DIRECTION=-3,a.PREV_COMPRESS=-2,a.PREV_STRETCH=-1,a.MIX=1,a.SOFTNESS=2,a.BEND_DIRECTION=3,a.COMPRESS=4,a.STRETCH=5,a}(o);e.IkConstraintTimeline=g;var _=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},o.prototype.setFrame=function(e,t,n,r,i,a){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.ROTATE]=n,this.frames[e+o.TRANSLATE]=r,this.frames[e+o.SCALE]=i,this.frames[e+o.SHEAR]=a},o.prototype.apply=function(e,n,r,a,s,l){var c=this.frames,u=e.transformConstraints[this.transformConstraintIndex];if(u.active)if(r<c[0]){var d=u.data;switch(l){case t.setup:return u.rotateMix=d.rotateMix,u.translateMix=d.translateMix,u.scaleMix=d.scaleMix,void(u.shearMix=d.shearMix);case t.first:u.rotateMix+=(d.rotateMix-u.rotateMix)*s,u.translateMix+=(d.translateMix-u.translateMix)*s,u.scaleMix+=(d.scaleMix-u.scaleMix)*s,u.shearMix+=(d.shearMix-u.shearMix)*s}}else{var f=0,h=0,p=0,m=0;if(r>=c[c.length-o.ENTRIES]){var v=c.length;f=c[v+o.PREV_ROTATE],h=c[v+o.PREV_TRANSLATE],p=c[v+o.PREV_SCALE],m=c[v+o.PREV_SHEAR]}else{var g=i.binarySearch(c,r,o.ENTRIES);f=c[g+o.PREV_ROTATE],h=c[g+o.PREV_TRANSLATE],p=c[g+o.PREV_SCALE],m=c[g+o.PREV_SHEAR];var _=c[g],y=this.getCurvePercent(g/o.ENTRIES-1,1-(r-_)/(c[g+o.PREV_TIME]-_));f+=(c[g+o.ROTATE]-f)*y,h+=(c[g+o.TRANSLATE]-h)*y,p+=(c[g+o.SCALE]-p)*y,m+=(c[g+o.SHEAR]-m)*y}l==t.setup?(d=u.data,u.rotateMix=d.rotateMix+(f-d.rotateMix)*s,u.translateMix=d.translateMix+(h-d.translateMix)*s,u.scaleMix=d.scaleMix+(p-d.scaleMix)*s,u.shearMix=d.shearMix+(m-d.shearMix)*s):(u.rotateMix+=(f-u.rotateMix)*s,u.translateMix+=(h-u.translateMix)*s,u.scaleMix+=(p-u.scaleMix)*s,u.shearMix+=(m-u.shearMix)*s)}},o.ENTRIES=5,o.PREV_TIME=-5,o.PREV_ROTATE=-4,o.PREV_TRANSLATE=-3,o.PREV_SCALE=-2,o.PREV_SHEAR=-1,o.ROTATE=1,o.TRANSLATE=2,o.SCALE=3,o.SHEAR=4,o}(o);e.TransformConstraintTimeline=_;var y=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},o.prototype.setFrame=function(e,t,n){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.VALUE]=n},o.prototype.apply=function(e,n,r,a,s,l){var c=this.frames,u=e.pathConstraints[this.pathConstraintIndex];if(u.active)if(r<c[0])switch(l){case t.setup:return void(u.position=u.data.position);case t.first:u.position+=(u.data.position-u.position)*s}else{var d=0;if(r>=c[c.length-o.ENTRIES])d=c[c.length+o.PREV_VALUE];else{var f=i.binarySearch(c,r,o.ENTRIES);d=c[f+o.PREV_VALUE];var h=c[f],p=this.getCurvePercent(f/o.ENTRIES-1,1-(r-h)/(c[f+o.PREV_TIME]-h));d+=(c[f+o.VALUE]-d)*p}l==t.setup?u.position=u.data.position+(d-u.data.position)*s:u.position+=(d-u.position)*s}},o.ENTRIES=2,o.PREV_TIME=-2,o.PREV_VALUE=-1,o.VALUE=1,o}(o);e.PathConstraintPositionTimeline=y;var b=function(e){function n(t){return e.call(this,t)||this}return yh(n,e),n.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(e,r,o,a,s,l){var c=this.frames,u=e.pathConstraints[this.pathConstraintIndex];if(u.active)if(o<c[0])switch(l){case t.setup:return void(u.spacing=u.data.spacing);case t.first:u.spacing+=(u.data.spacing-u.spacing)*s}else{var d=0;if(o>=c[c.length-n.ENTRIES])d=c[c.length+n.PREV_VALUE];else{var f=i.binarySearch(c,o,n.ENTRIES);d=c[f+n.PREV_VALUE];var h=c[f],p=this.getCurvePercent(f/n.ENTRIES-1,1-(o-h)/(c[f+n.PREV_TIME]-h));d+=(c[f+n.VALUE]-d)*p}l==t.setup?u.spacing=u.data.spacing+(d-u.data.spacing)*s:u.spacing+=(d-u.spacing)*s}},n}(y);e.PathConstraintSpacingTimeline=b;var x=function(n){function o(t){var r=n.call(this,t)||this;return r.frames=e.Utils.newFloatArray(t*o.ENTRIES),r}return yh(o,n),o.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},o.prototype.setFrame=function(e,t,n,r){e*=o.ENTRIES,this.frames[e]=t,this.frames[e+o.ROTATE]=n,this.frames[e+o.TRANSLATE]=r},o.prototype.apply=function(e,n,r,a,s,l){var c=this.frames,u=e.pathConstraints[this.pathConstraintIndex];if(u.active)if(r<c[0])switch(l){case t.setup:return u.rotateMix=u.data.rotateMix,void(u.translateMix=u.data.translateMix);case t.first:u.rotateMix+=(u.data.rotateMix-u.rotateMix)*s,u.translateMix+=(u.data.translateMix-u.translateMix)*s}else{var d=0,f=0;if(r>=c[c.length-o.ENTRIES])d=c[c.length+o.PREV_ROTATE],f=c[c.length+o.PREV_TRANSLATE];else{var h=i.binarySearch(c,r,o.ENTRIES);d=c[h+o.PREV_ROTATE],f=c[h+o.PREV_TRANSLATE];var p=c[h],m=this.getCurvePercent(h/o.ENTRIES-1,1-(r-p)/(c[h+o.PREV_TIME]-p));d+=(c[h+o.ROTATE]-d)*m,f+=(c[h+o.TRANSLATE]-f)*m}l==t.setup?(u.rotateMix=u.data.rotateMix+(d-u.data.rotateMix)*s,u.translateMix=u.data.translateMix+(f-u.data.translateMix)*s):(u.rotateMix+=(d-u.rotateMix)*s,u.translateMix+=(f-u.translateMix)*s)}},o.ENTRIES=3,o.PREV_TIME=-3,o.PREV_ROTATE=-2,o.PREV_TRANSLATE=-1,o.ROTATE=1,o.TRANSLATE=2,o}(o);e.PathConstraintMixTimeline=x}(e.spine||(e.spine={})),function(e){var t=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new i(this),this.propertyIDs=new e.IntSet,this.animationsChanged=!1,this.trackEntryPool=new e.Pool((function(){return new n})),this.data=t}return t.prototype.update=function(e){e*=this.timeScale;for(var t=this.tracks,n=0,r=t.length;n<r;n++){var i=t[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var o=e*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}var a=i.next;if(null!=a){var s=i.trackLast-a.delay;if(s>=0){for(a.delay=0,a.trackTime+=0==i.timeScale?0:(s/i.timeScale+e)*a.timeScale,i.trackTime+=o,this.setCurrent(n,a,!0);null!=a.mixingFrom;)a.mixTime+=e,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){t[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,e)){var l=i.mixingFrom;for(i.mixingFrom=null,null!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}i.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(e,t){var n=e.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,t);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?(0!=n.totalAlpha&&0!=e.mixDuration||(e.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=t*n.timeScale,e.mixTime+=t,!1)},t.prototype.apply=function(n){if(null==n)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,i=this.tracks,o=!1,a=0,s=i.length;a<s;a++){var l=i[a];if(!(null==l||l.delay>0)){o=!0;var c=0==a?e.MixBlend.first:l.mixBlend,u=l.alpha;null!=l.mixingFrom?u*=this.applyMixingFrom(l,n,c):l.trackTime>=l.trackEnd&&null==l.next&&(u=0);var d=l.animationLast,f=l.getAnimationTime(),h=l.animation.timelines.length,p=l.animation.timelines;if(0==a&&1==u||c==e.MixBlend.add)for(var m=0;m<h;m++)e.Utils.webkit602BugfixHelper(u,c),p[m].apply(n,d,f,r,u,c,e.MixDirection.mixIn);else{var v=l.timelineMode,g=0==l.timelinesRotation.length;g&&e.Utils.setArraySize(l.timelinesRotation,h<<1,null);var _=l.timelinesRotation;for(m=0;m<h;m++){var y=p[m],b=(v[m]&t.NOT_LAST-1)==t.SUBSEQUENT?c:e.MixBlend.setup;y instanceof e.RotateTimeline?this.applyRotateTimeline(y,n,f,u,b,_,m<<1,g):(e.Utils.webkit602BugfixHelper(u,c),y.apply(n,d,f,r,u,b,e.MixDirection.mixIn))}}this.queueEvents(l,f),r.length=0,l.nextAnimationLast=f,l.nextTrackLast=l.trackTime}}return this.queue.drain(),o},t.prototype.applyMixingFrom=function(n,r,i){var o=n.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,r,i);var a=0;0==n.mixDuration?(a=1,i==e.MixBlend.first&&(i=e.MixBlend.setup)):((a=n.mixTime/n.mixDuration)>1&&(a=1),i!=e.MixBlend.first&&(i=o.mixBlend));var s=a<o.eventThreshold?this.events:null,l=a<o.attachmentThreshold,c=a<o.drawOrderThreshold,u=o.animationLast,d=o.getAnimationTime(),f=o.animation.timelines.length,h=o.animation.timelines,p=o.alpha*n.interruptAlpha,m=p*(1-a);if(i==e.MixBlend.add)for(var v=0;v<f;v++)h[v].apply(r,u,d,s,m,i,e.MixDirection.mixOut);else{var g=o.timelineMode,_=o.timelineHoldMix,y=0==o.timelinesRotation.length;y&&e.Utils.setArraySize(o.timelinesRotation,f<<1,null);var b=o.timelinesRotation;for(o.totalAlpha=0,v=0;v<f;v++){var x=h[v],w=e.MixDirection.mixOut,T=void 0,A=0;switch(g[v]&t.NOT_LAST-1){case t.SUBSEQUENT:if(T=i,!l&&x instanceof e.AttachmentTimeline){if((g[v]&t.NOT_LAST)==t.NOT_LAST)continue;T=e.MixBlend.setup}if(!c&&x instanceof e.DrawOrderTimeline)continue;A=m;break;case t.FIRST:T=e.MixBlend.setup,A=m;break;case t.HOLD:T=e.MixBlend.setup,A=p;break;default:T=e.MixBlend.setup;var E=_[v];A=p*Math.max(0,1-E.mixTime/E.mixDuration)}o.totalAlpha+=A,x instanceof e.RotateTimeline?this.applyRotateTimeline(x,r,d,A,T,b,v<<1,y):(e.Utils.webkit602BugfixHelper(A,i),T==e.MixBlend.setup&&(x instanceof e.AttachmentTimeline?(l||(g[v]&t.NOT_LAST)==t.NOT_LAST)&&(w=e.MixDirection.mixIn):x instanceof e.DrawOrderTimeline&&c&&(w=e.MixDirection.mixIn)),x.apply(r,u,d,s,A,T,w))}}return n.mixDuration>0&&this.queueEvents(o,d),this.events.length=0,o.nextAnimationLast=d,o.nextTrackLast=o.trackTime,a},t.prototype.applyRotateTimeline=function(t,n,r,i,o,a,s,l){if(l&&(a[s]=0),1!=i){var c=t,u=c.frames,d=n.bones[c.boneIndex];if(d.active){var f=0,h=0;if(r<u[0])switch(o){case e.MixBlend.setup:d.rotation=d.data.rotation;default:return;case e.MixBlend.first:f=d.rotation,h=d.data.rotation}else if(f=o==e.MixBlend.setup?d.data.rotation:d.rotation,r>=u[u.length-e.RotateTimeline.ENTRIES])h=d.data.rotation+u[u.length+e.RotateTimeline.PREV_ROTATION];else{var p=e.Animation.binarySearch(u,r,e.RotateTimeline.ENTRIES),m=u[p+e.RotateTimeline.PREV_ROTATION],v=u[p],g=c.getCurvePercent((p>>1)-1,1-(r-v)/(u[p+e.RotateTimeline.PREV_TIME]-v));h=u[p+e.RotateTimeline.ROTATION]-m,h=m+(h-=360*(16384-(16384.499999999996-h/360|0)))*g+d.data.rotation,h-=360*(16384-(16384.499999999996-h/360|0))}var _=0,y=h-f;if(0==(y-=360*(16384-(16384.499999999996-y/360|0))))_=a[s];else{var b=0,x=0;l?(b=0,x=y):(b=a[s],x=a[s+1]);var w=y>0,T=b>=0;e.MathUtils.signum(x)!=e.MathUtils.signum(y)&&Math.abs(x)<=90&&(Math.abs(b)>180&&(b+=360*e.MathUtils.signum(b)),T=w),_=y+b-b%360,T!=w&&(_+=360*e.MathUtils.signum(b)),a[s]=_}a[s+1]=y,f+=_*i,d.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else t.apply(n,0,r,null,1,o,e.MixDirection.mixIn)},t.prototype.queueEvents=function(e,t){for(var n=e.animationStart,r=e.animationEnd,i=r-n,o=e.trackLast%i,a=this.events,s=0,l=a.length;s<l;s++){var c=a[s];if(c.time<o)break;c.time>r||this.queue.event(e,c)}for((e.loop?0==i||o>e.trackTime%i:t>=r&&e.animationLast<r)&&this.queue.complete(e);s<l;s++)a[s].time<n||this.queue.event(e,a[s])},t.prototype.clearTracks=function(){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var t=0,n=this.tracks.length;t<n;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()},t.prototype.clearTrack=function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var n=t;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[t.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(e,t,n){var r=this.expandToIndex(e);this.tracks[e]=t,null!=r&&(n&&this.queue.interrupt(r),t.mixingFrom=r,r.mixingTo=t,t.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(t.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(t)},t.prototype.setAnimation=function(e,t,n){var r=this.data.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,r,n)},t.prototype.setAnimationWith=function(e,t,n){if(null==t)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(e);null!=i&&(-1==i.nextTrackLast?(this.tracks[e]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));var o=this.trackEntry(e,t,n,i);return this.setCurrent(e,o,r),this.queue.drain(),o},t.prototype.addAnimation=function(e,t,n,r){var i=this.data.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,i,n,r)},t.prototype.addAnimationWith=function(e,t,n,r){if(null==t)throw new Error("animation cannot be null.");var i=this.expandToIndex(e);if(null!=i)for(;null!=i.next;)i=i.next;var o=this.trackEntry(e,t,n,i);if(null==i)this.setCurrent(e,o,!0),this.queue.drain();else if(i.next=o,r<=0){var a=i.animationEnd-i.animationStart;0!=a?(i.loop?r+=a*(1+(i.trackTime/a|0)):r+=Math.max(a,i.trackTime),r-=this.data.getMix(i.animation,t)):r=i.trackTime}return o.delay=r,o},t.prototype.setEmptyAnimation=function(e,n){var r=this.setAnimationWith(e,t.emptyAnimation,!1);return r.mixDuration=n,r.trackEnd=n,r},t.prototype.addEmptyAnimation=function(e,n,r){r<=0&&(r-=n);var i=this.addAnimationWith(e,t.emptyAnimation,!1,r);return i.mixDuration=n,i.trackEnd=n,i},t.prototype.setEmptyAnimations=function(e){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(e.Utils.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,n,r,i){var o=this.trackEntryPool.obtain();return o.trackIndex=t,o.animation=n,o.loop=r,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=n.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==i?0:this.data.getMix(i.animation,n),o.mixBlend=e.MixBlend.replace,o},t.prototype.disposeNext=function(e){for(var t=e.next;null!=t;)this.queue.dispose(t),t=t.next;e.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,n=this.tracks.length;t<n;t++)if(null!=(r=this.tracks[t])){for(;null!=r.mixingFrom;)r=r.mixingFrom;do{null!=r.mixingFrom&&r.mixBlend==e.MixBlend.add||this.computeHold(r),r=r.mixingTo}while(null!=r)}for(this.propertyIDs.clear(),t=this.tracks.length-1;t>=0;t--)for(var r=this.tracks[t];null!=r;)this.computeNotLast(r),r=r.mixingFrom},t.prototype.computeHold=function(n){var r=n.mixingTo,i=n.animation.timelines,o=n.animation.timelines.length,a=e.Utils.setArraySize(n.timelineMode,o);n.timelineHoldMix.length=0;var s=e.Utils.setArraySize(n.timelineHoldMix,o),l=this.propertyIDs;if(null!=r&&r.holdPrevious)for(var c=0;c<o;c++)l.add(i[c].getPropertyId()),a[c]=t.HOLD;else e:for(c=0;c<o;c++){var u=i[c],d=u.getPropertyId();if(l.add(d))if(null==r||u instanceof e.AttachmentTimeline||u instanceof e.DrawOrderTimeline||u instanceof e.EventTimeline||!r.animation.hasTimeline(d))a[c]=t.FIRST;else{for(var f=r.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(d)){if(n.mixDuration>0){a[c]=t.HOLD_MIX,s[c]=f;continue e}break}a[c]=t.HOLD}else a[c]=t.SUBSEQUENT}},t.prototype.computeNotLast=function(n){for(var r=n.animation.timelines,i=n.animation.timelines.length,o=n.timelineMode,a=this.propertyIDs,s=0;s<i;s++)if(r[s]instanceof e.AttachmentTimeline){var l=r[s];a.add(l.slotIndex)||(o[s]|=t.NOT_LAST)}},t.prototype.getCurrent=function(e){return e>=this.tracks.length?null:this.tracks[e]},t.prototype.addListener=function(e){if(null==e)throw new Error("listener cannot be null.");this.listeners.push(e)},t.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.emptyAnimation=new e.Animation("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD=2,t.HOLD_MIX=3,t.NOT_LAST=4,t}();e.AnimationState=t;var n=function(){function t(){this.mixBlend=e.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var e=this.animationEnd-this.animationStart;return 0==e?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(e){this.animationLast=e,this.nextAnimationLast=e},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();e.TrackEntry=n;var r,i=function(){function e(e){this.objects=[],this.drainDisabled=!1,this.animState=e}return e.prototype.start=function(e){this.objects.push(r.start),this.objects.push(e),this.animState.animationsChanged=!0},e.prototype.interrupt=function(e){this.objects.push(r.interrupt),this.objects.push(e)},e.prototype.end=function(e){this.objects.push(r.end),this.objects.push(e),this.animState.animationsChanged=!0},e.prototype.dispose=function(e){this.objects.push(r.dispose),this.objects.push(e)},e.prototype.complete=function(e){this.objects.push(r.complete),this.objects.push(e)},e.prototype.event=function(e,t){this.objects.push(r.event),this.objects.push(e),this.objects.push(t)},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,t=this.animState.listeners,n=0;n<e.length;n+=2){var i=e[n],o=e[n+1];switch(i){case r.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var a=0;a<t.length;a++)t[a].start&&t[a].start(o);break;case r.interrupt:for(null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o),a=0;a<t.length;a++)t[a].interrupt&&t[a].interrupt(o);break;case r.end:for(null!=o.listener&&o.listener.end&&o.listener.end(o),a=0;a<t.length;a++)t[a].end&&t[a].end(o);case r.dispose:for(null!=o.listener&&o.listener.dispose&&o.listener.dispose(o),a=0;a<t.length;a++)t[a].dispose&&t[a].dispose(o);this.animState.trackEntryPool.free(o);break;case r.complete:for(null!=o.listener&&o.listener.complete&&o.listener.complete(o),a=0;a<t.length;a++)t[a].complete&&t[a].complete(o);break;case r.event:var s=e[2+n++];for(null!=o.listener&&o.listener.event&&o.listener.event(o,s),a=0;a<t.length;a++)t[a].event&&t[a].event(o,s)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e}();e.EventQueue=i,function(e){e[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event"}(r=e.EventType||(e.EventType={}));var o=function(){function e(){}return e.prototype.start=function(){},e.prototype.interrupt=function(){},e.prototype.end=function(){},e.prototype.dispose=function(){},e.prototype.complete=function(){},e.prototype.event=function(){},e}();e.AnimationStateAdapter=o}(e.spine||(e.spine={})),function(e){var t=function(){function e(e){if(this.animationToMixTime={},this.defaultMix=0,null==e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return e.prototype.setMix=function(e,t,n){var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);this.setMixWith(r,i,n)},e.prototype.setMixWith=function(e,t,n){if(null==e)throw new Error("from cannot be null.");if(null==t)throw new Error("to cannot be null.");var r=e.name+"."+t.name;this.animationToMixTime[r]=n},e.prototype.getMix=function(e,t){var n=e.name+"."+t.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},e}();e.AnimationStateData=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t){void 0===t&&(t=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=e,this.pathPrefix=t}return t.prototype.downloadText=function(e,t,n){var r=new XMLHttpRequest;this.rawDataUris[e]&&(e=this.rawDataUris[e]),r.open("GET",e,!0),r.onload=function(){200==r.status?t(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.prototype.downloadBinary=function(e,t,n){var r=new XMLHttpRequest;this.rawDataUris[e]&&(e=this.rawDataUris[e]),r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status?t(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.prototype.setRawDataURI=function(e,t){this.rawDataUris[this.pathPrefix+e]=t},t.prototype.loadBinary=function(e,t,n){var r=this;void 0===t&&(t=null),void 0===n&&(n=null),e=this.pathPrefix+e,this.toLoad++,this.downloadBinary(e,(function(n){r.assets[e]=n,t&&t(e,n),r.toLoad--,r.loaded++}),(function(t,i){r.errors[e]="Couldn't load binary "+e+": status "+status+", "+i,n&&n(e,"Couldn't load binary "+e+": status "+status+", "+i),r.toLoad--,r.loaded++}))},t.prototype.loadText=function(e,t,n){var r=this;void 0===t&&(t=null),void 0===n&&(n=null),e=this.pathPrefix+e,this.toLoad++,this.downloadText(e,(function(n){r.assets[e]=n,t&&t(e,n),r.toLoad--,r.loaded++}),(function(t,i){r.errors[e]="Couldn't load text "+e+": status "+status+", "+i,n&&n(e,"Couldn't load text "+e+": status "+status+", "+i),r.toLoad--,r.loaded++}))},t.prototype.loadTexture=function(e,t,n){var r=this;void 0===t&&(t=null),void 0===n&&(n=null);var i=e=this.pathPrefix+e;this.toLoad++;var o=new Image;o.crossOrigin="anonymous",o.onload=function(){var n=r.textureLoader(o);r.assets[i]=n,r.toLoad--,r.loaded++,t&&t(e,o)},o.onerror=function(){r.errors[e]="Couldn't load image "+e,r.toLoad--,r.loaded++,n&&n(e,"Couldn't load image "+e)},this.rawDataUris[e]&&(e=this.rawDataUris[e]),o.src=e},t.prototype.loadTextureAtlas=function(t,n,r){var i=this;void 0===n&&(n=null),void 0===r&&(r=null);var o=t.lastIndexOf("/")>=0?t.substring(0,t.lastIndexOf("/")):"";t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(a){var s={count:0},l=new Array;try{new e.TextureAtlas(a,(function(t){l.push(""==o?t:o+"/"+t);var n=document.createElement("img");return n.width=16,n.height=16,new e.FakeTexture(n)}))}catch(e){var c=e;return i.errors[t]="Couldn't load texture atlas "+t+": "+c.message,r&&r(t,"Couldn't load texture atlas "+t+": "+c.message),i.toLoad--,void i.loaded++}for(var u=function(c){var u=!1;i.loadTexture(c,(function(c){if(s.count++,s.count==l.length)if(u)i.errors[t]="Couldn't load texture atlas page "+c+"} of atlas "+t,r&&r(t,"Couldn't load texture atlas page "+c+" of atlas "+t),i.toLoad--,i.loaded++;else try{var d=new e.TextureAtlas(a,(function(e){return i.get(""==o?e:o+"/"+e)}));i.assets[t]=d,n&&n(t,d),i.toLoad--,i.loaded++}catch(e){var f=e;i.errors[t]="Couldn't load texture atlas "+t+": "+f.message,r&&r(t,"Couldn't load texture atlas "+t+": "+f.message),i.toLoad--,i.loaded++}}),(function(e){u=!0,s.count++,s.count==l.length&&(i.errors[t]="Couldn't load texture atlas page "+e+"} of atlas "+t,r&&r(t,"Couldn't load texture atlas page "+e+" of atlas "+t),i.toLoad--,i.loaded++)}))},d=0,f=l;d<f.length;d++)u(f[d])}),(function(e,n){i.errors[t]="Couldn't load texture atlas "+t+": status "+status+", "+n,r&&r(t,"Couldn't load texture atlas "+t+": status "+status+", "+n),i.toLoad--,i.loaded++}))},t.prototype.get=function(e){return e=this.pathPrefix+e,this.assets[e]},t.prototype.remove=function(e){e=this.pathPrefix+e;var t=this.assets[e];t.dispose&&t.dispose(),this.assets[e]=null},t.prototype.removeAll=function(){for(var e in this.assets){var t=this.assets[e];t.dispose&&t.dispose()}this.assets={}},t.prototype.isLoadingComplete=function(){return 0==this.toLoad},t.prototype.getToLoad=function(){return this.toLoad},t.prototype.getLoaded=function(){return this.loaded},t.prototype.dispose=function(){this.removeAll()},t.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},t.prototype.getErrors=function(){return this.errors},t}();e.AssetManager=t}(e.spine||(e.spine={})),mh=e.spine||(e.spine={}),vh=function(){function e(e){this.atlas=e}return e.prototype.newRegionAttachment=function(e,t,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+t+")");r.renderObject=r;var i=new mh.RegionAttachment(t);return i.setRegion(r),i},e.prototype.newMeshAttachment=function(e,t,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+t+")");r.renderObject=r;var i=new mh.MeshAttachment(t);return i.region=r,i},e.prototype.newBoundingBoxAttachment=function(e,t){return new mh.BoundingBoxAttachment(t)},e.prototype.newPathAttachment=function(e,t){return new mh.PathAttachment(t)},e.prototype.newPointAttachment=function(e,t){return new mh.PointAttachment(t)},e.prototype.newClippingAttachment=function(e,t){return new mh.ClippingAttachment(t)},e}(),mh.AtlasAttachmentLoader=vh,function(e){!function(e){e[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(e.BlendMode||(e.BlendMode={}))}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=n,this.setToSetupPose()}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,n,r,i,o,a,s){this.ax=t,this.ay=n,this.arotation=r,this.ascaleX=i,this.ascaleY=o,this.ashearX=a,this.ashearY=s,this.appliedValid=!0;var l=this.parent;if(null==l){var c=this.skeleton,u=r+90+s,d=c.scaleX,f=c.scaleY;return this.a=e.MathUtils.cosDeg(r+a)*i*d,this.b=e.MathUtils.cosDeg(u)*o*d,this.c=e.MathUtils.sinDeg(r+a)*i*f,this.d=e.MathUtils.sinDeg(u)*o*f,this.worldX=t*d+c.x,void(this.worldY=n*f+c.y)}var h=l.a,p=l.b,m=l.c,v=l.d;switch(this.worldX=h*t+p*n+l.worldX,this.worldY=m*t+v*n+l.worldY,this.data.transformMode){case e.TransformMode.Normal:u=r+90+s;var g=e.MathUtils.cosDeg(r+a)*i,_=e.MathUtils.cosDeg(u)*o,y=e.MathUtils.sinDeg(r+a)*i,b=e.MathUtils.sinDeg(u)*o;return this.a=h*g+p*y,this.b=h*_+p*b,this.c=m*g+v*y,void(this.d=m*_+v*b);case e.TransformMode.OnlyTranslation:u=r+90+s,this.a=e.MathUtils.cosDeg(r+a)*i,this.b=e.MathUtils.cosDeg(u)*o,this.c=e.MathUtils.sinDeg(r+a)*i,this.d=e.MathUtils.sinDeg(u)*o;break;case e.TransformMode.NoRotationOrReflection:var x=0;(A=h*h+m*m)>1e-4?(p=m*(A=Math.abs(h*v-p*m)/A),v=h*A,x=Math.atan2(m,h)*e.MathUtils.radDeg):(h=0,m=0,x=90-Math.atan2(v,p)*e.MathUtils.radDeg);var w=r+a-x,T=r+s-x+90;g=e.MathUtils.cosDeg(w)*i,_=e.MathUtils.cosDeg(T)*o,y=e.MathUtils.sinDeg(w)*i,b=e.MathUtils.sinDeg(T)*o,this.a=h*g-p*y,this.b=h*_-p*b,this.c=m*g+v*y,this.d=m*_+v*b;break;case e.TransformMode.NoScale:case e.TransformMode.NoScaleOrReflection:var A,E=e.MathUtils.cosDeg(r),O=e.MathUtils.sinDeg(r),M=(h*E+p*O)/this.skeleton.scaleX,S=(m*E+v*O)/this.skeleton.scaleY;(A=Math.sqrt(M*M+S*S))>1e-5&&(A=1/A),M*=A,S*=A,A=Math.sqrt(M*M+S*S),this.data.transformMode==e.TransformMode.NoScale&&h*v-p*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(A=-A);var C=Math.PI/2+Math.atan2(S,M),R=Math.cos(C)*A,k=Math.sin(C)*A;g=e.MathUtils.cosDeg(a)*i,_=e.MathUtils.cosDeg(90+s)*o,y=e.MathUtils.sinDeg(a)*i,b=e.MathUtils.sinDeg(90+s)*o,this.a=M*g+R*y,this.b=M*_+R*b,this.c=S*g+k*y,this.d=S*_+k*b}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},t.prototype.setToSetupPose=function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*e.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*e.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent;if(null==t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*e.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*e.MathUtils.radDeg);var n=t.a,r=t.b,i=t.c,o=t.d,a=1/(n*o-r*i),s=this.worldX-t.worldX,l=this.worldY-t.worldY;this.ax=s*o*a-l*r*a,this.ay=l*n*a-s*i*a;var c=a*o,u=a*n,d=a*r,f=a*i,h=c*this.a-d*this.c,p=c*this.b-d*this.d,m=u*this.c-f*this.a,v=u*this.d-f*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(h*h+m*m),this.ascaleX>1e-4){var g=h*v-p*m;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(h*p+m*v,g)*e.MathUtils.radDeg,this.arotation=Math.atan2(m,h)*e.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+v*v),this.ashearY=0,this.arotation=90-Math.atan2(v,p)*e.MathUtils.radDeg},t.prototype.worldToLocal=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=1/(t*i-n*r),a=e.x-this.worldX,s=e.y-this.worldY;return e.x=a*i*o-s*n*o,e.y=s*t*o-a*r*o,e},t.prototype.localToWorld=function(e){var t=e.x,n=e.y;return e.x=t*this.a+n*this.b+this.worldX,e.y=t*this.c+n*this.d+this.worldY,e},t.prototype.worldToLocalRotation=function(t){var n=e.MathUtils.sinDeg(t),r=e.MathUtils.cosDeg(t);return Math.atan2(this.a*n-this.c*r,this.d*r-this.b*n)*e.MathUtils.radDeg+this.rotation-this.shearX},t.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var n=e.MathUtils.sinDeg(t),r=e.MathUtils.cosDeg(t);return Math.atan2(r*this.c+n*this.d,r*this.a+n*this.b)*e.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var n=this.a,r=this.b,i=this.c,o=this.d,a=e.MathUtils.cosDeg(t),s=e.MathUtils.sinDeg(t);this.a=a*n-s*i,this.b=a*r-s*o,this.c=s*n+a*i,this.d=s*r+a*o,this.appliedValid=!1},t}();e.Bone=t}(e.spine||(e.spine={})),function(e){var t;e.BoneData=function(n,r,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=t.Normal,this.skinRequired=!1,this.color=new e.Color,n<0)throw new Error("index must be >= 0.");if(null==r)throw new Error("name cannot be null.");this.index=n,this.name=r,this.parent=i},function(e){e[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(t=e.TransformMode||(e.TransformMode={}))}(e.spine||(e.spine={})),function(e){e.ConstraintData=function(e,t,n){this.name=e,this.order=t,this.skinRequired=n}}(e.spine||(e.spine={})),function(e){e.Event=function(e,t){if(null==t)throw new Error("data cannot be null.");this.time=e,this.data=t}}(e.spine||(e.spine={})),function(e){e.EventData=function(e){this.name=e}}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(t.findBone(e.bones[n].name));this.target=t.findBone(e.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target,t=this.bones;switch(t.length){case 1:this.apply1(t[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(t,n,r,i,o,a,s){t.appliedValid||t.updateAppliedTransform();var l=t.parent,c=1/(l.a*l.d-l.b*l.c),u=n-l.worldX,d=r-l.worldY,f=(u*l.d-d*l.b)*c-t.ax,h=(d*l.a-u*l.c)*c-t.ay,p=Math.atan2(h,f)*e.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var m=t.ascaleX,v=t.ascaleY;if(i||o){var g=t.data.length*m,_=Math.sqrt(f*f+h*h);if(i&&_<g||o&&_>g&&g>1e-4){var y=(_/g-1)*s+1;m*=y,a&&(v*=y)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*s,m,v,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,n,r,i,o,a,s,l){if(0!=l){t.appliedValid||t.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var c=t.ax,u=t.ay,d=t.ascaleX,f=d,h=t.ascaleY,p=n.ascaleX,m=0,v=0,g=0;d<0?(d=-d,m=180,g=-1):(m=0,g=1),h<0&&(h=-h,g=-g),p<0?(p=-p,v=180):v=0;var _=n.ax,y=0,b=0,x=0,w=t.a,T=t.b,A=t.c,E=t.d,O=Math.abs(d-h)<=1e-4;O?(b=w*_+T*(y=n.ay)+t.worldX,x=A*_+E*y+t.worldY):(y=0,b=w*_+t.worldX,x=A*_+t.worldY);var M=t.parent;w=M.a,T=M.b,A=M.c;var S,C,R=1/(w*(E=M.d)-T*A),k=b-M.worldX,P=x-M.worldY,L=(k*E-P*T)*R-c,I=(P*w-k*A)*R-u,F=Math.sqrt(L*L+I*I),D=n.data.length*p;if(F<1e-4)return this.apply1(t,r,i,!1,a,!1,l),void n.updateWorldTransformWith(_,y,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);var N=((k=r-M.worldX)*E-(P=i-M.worldY)*T)*R-c,z=(P*w-k*A)*R-u,j=N*N+z*z;if(0!=s){s*=d*(p+1)/2;var B=Math.sqrt(j),U=B-F-D*d+s;if(U>0){var V=Math.min(1,U/(2*s))-1;j=(N-=(V=(U-s*(1-V*V))/B)*N)*N+(z-=V*z)*z}}e:if(O){var H=(j-F*F-(D*=d)*D)/(2*F*D);H<-1?H=-1:H>1&&(H=1,a&&(f*=(Math.sqrt(j)/(F+D)-1)*l+1)),C=Math.acos(H)*o,w=F+D*H,T=D*Math.sin(C),S=Math.atan2(z*w-N*T,N*w+z*T)}else{var G=(w=d*D)*w,W=(T=h*D)*T,X=Math.atan2(z,N),Y=-2*W*F,q=W-G;if((E=Y*Y-4*q*(A=W*F*F+G*j-G*W))>=0){var K=Math.sqrt(E);Y<0&&(K=-K);var Q=(K=-(Y+K)/2)/q,J=A/K,Z=Math.abs(Q)<Math.abs(J)?Q:J;if(Z*Z<=j){P=Math.sqrt(j-Z*Z)*o,S=X-Math.atan2(P,Z),C=Math.atan2(P/h,(Z-F)/d);break e}}var $=e.MathUtils.PI,ee=F-w,te=ee*ee,ne=0,re=0,ie=F+w,oe=ie*ie,ae=0;(A=-w*F/(G-W))>=-1&&A<=1&&(A=Math.acos(A),(E=(k=w*Math.cos(A)+F)*k+(P=T*Math.sin(A))*P)<te&&($=A,te=E,ee=k,ne=P),E>oe&&(re=A,oe=E,ie=k,ae=P)),j<=(te+oe)/2?(S=X-Math.atan2(ne*o,ee),C=$*o):(S=X-Math.atan2(ae*o,ie),C=re*o)}var se=Math.atan2(y,_)*g,le=t.arotation;(S=(S-se)*e.MathUtils.radDeg+m-le)>180?S-=360:S<-180&&(S+=360),t.updateWorldTransformWith(c,u,le+S*l,f,t.ascaleY,0,0),le=n.arotation,(C=((C+se)*e.MathUtils.radDeg-n.ashearX)*g+v-le)>180?C-=360:C<-180&&(C+=360),n.updateWorldTransformWith(_,y,le+C*l,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}else n.updateWorldTransform()},t}();e.IkConstraint=t}(e.spine||(e.spine={})),function(e){var t=function(e){function t(t){var n=e.call(this,t,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return yh(t,e),t}(e.ConstraintData);e.IkConstraintData=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,r=e.bones.length;n<r;n++)this.bones.push(t.findBone(e.bones[n].name));this.target=t.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof e.PathAttachment){var r=this.rotateMix,i=this.translateMix,o=r>0;if(i>0||o){var a=this.data,s=a.spacingMode==e.SpacingMode.Percent,l=a.rotateMode,c=l==e.RotateMode.Tangent,u=l==e.RotateMode.ChainScale,d=this.bones.length,f=c?d:d+1,h=this.bones,p=e.Utils.setArraySize(this.spaces,f),m=null,v=this.spacing;if(u||!s){u&&(m=e.Utils.setArraySize(this.lengths,d));for(var g=a.spacingMode==e.SpacingMode.Length,_=0;_<f-1;){var y=(R=h[_]).data.length;if(y<t.epsilon)u&&(m[_]=0),p[++_]=0;else if(s){if(u){var b=y*R.a,x=y*R.c,w=Math.sqrt(b*b+x*x);m[_]=w}p[++_]=v}else{b=y*R.a,x=y*R.c;var T=Math.sqrt(b*b+x*x);u&&(m[_]=T),p[++_]=(g?y+v:v)*T/y}}}else for(_=1;_<f;_++)p[_]=v;var A=this.computeWorldPositions(n,f,c,a.positionMode==e.PositionMode.Percent,s),E=A[0],O=A[1],M=a.offsetRotation,S=!1;0==M?S=l==e.RotateMode.Chain:(S=!1,M*=(C=this.target.bone).a*C.d-C.b*C.c>0?e.MathUtils.degRad:-e.MathUtils.degRad),_=0;for(var C=3;_<d;_++,C+=3){var R;(R=h[_]).worldX+=(E-R.worldX)*i,R.worldY+=(O-R.worldY)*i;var k=(b=A[C])-E,P=(x=A[C+1])-O;if(u){var L=m[_];if(0!=L){var I=(Math.sqrt(k*k+P*P)/L-1)*r+1;R.a*=I,R.c*=I}}if(E=b,O=x,o){var F=R.a,D=R.b,N=R.c,z=R.d,j=0,B=0,U=0;if(j=c?A[C-1]:0==p[_+1]?A[C+2]:Math.atan2(P,k),j-=Math.atan2(N,F),S){B=Math.cos(j),U=Math.sin(j);var V=R.data.length;E+=(V*(B*F-U*N)-k)*r,O+=(V*(U*F+B*N)-P)*r}else j+=M;j>e.MathUtils.PI?j-=e.MathUtils.PI2:j<-e.MathUtils.PI&&(j+=e.MathUtils.PI2),j*=r,B=Math.cos(j),U=Math.sin(j),R.a=B*F-U*N,R.b=B*D-U*z,R.c=U*F+B*N,R.d=U*D+B*z}R.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(n,r,i,o,a){var s=this.target,l=this.position,c=this.spaces,u=e.Utils.setArraySize(this.positions,3*r+2),d=null,f=n.closed,h=n.worldVerticesLength,p=h/6,m=t.NONE;if(!n.constantSpeed){var v=n.lengths,g=v[p-=f?1:2];if(o&&(l*=g),a)for(var _=1;_<r;_++)c[_]*=g;d=e.Utils.setArraySize(this.world,8),_=0;for(var y=0,b=0;_<r;_++,y+=3){var x=l+=W=c[_];if(f)(x%=g)<0&&(x+=g),b=0;else{if(x<0){m!=t.BEFORE&&(m=t.BEFORE,n.computeWorldVertices(s,2,4,d,0,2)),this.addBeforePosition(x,d,0,u,y);continue}if(x>g){m!=t.AFTER&&(m=t.AFTER,n.computeWorldVertices(s,h-6,4,d,0,2)),this.addAfterPosition(x-g,d,0,u,y);continue}}for(;;b++){var w=v[b];if(!(x>w)){0==b?x/=w:x=(x-(K=v[b-1]))/(w-K);break}}b!=m&&(m=b,f&&b==p?(n.computeWorldVertices(s,h-4,4,d,0,2),n.computeWorldVertices(s,0,4,d,4,2)):n.computeWorldVertices(s,6*b+2,8,d,0,2)),this.addCurvePosition(x,d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],u,y,i||_>0&&0==W)}return u}f?(h+=2,d=e.Utils.setArraySize(this.world,h),n.computeWorldVertices(s,2,h-4,d,0,2),n.computeWorldVertices(s,0,2,d,h-4,2),d[h-2]=d[0],d[h-1]=d[1]):(p--,h-=4,d=e.Utils.setArraySize(this.world,h),n.computeWorldVertices(s,2,h,d,0,2));for(var T=e.Utils.setArraySize(this.curves,p),A=0,E=d[0],O=d[1],M=0,S=0,C=0,R=0,k=0,P=0,L=0,I=0,F=0,D=0,N=0,z=0,j=0,B=0,U=(_=0,2);_<p;_++,U+=6)M=d[U],S=d[U+1],C=d[U+2],R=d[U+3],N=2*(L=.1875*(E-2*M+C))+(F=.09375*(3*(M-C)-E+(k=d[U+4]))),z=2*(I=.1875*(O-2*S+R))+(D=.09375*(3*(S-R)-O+(P=d[U+5]))),j=.75*(M-E)+L+.16666667*F,B=.75*(S-O)+I+.16666667*D,A+=Math.sqrt(j*j+B*B),j+=N,B+=z,N+=F,z+=D,A+=Math.sqrt(j*j+B*B),j+=N,B+=z,A+=Math.sqrt(j*j+B*B),j+=N+F,B+=z+D,A+=Math.sqrt(j*j+B*B),T[_]=A,E=k,O=P;if(l*=o?A:A/n.lengths[p-1],a)for(_=1;_<r;_++)c[_]*=A;for(var V=this.segments,H=0,G=(_=0,y=0,b=0,0);_<r;_++,y+=3){var W;if(x=l+=W=c[_],f)(x%=A)<0&&(x+=A),b=0;else{if(x<0){this.addBeforePosition(x,d,0,u,y);continue}if(x>A){this.addAfterPosition(x-A,d,h-4,u,y);continue}}for(;;b++){var X=T[b];if(!(x>X)){0==b?x/=X:x=(x-(K=T[b-1]))/(X-K);break}}if(b!=m){m=b;var Y=6*b;for(E=d[Y],O=d[Y+1],M=d[Y+2],S=d[Y+3],C=d[Y+4],R=d[Y+5],N=2*(L=.03*(E-2*M+C))+(F=.006*(3*(M-C)-E+(k=d[Y+6]))),z=2*(I=.03*(O-2*S+R))+(D=.006*(3*(S-R)-O+(P=d[Y+7]))),j=.3*(M-E)+L+.16666667*F,B=.3*(S-O)+I+.16666667*D,H=Math.sqrt(j*j+B*B),V[0]=H,Y=1;Y<8;Y++)j+=N,B+=z,N+=F,z+=D,H+=Math.sqrt(j*j+B*B),V[Y]=H;j+=N,B+=z,H+=Math.sqrt(j*j+B*B),V[8]=H,j+=N+F,B+=z+D,H+=Math.sqrt(j*j+B*B),V[9]=H,G=0}for(x*=H;;G++){var q=V[G];if(!(x>q)){var K;0==G?x/=q:x=G+(x-(K=V[G-1]))/(q-K);break}}this.addCurvePosition(.1*x,E,O,M,S,C,R,k,P,u,y,i||_>0&&0==W)}return u},t.prototype.addBeforePosition=function(e,t,n,r,i){var o=t[n],a=t[n+1],s=t[n+2]-o,l=t[n+3]-a,c=Math.atan2(l,s);r[i]=o+e*Math.cos(c),r[i+1]=a+e*Math.sin(c),r[i+2]=c},t.prototype.addAfterPosition=function(e,t,n,r,i){var o=t[n+2],a=t[n+3],s=o-t[n],l=a-t[n+1],c=Math.atan2(l,s);r[i]=o+e*Math.cos(c),r[i+1]=a+e*Math.sin(c),r[i+2]=c},t.prototype.addCurvePosition=function(e,t,n,r,i,o,a,s,l,c,u,d){if(0==e||isNaN(e))return c[u]=t,c[u+1]=n,void(c[u+2]=Math.atan2(i-n,r-t));var f=e*e,h=f*e,p=1-e,m=p*p,v=m*p,g=p*e,_=3*g,y=p*_,b=_*e,x=t*v+r*y+o*b+s*h,w=n*v+i*y+a*b+l*h;c[u]=x,c[u+1]=w,d&&(c[u+2]=e<.001?Math.atan2(i-n,r-t):Math.atan2(w-(n*m+i*g*2+a*f),x-(t*m+r*g*2+o*f)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}();e.PathConstraint=t}(e.spine||(e.spine={})),function(e){var t=function(e){function t(t){var n=e.call(this,t,0,!1)||this;return n.bones=new Array,n}return yh(t,e),t}(e.ConstraintData);e.PathConstraintData=t,function(e){e[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent"}(e.PositionMode||(e.PositionMode={})),function(e){e[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent"}(e.SpacingMode||(e.SpacingMode={})),function(e){e[e.Tangent=0]="Tangent",e[e.Chain=1]="Chain",e[e.ChainScale=2]="ChainScale"}(e.RotateMode||(e.RotateMode={}))}(e.spine||(e.spine={})),function(e){var t=function(){function e(e){this.toLoad=new Array,this.assets={},this.clientId=e}return e.prototype.loaded=function(){var e=0;for(var t in this.assets)e++;return e},e}(),n=function(){function e(e){void 0===e&&(e=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=e}return e.prototype.queueAsset=function(e,n,r){var i=this.clientAssets[e];return null==i&&(i=new t(e),this.clientAssets[e]=i),null!==n&&(i.textureLoader=n),i.toLoad.push(r),this.queuedAssets[r]!==r&&(this.queuedAssets[r]=r,!0)},e.prototype.loadText=function(e,t){var n=this;if(t=this.pathPrefix+t,this.queueAsset(e,null,t)){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[t]=r.responseText:n.errors[t]="Couldn't load text "+t+": status "+r.status+", "+r.responseText)},r.open("GET",t,!0),r.send()}},e.prototype.loadJson=function(e,t){var n=this;if(t=this.pathPrefix+t,this.queueAsset(e,null,t)){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[t]=JSON.parse(r.responseText):n.errors[t]="Couldn't load text "+t+": status "+r.status+", "+r.responseText)},r.open("GET",t,!0),r.send()}},e.prototype.loadTexture=function(e,t,n){var r=this;if(n=this.pathPrefix+n,this.queueAsset(e,t,n)){var i=new Image;i.src=n,i.crossOrigin="anonymous",i.onload=function(){r.rawAssets[n]=i},i.onerror=function(){r.errors[n]="Couldn't load image "+n}}},e.prototype.get=function(e,t){t=this.pathPrefix+t;var n=this.clientAssets[e];return null==n||n.assets[t]},e.prototype.updateClientAssets=function(e){for(var t=0;t<e.toLoad.length;t++){var n=e.toLoad[t];if(null==e.assets[n]){var r=this.rawAssets[n];if(null==r)continue;r instanceof HTMLImageElement?e.assets[n]=e.textureLoader(r):e.assets[n]=r}}},e.prototype.isLoadingComplete=function(e){var t=this.clientAssets[e];return null==t||(this.updateClientAssets(t),t.toLoad.length==t.loaded())},e.prototype.dispose=function(){},e.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},e.prototype.getErrors=function(){return this.errors},e}();e.SharedAssetManager=n}(e.spine||(e.spine={})),function(e){var t=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var n=0;n<t.bones.length;n++){var r=t.bones[n],i=void 0;if(null==r.parent)i=new e.Bone(r,this,null);else{var o=this.bones[r.parent.index];i=new e.Bone(r,this,o),o.children.push(i)}this.bones.push(i)}for(this.slots=new Array,this.drawOrder=new Array,n=0;n<t.slots.length;n++){var a=t.slots[n],s=(i=this.bones[a.boneData.index],new e.Slot(a,i));this.slots.push(s),this.drawOrder.push(s)}for(this.ikConstraints=new Array,n=0;n<t.ikConstraints.length;n++){var l=t.ikConstraints[n];this.ikConstraints.push(new e.IkConstraint(l,this))}for(this.transformConstraints=new Array,n=0;n<t.transformConstraints.length;n++){var c=t.transformConstraints[n];this.transformConstraints.push(new e.TransformConstraint(c,this))}for(this.pathConstraints=new Array,n=0;n<t.pathConstraints.length;n++){var u=t.pathConstraints[n];this.pathConstraints.push(new e.PathConstraint(u,this))}this.color=new e.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var e=this.bones,t=0,n=e.length;t<n;t++)(i=e[t]).sorted=i.data.skinRequired,i.active=!i.sorted;if(null!=this.skin){var r=this.skin.bones;for(t=0,n=this.skin.bones.length;t<n;t++){var i=this.bones[r[t].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(null!=i)}}var o=this.ikConstraints,a=this.transformConstraints,s=this.pathConstraints,l=o.length,c=a.length,u=s.length;e:for(t=0;t<l+c+u;t++){for(var d=0;d<l;d++)if((f=o[d]).data.order==t){this.sortIkConstraint(f);continue e}for(d=0;d<c;d++)if((f=a[d]).data.order==t){this.sortTransformConstraint(f);continue e}for(d=0;d<u;d++){var f;if((f=s[d]).data.order==t){this.sortPathConstraint(f);continue e}}}for(t=0,n=e.length;t<n;t++)this.sortBone(e[t])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var n=t.target;this.sortBone(n);var r=t.bones,i=r[0];if(this.sortBone(i),r.length>1){var o=r[r.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(t),this.sortReset(i.children),r[r.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var n=t.target,r=n.data.index,i=n.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,r,i),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,i);for(var o=0,a=this.data.skins.length;o<a;o++)this.sortPathConstraintAttachment(this.data.skins[o],r,i);var s=n.getAttachment();s instanceof e.PathAttachment&&this.sortPathConstraintAttachmentWith(s,i);var l=t.bones,c=l.length;for(o=0;o<c;o++)this.sortBone(l[o]);for(this._updateCache.push(t),o=0;o<c;o++)this.sortReset(l[o].children);for(o=0;o<c;o++)l[o].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&e.Utils.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var n=t.bones,r=n.length;if(t.data.local)for(var i=0;i<r;i++){var o=n[i];this.sortBone(o.parent),this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}else for(i=0;i<r;i++)this.sortBone(n[i]);this._updateCache.push(t);for(var a=0;a<r;a++)this.sortReset(n[a].children);for(a=0;a<r;a++)n[a].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(e,t,n){var r=e.attachments[t];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,n){if(t instanceof e.PathAttachment){var r=t.bones;if(null==r)this.sortBone(n);else for(var i=this.bones,o=0;o<r.length;)for(var a=r[o++],s=o+a;o<s;o++){var l=r[o];this.sortBone(i[l])}}},t.prototype.sortBone=function(e){if(!e.sorted){var t=e.parent;null!=t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}},t.prototype.sortReset=function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var e=this.updateCacheReset,t=0,n=e.length;t<n;t++){var r=e[t];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var i=this._updateCache;for(t=0,n=i.length;t<n;t++)i[t].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var e=this.bones,t=0,n=e.length;t<n;t++)e[t].setToSetupPose();var r=this.ikConstraints;for(t=0,n=r.length;t<n;t++)(s=r[t]).mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch;var i=this.transformConstraints;for(t=0,n=i.length;t<n;t++){var o=(s=i[t]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}var a=this.pathConstraints;for(t=0,n=a.length;t<n;t++){var s;o=(s=a[t]).data,s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;e.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var n=0,r=t.length;n<r;n++)t[n].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==e)return i}return null},t.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return n;return-1},t.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==e)return i}return null},t.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++)if(t[n].data.name==e)return n;return-1},t.prototype.setSkinByName=function(e){var t=this.data.findSkin(e);if(null==t)throw new Error("Skin not found: "+e);this.setSkin(t)},t.prototype.setSkin=function(e){if(e!=this.skin){if(null!=e)if(null!=this.skin)e.attachAll(this,this.skin);else for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n],o=i.data.attachmentName;if(null!=o){var a=e.getAttachment(n,o);null!=a&&i.setAttachment(a)}}this.skin=e,this.updateCache()}},t.prototype.getAttachmentByName=function(e,t){return this.getAttachment(this.data.findSlotIndex(e),t)},t.prototype.getAttachment=function(e,t){if(null==t)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(e,t);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},t.prototype.setAttachment=function(e,t){if(null==e)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var o=n[r];if(o.data.name==e){var a=null;if(null!=t&&null==(a=this.getAttachment(r,t)))throw new Error("Attachment not found: "+t+", for slot: "+e);return void o.setAttachment(a)}}throw new Error("Slot not found: "+e)},t.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==e)return i}return null},t.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==e)return i}return null},t.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.data.name==e)return i}return null},t.prototype.getBounds=function(t,n,r){if(void 0===r&&(r=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var i=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=0,u=i.length;c<u;c++){var d=i[c];if(d.bone.active){var f=0,h=null,p=d.getAttachment();if(p instanceof e.RegionAttachment)f=8,h=e.Utils.setArraySize(r,f,0),p.computeWorldVertices(d.bone,h,0,2);else if(p instanceof e.MeshAttachment){var m=p;f=m.worldVerticesLength,h=e.Utils.setArraySize(r,f,0),m.computeWorldVertices(d,0,f,h,0,2)}if(null!=h)for(var v=0,g=h.length;v<g;v+=2){var _=h[v],y=h[v+1];o=Math.min(o,_),a=Math.min(a,y),s=Math.max(s,_),l=Math.max(l,y)}}}t.set(o,a),n.set(s-o,l-a)},t.prototype.update=function(e){this.time+=e},t}();e.Skeleton=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(r){var i=this.scale,o=new e.SkeletonData;o.name="";var a=new n(r);o.hash=a.readString(),o.version=a.readString(),o.x=a.readFloat(),o.y=a.readFloat(),o.width=a.readFloat(),o.height=a.readFloat();var s=a.readBoolean();s&&(o.fps=a.readFloat(),o.imagesPath=a.readString(),o.audioPath=a.readString());var l=0;l=a.readInt(!0);for(var c=0;c<l;c++)a.strings.push(a.readString());for(l=a.readInt(!0),c=0;c<l;c++){var u=a.readString(),d=0==c?null:o.bones[a.readInt(!0)];(p=new e.BoneData(c,u,d)).rotation=a.readFloat(),p.x=a.readFloat()*i,p.y=a.readFloat()*i,p.scaleX=a.readFloat(),p.scaleY=a.readFloat(),p.shearX=a.readFloat(),p.shearY=a.readFloat(),p.length=a.readFloat()*i,p.transformMode=t.TransformModeValues[a.readInt(!0)],p.skinRequired=a.readBoolean(),s&&e.Color.rgba8888ToColor(p.color,a.readInt32()),o.bones.push(p)}for(l=a.readInt(!0),c=0;c<l;c++){var f=a.readString(),h=o.bones[a.readInt(!0)],p=new e.SlotData(c,f,h);e.Color.rgba8888ToColor(p.color,a.readInt32());var m=a.readInt32();-1!=m&&e.Color.rgb888ToColor(p.darkColor=new e.Color,m),p.attachmentName=a.readStringRef(),p.blendMode=t.BlendModeValues[a.readInt(!0)],o.slots.push(p)}l=a.readInt(!0),c=0;for(var v=void 0;c<l;c++){(p=new e.IkConstraintData(a.readString())).order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0);for(var g=0;g<v;g++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.bones[a.readInt(!0)],p.mix=a.readFloat(),p.softness=a.readFloat()*i,p.bendDirection=a.readByte(),p.compress=a.readBoolean(),p.stretch=a.readBoolean(),p.uniform=a.readBoolean(),o.ikConstraints.push(p)}for(l=a.readInt(!0),c=0,v=void 0;c<l;c++){for((p=new e.TransformConstraintData(a.readString())).order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0),g=0;g<v;g++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.bones[a.readInt(!0)],p.local=a.readBoolean(),p.relative=a.readBoolean(),p.offsetRotation=a.readFloat(),p.offsetX=a.readFloat()*i,p.offsetY=a.readFloat()*i,p.offsetScaleX=a.readFloat(),p.offsetScaleY=a.readFloat(),p.offsetShearY=a.readFloat(),p.rotateMix=a.readFloat(),p.translateMix=a.readFloat(),p.scaleMix=a.readFloat(),p.shearMix=a.readFloat(),o.transformConstraints.push(p)}for(l=a.readInt(!0),c=0,v=void 0;c<l;c++){for((p=new e.PathConstraintData(a.readString())).order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0),g=0;g<v;g++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.slots[a.readInt(!0)],p.positionMode=t.PositionModeValues[a.readInt(!0)],p.spacingMode=t.SpacingModeValues[a.readInt(!0)],p.rotateMode=t.RotateModeValues[a.readInt(!0)],p.offsetRotation=a.readFloat(),p.position=a.readFloat(),p.positionMode==e.PositionMode.Fixed&&(p.position*=i),p.spacing=a.readFloat(),p.spacingMode!=e.SpacingMode.Length&&p.spacingMode!=e.SpacingMode.Fixed||(p.spacing*=i),p.rotateMix=a.readFloat(),p.translateMix=a.readFloat(),o.pathConstraints.push(p)}var _=this.readSkin(a,o,!0,s);for(null!=_&&(o.defaultSkin=_,o.skins.push(_)),c=o.skins.length,e.Utils.setArraySize(o.skins,l=c+a.readInt(!0));c<l;c++)o.skins[c]=this.readSkin(a,o,!1,s);for(l=this.linkedMeshes.length,c=0;c<l;c++){var y=this.linkedMeshes[c],b=null==y.skin?o.defaultSkin:o.findSkin(y.skin);if(null==b)throw new Error("Skin not found: "+y.skin);var x=b.getAttachment(y.slotIndex,y.parent);if(null==x)throw new Error("Parent mesh not found: "+y.parent);y.mesh.deformAttachment=y.inheritDeform?x:y.mesh,y.mesh.setParentMesh(x),y.mesh.updateUVs()}for(this.linkedMeshes.length=0,l=a.readInt(!0),c=0;c<l;c++)(p=new e.EventData(a.readStringRef())).intValue=a.readInt(!1),p.floatValue=a.readFloat(),p.stringValue=a.readString(),p.audioPath=a.readString(),null!=p.audioPath&&(p.volume=a.readFloat(),p.balance=a.readFloat()),o.events.push(p);for(l=a.readInt(!0),c=0;c<l;c++)o.animations.push(this.readAnimation(a,a.readString(),o));return o},t.prototype.readSkin=function(t,n,r,i){var o=null,a=0;if(r){if(0==(a=t.readInt(!0)))return null;o=new e.Skin("default")}else{(o=new e.Skin(t.readStringRef())).bones.length=t.readInt(!0);for(var s=0,l=o.bones.length;s<l;s++)o.bones[s]=n.bones[t.readInt(!0)];for(s=0,l=t.readInt(!0);s<l;s++)o.constraints.push(n.ikConstraints[t.readInt(!0)]);for(s=0,l=t.readInt(!0);s<l;s++)o.constraints.push(n.transformConstraints[t.readInt(!0)]);for(s=0,l=t.readInt(!0);s<l;s++)o.constraints.push(n.pathConstraints[t.readInt(!0)]);a=t.readInt(!0)}for(s=0;s<a;s++)for(var c=t.readInt(!0),u=0,d=t.readInt(!0);u<d;u++){var f=t.readStringRef(),h=this.readAttachment(t,n,o,c,f,i);null!=h&&o.setAttachment(c,f,h)}return o},t.prototype.readAttachment=function(n,i,o,a,s,l){var c=this.scale,u=n.readStringRef();null==u&&(u=s);var d=n.readByte();switch(t.AttachmentTypeValues[d]){case e.AttachmentType.Region:var f=n.readStringRef(),h=n.readFloat(),p=n.readFloat(),m=n.readFloat(),v=n.readFloat(),g=n.readFloat(),_=n.readFloat(),y=n.readFloat(),b=n.readInt32();null==f&&(f=u);var x=this.attachmentLoader.newRegionAttachment(o,u,f);return null==x?null:(x.path=f,x.x=p*c,x.y=m*c,x.scaleX=v,x.scaleY=g,x.rotation=h,x.width=_*c,x.height=y*c,e.Color.rgba8888ToColor(x.color,b),x.updateOffset(),x);case e.AttachmentType.BoundingBox:var w=n.readInt(!0),T=this.readVertices(n,w),A=(b=l?n.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,u));return null==A?null:(A.worldVerticesLength=w<<1,A.vertices=T.vertices,A.bones=T.bones,l&&e.Color.rgba8888ToColor(A.color,b),A);case e.AttachmentType.Mesh:f=n.readStringRef(),b=n.readInt32(),w=n.readInt(!0);var E=this.readFloatArray(n,w<<1,1),O=this.readShortArray(n),M=(T=this.readVertices(n,w),n.readInt(!0)),S=null;return _=0,y=0,l&&(S=this.readShortArray(n),_=n.readFloat(),y=n.readFloat()),null==f&&(f=u),null==(C=this.attachmentLoader.newMeshAttachment(o,u,f))?null:(C.path=f,e.Color.rgba8888ToColor(C.color,b),C.bones=T.bones,C.vertices=T.vertices,C.worldVerticesLength=w<<1,C.triangles=O,C.regionUVs=E,C.updateUVs(),C.hullLength=M<<1,l&&(C.edges=S,C.width=_*c,C.height=y*c),C);case e.AttachmentType.LinkedMesh:f=n.readStringRef(),b=n.readInt32();var C,R=n.readStringRef(),k=n.readStringRef(),P=n.readBoolean();return _=0,y=0,l&&(_=n.readFloat(),y=n.readFloat()),null==f&&(f=u),null==(C=this.attachmentLoader.newMeshAttachment(o,u,f))?null:(C.path=f,e.Color.rgba8888ToColor(C.color,b),l&&(C.width=_*c,C.height=y*c),this.linkedMeshes.push(new r(C,R,a,k,P)),C);case e.AttachmentType.Path:for(var L=n.readBoolean(),I=n.readBoolean(),F=(w=n.readInt(!0),T=this.readVertices(n,w),e.Utils.newArray(w/3,0)),D=0,N=F.length;D<N;D++)F[D]=n.readFloat()*c;return b=l?n.readInt32():0,null==(f=this.attachmentLoader.newPathAttachment(o,u))?null:(f.closed=L,f.constantSpeed=I,f.worldVerticesLength=w<<1,f.vertices=T.vertices,f.bones=T.bones,f.lengths=F,l&&e.Color.rgba8888ToColor(f.color,b),f);case e.AttachmentType.Point:h=n.readFloat(),p=n.readFloat(),m=n.readFloat(),b=l?n.readInt32():0;var z=this.attachmentLoader.newPointAttachment(o,u);return null==z?null:(z.x=p*c,z.y=m*c,z.rotation=h,l&&e.Color.rgba8888ToColor(z.color,b),z);case e.AttachmentType.Clipping:var j=n.readInt(!0),B=(w=n.readInt(!0),T=this.readVertices(n,w),b=l?n.readInt32():0,this.attachmentLoader.newClippingAttachment(o,u));return null==B?null:(B.endSlot=i.slots[j],B.worldVerticesLength=w<<1,B.vertices=T.vertices,B.bones=T.bones,l&&e.Color.rgba8888ToColor(B.color,b),B)}return null},t.prototype.readVertices=function(t,n){var r=new i,o=this.scale;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n<<1,o),r;for(var a=new Array,s=new Array,l=0;l<n;l++){var c=t.readInt(!0);s.push(c);for(var u=0;u<c;u++)s.push(t.readInt(!0)),a.push(t.readFloat()*o),a.push(t.readFloat()*o),a.push(t.readFloat())}return r.vertices=e.Utils.toFloatArray(a),r.bones=s,r},t.prototype.readFloatArray=function(e,t,n){var r=new Array(t);if(1==n)for(var i=0;i<t;i++)r[i]=e.readFloat();else for(i=0;i<t;i++)r[i]=e.readFloat()*n;return r},t.prototype.readShortArray=function(e){for(var t=e.readInt(!0),n=new Array(t),r=0;r<t;r++)n[r]=e.readShort();return n},t.prototype.readAnimation=function(n,r,i){for(var o=new Array,a=this.scale,s=0,l=new e.Color,c=new e.Color,u=0,d=n.readInt(!0);u<d;u++)for(var f=n.readInt(!0),h=0,p=n.readInt(!0);h<p;h++){var m=n.readByte(),v=n.readInt(!0);switch(m){case t.SLOT_ATTACHMENT:(b=new e.AttachmentTimeline(v)).slotIndex=f;for(var g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readStringRef());o.push(b),s=Math.max(s,b.frames[v-1]);break;case t.SLOT_COLOR:for((b=new e.ColorTimeline(v)).slotIndex=f,g=0;g<v;g++){var _=n.readFloat();e.Color.rgba8888ToColor(l,n.readInt32()),b.setFrame(g,_,l.r,l.g,l.b,l.a),g<v-1&&this.readCurve(n,g,b)}o.push(b),s=Math.max(s,b.frames[(v-1)*e.ColorTimeline.ENTRIES]);break;case t.SLOT_TWO_COLOR:for((b=new e.TwoColorTimeline(v)).slotIndex=f,g=0;g<v;g++)_=n.readFloat(),e.Color.rgba8888ToColor(l,n.readInt32()),e.Color.rgb888ToColor(c,n.readInt32()),b.setFrame(g,_,l.r,l.g,l.b,l.a,c.r,c.g,c.b),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.TwoColorTimeline.ENTRIES])}}for(u=0,d=n.readInt(!0);u<d;u++){var y=n.readInt(!0);for(h=0,p=n.readInt(!0);h<p;h++)switch(m=n.readByte(),v=n.readInt(!0),m){case t.BONE_ROTATE:for((b=new e.RotateTimeline(v)).boneIndex=y,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat()),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.RotateTimeline.ENTRIES]);break;case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:var b=void 0,x=1;for(m==t.BONE_SCALE?b=new e.ScaleTimeline(v):m==t.BONE_SHEAR?b=new e.ShearTimeline(v):(b=new e.TranslateTimeline(v),x=a),b.boneIndex=y,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat()*x,n.readFloat()*x),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.TranslateTimeline.ENTRIES])}}for(u=0,d=n.readInt(!0);u<d;u++){var w=n.readInt(!0);for(v=n.readInt(!0),(b=new e.IkConstraintTimeline(v)).ikConstraintIndex=w,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat(),n.readFloat()*a,n.readByte(),n.readBoolean(),n.readBoolean()),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.IkConstraintTimeline.ENTRIES])}for(u=0,d=n.readInt(!0);u<d;u++){for(w=n.readInt(!0),v=n.readInt(!0),(b=new e.TransformConstraintTimeline(v)).transformConstraintIndex=w,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat()),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.TransformConstraintTimeline.ENTRIES])}for(u=0,d=n.readInt(!0);u<d;u++){w=n.readInt(!0);var T=i.pathConstraints[w];for(h=0,p=n.readInt(!0);h<p;h++)switch(m=n.readByte(),v=n.readInt(!0),m){case t.PATH_POSITION:case t.PATH_SPACING:for(b=void 0,x=1,m==t.PATH_SPACING?(b=new e.PathConstraintSpacingTimeline(v),T.spacingMode!=e.SpacingMode.Length&&T.spacingMode!=e.SpacingMode.Fixed||(x=a)):(b=new e.PathConstraintPositionTimeline(v),T.positionMode==e.PositionMode.Fixed&&(x=a)),b.pathConstraintIndex=w,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat()*x),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.PathConstraintPositionTimeline.ENTRIES]);break;case t.PATH_MIX:for((b=new e.PathConstraintMixTimeline(v)).pathConstraintIndex=w,g=0;g<v;g++)b.setFrame(g,n.readFloat(),n.readFloat(),n.readFloat()),g<v-1&&this.readCurve(n,g,b);o.push(b),s=Math.max(s,b.frames[(v-1)*e.PathConstraintMixTimeline.ENTRIES])}}for(u=0,d=n.readInt(!0);u<d;u++){var A=i.skins[n.readInt(!0)];for(h=0,p=n.readInt(!0);h<p;h++){f=n.readInt(!0);for(var E=0,O=n.readInt(!0);E<O;E++){var M=A.getAttachment(f,n.readStringRef()),S=null!=M.bones,C=M.vertices,R=S?C.length/3*2:C.length;for(v=n.readInt(!0),(b=new e.DeformTimeline(v)).slotIndex=f,b.attachment=M,g=0;g<v;g++){_=n.readFloat();var k=void 0,P=n.readInt(!0);if(0==P)k=S?e.Utils.newFloatArray(R):C;else{k=e.Utils.newFloatArray(R);var L=n.readInt(!0);if(P+=L,1==a)for(var I=L;I<P;I++)k[I]=n.readFloat();else for(I=L;I<P;I++)k[I]=n.readFloat()*a;if(!S){I=0;for(var F=k.length;I<F;I++)k[I]+=C[I]}}b.setFrame(g,_,k),g<v-1&&this.readCurve(n,g,b)}o.push(b),s=Math.max(s,b.frames[v-1])}}}var D=n.readInt(!0);if(D>0){b=new e.DrawOrderTimeline(D);var N=i.slots.length;for(u=0;u<D;u++){_=n.readFloat();var z=n.readInt(!0),j=e.Utils.newArray(N,0);for(h=N-1;h>=0;h--)j[h]=-1;var B=e.Utils.newArray(N-z,0),U=0,V=0;for(h=0;h<z;h++){for(f=n.readInt(!0);U!=f;)B[V++]=U++;j[U+n.readInt(!0)]=U++}for(;U<N;)B[V++]=U++;for(h=N-1;h>=0;h--)-1==j[h]&&(j[h]=B[--V]);b.setFrame(u,_,j)}o.push(b),s=Math.max(s,b.frames[D-1])}var H=n.readInt(!0);if(H>0){for(b=new e.EventTimeline(H),u=0;u<H;u++){_=n.readFloat();var G=i.events[n.readInt(!0)],W=new e.Event(_,G);W.intValue=n.readInt(!1),W.floatValue=n.readFloat(),W.stringValue=n.readBoolean()?n.readString():G.stringValue,null!=W.data.audioPath&&(W.volume=n.readFloat(),W.balance=n.readFloat()),b.setFrame(u,W)}o.push(b),s=Math.max(s,b.frames[H-1])}return new e.Animation(r,o,s)},t.prototype.readCurve=function(e,n,r){switch(e.readByte()){case t.CURVE_STEPPED:r.setStepped(n);break;case t.CURVE_BEZIER:this.setCurve(r,n,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat())}},t.prototype.setCurve=function(e,t,n,r,i,o){e.setCurve(t,n,r,i,o)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[e.TransformMode.Normal,e.TransformMode.OnlyTranslation,e.TransformMode.NoRotationOrReflection,e.TransformMode.NoScale,e.TransformMode.NoScaleOrReflection],t.PositionModeValues=[e.PositionMode.Fixed,e.PositionMode.Percent],t.SpacingModeValues=[e.SpacingMode.Length,e.SpacingMode.Fixed,e.SpacingMode.Percent],t.RotateModeValues=[e.RotateMode.Tangent,e.RotateMode.Chain,e.RotateMode.ChainScale],t.BlendModeValues=[e.BlendMode.Normal,e.BlendMode.Additive,e.BlendMode.Multiply,e.BlendMode.Screen],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}();e.SkeletonBinary=t;var n=function(){function e(e,t,n,r){void 0===t&&(t=new Array),void 0===n&&(n=0),void 0===r&&(r=new DataView(e.buffer)),this.strings=t,this.index=n,this.buffer=r}return e.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},e.prototype.readShort=function(){var e=this.buffer.getInt16(this.index);return this.index+=2,e},e.prototype.readInt32=function(){var e=this.buffer.getInt32(this.index);return this.index+=4,e},e.prototype.readInt=function(e){var t=this.readByte(),n=127&t;return 0!=(128&t)&&(n|=(127&(t=this.readByte()))<<7,0!=(128&t)&&(n|=(127&(t=this.readByte()))<<14,0!=(128&t)&&(n|=(127&(t=this.readByte()))<<21,0!=(128&t)&&(n|=(127&(t=this.readByte()))<<28)))),e?n:n>>>1^-(1&n)},e.prototype.readStringRef=function(){var e=this.readInt(!0);return 0==e?null:this.strings[e-1]},e.prototype.readString=function(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;for(var t="",n=0;n<e;){var r=this.readByte();switch(r>>4){case 12:case 13:t+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:t+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:t+=String.fromCharCode(r),n++}}return t},e.prototype.readFloat=function(){var e=this.buffer.getFloat32(this.index);return this.index+=4,e},e.prototype.readBoolean=function(){return 0!=this.readByte()},e}(),r=function(e,t,n,r,i){this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=r,this.inheritDeform=i},i=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.bones=e,this.vertices=t}}(e.spine||(e.spine={})),function(e){var t=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new e.Pool((function(){return e.Utils.newFloatArray(16)}))}return t.prototype.update=function(t,n){if(null==t)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,i=this.polygons,o=this.polygonPool,a=t.slots,s=a.length;r.length=0,o.freeAll(i),i.length=0;for(var l=0;l<s;l++){var c=a[l];if(c.bone.active){var u=c.getAttachment();if(u instanceof e.BoundingBoxAttachment){var d=u;r.push(d);var f=o.obtain();f.length!=d.worldVerticesLength&&(f=e.Utils.newFloatArray(d.worldVerticesLength)),i.push(f),d.computeWorldVertices(c,0,d.worldVerticesLength,f,0,2)}}}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,o=0,a=i.length;o<a;o++)for(var s=i[o],l=s,c=0,u=s.length;c<u;c+=2){var d=l[c],f=l[c+1];e=Math.min(e,d),t=Math.min(t,f),n=Math.max(n,d),r=Math.max(r,f)}this.minX=e,this.minY=t,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},t.prototype.aabbIntersectsSegment=function(e,t,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(e<=i&&n<=i||t<=o&&r<=o||e>=a&&n>=a||t>=s&&r>=s)return!1;var l=(r-t)/(n-e),c=l*(i-e)+t;if(c>o&&c<s)return!0;if((c=l*(a-e)+t)>o&&c<s)return!0;var u=(o-t)/l+e;return u>i&&u<a||(u=(s-t)/l+e)>i&&u<a},t.prototype.aabbIntersectsSkeleton=function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},t.prototype.containsPoint=function(e,t){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],e,t))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(e,t,n){for(var r=e,i=e.length,o=i-2,a=!1,s=0;s<i;s+=2){var l=r[s+1],c=r[o+1];if(l<n&&c>=n||c<n&&l>=n){var u=r[s];u+(n-l)/(c-l)*(r[o]-u)<t&&(a=!a)}o=s}return a},t.prototype.intersectsSegment=function(e,t,n,r){for(var i=this.polygons,o=0,a=i.length;o<a;o++)if(this.intersectsSegmentPolygon(i[o],e,t,n,r))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(e,t,n,r,i){for(var o=e,a=e.length,s=t-r,l=n-i,c=t*i-n*r,u=o[a-2],d=o[a-1],f=0;f<a;f+=2){var h=o[f],p=o[f+1],m=u*p-d*h,v=u-h,g=d-p,_=s*g-l*v,y=(c*v-s*m)/_;if((y>=u&&y<=h||y>=h&&y<=u)&&(y>=t&&y<=r||y>=r&&y<=t)){var b=(c*g-l*m)/_;if((b>=d&&b<=p||b>=p&&b<=d)&&(b>=n&&b<=i||b>=i&&b<=n))return!0}u=h,d=p}return!1},t.prototype.getPolygon=function(e){if(null==e)throw new Error("boundingBox cannot be null.");var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();e.SkeletonBounds=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(){this.triangulator=new e.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return t.prototype.clipStart=function(n,r){if(null!=this.clipAttachment)return 0;this.clipAttachment=r;var i=r.worldVerticesLength,o=e.Utils.setArraySize(this.clippingPolygon,i);r.computeWorldVertices(n,0,i,o,0,2);var a=this.clippingPolygon;t.makeClockwise(a);for(var s=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),l=0,c=s.length;l<c;l++){var u=s[l];t.makeClockwise(u),u.push(u[0]),u.push(u[1])}return s.length},t.prototype.clipEndWithSlot=function(e){null!=this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()},t.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},t.prototype.isClipping=function(){return null!=this.clipAttachment},t.prototype.clipTriangles=function(t,n,r,i,o,a,s,l){var c=this.clipOutput,u=this.clippedVertices,d=this.clippedTriangles,f=this.clippingPolygons,h=this.clippingPolygons.length,p=l?12:8,m=0;u.length=0,d.length=0;e:for(var v=0;v<i;v+=3)for(var g=r[v]<<1,_=t[g],y=t[g+1],b=o[g],x=o[g+1],w=t[g=r[v+1]<<1],T=t[g+1],A=o[g],E=o[g+1],O=t[g=r[v+2]<<1],M=t[g+1],S=o[g],C=o[g+1],R=0;R<h;R++){var k=u.length;if(!this.clip(_,y,w,T,O,M,f[R],c)){(j=e.Utils.setArraySize(u,k+3*p))[k]=_,j[k+1]=y,j[k+2]=a.r,j[k+3]=a.g,j[k+4]=a.b,j[k+5]=a.a,l?(j[k+6]=b,j[k+7]=x,j[k+8]=s.r,j[k+9]=s.g,j[k+10]=s.b,j[k+11]=s.a,j[k+12]=w,j[k+13]=T,j[k+14]=a.r,j[k+15]=a.g,j[k+16]=a.b,j[k+17]=a.a,j[k+18]=A,j[k+19]=E,j[k+20]=s.r,j[k+21]=s.g,j[k+22]=s.b,j[k+23]=s.a,j[k+24]=O,j[k+25]=M,j[k+26]=a.r,j[k+27]=a.g,j[k+28]=a.b,j[k+29]=a.a,j[k+30]=S,j[k+31]=C,j[k+32]=s.r,j[k+33]=s.g,j[k+34]=s.b,j[k+35]=s.a):(j[k+6]=b,j[k+7]=x,j[k+8]=w,j[k+9]=T,j[k+10]=a.r,j[k+11]=a.g,j[k+12]=a.b,j[k+13]=a.a,j[k+14]=A,j[k+15]=E,j[k+16]=O,j[k+17]=M,j[k+18]=a.r,j[k+19]=a.g,j[k+20]=a.b,j[k+21]=a.a,j[k+22]=S,j[k+23]=C),k=d.length,(q=e.Utils.setArraySize(d,k+3))[k]=m,q[k+1]=m+1,q[k+2]=m+2,m+=3;continue e}var P=c.length;if(0!=P){for(var L=T-M,I=O-w,F=_-O,D=1/(L*F+I*(y-M)),N=P>>1,z=this.clipOutput,j=e.Utils.setArraySize(u,k+N*p),B=0;B<P;B+=2){var U=z[B],V=z[B+1];j[k]=U,j[k+1]=V,j[k+2]=a.r,j[k+3]=a.g,j[k+4]=a.b,j[k+5]=a.a;var H=U-O,G=V-M,W=(L*H+I*G)*D,X=((M-y)*H+F*G)*D,Y=1-W-X;j[k+6]=b*W+A*X+S*Y,j[k+7]=x*W+E*X+C*Y,l&&(j[k+8]=s.r,j[k+9]=s.g,j[k+10]=s.b,j[k+11]=s.a),k+=p}k=d.length;var q=e.Utils.setArraySize(d,k+3*(N-2));for(N--,B=1;B<N;B++)q[k]=m,q[k+1]=m+B,q[k+2]=m+B+1,k+=3;m+=N+1}}},t.prototype.clip=function(e,t,n,r,i,o,a,s){var l=s,c=!1,u=null;a.length%4>=2?(u=s,s=this.scratch):u=this.scratch,u.length=0,u.push(e),u.push(t),u.push(n),u.push(r),u.push(i),u.push(o),u.push(e),u.push(t),s.length=0;for(var d=a,f=a.length-4,h=0;;h+=2){for(var p=d[h],m=d[h+1],v=d[h+2],g=d[h+3],_=p-v,y=m-g,b=u,x=u.length-2,w=s.length,T=0;T<x;T+=2){var A=b[T],E=b[T+1],O=b[T+2],M=b[T+3],S=_*(M-g)-y*(O-v)>0;if(_*(E-g)-y*(A-v)>0){if(S){s.push(O),s.push(M);continue}var C=(k=M-E)*(v-p)-(P=O-A)*(g-m);if(Math.abs(C)>1e-6){var R=(P*(m-E)-k*(p-A))/C;s.push(p+(v-p)*R),s.push(m+(g-m)*R)}else s.push(p),s.push(m)}else if(S){var k,P;C=(k=M-E)*(v-p)-(P=O-A)*(g-m),Math.abs(C)>1e-6?(R=(P*(m-E)-k*(p-A))/C,s.push(p+(v-p)*R),s.push(m+(g-m)*R)):(s.push(p),s.push(m)),s.push(O),s.push(M)}c=!0}if(w==s.length)return l.length=0,!0;if(s.push(s[0]),s.push(s[1]),h==f)break;var L=s;(s=u).length=0,u=L}if(l!=s){l.length=0,h=0;for(var I=s.length-2;h<I;h++)l[h]=s[h]}else l.length=l.length-2;return c},t.makeClockwise=function(e){for(var t=e,n=e.length,r=t[n-2]*t[1]-t[0]*t[n-1],i=0,o=0,a=0,s=0,l=n-3;s<l;s+=2)i=t[s],o=t[s+1],a=t[s+2],r+=i*t[s+3]-a*o;if(!(r<0))for(s=0,l=n>>1;s<l;s+=2){var c=t[s],u=t[s+1],d=n-2-s;t[s]=t[d],t[s+1]=t[d+1],t[d]=c,t[d+1]=u}},t}();e.SkeletonClipping=t}(e.spine||(e.spine={})),function(e){var t=function(){function e(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return e.prototype.findBone=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findBoneIndex=function(e){if(null==e)throw new Error("boneName cannot be null.");for(var t=this.bones,n=0,r=t.length;n<r;n++)if(t[n].name==e)return n;return-1},e.prototype.findSlot=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findSlotIndex=function(e){if(null==e)throw new Error("slotName cannot be null.");for(var t=this.slots,n=0,r=t.length;n<r;n++)if(t[n].name==e)return n;return-1},e.prototype.findSkin=function(e){if(null==e)throw new Error("skinName cannot be null.");for(var t=this.skins,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findEvent=function(e){if(null==e)throw new Error("eventDataName cannot be null.");for(var t=this.events,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findAnimation=function(e){if(null==e)throw new Error("animationName cannot be null.");for(var t=this.animations,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findIkConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.ikConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findTransformConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.transformConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findPathConstraint=function(e){if(null==e)throw new Error("constraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++){var i=t[n];if(i.name==e)return i}return null},e.prototype.findPathConstraintIndex=function(e){if(null==e)throw new Error("pathConstraintName cannot be null.");for(var t=this.pathConstraints,n=0,r=t.length;n<r;n++)if(t[n].name==e)return n;return-1},e}();e.SkeletonData=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return t.prototype.readSkeletonData=function(n){var r=this.scale,i=new e.SkeletonData,o="string"==typeof n?JSON.parse(n):n,a=o.skeleton;if(null!=a&&(i.hash=a.hash,i.version=a.spine,i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height,i.fps=a.fps,i.imagesPath=a.images),o.bones)for(var s=0;s<o.bones.length;s++){var l=o.bones[s],c=null,u=this.getValue(l,"parent",null);if(null!=u&&null==(c=i.findBone(u)))throw new Error("Parent bone not found: "+u);(p=new e.BoneData(i.bones.length,l.name,c)).length=this.getValue(l,"length",0)*r,p.x=this.getValue(l,"x",0)*r,p.y=this.getValue(l,"y",0)*r,p.rotation=this.getValue(l,"rotation",0),p.scaleX=this.getValue(l,"scaleX",1),p.scaleY=this.getValue(l,"scaleY",1),p.shearX=this.getValue(l,"shearX",0),p.shearY=this.getValue(l,"shearY",0),p.transformMode=t.transformModeFromString(this.getValue(l,"transform","normal")),p.skinRequired=this.getValue(l,"skin",!1),i.bones.push(p)}if(o.slots)for(s=0;s<o.slots.length;s++){var d=(O=o.slots[s]).name,f=O.bone,h=i.findBone(f);if(null==h)throw new Error("Slot bone not found: "+f);var p=new e.SlotData(i.slots.length,d,h),m=this.getValue(O,"color",null);null!=m&&p.color.setFromString(m);var v=this.getValue(O,"dark",null);null!=v&&(p.darkColor=new e.Color(1,1,1,1),p.darkColor.setFromString(v)),p.attachmentName=this.getValue(O,"attachment",null),p.blendMode=t.blendModeFromString(this.getValue(O,"blend","normal")),i.slots.push(p)}if(o.ik)for(s=0;s<o.ik.length;s++){var g=o.ik[s];(p=new e.IkConstraintData(g.name)).order=this.getValue(g,"order",0),p.skinRequired=this.getValue(g,"skin",!1);for(var _=0;_<g.bones.length;_++){if(f=g.bones[_],null==(T=i.findBone(f)))throw new Error("IK bone not found: "+f);p.bones.push(T)}var y=g.target;if(p.target=i.findBone(y),null==p.target)throw new Error("IK target bone not found: "+y);p.mix=this.getValue(g,"mix",1),p.softness=this.getValue(g,"softness",0)*r,p.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,p.compress=this.getValue(g,"compress",!1),p.stretch=this.getValue(g,"stretch",!1),p.uniform=this.getValue(g,"uniform",!1),i.ikConstraints.push(p)}if(o.transform)for(s=0;s<o.transform.length;s++){for(g=o.transform[s],(p=new e.TransformConstraintData(g.name)).order=this.getValue(g,"order",0),p.skinRequired=this.getValue(g,"skin",!1),_=0;_<g.bones.length;_++){if(f=g.bones[_],null==(T=i.findBone(f)))throw new Error("Transform constraint bone not found: "+f);p.bones.push(T)}if(y=g.target,p.target=i.findBone(y),null==p.target)throw new Error("Transform constraint target bone not found: "+y);p.local=this.getValue(g,"local",!1),p.relative=this.getValue(g,"relative",!1),p.offsetRotation=this.getValue(g,"rotation",0),p.offsetX=this.getValue(g,"x",0)*r,p.offsetY=this.getValue(g,"y",0)*r,p.offsetScaleX=this.getValue(g,"scaleX",0),p.offsetScaleY=this.getValue(g,"scaleY",0),p.offsetShearY=this.getValue(g,"shearY",0),p.rotateMix=this.getValue(g,"rotateMix",1),p.translateMix=this.getValue(g,"translateMix",1),p.scaleMix=this.getValue(g,"scaleMix",1),p.shearMix=this.getValue(g,"shearMix",1),i.transformConstraints.push(p)}if(o.path)for(s=0;s<o.path.length;s++){for(g=o.path[s],(p=new e.PathConstraintData(g.name)).order=this.getValue(g,"order",0),p.skinRequired=this.getValue(g,"skin",!1),_=0;_<g.bones.length;_++){if(f=g.bones[_],null==(T=i.findBone(f)))throw new Error("Transform constraint bone not found: "+f);p.bones.push(T)}if(y=g.target,p.target=i.findSlot(y),null==p.target)throw new Error("Path target slot not found: "+y);p.positionMode=t.positionModeFromString(this.getValue(g,"positionMode","percent")),p.spacingMode=t.spacingModeFromString(this.getValue(g,"spacingMode","length")),p.rotateMode=t.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),p.offsetRotation=this.getValue(g,"rotation",0),p.position=this.getValue(g,"position",0),p.positionMode==e.PositionMode.Fixed&&(p.position*=r),p.spacing=this.getValue(g,"spacing",0),p.spacingMode!=e.SpacingMode.Length&&p.spacingMode!=e.SpacingMode.Fixed||(p.spacing*=r),p.rotateMix=this.getValue(g,"rotateMix",1),p.translateMix=this.getValue(g,"translateMix",1),i.pathConstraints.push(p)}if(o.skins)for(s=0;s<o.skins.length;s++){var b=o.skins[s],x=new e.Skin(b.name);if(b.bones)for(var w=0;w<b.bones.length;w++){var T;if(null==(T=i.findBone(b.bones[w])))throw new Error("Skin bone not found: "+b.bones[s]);x.bones.push(T)}if(b.ik)for(w=0;w<b.ik.length;w++){if(null==(A=i.findIkConstraint(b.ik[w])))throw new Error("Skin IK constraint not found: "+b.ik[s]);x.constraints.push(A)}if(b.transform)for(w=0;w<b.transform.length;w++){if(null==(A=i.findTransformConstraint(b.transform[w])))throw new Error("Skin transform constraint not found: "+b.transform[s]);x.constraints.push(A)}if(b.path)for(w=0;w<b.path.length;w++){var A;if(null==(A=i.findPathConstraint(b.path[w])))throw new Error("Skin path constraint not found: "+b.path[s]);x.constraints.push(A)}for(var d in b.attachments){var E=i.findSlot(d);if(null==E)throw new Error("Slot not found: "+d);var O=b.attachments[d];for(var M in O){var S=this.readAttachment(O[M],x,E.index,M,i);null!=S&&x.setAttachment(E.index,M,S)}}i.skins.push(x),"default"==x.name&&(i.defaultSkin=x)}s=0;for(var C=this.linkedMeshes.length;s<C;s++){var R=this.linkedMeshes[s];if(null==(x=null==R.skin?i.defaultSkin:i.findSkin(R.skin)))throw new Error("Skin not found: "+R.skin);var k=x.getAttachment(R.slotIndex,R.parent);if(null==k)throw new Error("Parent mesh not found: "+R.parent);R.mesh.deformAttachment=R.inheritDeform?k:R.mesh,R.mesh.setParentMesh(k),R.mesh.updateUVs()}if(this.linkedMeshes.length=0,o.events)for(var P in o.events){var L=o.events[P];(p=new e.EventData(P)).intValue=this.getValue(L,"int",0),p.floatValue=this.getValue(L,"float",0),p.stringValue=this.getValue(L,"string",""),p.audioPath=this.getValue(L,"audio",null),null!=p.audioPath&&(p.volume=this.getValue(L,"volume",1),p.balance=this.getValue(L,"balance",0)),i.events.push(p)}if(o.animations)for(var I in o.animations){var F=o.animations[I];this.readAnimation(F,I,i)}return i},t.prototype.readAttachment=function(t,r,i,o,a){var s=this.scale;switch(o=this.getValue(t,"name",o),this.getValue(t,"type","region")){case"region":var l=this.getValue(t,"path",o),c=this.attachmentLoader.newRegionAttachment(r,o,l);return null==c?null:(c.path=l,c.x=this.getValue(t,"x",0)*s,c.y=this.getValue(t,"y",0)*s,c.scaleX=this.getValue(t,"scaleX",1),c.scaleY=this.getValue(t,"scaleY",1),c.rotation=this.getValue(t,"rotation",0),c.width=t.width*s,c.height=t.height*s,null!=(y=this.getValue(t,"color",null))&&c.color.setFromString(y),c.updateOffset(),c);case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(r,o);return null==u?null:(this.readVertices(t,u,t.vertexCount<<1),null!=(y=this.getValue(t,"color",null))&&u.color.setFromString(y),u);case"mesh":case"linkedmesh":l=this.getValue(t,"path",o);var d=this.attachmentLoader.newMeshAttachment(r,o,l);if(null==d)return null;d.path=l,null!=(y=this.getValue(t,"color",null))&&d.color.setFromString(y),d.width=this.getValue(t,"width",0)*s,d.height=this.getValue(t,"height",0)*s;var f=this.getValue(t,"parent",null);if(null!=f)return this.linkedMeshes.push(new n(d,this.getValue(t,"skin",null),i,f,this.getValue(t,"deform",!0))),d;var h=t.uvs;return this.readVertices(t,d,h.length),d.triangles=t.triangles,d.regionUVs=h,d.updateUVs(),d.edges=this.getValue(t,"edges",null),d.hullLength=2*this.getValue(t,"hull",0),d;case"path":if(null==(l=this.attachmentLoader.newPathAttachment(r,o)))return null;l.closed=this.getValue(t,"closed",!1),l.constantSpeed=this.getValue(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,l,p<<1);for(var m=e.Utils.newArray(p/3,0),v=0;v<t.lengths.length;v++)m[v]=t.lengths[v]*s;return l.lengths=m,null!=(y=this.getValue(t,"color",null))&&l.color.setFromString(y),l;case"point":var g=this.attachmentLoader.newPointAttachment(r,o);return null==g?null:(g.x=this.getValue(t,"x",0)*s,g.y=this.getValue(t,"y",0)*s,g.rotation=this.getValue(t,"rotation",0),null!=(y=this.getValue(t,"color",null))&&g.color.setFromString(y),g);case"clipping":var _=this.attachmentLoader.newClippingAttachment(r,o);if(null==_)return null;var y,b=this.getValue(t,"end",null);if(null!=b){var x=a.findSlot(b);if(null==x)throw new Error("Clipping end slot not found: "+b);_.endSlot=x}return p=t.vertexCount,this.readVertices(t,_,p<<1),null!=(y=this.getValue(t,"color",null))&&_.color.setFromString(y),_}return null},t.prototype.readVertices=function(t,n,r){var i=this.scale;n.worldVerticesLength=r;var o=t.vertices;if(r!=o.length){var a=new Array,s=new Array;for(d=0,f=o.length;d<f;){var l=o[d++];s.push(l);for(var c=d+4*l;d<c;d+=4)s.push(o[d]),a.push(o[d+1]*i),a.push(o[d+2]*i),a.push(o[d+3])}n.bones=s,n.vertices=e.Utils.toFloatArray(a)}else{var u=e.Utils.toFloatArray(o);if(1!=i)for(var d=0,f=o.length;d<f;d++)u[d]*=i;n.vertices=u}},t.prototype.readAnimation=function(t,n,r){var i=this.scale,o=new Array,a=0;if(t.slots)for(var s in t.slots){var l=t.slots[s];if(-1==(Q=r.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var c in l){var u=l[c];if("attachment"==c){(b=new e.AttachmentTimeline(u.length)).slotIndex=Q;for(var d=0,f=0;f<u.length;f++){var h=u[f];b.setFrame(d++,this.getValue(h,"time",0),h.name)}o.push(b),a=Math.max(a,b.frames[b.getFrameCount()-1])}else if("color"==c){for((b=new e.ColorTimeline(u.length)).slotIndex=Q,d=0,f=0;f<u.length;f++){h=u[f];var p=new e.Color;p.setFromString(h.color),b.setFrame(d,this.getValue(h,"time",0),p.r,p.g,p.b,p.a),this.readCurve(h,b,d),d++}o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.ColorTimeline.ENTRIES])}else{if("twoColor"!=c)throw new Error("Invalid timeline type for a slot: "+c+" ("+s+")");for((b=new e.TwoColorTimeline(u.length)).slotIndex=Q,d=0,f=0;f<u.length;f++){h=u[f];var m=new e.Color,v=new e.Color;m.setFromString(h.light),v.setFromString(h.dark),b.setFrame(d,this.getValue(h,"time",0),m.r,m.g,m.b,m.a,v.r,v.g,v.b),this.readCurve(h,b,d),d++}o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var g in t.bones){var _=t.bones[g],y=r.findBoneIndex(g);if(-1==y)throw new Error("Bone not found: "+g);for(var c in _)if(u=_[c],"rotate"===c){for((b=new e.RotateTimeline(u.length)).boneIndex=y,d=0,f=0;f<u.length;f++)h=u[f],b.setFrame(d,this.getValue(h,"time",0),this.getValue(h,"angle",0)),this.readCurve(h,b,d),d++;o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.RotateTimeline.ENTRIES])}else{if("translate"!==c&&"scale"!==c&&"shear"!==c)throw new Error("Invalid timeline type for a bone: "+c+" ("+g+")");var b=null,x=1,w=0;for("scale"===c?(b=new e.ScaleTimeline(u.length),w=1):"shear"===c?b=new e.ShearTimeline(u.length):(b=new e.TranslateTimeline(u.length),x=i),b.boneIndex=y,d=0,f=0;f<u.length;f++){h=u[f];var T=this.getValue(h,"x",w),A=this.getValue(h,"y",w);b.setFrame(d,this.getValue(h,"time",0),T*x,A*x),this.readCurve(h,b,d),d++}o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.TranslateTimeline.ENTRIES])}}if(t.ik)for(var E in t.ik){var O=t.ik[E],M=r.findIkConstraint(E);for((b=new e.IkConstraintTimeline(O.length)).ikConstraintIndex=r.ikConstraints.indexOf(M),d=0,f=0;f<O.length;f++)h=O[f],b.setFrame(d,this.getValue(h,"time",0),this.getValue(h,"mix",1),this.getValue(h,"softness",0)*i,this.getValue(h,"bendPositive",!0)?1:-1,this.getValue(h,"compress",!1),this.getValue(h,"stretch",!1)),this.readCurve(h,b,d),d++;o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var E in t.transform){for(O=t.transform[E],M=r.findTransformConstraint(E),(b=new e.TransformConstraintTimeline(O.length)).transformConstraintIndex=r.transformConstraints.indexOf(M),d=0,f=0;f<O.length;f++)h=O[f],b.setFrame(d,this.getValue(h,"time",0),this.getValue(h,"rotateMix",1),this.getValue(h,"translateMix",1),this.getValue(h,"scaleMix",1),this.getValue(h,"shearMix",1)),this.readCurve(h,b,d),d++;o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.TransformConstraintTimeline.ENTRIES])}if(t.path)for(var E in t.path){O=t.path[E];var S=r.findPathConstraintIndex(E);if(-1==S)throw new Error("Path constraint not found: "+E);var C=r.pathConstraints[S];for(var c in O)if(u=O[c],"position"===c||"spacing"===c){for(b=null,x=1,"spacing"===c?(b=new e.PathConstraintSpacingTimeline(u.length),C.spacingMode!=e.SpacingMode.Length&&C.spacingMode!=e.SpacingMode.Fixed||(x=i)):(b=new e.PathConstraintPositionTimeline(u.length),C.positionMode==e.PositionMode.Fixed&&(x=i)),b.pathConstraintIndex=S,d=0,f=0;f<u.length;f++)h=u[f],b.setFrame(d,this.getValue(h,"time",0),this.getValue(h,c,0)*x),this.readCurve(h,b,d),d++;o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===c){for((b=new e.PathConstraintMixTimeline(u.length)).pathConstraintIndex=S,d=0,f=0;f<u.length;f++)h=u[f],b.setFrame(d,this.getValue(h,"time",0),this.getValue(h,"rotateMix",1),this.getValue(h,"translateMix",1)),this.readCurve(h,b,d),d++;o.push(b),a=Math.max(a,b.frames[(b.getFrameCount()-1)*e.PathConstraintMixTimeline.ENTRIES])}}if(t.deform)for(var R in t.deform){var k=t.deform[R],P=r.findSkin(R);if(null==P)throw new Error("Skin not found: "+R);for(var s in k){if(l=k[s],-1==(Q=r.findSlotIndex(s)))throw new Error("Slot not found: "+l.name);for(var c in l){u=l[c];var L=P.getAttachment(Q,c);if(null==L)throw new Error("Deform attachment not found: "+u.name);var I=null!=L.bones,F=L.vertices,D=I?F.length/3*2:F.length;(b=new e.DeformTimeline(u.length)).slotIndex=Q,b.attachment=L,d=0;for(var N=0;N<u.length;N++){h=u[N];var z=void 0,j=this.getValue(h,"vertices",null);if(null==j)z=I?e.Utils.newFloatArray(D):F;else{z=e.Utils.newFloatArray(D);var B=this.getValue(h,"offset",0);if(e.Utils.arrayCopy(j,0,z,B,j.length),1!=i)for(var U=(f=B)+j.length;f<U;f++)z[f]*=i;if(!I)for(f=0;f<D;f++)z[f]+=F[f]}b.setFrame(d,this.getValue(h,"time",0),z),this.readCurve(h,b,d),d++}o.push(b),a=Math.max(a,b.frames[b.getFrameCount()-1])}}}var V=t.drawOrder;if(null==V&&(V=t.draworder),null!=V){b=new e.DrawOrderTimeline(V.length);var H=r.slots.length;for(d=0,N=0;N<V.length;N++){var G=V[N],W=null,X=this.getValue(G,"offsets",null);if(null!=X){W=e.Utils.newArray(H,-1);var Y=e.Utils.newArray(H-X.length,0),q=0,K=0;for(f=0;f<X.length;f++){var Q,J=X[f];if(-1==(Q=r.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;q!=Q;)Y[K++]=q++;W[q+J.offset]=q++}for(;q<H;)Y[K++]=q++;for(f=H-1;f>=0;f--)-1==W[f]&&(W[f]=Y[--K])}b.setFrame(d++,this.getValue(G,"time",0),W)}o.push(b),a=Math.max(a,b.frames[b.getFrameCount()-1])}if(t.events){for(b=new e.EventTimeline(t.events.length),d=0,f=0;f<t.events.length;f++){var Z=t.events[f],$=r.findEvent(Z.name);if(null==$)throw new Error("Event not found: "+Z.name);var ee=new e.Event(e.Utils.toSinglePrecision(this.getValue(Z,"time",0)),$);ee.intValue=this.getValue(Z,"int",$.intValue),ee.floatValue=this.getValue(Z,"float",$.floatValue),ee.stringValue=this.getValue(Z,"string",$.stringValue),null!=ee.data.audioPath&&(ee.volume=this.getValue(Z,"volume",1),ee.balance=this.getValue(Z,"balance",0)),b.setFrame(d++,ee)}o.push(b),a=Math.max(a,b.frames[b.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new e.Animation(n,o,a))},t.prototype.readCurve=function(e,t,n){if(e.hasOwnProperty("curve"))if("stepped"==e.curve)t.setStepped(n);else{var r=e.curve;t.setCurve(n,r,this.getValue(e,"c2",0),this.getValue(e,"c3",1),this.getValue(e,"c4",1))}},t.prototype.getValue=function(e,t,n){return void 0!==e[t]?e[t]:n},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.BlendMode.Normal;if("additive"==t)return e.BlendMode.Additive;if("multiply"==t)return e.BlendMode.Multiply;if("screen"==t)return e.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return e.PositionMode.Fixed;if("percent"==t)return e.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return e.SpacingMode.Length;if("fixed"==t)return e.SpacingMode.Fixed;if("percent"==t)return e.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return e.RotateMode.Tangent;if("chain"==t)return e.RotateMode.Chain;if("chainscale"==t)return e.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return e.TransformMode.Normal;if("onlytranslation"==t)return e.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return e.TransformMode.NoRotationOrReflection;if("noscale"==t)return e.TransformMode.NoScale;if("noscaleorreflection"==t)return e.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}();e.SkeletonJson=t;var n=function(e,t,n,r,i){this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=r,this.inheritDeform=i}}(e.spine||(e.spine={})),function(e){var t=function(e,t,n){this.slotIndex=e,this.name=t,this.attachment=n};e.SkinEntry=t;var n=function(){function n(e){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==e)throw new Error("name cannot be null.");this.name=e}return n.prototype.setAttachment=function(e,t,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;e>=r.length&&(r.length=e+1),r[e]||(r[e]={}),r[e][t]=n},n.prototype.addSkin=function(e){for(var t=0;t<e.bones.length;t++){for(var n=e.bones[t],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){r=!0;break}r||this.bones.push(n)}for(t=0;t<e.constraints.length;t++){var o=e.constraints[t];for(r=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){r=!0;break}r||this.constraints.push(o)}var a=e.getAttachments();for(t=0;t<a.length;t++){var s=a[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}},n.prototype.copySkin=function(t){for(var n=0;n<t.bones.length;n++){for(var r=t.bones[n],i=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==r){i=!0;break}i||this.bones.push(r)}for(n=0;n<t.constraints.length;n++){var a=t.constraints[n];for(i=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==a){i=!0;break}i||this.constraints.push(a)}var s=t.getAttachments();for(n=0;n<s.length;n++){var l=s[n];null!=l.attachment&&(l.attachment instanceof e.MeshAttachment?(l.attachment=l.attachment.newLinkedMesh(),this.setAttachment(l.slotIndex,l.name,l.attachment)):(l.attachment=l.attachment.copy(),this.setAttachment(l.slotIndex,l.name,l.attachment)))}},n.prototype.getAttachment=function(e,t){var n=this.attachments[e];return n?n[t]:null},n.prototype.removeAttachment=function(e,t){var n=this.attachments[e];n&&(n[t]=null)},n.prototype.getAttachments=function(){for(var e=new Array,n=0;n<this.attachments.length;n++){var r=this.attachments[n];if(r)for(var i in r){var o=r[i];o&&e.push(new t(n,i,o))}}return e},n.prototype.getAttachmentsForSlot=function(e,n){var r=this.attachments[e];if(r)for(var i in r){var o=r[i];o&&n.push(new t(e,i,o))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(e,t){for(var n=0,r=0;r<e.slots.length;r++){var i=e.slots[r],o=i.getAttachment();if(o&&n<t.attachments.length){var a=t.attachments[n];for(var s in a)if(o==a[s]){var l=this.getAttachment(n,s);null!=l&&i.setAttachment(l);break}}n++}},n}();e.Skin=n}(e.spine||(e.spine={})),function(e){var t=function(){function t(t,n){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=t,this.bone=n,this.color=new e.Color,this.darkColor=null==t.darkColor?null:new e.Color,this.setToSetupPose()}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(e){this.attachment!=e&&(this.attachment=e,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(e){this.attachmentTime=this.bone.skeleton.time-e},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();e.Slot=t}(e.spine||(e.spine={})),function(e){e.SlotData=function(t,n,r){if(this.color=new e.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");if(null==r)throw new Error("boneData cannot be null.");this.index=t,this.name=n,this.boneData=r}}(e.spine||(e.spine={})),function(e){var t,n,r=function(){function e(e){this._image=e}return e.prototype.getImage=function(){return this._image},e.filterFromString=function(e){switch(e.toLowerCase()){case"nearest":return t.Nearest;case"linear":return t.Linear;case"mipmap":return t.MipMap;case"mipmapnearestnearest":return t.MipMapNearestNearest;case"mipmaplinearnearest":return t.MipMapLinearNearest;case"mipmapnearestlinear":return t.MipMapNearestLinear;case"mipmaplinearlinear":return t.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+e)}},e.wrapFromString=function(e){switch(e.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+e)}},e}();e.Texture=r,function(e){e[e.Nearest=9728]="Nearest",e[e.Linear=9729]="Linear",e[e.MipMap=9987]="MipMap",e[e.MipMapNearestNearest=9984]="MipMapNearestNearest",e[e.MipMapLinearNearest=9985]="MipMapLinearNearest",e[e.MipMapNearestLinear=9986]="MipMapNearestLinear",e[e.MipMapLinearLinear=9987]="MipMapLinearLinear"}(t=e.TextureFilter||(e.TextureFilter={})),function(e){e[e.MirroredRepeat=33648]="MirroredRepeat",e[e.ClampToEdge=33071]="ClampToEdge",e[e.Repeat=10497]="Repeat"}(n=e.TextureWrap||(e.TextureWrap={})),e.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yh(t,e),t.prototype.setFilters=function(){},t.prototype.setWraps=function(){},t.prototype.dispose=function(){},t}(r);e.FakeTexture=i}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t){this.pages=new Array,this.regions=new Array,this.load(e,t)}return t.prototype.load=function(t,o){if(null==o)throw new Error("textureLoader cannot be null.");for(var a=new n(t),s=new Array(4),l=null;;){var c=a.readLine();if(null==c)break;if(0==(c=c.trim()).length)l=null;else if(l){var u=new i;u.name=c,u.page=l;var d=a.readValue();"true"==d.toLocaleLowerCase()?u.degrees=90:"false"==d.toLocaleLowerCase()?u.degrees=0:u.degrees=parseFloat(d),u.rotate=90==u.degrees,a.readTuple(s);var f=parseInt(s[0]),h=parseInt(s[1]);a.readTuple(s);var p=parseInt(s[0]),m=parseInt(s[1]);u.u=f/l.width,u.v=h/l.height,u.rotate?(u.u2=(f+m)/l.width,u.v2=(h+p)/l.height):(u.u2=(f+p)/l.width,u.v2=(h+m)/l.height),u.x=f,u.y=h,u.width=Math.abs(p),u.height=Math.abs(m),4==a.readTuple(s)&&4==a.readTuple(s)&&a.readTuple(s),u.originalWidth=parseInt(s[0]),u.originalHeight=parseInt(s[1]),a.readTuple(s),u.offsetX=parseInt(s[0]),u.offsetY=parseInt(s[1]),u.index=parseInt(a.readValue()),u.texture=l.texture,this.regions.push(u)}else{(l=new r).name=c,2==a.readTuple(s)&&(l.width=parseInt(s[0]),l.height=parseInt(s[1]),a.readTuple(s)),a.readTuple(s),l.minFilter=e.Texture.filterFromString(s[0]),l.magFilter=e.Texture.filterFromString(s[1]);var v=a.readValue();l.uWrap=e.TextureWrap.ClampToEdge,l.vWrap=e.TextureWrap.ClampToEdge,"x"==v?l.uWrap=e.TextureWrap.Repeat:"y"==v?l.vWrap=e.TextureWrap.Repeat:"xy"==v&&(l.uWrap=l.vWrap=e.TextureWrap.Repeat),l.texture=o(c),l.texture.setFilters(l.minFilter,l.magFilter),l.texture.setWraps(l.uWrap,l.vWrap),l.width=l.texture.getImage().width,l.height=l.texture.getImage().height,this.pages.push(l)}}},t.prototype.findRegion=function(e){for(var t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null},t.prototype.dispose=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].texture.dispose()},t}();e.TextureAtlas=t;var n=function(){function e(e){this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return e.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},e.prototype.readValue=function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw new Error("Invalid line: "+e);return e.substring(t+1).trim()},e.prototype.readTuple=function(e){var t=this.readLine(),n=t.indexOf(":");if(-1==n)throw new Error("Invalid line: "+t);for(var r=0,i=n+1;r<3;r++){var o=t.indexOf(",",i);if(-1==o)break;e[r]=t.substr(i,o-i).trim(),i=o+1}return e[r]=t.substring(i).trim(),r+1},e}(),r=function(){};e.TextureAtlasPage=r;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yh(t,e),t}(e.TextureRegion);e.TextureAtlasRegion=i}(e.spine||(e.spine={})),function(e){var t=function(){function t(t,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new e.Vector2,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(n.findBone(t.bones[r].name));this.target=n.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,n=this.translateMix,r=this.scaleMix,i=this.shearMix,o=this.target,a=o.a,s=o.b,l=o.c,c=o.d,u=a*c-s*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,h=this.bones,p=0,m=h.length;p<m;p++){var v=h[p],g=!1;if(0!=t){var _=v.a,y=v.b,b=v.c,x=v.d;(M=Math.atan2(l,a)-Math.atan2(b,_)+d)>e.MathUtils.PI?M-=e.MathUtils.PI2:M<-e.MathUtils.PI&&(M+=e.MathUtils.PI2),M*=t;var w=Math.cos(M),T=Math.sin(M);v.a=w*_-T*b,v.b=w*y-T*x,v.c=T*_+w*b,v.d=T*y+w*x,g=!0}if(0!=n){var A=this.temp;o.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),v.worldX+=(A.x-v.worldX)*n,v.worldY+=(A.y-v.worldY)*n,g=!0}if(r>0){var E=Math.sqrt(v.a*v.a+v.c*v.c),O=Math.sqrt(a*a+l*l);E>1e-5&&(E=(E+(O-E+this.data.offsetScaleX)*r)/E),v.a*=E,v.c*=E,E=Math.sqrt(v.b*v.b+v.d*v.d),O=Math.sqrt(s*s+c*c),E>1e-5&&(E=(E+(O-E+this.data.offsetScaleY)*r)/E),v.b*=E,v.d*=E,g=!0}if(i>0){y=v.b,x=v.d;var M,S=Math.atan2(x,y);(M=Math.atan2(c,s)-Math.atan2(l,a)-(S-Math.atan2(v.c,v.a)))>e.MathUtils.PI?M-=e.MathUtils.PI2:M<-e.MathUtils.PI&&(M+=e.MathUtils.PI2),M=S+(M+f)*i,E=Math.sqrt(y*y+x*x),v.b=Math.cos(M)*E,v.d=Math.sin(M)*E,g=!0}g&&(v.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,n=this.translateMix,r=this.scaleMix,i=this.shearMix,o=this.target,a=o.a,s=o.b,l=o.c,c=o.d,u=a*c-s*l>0?e.MathUtils.degRad:-e.MathUtils.degRad,d=this.data.offsetRotation*u,f=this.data.offsetShearY*u,h=this.bones,p=0,m=h.length;p<m;p++){var v,g=h[p],_=!1;if(0!=t){var y=g.a,b=g.b,x=g.c,w=g.d;(v=Math.atan2(l,a)+d)>e.MathUtils.PI?v-=e.MathUtils.PI2:v<-e.MathUtils.PI&&(v+=e.MathUtils.PI2),v*=t;var T=Math.cos(v),A=Math.sin(v);g.a=T*y-A*x,g.b=T*b-A*w,g.c=A*y+T*x,g.d=A*b+T*w,_=!0}if(0!=n){var E=this.temp;o.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),g.worldX+=E.x*n,g.worldY+=E.y*n,_=!0}if(r>0){var O=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleX)*r+1;g.a*=O,g.c*=O,O=(Math.sqrt(s*s+c*c)-1+this.data.offsetScaleY)*r+1,g.b*=O,g.d*=O,_=!0}i>0&&((v=Math.atan2(c,s)-Math.atan2(l,a))>e.MathUtils.PI?v-=e.MathUtils.PI2:v<-e.MathUtils.PI&&(v+=e.MathUtils.PI2),b=g.b,w=g.d,v=Math.atan2(w,b)+(v-e.MathUtils.PI/2+f)*i,O=Math.sqrt(b*b+w*w),g.b=Math.cos(v)*O,g.d=Math.sin(v)*O,_=!0),_&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var e=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var c=l.arotation;if(0!=e){var u=i.arotation-c+this.data.offsetRotation;c+=(u-=360*(16384-(16384.499999999996-u/360|0)))*e}var d=l.ax,f=l.ay;0!=t&&(d+=(i.ax-d+this.data.offsetX)*t,f+=(i.ay-f+this.data.offsetY)*t);var h=l.ascaleX,p=l.ascaleY;0!=n&&(h>1e-5&&(h=(h+(i.ascaleX-h+this.data.offsetScaleX)*n)/h),p>1e-5&&(p=(p+(i.ascaleY-p+this.data.offsetScaleY)*n)/p));var m=l.ashearY;0!=r&&(u=i.ashearY-m+this.data.offsetShearY,u-=360*(16384-(16384.499999999996-u/360|0)),l.shearY+=u*r),l.updateWorldTransformWith(d,f,c,h,p,l.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var e=this.rotateMix,t=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var c=l.arotation;0!=e&&(c+=(i.arotation+this.data.offsetRotation)*e);var u=l.ax,d=l.ay;0!=t&&(u+=(i.ax+this.data.offsetX)*t,d+=(i.ay+this.data.offsetY)*t);var f=l.ascaleX,h=l.ascaleY;0!=n&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),h>1e-5&&(h*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var p=l.ashearY;0!=r&&(p+=(i.ashearY+this.data.offsetShearY)*r),l.updateWorldTransformWith(u,d,c,f,h,l.ashearX,p)}},t}();e.TransformConstraint=t}(e.spine||(e.spine={})),function(e){var t=function(e){function t(t){var n=e.call(this,t,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return yh(t,e),t}(e.ConstraintData);e.TransformConstraintData=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool((function(){return new Array})),this.polygonIndicesPool=new e.Pool((function(){return new Array}))}return t.prototype.triangulate=function(e){var n=e,r=e.length>>1,i=this.indicesArray;i.length=0;for(var o=0;o<r;o++)i[o]=o;var a=this.isConcaveArray;a.length=0,o=0;for(var s=r;o<s;++o)a[o]=t.isConcave(o,r,n,i);var l=this.triangles;for(l.length=0;r>3;){for(var c=r-1,u=(o=0,1);;){e:if(!a[o]){for(var d=i[c]<<1,f=i[o]<<1,h=i[u]<<1,p=n[d],m=n[d+1],v=n[f],g=n[f+1],_=n[h],y=n[h+1],b=(u+1)%r;b!=c;b=(b+1)%r)if(a[b]){var x=i[b]<<1,w=n[x],T=n[x+1];if(t.positiveArea(_,y,p,m,w,T)&&t.positiveArea(p,m,v,g,w,T)&&t.positiveArea(v,g,_,y,w,T))break e}break}if(0==u){do{if(!a[o])break;o--}while(o>0);break}c=o,o=u,u=(u+1)%r}l.push(i[(r+o-1)%r]),l.push(i[o]),l.push(i[(o+1)%r]),i.splice(o,1),a.splice(o,1);var A=(--r+o-1)%r,E=o==r?0:o;a[A]=t.isConcave(A,r,n,i),a[E]=t.isConcave(E,r,n,i)}return 3==r&&(l.push(i[2]),l.push(i[0]),l.push(i[1])),l},t.prototype.decompose=function(e,n){var r=e,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;var s=this.polygonPool.obtain();s.length=0;for(var l=-1,c=0,u=0,d=n.length;u<d;u+=3){var f=n[u]<<1,h=n[u+1]<<1,p=n[u+2]<<1,m=r[f],v=r[f+1],g=r[h],_=r[h+1],y=r[p],b=r[p+1],x=!1;if(l==f){var w=s.length-4,T=t.winding(s[w],s[w+1],s[w+2],s[w+3],y,b),A=t.winding(y,b,s[0],s[1],s[2],s[3]);T==c&&A==c&&(s.push(y),s.push(b),a.push(p),x=!0)}x||(s.length>0?(i.push(s),o.push(a)):(this.polygonPool.free(s),this.polygonIndicesPool.free(a)),(s=this.polygonPool.obtain()).length=0,s.push(m),s.push(v),s.push(g),s.push(_),s.push(y),s.push(b),(a=this.polygonIndicesPool.obtain()).length=0,a.push(f),a.push(h),a.push(p),c=t.winding(m,v,g,_,y,b),l=f)}for(s.length>0&&(i.push(s),o.push(a)),u=0,d=i.length;u<d;u++)if(0!=(a=o[u]).length)for(var E=a[0],O=a[a.length-1],M=(s=i[u])[w=s.length-4],S=s[w+1],C=s[w+2],R=s[w+3],k=s[0],P=s[1],L=s[2],I=s[3],F=t.winding(M,S,C,R,k,P),D=0;D<d;D++)if(D!=u){var N=o[D];if(3==N.length){var z=N[0],j=N[1],B=N[2],U=i[D];y=U[U.length-2],b=U[U.length-1],z==E&&j==O&&(T=t.winding(M,S,C,R,y,b),A=t.winding(y,b,k,P,L,I),T==F&&A==F&&(U.length=0,N.length=0,s.push(y),s.push(b),a.push(B),M=C,S=R,C=y,R=b,D=0))}}for(u=i.length-1;u>=0;u--)0==(s=i[u]).length&&(i.splice(u,1),this.polygonPool.free(s),a=o[u],o.splice(u,1),this.polygonIndicesPool.free(a));return i},t.isConcave=function(e,t,n,r){var i=r[(t+e-1)%t]<<1,o=r[e]<<1,a=r[(e+1)%t]<<1;return!this.positiveArea(n[i],n[i+1],n[o],n[o+1],n[a],n[a+1])},t.positiveArea=function(e,t,n,r,i,o){return e*(o-r)+n*(t-o)+i*(r-t)>=0},t.winding=function(e,t,n,r,i,o){var a=n-e,s=r-t;return i*s-o*a+a*t-e*s>=0?1:-1},t}();e.Triangulator=t}(e.spine||(e.spine={})),function(e){var t=function(){function e(){this.array=new Array}return e.prototype.add=function(e){var t=this.contains(e);return this.array[0|e]=0|e,!t},e.prototype.contains=function(e){return null!=this.array[0|e]},e.prototype.remove=function(e){this.array[0|e]=void 0},e.prototype.clear=function(){this.array.length=0},e}();e.IntSet=t;var n=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=e,this.g=t,this.b=n,this.a=r}return e.prototype.set=function(e,t,n,r){return this.r=e,this.g=t,this.b=n,this.a=r,this.clamp(),this},e.prototype.setFromColor=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.setFromString=function(e){return e="#"==e.charAt(0)?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=(8!=e.length?255:parseInt(e.substr(6,2),16))/255,this},e.prototype.add=function(e,t,n,r){return this.r+=e,this.g+=t,this.b+=n,this.a+=r,this.clamp(),this},e.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},e.rgba8888ToColor=function(e,t){e.r=((4278190080&t)>>>24)/255,e.g=((16711680&t)>>>16)/255,e.b=((65280&t)>>>8)/255,e.a=(255&t)/255},e.rgb888ToColor=function(e,t){e.r=((16711680&t)>>>16)/255,e.g=((65280&t)>>>8)/255,e.b=(255&t)/255},e.WHITE=new e(1,1,1,1),e.RED=new e(1,0,0,1),e.GREEN=new e(0,1,0,1),e.BLUE=new e(0,0,1,1),e.MAGENTA=new e(1,0,1,1),e}();e.Color=n;var r=function(){function e(){}return e.clamp=function(e,t,n){return e<t?t:e>n?n:e},e.cosDeg=function(t){return Math.cos(t*e.degRad)},e.sinDeg=function(t){return Math.sin(t*e.degRad)},e.signum=function(e){return e>0?1:e<0?-1:0},e.toInt=function(e){return e>0?Math.floor(e):Math.ceil(e)},e.cbrt=function(e){var t=Math.pow(Math.abs(e),1/3);return e<0?-t:t},e.randomTriangular=function(t,n){return e.randomTriangularWith(t,n,.5*(t+n))},e.randomTriangularWith=function(e,t,n){var r=Math.random(),i=t-e;return r<=(n-e)/i?e+Math.sqrt(r*i*(n-e)):t-Math.sqrt((1-r)*i*(t-n))},e.PI=3.1415927,e.PI2=2*e.PI,e.radiansToDegrees=180/e.PI,e.radDeg=e.radiansToDegrees,e.degreesToRadians=e.PI/180,e.degRad=e.degreesToRadians,e}();e.MathUtils=r;var i=function(){function e(){}return e.prototype.apply=function(e,t,n){return e+(t-e)*this.applyInternal(n)},e}();e.Interpolation=i;var o=function(e){function t(t){var n=e.call(this)||this;return n.power=2,n.power=t,n}return yh(t,e),t.prototype.applyInternal=function(e){return e<=.5?Math.pow(2*e,this.power)/2:Math.pow(2*(e-1),this.power)/(this.power%2==0?-2:2)+1},t}(i);e.Pow=o;var a=function(e){function t(t){return e.call(this,t)||this}return yh(t,e),t.prototype.applyInternal=function(e){return Math.pow(e-1,this.power)*(this.power%2==0?-1:1)+1},t}(o);e.PowOut=a;var s=function(){function e(){}return e.arrayCopy=function(e,t,n,r,i){for(var o=t,a=r;o<t+i;o++,a++)n[a]=e[o]},e.setArraySize=function(e,t,n){void 0===n&&(n=0);var r=e.length;if(r==t)return e;if(e.length=t,r<t)for(var i=r;i<t;i++)e[i]=n;return e},e.ensureArrayCapacity=function(t,n,r){return void 0===r&&(r=0),t.length>=n?t:e.setArraySize(t,n,r)},e.newArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=t;return n},e.newFloatArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var n=new Array(t),r=0;r<n.length;r++)n[r]=0;return n},e.newShortArray=function(t){if(e.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var n=new Array(t),r=0;r<n.length;r++)n[r]=0;return n},e.toFloatArray=function(t){return e.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},e.toSinglePrecision=function(t){return e.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},e.webkit602BugfixHelper=function(){},e.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},e.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e}();e.Utils=s;var l=function(){function e(){}return e.logBones=function(e){for(var t=0;t<e.bones.length;t++){var n=e.bones[t];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},e}();e.DebugUtils=l;var c=function(){function e(e){this.items=new Array,this.instantiator=e}return e.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},e.prototype.free=function(e){e.reset&&e.reset(),this.items.push(e)},e.prototype.freeAll=function(e){for(var t=0;t<e.length;t++)e[t].reset&&e[t].reset(),this.items[t]=e[t]},e.prototype.clear=function(){this.items.length=0},e}();e.Pool=c;var u=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.prototype.normalize=function(){var e=this.length();return 0!=e&&(this.x/=e,this.y/=e),this},e}();e.Vector2=u;var d=function(){function e(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return e.prototype.update=function(){var e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e}();e.TimeKeeper=d;var f=function(){function e(e){void 0===e&&(e=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return e.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},e.prototype.addValue=function(e){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=e,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},e.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var e=0,t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0},e}();e.WindowedMean=f}(e.spine||(e.spine={})),Math.fround||(Math.fround=(gh=new Float32Array(1),function(e){return gh[0]=e,gh[0]})),function(e){var t=function(e){if(null==e)throw new Error("name cannot be null.");this.name=e};e.Attachment=t;var n=function(t){function n(e){var r=t.call(this,e)||this;return r.id=(65535&n.nextID++)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return yh(n,t),n.prototype.computeWorldVertices=function(e,t,n,r,i,o){n=i+(n>>1)*o;var a=e.bone.skeleton,s=e.deform,l=this.vertices,c=this.bones;if(null!=c){for(var u=0,d=0,f=0;f<t;f+=2)u+=(v=c[u])+1,d+=v;var h=a.bones;if(0==s.length)for(S=i,A=3*d;S<n;S+=o){var p=0,m=0,v=c[u++];for(v+=u;u<v;u++,A+=3){b=h[c[u]],C=l[A],R=l[A+1];var g=l[A+2];p+=(C*b.a+R*b.b+b.worldX)*g,m+=(C*b.c+R*b.d+b.worldY)*g}r[S]=p,r[S+1]=m}else for(var _=s,y=(S=i,A=3*d,d<<1);S<n;S+=o){for(p=0,m=0,v=c[u++],v+=u;u<v;u++,A+=3,y+=2)b=h[c[u]],C=l[A]+_[y],R=l[A+1]+_[y+1],g=l[A+2],p+=(C*b.a+R*b.b+b.worldX)*g,m+=(C*b.c+R*b.d+b.worldY)*g;r[S]=p,r[S+1]=m}}else{s.length>0&&(l=s);for(var b,x=(b=e.bone).worldX,w=b.worldY,T=b.a,A=b.b,E=b.c,O=b.d,M=t,S=i;S<n;M+=2,S+=o){var C=l[M],R=l[M+1];r[S]=C*T+R*A+x,r[S+1]=C*E+R*O+w}}},n.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),e.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=e.Utils.newFloatArray(this.vertices.length),e.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},n.nextID=0,n}(t);e.VertexAttachment=n}(e.spine||(e.spine={})),function(e){!function(e){e[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(e.AttachmentType||(e.AttachmentType={}))}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.color=new e.Color(1,1,1,1),r}return yh(n,t),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.color.setFromColor(this.color),e},n}(e.VertexAttachment);e.BoundingBoxAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.color=new e.Color(.2275,.2275,.8078,1),r}return yh(n,t),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.endSlot=this.endSlot,e.color.setFromColor(this.color),e},n}(e.VertexAttachment);e.ClippingAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.color=new e.Color(1,1,1,1),r.tempColor=new e.Color(0,0,0,0),r}return yh(n,t),n.prototype.updateUVs=function(){var t=this.regionUVs;null!=this.uvs&&this.uvs.length==t.length||(this.uvs=e.Utils.newFloatArray(t.length));var n=this.uvs,r=this.uvs.length,i=this.region.u,o=this.region.v,a=0,s=0;if(this.region instanceof e.TextureAtlasRegion){var l=this.region,c=l.texture.getImage().width,u=l.texture.getImage().height;switch(l.degrees){case 90:i-=(l.originalHeight-l.offsetY-l.height)/c,o-=(l.originalWidth-l.offsetX-l.width)/u,a=l.originalHeight/c,s=l.originalWidth/u;for(var d=0;d<r;d+=2)n[d]=i+t[d+1]*a,n[d+1]=o+(1-t[d])*s;return;case 180:for(i-=(l.originalWidth-l.offsetX-l.width)/c,o-=l.offsetY/u,a=l.originalWidth/c,s=l.originalHeight/u,d=0;d<r;d+=2)n[d]=i+(1-t[d])*a,n[d+1]=o+(1-t[d+1])*s;return;case 270:for(i-=l.offsetY/c,o-=l.offsetX/u,a=l.originalHeight/c,s=l.originalWidth/u,d=0;d<r;d+=2)n[d]=i+(1-t[d+1])*a,n[d+1]=o+t[d]*s;return}i-=l.offsetX/c,o-=(l.originalHeight-l.offsetY-l.height)/u,a=l.originalWidth/c,s=l.originalHeight/u}else null==this.region?(i=o=0,a=s=1):(a=this.region.u2-i,s=this.region.v2-o);for(d=0;d<r;d+=2)n[d]=i+t[d]*a,n[d+1]=o+t[d+1]*s},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(e){this.parentMesh=e,null!=e&&(this.bones=e.bones,this.vertices=e.vertices,this.worldVerticesLength=e.worldVerticesLength,this.regionUVs=e.regionUVs,this.triangles=e.triangles,this.hullLength=e.hullLength,this.worldVerticesLength=e.worldVerticesLength)},n.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new n(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),e.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),e.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),e.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),e.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},n.prototype.newLinkedMesh=function(){var e=new n(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),e.deformAttachment=this.deformAttachment,e.setParentMesh(null!=this.parentMesh?this.parentMesh:this),e.updateUVs(),e},n}(e.VertexAttachment);e.MeshAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.closed=!1,r.constantSpeed=!1,r.color=new e.Color(1,1,1,1),r}return yh(n,t),n.prototype.copy=function(){var t=new n(name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),e.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},n}(e.VertexAttachment);e.PathAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.color=new e.Color(.38,.94,0,1),r}return yh(n,t),n.prototype.computeWorldPosition=function(e,t){return t.x=this.x*e.a+this.y*e.b+e.worldX,t.y=this.x*e.c+this.y*e.d+e.worldY,t},n.prototype.computeWorldRotation=function(t){var n=e.MathUtils.cosDeg(this.rotation),r=e.MathUtils.sinDeg(this.rotation),i=n*t.a+r*t.b,o=n*t.c+r*t.d;return Math.atan2(o,i)*e.MathUtils.radDeg},n.prototype.copy=function(){var e=new n(name);return e.x=this.x,e.y=this.y,e.rotation=this.rotation,e.color.setFromColor(this.color),e},n}(e.VertexAttachment);e.PointAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(t){function n(n){var r=t.call(this,n)||this;return r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new e.Color(1,1,1,1),r.offset=e.Utils.newFloatArray(8),r.uvs=e.Utils.newFloatArray(8),r.tempColor=new e.Color(1,1,1,1),r}return yh(n,t),n.prototype.updateOffset=function(){var e=this.width/this.region.originalWidth*this.scaleX,t=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*e,i=-this.height/2*this.scaleY+this.region.offsetY*t,o=r+this.region.width*e,a=i+this.region.height*t,s=this.rotation*Math.PI/180,l=Math.cos(s),c=Math.sin(s),u=r*l+this.x,d=r*c,f=i*l+this.y,h=i*c,p=o*l+this.x,m=o*c,v=a*l+this.y,g=a*c,_=this.offset;_[n.OX1]=u-h,_[n.OY1]=f+d,_[n.OX2]=u-g,_[n.OY2]=v+d,_[n.OX3]=p-g,_[n.OY3]=v+m,_[n.OX4]=p-h,_[n.OY4]=f+m},n.prototype.setRegion=function(e){this.region=e;var t=this.uvs;e.rotate?(t[2]=e.u,t[3]=e.v2,t[4]=e.u,t[5]=e.v,t[6]=e.u2,t[7]=e.v,t[0]=e.u2,t[1]=e.v2):(t[0]=e.u,t[1]=e.v2,t[2]=e.u,t[3]=e.v,t[4]=e.u2,t[5]=e.v,t[6]=e.u2,t[7]=e.v2)},n.prototype.computeWorldVertices=function(e,t,r,i){var o=this.offset,a=e.worldX,s=e.worldY,l=e.a,c=e.b,u=e.c,d=e.d,f=0,h=0;f=o[n.OX1],h=o[n.OY1],t[r]=f*l+h*c+a,t[r+1]=f*u+h*d+s,r+=i,f=o[n.OX2],h=o[n.OY2],t[r]=f*l+h*c+a,t[r+1]=f*u+h*d+s,r+=i,f=o[n.OX3],h=o[n.OY3],t[r]=f*l+h*c+a,t[r+1]=f*u+h*d+s,r+=i,f=o[n.OX4],h=o[n.OY4],t[r]=f*l+h*c+a,t[r+1]=f*u+h*d+s},n.prototype.copy=function(){var t=new n(name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,e.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),e.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(e.Attachment);e.RegionAttachment=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e,t){this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=t}return t.prototype.begin=function(){},t.prototype.transform=function(t){t.x+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=e.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}();e.JitterEffect=t}(e.spine||(e.spine={})),function(e){var t=function(){function t(e){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return t.prototype.begin=function(e){this.worldX=e.x+this.centerX,this.worldY=e.y+this.centerY},t.prototype.transform=function(n){var r=this.angle*e.MathUtils.degreesToRadians,i=n.x-this.worldX,o=n.y-this.worldY,a=Math.sqrt(i*i+o*o);if(a<this.radius){var s=t.interpolation.apply(0,r,(this.radius-a)/this.radius),l=Math.cos(s),c=Math.sin(s);n.x=l*i-c*o+this.worldX,n.y=c*i+l*o+this.worldY}},t.prototype.end=function(){},t.interpolation=new e.PowOut(2),t}();e.SwirlEffect=t}(e.spine||(e.spine={}));var Sh=function(t){Th(r,t);var n=Oh(r);function r(){return bh(this,r),n.apply(this,arguments)}return wh(r,[{key:"_generateTechnique",value:function(){var t=this.generateUniform(),n=this.generateAttributes(),r=new Kn(this.name);r.isValid=!0,r.uniforms=t,r.attributes=n,r.customMacros=[],r.vertexShader="\n  uniform mat4 matModelViewProjection;\n\n  attribute vec3 a_position;\n  attribute vec4 a_color;\n  attribute vec2 a_uv;\n  varying vec2 vUv;\n  varying vec4 vColor;\n  void main() {\n    vUv = a_uv;\n    vColor = a_color;\n    gl_Position = matModelViewProjection * vec4(a_position, 1.0);\n  }\n",r.fragmentShader="\n  uniform sampler2D map;\n  varying vec2 vUv;\n  varying vec4 vColor;\n  void main(void) {\n    gl_FragColor = texture2D(map, vUv) * vColor;\n  }\n",r.states={disable:[e.RenderState.CULL_FACE],enable:[e.RenderState.BLEND],functions:{blendFuncSeparate:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE_MINUS_SRC_ALPHA,e.BlendFunc.ONE,e.BlendFunc.ONE_MINUS_SRC_ALPHA]}},this._technique=r,this.renderType=e.MaterialType.TRANSPARENT}},{key:"prepareDrawing",value:function(e,t,n){this._technique||this._generateTechnique(e,t),Mh(Ah(r.prototype),"prepareDrawing",this).call(this,e,t,n)}},{key:"generateAttributes",value:function(){return{a_position:{name:"a_position",semantic:"POSITION",type:e.DataType.FLOAT_VEC3},a_color:{name:"a_color",semantic:"COLOR",type:e.DataType.FLOAT_VEC4},a_uv:{name:"a_uv",semantic:"TEXCOORD_0",type:e.DataType.FLOAT_VEC2}}}},{key:"generateUniform",value:function(){return{map:{name:"map",type:e.DataType.SAMPLER_2D},matModelViewProjection:{name:"matModelViewProjection",semantic:e.UniformSemantic.MODELVIEWPROJECTION,type:e.DataType.FLOAT_MAT4}}}},{key:"map",set:function(e){this.setValue("map",e)},get:function(){return this.getValue("map")}}]),r}(Yn),Ch=function(t){Th(r,t);var n=Oh(r);function r(t,i){var o,a=i.maxVertices;if(bh(this,r),(o=n.call(this,t)).vertexCount=void 0,o.vertices=void 0,o.maxVertices=void 0,o.verticesLength=0,o.indices=void 0,o.indicesLength=0,o._geometry=void 0,o._material=void 0,void 0===a)throw new Error("Must pass maxVertices numbers");o.maxVertices=a,o.vertices=new Float32Array(a*r.VERTEX_SIZE);var s=a;o.vertexCount=s;var l=new Lc,c=o.indices=new Uint16Array(3*a);return l.initialize([{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"COLOR",size:4,type:e.DataType.FLOAT,normalized:!1},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],s,c,e.BufferUsage.DYNAMIC_DRAW),o._geometry=l,o._material=new Sh("skeletion_material"),o}return wh(r,[{key:"clear",value:function(){}},{key:"begin",value:function(){this.verticesLength=0,this.indicesLength=0}},{key:"canBatch",value:function(e,t){return!(this.indicesLength+t>=this.indices.byteLength/2||this.verticesLength+e>=this.vertexCount*r.VERTEX_SIZE/2)}},{key:"batch",value:function(e,t,n,i){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.verticesLength/r.VERTEX_SIZE,s=this.vertices,l=this.verticesLength,c=0;c<t;)s[l++]=e[c++],s[l++]=e[c++],s[l++]=o,s[l++]=e[c++],s[l++]=e[c++],s[l++]=e[c++],s[l++]=e[c++],s[l++]=e[c++],s[l++]=e[c++];this.setValueFromBuffer(),this.verticesLength=l;var u=this.indices;for(l=this.indicesLength,c=0;c<i;l++,c++)u[l]=n[c]+a;this.indicesLength+=i,this._geometry.setAllIndex(u)}},{key:"setValueFromBuffer",value:function(){for(var e=this.vertices,t=0,n=0;t<this.maxVertices;t+=1,n+=9){var r=[e[n],e[n+1],e[n+2]],i=[e[n+3],e[n+4],e[n+5],e[n+6]],o=[e[n+7],e[n+8]];this._geometry.setVertexValues(t,{POSITION:r,COLOR:i,TEXCOORD_0:o})}}},{key:"end",value:function(){}}]),r}(Ic);Ch.VERTEX_SIZE=9;var Rh=e.spine.Skeleton,kh=e.spine.AnimationStateData,Ph=e.spine.AnimationState,Lh=e.spine.RegionAttachment,Ih=e.spine.MeshAttachment,Fh=function(t){Th(r,t);var n=Oh(r);function r(e,t){var i;bh(this,r),(i=n.call(this,e)).skeleton=void 0,i.state=void 0,i.zOffset=.1,i.renderMode=void 0,i.renderable=void 0,i.batches=new Array,i.nextBatchIndex=0,i.vertexCount=void 0,i._asset=void 0,i.animationNames=[],i.vertices=new Float32Array(1024),i.tempColor=Ct.create();var o=t.asset,a=t.animation;return i.setSkeletonData(o),a&&(i.animation=a),i.renderable=!0,i}return wh(r,[{key:"setSkeletonData",value:function(e){if(e){this._asset=e,this.skeleton=new Rh(e);var t=new kh(e);this.state=new Ph(t);var n=t.skeletonData.animations;this.animationNames=n.map((function(e){return e.name})),this.getVertexCount()}else console.log("skeletondata")}},{key:"disposeCurrentSkeleton",value:function(){this._asset=null,this.clearBatches(),this.batches=[];for(var e=this.node.children,t=0;t<e.length;t+=1)"batch"===e[t].name&&e[t].destroy()}},{key:"getVertexCount",value:function(){for(var e=this.skeleton.drawOrder,t=0,n=0,i=e.length;n<i;n++){var o=e[n];if(o.bone.active){var a=o.getAttachment();if(a)if(a instanceof Lh)t+=r.QUAD_TRIANGLES.length;else{if(!(a instanceof Ih))continue;t+=a.triangles.length}}}this.vertexCount=t}},{key:"render",value:function(){}},{key:"onUpdate",value:function(e){this._asset&&this.updateState(.001*e)}},{key:"updateState",value:function(e){var t=this.state,n=this.skeleton;t.update(e),t.apply(n),n.updateWorldTransform(),this.updateGeometry()}},{key:"clearBatches",value:function(){for(var e=0;e<this.batches.length;e++)this.batches[e].clear(),this.batches[e].enabled=!1;this.nextBatchIndex=0}},{key:"nextBatch",value:function(){if(this.batches.length==this.nextBatchIndex){var e=this.node.createChild("batch").createAbility(Ch,{maxVertices:this.vertexCount});this.batches.push(e)}var t=this.batches[this.nextBatchIndex++];return t.enabled=!0,t}},{key:"updateGeometry",value:function(){this.clearBatches();var t=this.vertices,n=null,i=null,o=this.skeleton.drawOrder,a=this.nextBatch();a.begin();for(var s=0,l=this.zOffset,c=r.VERTEX_SIZE,u=0,d=o.length;u<d;u++){var f=o[u];if(f.bone.active){var h=f.getAttachment(),p=null,m=null,v=0;if(h){if(h instanceof Lh){var g=h;p=g.color,t=this.vertices,v=4*c,g.computeWorldVertices(f.bone,t,0,c),n=r.QUAD_TRIANGLES,i=g.uvs,m=g.region.renderObject.texture}else{if(!(h instanceof Ih))continue;var _=h;p=_.color,t=this.vertices,(v=(_.worldVerticesLength>>1)*c)>t.length&&(t=this.vertices=e.spine.Utils.newFloatArray(v)),_.computeWorldVertices(f,0,_.worldVerticesLength,t,0,c),n=_.triangles,i=_.uvs,m=_.region.renderObject.texture}if(null!=m){var y=f.bone.skeleton.color,b=f.color,x=y.a*b.a*p.a,w=this.tempColor;w=[y.r*b.r*p.r,y.g*b.g*p.g,y.b*b.b*p.b,x];for(var T,A,E,O,M=t,S=2,C=0,R=v;S<R;S+=c,C+=2)M[S]=w[0],M[S+1]=w[1],M[S+2]=w[2],M[S+3]=w[3],M[S+4]=i[C],M[S+5]=i[C+1];if(T=t,A=v,E=n,O=n.length,0==A||0==O)continue;a.canBatch(A,O)||(a.end(),(a=this.nextBatch()).begin());var k=a.material;null==k.map&&(k.map=m.texture),k.map!=m.texture&&(a.end(),(a=this.nextBatch()).begin(),(k=a.material).map=m.texture),a.batch(T,A,E,O,s),s+=l}}}}a.end()}},{key:"asset",set:function(e){this.disposeCurrentSkeleton(),this.setSkeletonData(e)},get:function(){return this._asset}},{key:"animation",set:function(e){this.state&&(e&&this.animationNames.includes(e)?this.state.setAnimation(0,e,!0):this.state.setEmptyAnimation(0,!0))}}]),r}(Kt);Fh.QUAD_TRIANGLES=[0,1,2,2,3,0],Fh.VERTEX_SIZE=8;var Dh=function(e){Th(n,e);var t=Oh(n);function n(e){var r;return bh(this,n),(r=t.call(this,e)).texture=void 0,r.texture=new Xn("SPINE_TEXTURE",e),r}return wh(n,[{key:"setFilters",value:function(e,t){this.texture.setFilter(e,t)}},{key:"setWraps",value:function(e,t){this.texture.setWrapMode(e,t)}},{key:"dispose",value:function(){}}]),n}(e.spine.Texture),Nh=function(e){Th(n,e);var t=Oh(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return bh(this,n),(e=t.call(this,(function(e){return new Dh(e)}),r)).checkRaf=void 0,e}return wh(n,[{key:"onLoad",value:function(){var e=this;return new Promise((function(t){e.checkLoaded(t)}))}},{key:"checkLoaded",value:function(e){0==this.toLoad?(cancelAnimationFrame(this.checkRaf),e(this)):this.checkRaf=requestAnimationFrame(this.checkLoaded.bind(this,e))}}]),n}(e.spine.AssetManager);function zh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bh(e,t,n){return t&&jh(e.prototype,t),n&&jh(e,n),e}function Uh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function Vh(e){return(Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hh(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function Gh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vh(e);if(t){var i=Vh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hh(this,n)}}function Wh(e,t,n){return(Wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var Xh=function(t){Uh(r,t);var n=Gh(r);function r(){return zh(this,r),n.apply(this,arguments)}return Bh(r,[{key:"_generateTechnique",value:function(){var t=new Kn("trail_tech");t.isValid=!0,t.uniforms={u_texture:{name:"u_texture",type:e.DataType.SAMPLER_2D}},t.attributes={},t.states={enable:[e.RenderState.BLEND],functions:{blendFunc:[e.BlendFunc.SRC_ALPHA,e.BlendFunc.ONE],depthMask:[!1]}},t.customMacros=[],t.vertexShader="attribute vec3 a_position;\nattribute vec2 a_uv;\n\nvarying vec2 v_uv;\n\nuniform mat4 u_projMat;\nuniform mat4 u_viewMat;\n\nvoid main() {\n\n  gl_Position = u_projMat * u_viewMat * vec4( a_position, 1.0 );\n  v_uv = a_uv;\n\n}\n",t.fragmentShader="varying vec2 v_uv;\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n\n  gl_FragColor = texture2D(u_texture, v_uv);\n\n}\n",this._technique=t,this.renderType=e.MaterialType.TRANSPARENT}},{key:"prepareDrawing",value:function(e,t,n){null===this._technique&&this._generateTechnique(),Wh(Vh(r.prototype),"prepareDrawing",this).call(this,e,t,n)}}]),r}(Yn),Yh=function(t){Uh(r,t);var n=Gh(r);function r(e,t){var i;zh(this,r),(i=n.call(this,e))._stroke=void 0,i._minSeg=void 0,i._lifetime=void 0,i._maxPointNum=void 0,i._points=void 0,i._pointStates=void 0,i._strapPoints=void 0,i._curPointNum=void 0,i._prePointsNum=void 0,i._stroke=t.stroke||.2,i._minSeg=t.minSeg||.02,i._lifetime=t.lifetime||1e3,i._maxPointNum=i._lifetime/1e3*e.engine._FPS,i._points=[],i._pointStates=[],i._strapPoints=[];for(var o=0;o<i._maxPointNum;o++)i._points.push(xt.create()),i._pointStates.push(i._lifetime),i._strapPoints.push(xt.create()),i._strapPoints.push(xt.create());i._curPointNum=0;var a=t.material||new Xh("trial_mtl");return i.setMaterial(a),i.setTexture(t.texture),i._initGeometry(),i}return Bh(r,[{key:"update",value:function(e){for(var t=0,n=0,r=0;r<this._curPointNum;r++)this._pointStates[r]-=e,this._pointStates[r]<0?t++:t>0&&(n=r-t,this._pointStates[n]=this._pointStates[r],xt.copy(this._points[n],this._points[r]));this._curPointNum-=t;var i=!0;if(this._curPointNum===this._maxPointNum)i=!1;else if(this._curPointNum>0){var o=this._points[this._points.length-1];xt.distance(this.node.worldPosition,o)<this._minSeg&&(i=!1)}i&&(this._pointStates[this._curPointNum]=this._lifetime,xt.copy(this._points[this._curPointNum],this.node.worldPosition),this._curPointNum++)}},{key:"render",value:function(e){this._updateStrapVertices(e,this._points),this._updateStrapCoords(),Wh(Vh(r.prototype),"render",this).call(this,e)}},{key:"setTexture",value:function(e){e&&this.getMaterial().setValue("u_texture",e)}},{key:"_initGeometry",value:function(){this.geometry=new Pc,this.geometry.initialize([{semantic:"POSITION",size:3,type:e.DataType.FLOAT,normalized:!1},{semantic:"TEXCOORD_0",size:2,type:e.DataType.FLOAT,normalized:!0}],2*this._maxPointNum,e.BufferUsage.DYNAMIC_DRAW),this.geometry.mode=e.DrawMode.TRIANGLE_STRIP}},{key:"_updateStrapVertices",value:function(e,t){var n=e.viewMatrix,r=xt.fromValues(n[0],n[4],n[8]),i=xt.fromValues(n[1],n[5],n[9]),o=xt.fromValues(n[2],n[6],n[10]),a=this._stroke;xt.scale(i,i,a);var s=xt.create(),l=xt.create(),c=tt.create();xt.transformQuat(r,r,c),xt.transformQuat(i,i,c);var u=xt.create(),d=xt.create();xt.normalize(r,r);for(var f=0;f<this._maxPointNum;f++){if(f<this._curPointNum){var h=t[f],p=xt.create();f===this._curPointNum-1&&0!==f?xt.sub(p,h,t[f-1]):xt.sub(p,t[f+1],h),xt.projectOnPlane(p,p,o),xt.normalize(p,p);var m=Math.acos(xt.dot(r,p));xt.cross(d,r,p),xt.dot(d,o)<=0&&(m=2*Math.PI-m),tt.setAxisAngle(c,o,m),xt.transformQuat(u,i,c),xt.add(s,h,u),xt.sub(l,h,u)}this.geometry.setValue("POSITION",2*f,s),this.geometry.setValue("POSITION",2*f+1,l)}}},{key:"_updateStrapCoords",value:function(){if(this._prePointsNum!==this._curPointNum){this._prePointsNum=this._curPointNum;for(var e=this._curPointNum,t=ft.create(),n=0;n<e;n++){var r=1-n*(1/e);this.geometry.setValue("TEXCOORD_0",2*n,ft.set(t,0,r)),this.geometry.setValue("TEXCOORD_0",2*n+1,ft.set(t,1,r))}}}}]),r}(Ic);function qh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qh=function(){function e(t,n){qh(this,e),this.direction=void 0,this.origin=void 0,this.origin=t,this.direction=xt.create(),xt.normalize(this.direction,n)}var t,n;return t=e,(n=[{key:"intersectPlane",value:function(e,t){var n=this.direction,r=this.origin,i=xt.dot(t,n);if(Math.abs(i)>1e-6){var o=xt.create();xt.subtract(o,e,r);var a=xt.dot(o,t)/i;if(a>=0)return a}return!1}},{key:"getPoint",value:function(e){var t=xt.create();return xt.scale(t,this.direction,e),xt.add(t,this.origin,t),t}},{key:"intersectSphere",value:function(e,t){var n=this.direction,r=xt.create();xt.sub(r,this.origin,e);var i=function(e,t,n){var r=t*t-4*e*n;if(r<0)return!1;if(0==r){var i=-.5*t/e;return[i,i]}var o=Math.sqrt(r),a=t>0?-.5*(t+o):-.5*(t-o),s=a/e,l=n/a;return s<=l?[s,l]:[l,s]}(xt.dot(n,n),2*xt.dot(n,r),xt.dot(r,r)-t*t);return!!i&&i[0]}},{key:"intersectAABB",value:function(e,t){var n=this.direction,r=this.origin,i=[1/n[0],1/n[1],1/n[2]],o=[t,e],a=[n[0]<0?1:0,n[1]<0?1:0,n[2]<0?1:0],s=(o[a[0]][0]-r[0])*i[0],l=(o[1-a[0]][0]-r[0])*i[0],c=(o[a[1]][1]-r[1])*i[1],u=(o[1-a[1]][1]-r[1])*i[1];if(s>u||c>l)return!1;c>s&&(s=c),u<l&&(l=u);var d=(o[a[2]][2]-r[2])*i[2],f=(o[1-a[2]][2]-r[2])*i[2];if(s>f||d>l)return!1;d>s&&(s=d),f<l&&(l=f);var h=s;return!(h<0&&(h=l)<0)&&h}}])&&Kh(t.prototype,n),e}(),Jh=function e(){qh(this,e),this.distance=void 0,this.collider=void 0,this.point=void 0,this.distance=Number.MAX_VALUE,this.collider=null,this.point=null};function Zh(e,t,n,r,i){var o=t.getPoint(n);xt.transformMat4(o,o,e.node.getModelMatrix()),r.distance=xt.distance(i,o),r.collider=e,r.point=o}function $h(e,t){var n=e.node.getInvModelMatrix(),r=xt.create();xt.transformMat4(r,t.origin,n);var i,o,a,s,l,c,u=xt.create();return i=u,a=n,s=(o=t.direction)[0],l=o[1],c=o[2],i[0]=s*a[0]+l*a[4]+c*a[8],i[1]=s*a[1]+l*a[5]+c*a[9],i[2]=s*a[2]+l*a[6]+c*a[10],new Qh(r,u)}function ep(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e,t,n){return t&&tp(e.prototype,t),n&&tp(e,n),e}function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ip(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ip(Object(n),!0).forEach((function(t){rp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ap(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function cp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sp(e);if(t){var i=sp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lp(this,n)}}nn.prototype.raycast=function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.MaskList.EVERYTHING,i=new Qh(t.origin,t.direction),o=this.findFeature(Zi),a=o.colliders,s=new Jh,l=0,c=a.length;l<c;l++){var u=a[l];if(u.node.isActiveInHierarchy&&u.tag&r){var d=new Jh;u.raycast(i,d)&&d.distance<s.distance&&(s=d)}}return n&&s.collider&&xt.copy(n,s.point),s.collider},eo.prototype.raycast=function(e,t){var n=$h(this,e),r=n.intersectAABB(this.boxMax,this.boxMin);return!!r&&(Zh(this,n,r,t,e.origin),!0)},no.prototype.raycast=function(e,t){var n=$h(this,e),r=n.intersectSphere(this.center,this.radius);return!!r&&(Zh(this,n,r,t,e.origin),!0)},to.prototype.raycast=function(e,t){var n=$h(this,e),r=n.intersectPlane(this.planePoint,this.normal);return!!r&&(Zh(this,n,r,t,e.origin),!0)};var up=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:512,height:512};ep(this,t),this._mapSize=void 0,this._renderTarget=void 0,this.bias=void 0,this.intensity=void 0,this.radius=void 0,this.projectionMatrix=void 0,this._mapSize=ft.fromValues(e.width,e.height),this._renderTarget=new Zn("shadowMap",op(op({},e),{},{clearColor:[1,1,1,1]})),this.bias=.005,this.intensity=.2,this.radius=1,this.projectionMatrix=Ee.create()}return np(t,[{key:"initShadowProjectionMatrix",value:function(e){if(e instanceof Kc&&Ee.ortho(this.projectionMatrix,-5,5,-5,5,.1,50),e instanceof Qc&&Ee.perspective(this.projectionMatrix,Q.toRadian(50),1,.5,50),e instanceof Jc){var t=Math.min(Math.PI/2,2*e.angle*Math.sqrt(2));Ee.perspective(this.projectionMatrix,t,1,.1,e.distance+5)}}},{key:"setMapSize",value:function(e,t){Q.isPowerOf2(e)&&Q.isPowerOf2(t)&&(this._mapSize.width!==e||this._mapSize.height!==t)&&(this._mapSize=ft.fromValues(e,t),this._renderTarget=new Zn("shadowMap",{width:e,height:t,clearColor:[1,1,1,1]}))}},{key:"bindShadowValues",value:function(e,t,n){e.setValue("u_viewMatFromLight[".concat(t,"]"),n.viewMatrix),e.setValue("u_projMatFromLight[".concat(t,"]"),this.projectionMatrix);var r="u_shadows[".concat(t,"]");e.setValue(r+".bias",this.bias),e.setValue(r+".intensity",this.intensity),e.setValue(r+".radius",this.radius),e.setValue(r+".mapSize",this._mapSize),e.setValue("u_shadowMaps[".concat(t,"]"),this.map)}},{key:"renderTarget",get:function(){return this._renderTarget}},{key:"map",get:function(){return this._renderTarget.texture}},{key:"mapSize",get:function(){return this._mapSize}}],[{key:"getUniformDefine",value:function(t){var n={};n["u_viewMatFromLight[".concat(t,"]")]={name:"u_viewMatFromLight[".concat(t,"]"),type:e.DataType.FLOAT_MAT4},n["u_projMatFromLight[".concat(t,"]")]={name:"u_projMatFromLight[".concat(t,"]"),type:e.DataType.FLOAT_MAT4};var r="u_shadows[".concat(t,"]");return n[r+".bias"]={name:r+".bias",type:e.DataType.FLOAT},n[r+".intensity"]={name:r+".intensity",type:e.DataType.FLOAT},n[r+".radius"]={name:r+".radius",type:e.DataType.FLOAT},n[r+".mapSize"]={name:r+".mapSize",type:e.DataType.FLOAT_VEC2},n["u_shadowMaps[".concat(t,"]")]={name:"u_shadowMaps[".concat(t,"]"),type:e.DataType.SAMPLER_2D},n}}]),t}();Object.defineProperty(Yc.prototype,"enableShadow",{get:function(){return this._enableShadow},set:function(e){if(this._enableShadow=e,this._enableShadow){if(this instanceof qc)return void A.warn("Has no shadow!");this.shadow=this.shadow||new up,this.shadow.initShadowProjectionMatrix(this)}}}),Object.defineProperty(Kt.prototype,"recieveShadow",{get:function(){return this._recieveShadow},set:function(e){this._recieveShadow=e}}),Object.defineProperty(Kt.prototype,"castShadow",{get:function(){return this._castShadow},set:function(e){this._castShadow=e}});var dp="#include <common_vert>\n#include <normal_share>\n#include <shadow_share>\n\nvoid main() {\n\n    #include <begin_position_vert>\n    #include <begin_normal_vert>\n    #include <skinning_vert>\n    #include <shadow_vert>\n    #include <position_vert>\n\n}\n",fp=function(t){ap(r,t);var n=cp(r);function r(){return ep(this,r),n.apply(this,arguments)}return np(r,[{key:"_generateTechnique",value:function(){var e=this._generateMacros(),t=this._generateFragmentUniform(),n=new Kn(this.name);return n.isValid=!0,n.uniforms=t,n.attributes={},n.states={},n.customMacros=e,n.vertexShader=dp,n.fragmentShader="precision mediump float;\n\n/**\n * \n*/\nvec4 pack (float depth) {\n\n  // rgba 432z,11/256\n  const vec4 bitShift = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n  const vec4 bitMask = vec4(1.0/256.0, 1.0/256.0, 1.0/256.0, 0.0);\n\n  vec4 rgbaDepth = fract(depth * bitShift); //z\n\n  // Cut off the value which do not fit in 8 bits\n  rgbaDepth -= rgbaDepth.gbaa * bitMask;\n\n  return rgbaDepth;\n}\n\nvoid main() {\n\n  // zrgba,z\n  gl_FragColor = pack(gl_FragCoord.z);\n\n}",n}},{key:"_generateFragmentUniform",value:function(){return{u_viewMatFromLight:{name:"u_viewMatFromLight",type:e.DataType.FLOAT_MAT4},u_projMatFromLight:{name:"u_projMatFromLight",type:e.DataType.FLOAT_MAT4}}}},{key:"_generateMacros",value:function(){var e=[];return e.push("O3_GENERATE_SHADOW_MAP"),e}}]),r}(qn),hp=function(t){ap(r,t);var n=cp(r);function r(){var e;ep(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).shadowMapCount=void 0,e}return np(r,[{key:"_generateTechnique",value:function(){var t=this._generateMacros(),n=this._generateFragmentUniform(),r=new Kn(this.name);return r.autoConvert=!1,r.isValid=!0,r.uniforms=n,r.attributes={},r.states={},r.customMacros=t,r.vertexShader=dp,r.fragmentShader="varying vec2 v_uv;\n\nuniform vec4 u_ambientLight;\n\n#ifdef O3_SHADOW_MAP_COUNT\n\nstruct Shadow {\n  float     bias;\n  float     intensity;\n  vec2      mapSize;\n  float     radius;\n};\n\nuniform Shadow u_shadows[O3_SHADOW_MAP_COUNT];\n\nuniform sampler2D u_shadowMaps[O3_SHADOW_MAP_COUNT];\n\nvarying vec4 v_PositionFromLight[O3_SHADOW_MAP_COUNT];\n\nconst vec4 bitShift = vec4(1.0, 1.0/256.0, 1.0/(256.0*256.0), 1.0/(256.0*256.0*256.0));\n\n/**\n* \n*/\nfloat unpack(const in vec4 rgbaDepth) {\n  return dot(rgbaDepth, bitShift);\n}\n\n/**\n* \n*/\nfloat getVisibility(vec4 positionFromLight, const in sampler2D shadowMap, vec2 mapSize, float intensity, float bias, float radius) {\n\n    vec3 shadowCoord = (positionFromLight.xyz/positionFromLight.w)/2.0 + 0.5;\n    float filterX = step(0.0, shadowCoord.x) * (1.0 - step(1.0, shadowCoord.x));\n    float filterY = step(0.0, shadowCoord.y) * (1.0 - step(1.0, shadowCoord.y));\n\n    shadowCoord.z -= bias;\n    vec2 texelSize = vec2( 1.0 ) / mapSize;\n\n    float visibility = 0.0;\n    for (float y = -1.0 ; y <=1.0 ; y+=1.0) {\n      for (float x = -1.0 ; x <=1.0 ; x+=1.0) {\n        vec2 uv = shadowCoord.xy + texelSize * vec2(x, y) * radius;\n        vec4 rgbaDepth = texture2D(shadowMap, uv);\n        float depth = unpack(rgbaDepth);\n        visibility += step(depth, shadowCoord.z) * intensity;\n      }\n    }\n\n    visibility *= ( 1.0 / 9.0 );\n    return visibility * filterX * filterY;\n\n}\n\n#endif\n\nvoid main() {\n\n  vec4 shadowColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n#ifdef O3_SHADOW_MAP_COUNT\n\n  float visibility = 1.0;\n\n  for(int i = 0; i < O3_SHADOW_MAP_COUNT; i++) {\n\n   visibility -= getVisibility(v_PositionFromLight[i], u_shadowMaps[i], u_shadows[i].mapSize, u_shadows[i].intensity, u_shadows[i].bias, u_shadows[i].radius);\n\n  }\n\n  visibility = clamp(visibility, 0.0, 1.0);\n  shadowColor = vec4(visibility, visibility, visibility, 1.0);\n\n#endif\n\n  gl_FragColor = shadowColor;\n}",r.states={enable:[e.RenderState.BLEND],functions:{depthFunc:[e.CompFunc.LEQUAL],blendFunc:[e.BlendFunc.DST_COLOR,e.BlendFunc.ZERO]}},r}},{key:"_generateFragmentUniform",value:function(){for(var e={},t=0;t<this.shadowMapCount;t++){var n=up.getUniformDefine(t);e=op(op({},e),n)}return e}},{key:"_generateMacros",value:function(){var e=[];return this.shadowMapCount>0&&e.push("O3_SHADOW_MAP_COUNT ".concat(this.shadowMapCount)),e}}]),r}(qn),pp=function(t){ap(r,t);var n=cp(r);function r(){var t;ep(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).clearMode=e.ClearMode.DONT_CLEAR,t}return np(r,[{key:"preRender",value:function(e){this.enabled=!1;var t=e.scene.findFeature(eu);if(t){var n=e.sceneRenderer.defaultRenderPass;this.renderTarget=n.renderTarget;for(var r=t.visibleLights,i=0,o=0,a=r.length;o<a;o++){var s=r[o];s.enableShadow&&(s.shadow.bindShadowValues(this.replaceMaterial,i,s),i++)}i!==this.replaceMaterial.shadowMapCount&&(this.replaceMaterial.shadowMapCount=i,this.replaceMaterial.clearTechniques()),i&&(this.enabled=!0)}}}]),r}(ds),mp=function(e){ap(n,e);var t=cp(n);function n(e,r,i,o,a,s){var l;return ep(this,n),(l=t.call(this,e,r,i,o,a)).light=void 0,l.light=s,l}return np(n,[{key:"preRender",value:function(){this.replaceMaterial.setValue("u_viewMatFromLight",this.light.viewMatrix),this.replaceMaterial.setValue("u_projMatFromLight",this.light.shadow.projectionMatrix)}}]),n}(ds),vp=function(t){ap(r,t);var n=cp(r);function r(){var e;ep(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._shadowPass=void 0,e._shadowMapMaterial=void 0,e}return np(r,[{key:"preRender",value:function(e,t){var n=t.scene.findFeature(eu);if(n&&n.visibleLights.length>0){this._shadowPass||this.addShadowPass(t);for(var r=n.visibleLights,i=0,o=r.length;i<o;i++){var a=r[i];a.enableShadow&&!a.shadowMapPass?a.shadowMapPass=this.addShadowMapPass(t,a):!a.enableShadow&&a.shadowMapPass&&(t.sceneRenderer.removeRenderPass(a.shadowMapPass),a.shadowMapPass=null)}this.updatePassRenderFlag(t.sceneRenderer.opaqueQueue),this.updatePassRenderFlag(t.sceneRenderer.transparentQueue)}}},{key:"addShadowPass",value:function(t){var n=new hp("shadowMaterial");this._shadowPass=new pp("ShadowPass",1,null,n,e.MaskList.SHADOW),t.sceneRenderer.addRenderPass(this._shadowPass)}},{key:"addShadowMapPass",value:function(t,n){this._shadowMapMaterial=this._shadowMapMaterial||new fp("shadowMapMaterial");var r=new mp("ShadowMapPass",-1,n.shadow.renderTarget,this._shadowMapMaterial,e.MaskList.SHADOW_MAP,n);return t.sceneRenderer.addRenderPass(r),r}},{key:"updatePassRenderFlag",value:function(t){for(var n=t.items,r=0,i=n.length;r<i;r++){var o=n[r].nodeAbility;o.recieveShadow?o.addPassMasks(e.MaskList.SHADOW):o.removePassMasks(e.MaskList.SHADOW),o.castShadow?o.addPassMasks(e.MaskList.SHADOW_MAP):o.removePassMasks(e.MaskList.SHADOW_MAP)}}}]),r}(un);nn.registerFeature(vp),kd({PBRMaterial:Ef,TextureMaterial:_u,TransparentMaterial:yu}),e.AABB=Vi,e.AAmbientLight=qc,e.AAnimation=Er,e.AAnimationNew=Ci,e.AAnimator=Ri,e.ABoxCollider=eo,e.ACamera=pn,e.ACollider=$i,e.ACollisionDetection=fo,e.ADefaultCamera=Cs,e.ADirectLight=Kc,e.AEXP2Fog=_l,e.AEnvironmentMapLight=$c,e.AFramebufferPicker=kl,e.AFreeControls=Ul,e.AGPUParticleSystem=hf,e.AGeometryRenderer=Ic,e.AHUDWidget=Zu,e.ALODGroup=vr,e.ALight=Yc,e.ALinearFog=bl,e.AMachine=Zl,e.AMeshRenderer=pr,e.AOrbitControls=$d,e.APlaneCollider=to,e.APointLight=Qc,e.APrimitiveRenderer=fc,e.ARenderEachRow=nh,e.ARfuiRenderer=th,e.ASkinnedMeshRenderer=mr,e.ASkyBox=_h,e.ASphereCollider=no,e.ASpineRenderer=Fh,e.ASpotLight=Jc,e.ASpriteRenderer=Tn,e.ATrailRenderer=Yh,e.Animation=ki,e.AnimationClip=Or,e.AnimationClipNew=Di,e.Animator=Ni,e.AssetManager=Nh,e.AssetObject=ln,e.BasicSceneRenderer=ps,e.BlinnPhongMaterial=vu,e.BoundingSphere=Gi,e.BoxCollider=ro,e.BufferGeometry=Pc,e.Camera=Fs,e.CircleGeometry=Fu,e.ColliderFeature=Zi,e.CommonMaterial=hu,e.ComplexMaterial=qn,e.CompressedTexture2D=ya,e.CompressedTextureCubeMap=ba,e.ConstantMaterial=pu,e.CubeMapFace=G,e.CubeProbe=cl,e.CuboidGeometry=ku,e.CylinderGeometry=Iu,e.DRACODecoder=Hs,e.Easing=$r,e.Engine=an,e.EngineFeature=sn,e.Event=g,e.EventDispatcher=_,e.FogFeature=yl,e.Frustum=Lf,e.GLRenderHardware=ns,e.GLRenderTarget=Za,e.GLTFModel=Xd,e.GLTexture=Ga,e.GLTexture2D=Wa,e.GLTextureCubeMap=Xa,e.GeometryMerger=Fc,e.HUDFeature=Qu,e.HandledExtensions=Md,e.IndexBufferGeometry=Lc,e.LOOP_TYPE=Nr,e.LambertMaterial=mu,e.LightFeature=eu,e.Logger=A,e.Machine=Jl,e.Material=Yn,e.MathUtil=Q,e.Mesh=dr,e.Model=zu,e.MultiRenderTarget=$n,e.Node=Zt,e.NodeAbility=Kt,e.OBB=Hi,e.OldCamera=ks,e.OrthographicCamera=Ps,e.PBRMaterial=Ef,e.Particle=pf,e.PerspectiveCamera=Ls,e.PlaneGeometry=Lu,e.PlaneProbe=il,e.Primitive=dc,e.Probe=rl,e.RegistExtension=kd,e.RenderColorTexture=er,e.RenderDepthTexture=Jn,e.RenderPass=ds,e.RenderQueue=fs,e.RenderTarget=Zn,e.RenderTechnique=Kn,e.RenderableComponent=fn,e.Resource=Ho,e.ResourceLoader=Vo,e.RfuiNode=rh,e.Scene=nn,e.SceneFeature=un,e.SceneRenderer=If,e.SceneVisitor=cn,e.ScreenQuadGeometry=Du,e.Script=dn,e.ShaderFactory=Rn,e.ShaderMaterial=bu,e.Skin=hr,e.SphereCollider=io,e.SphereGeometry=Pu,e.Spherical=kt,e.SpriteRenderer=An,e.Texture=Wn,e.Texture2D=Xn,e.TextureCubeMap=Qn,e.TextureMaterial=_u,e.Time=E,e.TorusGeometry=Nu,e.TrailMaterial=Xh,e.Transform=Jt,e.TransparentMaterial=yu,e.Tween=Dr,e.TweenPlugins=li,e.Tweener=ti,e.UpdateFlag=Qt,e.Util=O,e.clearCanvas=function(e){var t=e.canvas;e.clearRect(0,0,t.width,t.height)},e.createTextureFromCanvas=function(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");return i.width=t,i.height=n,o.clearRect(0,0,t,n),r&&r(o),new Xn(e,i)},e.dependencies=Yt,e.doMaterial={Float:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return i.plugin=i.plugin||ri,new ti((function(){return e.getValue(n)}),(function(t){return e.setValue(n,t)}),t,r,i,e)},Color:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return i.plugin=i.plugin||ai,new ti((function(){return e.getValue(n)}),(function(t){e.setValue(n,[t[0]/255,t[1]/255,t[2]/255])}),t,r,i,e)}},e.doTransform=ci,e.drawBezierLine=function(e,t,n,r){e.save(),e.beginPath(),e.moveTo(t.x,t.y),e.bezierCurveTo(n.cp1x,n.cp1y,n.cp2x,n.cp2y,n.x,n.y),zf(e,r),e.stroke(),e.restore()},e.drawEnTextAutoLine=function(e,t,n,r){var i=n.x,o=n.y,a=e.canvas.width,s=parseInt(r.font);r.lineHeight&&(s*=r.lineHeight);var l=t.split(" "),c="";e.font=r.font;for(var u=0;u<l.length;u++){var d=c+l[u]+" ";e.measureText(d).width>a?(ih(e,c,{x:i,y:o},r),c=l[u]+" ",o+=s):c=d}ih(e,c,{x:i,y:o},r)},e.drawLine=function(e,t,n,r){e.save(),e.moveTo(t.x,t.y),n.forEach((function(t){e.lineTo(t.x,t.y)})),zf(e,r),e.stroke(),e.restore()},e.drawText=ih,e.drawTextAutoLine=function(e,t,n,r){var i=n.x,o=n.y,a=e.canvas.width,s=0,l=0,c=parseInt(r.font);r.lineHeight&&(c*=r.lineHeight),e.font=r.font;for(var u=0;u<t.length;u++)(l+=e.measureText(t[u]).width)>a-e.measureText(t[u]).width-i&&(ih(e,t.substring(s,u),{x:i,y:o},r),o+=c,l=0,s=u),u===t.length-1&&ih(e,t.substring(s,u+1),{x:i,y:o},r);return o+2*c},e.load=Oo,e.loadAll=Mo,e.mat2=$,e.mat2d=ne,e.mat3=se,e.mat4=Ee,e.openTechnique=Ko,e.parseCubeKTX=wa,e.parseSingleKTX=Ta,e.path=Xo,e.quat=tt,e.vec2=ft,e.vec3=xt,e.vec4=Ct,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(56);t.useTheme=r.useTheme,t.useStyles=r.useStyles;var i=s(n(154));t.StyleProvider=i.default;var o=s(n(155));t.withStyles=o.default;var a=s(n(31));function s(e){return e&&e.__esModule?e:{default:e}}t.Context=a.default;var l=i.default;t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=(o(n(134)),o(n(135)));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=(0,r.forwardRef)((function(e,t){return(0,r.createElement)(i.default,a({},e,{ref:t}))}));s.displayName="Picture";var l=s;t.default=l},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=((r=n(176))&&r.__esModule?r:{default:r}).default;t.default=i},function(e,t,n){e.exports=n(119)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0).shared.flattenChildren;function i(e){return e=r(e,[]),Array.isArray(e)?e:[].concat(e)}var o={map:function(e,t,n){return null==e?null:(e=i(e)).map((function(e,r){return t.call(n,e,r)}))},forEach:function(e,t,n){if(null==e)return null;(e=i(e)).forEach((function(e,r){return t.call(n,e,r)}))},count:function(e){return null==e?0:i(e).length},only:function(e){if(1!==(e=o.toArray(e)).length)throw new Error("Children.only: expected to receive a single element child.");return e[0]},toArray:function(e){return null==e?[]:i(e).filter((function(e){return null!==e}))}},a=o;t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(0,o.default)(e))throw Error("cloneElement: not a valid element.");var n=Object.assign({},e.props),r=e.key,i=e.ref,u=e._owner;if(t){var d;for(var f in void 0!==t.ref&&(i=t.ref,u=a.owner),void 0!==t.key&&(r=String(t.key)),e.type&&e.type.defaultProps&&(d=e.type.defaultProps),t)t.hasOwnProperty(f)&&!c.hasOwnProperty(f)&&(void 0===t[f]&&void 0!==d?n[f]=d[f]:n[f]=t[f])}for(var h=arguments.length,p=new Array(h>2?h-2:0),m=2;m<h;m++)p[m-2]=arguments[m];p.length&&(n.children=l(p));return new s(e.type,r,i,n,u)};var r,i=n(0),o=(r=n(10))&&r.__esModule?r:{default:r};var a=i.shared.Host,s=i.shared.Element,l=i.shared.flattenChildren,c={key:!0,ref:!0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return"object"==typeof e&&null!==e&&e.type&&e.props}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(178));t.LocaleProvider=r.default;var i=n(63);t.useLocale=i.useLocale;var o=s(n(179));t.WithLocale=o.default;var a=s(n(32));function s(e){return e&&e.__esModule?e:{default:e}}t.Context=a.default;var l=r.default;t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(212));t.List=r.default;var i=u(n(16)),o=u(n(214));t.ListItem=o.default;var a=n(215);t.ListItemMedia=a.ListItemMedia;var s=u(n(216));t.ListItemContent=s.default;var l=u(n(217));t.ListItemLabel=l.default;var c=u(n(218));function u(e){return e&&e.__esModule?e:{default:e}}t.ListItemCaption=c.default;var d=r.default;d.Item=o.default,d.ItemMedia=a.ListItemMedia,d.ItemAction=a.ListItemAction,d.ItemContent=s.default,d.ItemLabel=l.default,d.ItemCaption=c.default,d.Context=i.default;var f=d;t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(54))&&r.__esModule?r:{default:r};var o=function(e){if(null==e)return null;if(e.ownerDocument||e.nodeType)return e;if(e._nativeNode)return e._nativeNode;if("string"==typeof e)return(0,i.default)(e);if("function"!=typeof e.render)throw new Error("findDOMNode: find by neither component nor DOM node.");var t=e._internal;if(t){for(;!t._nativeNode;)if(null==(t=t._renderedComponent))return null;return t._nativeNode}throw new Error("findDOMNode: find on an unmounted component.")};t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=r.get(e);if(!t)return!1;return r.remove(e),t._internal.unmountComponent(),!0};var r=n(0).shared.Instance},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(60));t.TransitionView=r.default;var i=o(n(171));function o(e){return e&&e.__esModule?e:{default:e}}t.Transition=i.default;var a=i.default;t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({styles:{list:{},listItem:{},listItemContainer:{},listItemDivider:{},listItemContent:{},listItemMedia:{},listItemMediaLast:{},listItemLabel:{},listItemCaption:{},listItemIcon:{}}});t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(64));t.Button=r.default;var i=o(n(185));function o(e){return e&&e.__esModule?e:{default:e}}t.ButtonGroup=i.default;var a=r.default;a.Group=i.default;var s=a;t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(67)),i=l(n(69)),o=l(n(75)),a=l(n(228)),s=l(n(33));function l(e){return e&&e.__esModule?e:{default:e}}t.WeexPicker=s.default;var c=a.default;c.Base=r.default,c.Picker=i.default,c.CheckListPicker=o.default;var u=c;t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(208));t.Form=r.default;var i=u(n(210));t.SubHeader=i.default;var o=u(n(211));t.Content=o.default;var a=function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(219));t.Item=a.default;var s=u(n(220));t.Footer=s.default;var l=u(n(20));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var d=r.default;d.SubHeader=i.default,d.Content=o.default,d.Item=a.default,d.Footer=s.default,d.Context=l.default,d.ItemContext=a.FormItemContext;var f=d;t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({styles:{form:{},subHeader:{},footer:{},content:{},item:{},itemContainer:{},itemLabel:{},itemInnerContainer:{},itemLabelContainer:{},itemLabelInnerContainer:{},itemRequiredText:{},itemInnerLabel:{},itemInput:{},itemHelp:{},itemHelpText:{},itemErrorText:{},itemInnerRequiredText:{}},labelType:"upper",labelWidth:"auto"});t.default=r},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.format=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,i=t[0],o=t.length;if("function"==typeof i)return i(t.slice(1));if("string"==typeof i){var s=String(i).replace(a,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}default:return e}}));return s}return i},t.asyncMap=function(e,t,n,r){if(t.first){return s(l(e),n,r)}var i=Object.keys(e),o=i.length,a=0,c=[],u=function(e){if(c.push(e),++a===o)return r(c)};i.forEach((function(t){s(e[t],n,u)}))},t.asyncMapPromise=function(){return d.apply(this,arguments)},t.complementError=function(e){return function(t){return t&&t.message?(t.field=e.field,t):{message:t,field:e.field}}},t.processErrorResults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n={};function r(e){Array.isArray(e)?t=t.concat(e):t.push(e)}for(var i=0;i<e.length;i++)r(e[i]);if(t.length)for(var o=0;o<t.length;o++){var a=t[o].field;a&&(n[a]=n[a]||[],n[a].push(t[o]))}else t=null,n=null;return{errors:t,fields:n}};var i=r(n(7)),o=r(n(35)),a=/%[sdj%]/g;function s(e,t,n){var r=0,i=e.length;!function o(a){if(a&&a.length)n(a);else{var s=r;if(r+=1,!(s<i))return n([]);t(e[s],o)}}([])}function l(e){var t=[];return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){t.push(e[n][r])}))})),t}function c(){return u.apply(this,arguments)}function u(){return(u=(0,o.default)(i.default.mark((function e(t,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.reduce(function(){var e=(0,o.default)(i.default.mark((function e(t,r){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:o=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o=e.t0;case 9:if(!o||!o.length){e.next=11;break}return e.abrupt("return",o);case 11:return e.abrupt("return",n(r));case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Promise.resolve()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,o.default)(i.default.mark((function e(t,n,r){var o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.first){e.next=3;break}return o=l(t),e.abrupt("return",c(o,r));case 3:return a=Object.values(t),e.abrupt("return",Promise.all(a.map((function(e){return c(e,r)}))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(122);r.default&&(r=r.default);var i=r;t.default=i},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=i.apply(null,r);a&&e.push(a)}else if("object"===o)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";t.__esModule=!0,t.processStyle=function(e){for(var t in e)e[t]=(0,r.convertUnit)(e[t],t);return e},t.processParams=function(e,t){"function"!=typeof e&&null!=e||(t=e,e={timingFunction:"ease",duration:0,delay:0});return[e,t]};var r=n(160);"undefined"!=typeof document&&(0,r.setRpx)(document.documentElement.clientWidth/750)},function(e,t,n){var r=n(79);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(156))&&r.__esModule?r:{default:r};t.Drawer=i.default;var o=i.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.isRpx=l,t.calcRpx=c,t.getRpx=u,t.setRpx=d,t.getViewportWidth=f,t.setViewportWidth=h,t.setDecimalPixelTransformer=function(e){a=e},t.convertUnit=function(e,t,n){var r=t+"-"+e,i=p[r];n&&(r+="-"+n,o=n);return i||(e+="",p[r]=l(e)?c(e):e)};var r=/[-+]?\d*\.?\d+rpx/g,i="object"==typeof window?window:"object"==typeof i?i:{},o="web",a=function(e){return parseFloat(e)*u()+"px"},s=function(e){return t=parseFloat(e)/(f()/100),n=4,r=Math.pow(10,n+1),i=Math.floor(t*r),10*Math.round(i/10)/r+"vw";var t,n,r,i};function l(e){return"string"==typeof e&&r.test(e)}function c(e){return"web"===o?e.replace(r,s):"weex"===o?e.replace(r,a):e}function u(){return i.__rpx_coefficient__}function d(e){i.__rpx_coefficient__=e}function f(){return i.__viewport_width__}function h(e){i.__viewport_width__=e}void 0===u()&&d(1),void 0===f()&&h(750);var p=Object.create(null)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a={},s=(0,r.forwardRef)((function(e,t){var n=e.source,s=e.fallbackSource,l=e.onLoad,c=e.onError,u=e.style,d=e.resizeMode,f=e.loading,h=o(e,["source","fallbackSource","onLoad","onError","style","resizeMode","loading"]);n=n||a,s=s||a;var p=h,m=(0,r.useState)({}),v=m[0],g=m[1];p.onError=(0,r.useCallback)((function(e){void 0===v.uri&&g({uri:n.uri}),c&&c(e)}),[n.uri,c,v]),p.onLoad=(0,r.useCallback)((function(e){e&&e.success||e&&e.currentTarget&&e.currentTarget.naturalWidth>1&&e.currentTarget.naturalHeight>1?l&&l(e):c&&c(e)}),[l,c]),void 0!==v.uri&&(v.uri!==n.uri?v.uri=void 0:null!=s.uri&&(n=s));var _=n,y=_.width,b=_.height,x=_.uri;return p.src=x,p.style=Object.assign({width:y,height:b},u),f&&(p.loading=f),(d=d||p.style.resizeMode)&&(p.style.objectFit=d),(0,r.createElement)("img",i({},p,{ref:t}))}));t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a=(0,r.forwardRef)((function(e,t){var n=(0,r.useState)(e.source),a=n[0],s=n[1],l=(0,r.useRef)(!1),c=function(t){var n=e.fallbackSource,r=e.onError,i=void 0===r?function(){}:r;n&&n.uri&&a.uri!==n.uri&&s(n),i(t)};(0,r.useEffect)((function(){l.current?s(e.source):l.current=!0}),[e.source.uri]);var u=Object.assign({},e);if(a&&a.uri){var d=u.style,f=void 0===d?{}:d,h=a.width,p=a.height,m=a.uri;u.style=Object.assign({width:h,height:p},f),u.src=m,u.onLoad=function(t){var n=e.onLoad,r=void 0===n?function(){}:n;void 0!==t.success?t.success?r(t):c(t):void 0!==t.currentTarget&&(t.currentTarget.naturalWidth>1&&t.currentTarget.naturalHeight>1?r(t):c(t))},u.onError=c,delete u.source;var v=u.resizeMode||u.style.resizeMode;v&&(u.style.objectFit=v);var g=u.className,_=(u.children,u.style),y=o(u,["className","children","style"]),b=["rax-image",g].join(" ");return(0,r.createElement)("img",i({ref:t,className:b,style:_},y))}return null}));t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({});t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({});t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=!1,i=function(e,t,n){r||(r=!0,__weex_require__("@weex-module/picker")[e](t,(function(){r=!1,n&&n.apply(void 0,arguments)})))},o={setPicking:function(e){r=e},pick:function(e,t){i("pick",e,t)},pickTime:function(e,t){i("pickTime",e,t)},pickDate:function(e,t){i("pickDate",e,t)}};t.default=o},function(e,t,n){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",r="hour",i="day",o="week",a="month",s="quarter",l="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},p="en",m={};m[p]=f;var v=function(e){return e instanceof b},g=function(e,t,n){var r;if(!e)return p;if("string"==typeof e)m[e]&&(r=e),t&&(m[e]=t,r=e);else{var i=e.name;m[i]=e,r=i}return!n&&r&&(p=r),r||!n&&p},_=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new b(n)},y={s:h,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60);return(t<=0?"+":"-")+h(r,2,"0")+":"+h(n%60,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,a),o=n-i<0,s=t.clone().add(r+(o?-1:1),a);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:a,y:l,w:o,d:i,D:c,h:r,m:n,s:t,ms:e,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};y.l=g,y.i=v,y.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var b=function(){function f(e){this.$L=g(e.locale,null,!0),this.parse(e)}var h=f.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(y.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return y},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},h.isAfter=function(e,t){return _(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<_(e)},h.$g=function(e,t,n){return y.u(e)?this[t]:this.set(n,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,s){var u=this,d=!!y.u(s)||s,f=y.p(e),h=function(e,t){var n=y.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?n:n.endOf(i)},p=function(e,t){return y.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},m=this.$W,v=this.$M,g=this.$D,_="set"+(this.$u?"UTC":"");switch(f){case l:return d?h(1,0):h(31,11);case a:return d?h(1,v):h(0,v+1);case o:var b=this.$locale().weekStart||0,x=(m<b?m+7:m)-b;return h(d?g-x:g+(6-x),v);case i:case c:return p(_+"Hours",0);case r:return p(_+"Minutes",1);case n:return p(_+"Seconds",2);case t:return p(_+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(o,s){var u,d=y.p(o),f="set"+(this.$u?"UTC":""),h=(u={},u[i]=f+"Date",u[c]=f+"Date",u[a]=f+"Month",u[l]=f+"FullYear",u[r]=f+"Hours",u[n]=f+"Minutes",u[t]=f+"Seconds",u[e]=f+"Milliseconds",u)[d],p=d===i?this.$D+(s-this.$W):s;if(d===a||d===l){var m=this.clone().set(c,1);m.$d[h](p),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[y.p(e)]()},h.add=function(e,s){var c,u=this;e=Number(e);var d=y.p(s),f=function(t){var n=_(u);return y.w(n.date(n.date()+Math.round(t*e)),u)};if(d===a)return this.set(a,this.$M+e);if(d===l)return this.set(l,this.$y+e);if(d===i)return f(1);if(d===o)return f(7);var h=(c={},c[n]=6e4,c[r]=36e5,c[t]=1e3,c)[d]||1,p=this.$d.getTime()+e*h;return y.w(p,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=y.z(this),i=this.$locale(),o=this.$H,a=this.$m,s=this.$M,l=i.weekdays,c=i.months,u=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].substr(0,o)},f=function(e){return y.s(o%12||12,e,"0")},h=i.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:y.s(s+1,2,"0"),MMM:u(i.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:u(i.weekdaysMin,this.$W,l,2),ddd:u(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:y.s(o,2,"0"),h:f(1),hh:f(2),a:h(o,a,!0),A:h(o,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:r};return n.replace(d,(function(e,t){return t||p[e]||r.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,c,u){var d,f=y.p(c),h=_(e),p=6e4*(h.utcOffset()-this.utcOffset()),m=this-h,v=y.m(this,h);return v=(d={},d[l]=v/12,d[a]=v,d[s]=v/3,d[o]=(m-p)/6048e5,d[i]=(m-p)/864e5,d[r]=m/36e5,d[n]=m/6e4,d[t]=m/1e3,d)[f]||m,u?v:y.a(v)},h.daysInMonth=function(){return this.endOf(a).$D},h.$locale=function(){return m[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=g(e,t,!0);return r&&(n.$L=r),n},h.clone=function(){return y.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},f}(),x=b.prototype;return _.prototype=x,[["$ms",e],["$s",t],["$m",n],["$H",r],["$W",i],["$M",a],["$y",l],["$D",c]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),_.extend=function(e,t){return e.$i||(e(t,b,_),e.$i=!0),_},_.locale=g,_.isDayjs=v,_.unix=function(e){return _(1e3*e)},_.en=m[p],_.Ls=m,_.p={},_}()},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({styles:{track:{},trackSelected:{},mark:{},markActive:{},label:{},labelActive:{},thumb:{},thumbActive:{},tooltip:{},arrow:{}}});t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.pauseEvent=function(e){e.stopPropagation()},t.getTouchPosition=function(e){return(0,r.px2rem)(e.changedTouches[0].pageX)},t.getNodeRect=i,t.getPrecision=function(e){var t=e.toString(),n=0;t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1);return n},t.getClosestThumbIndex=function(e,t){var n=Object.keys(t);if(1===n.length)return Promise.resolve(0);var r=0;return Promise.all(n.map((function(e){return i(t[e].current)}))).then((function(t){return Math.abs(t[0].left-e)>Math.abs(t[1].left-e)&&(r=1),+n[r]}))},t.handleMarks=function(e){return Object.keys(e).map(parseFloat).sort((function(e,t){return e-t}))},t.isInRange=function(e,t){1===t.length&&t.unshift(0);return e>=t[0]&&e<=t[1]},t.noop=function(){},t.isNil=function(e){return null==e},t.unit=void 0;var r=n(263);function i(e){return new Promise((function(t){(0,r.getComponentRect)(e,(function(e){t(e.size)}),!0)}))}t.unit="rpx"},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}}n.default=e,t&&t.set(e,n);return n}(n(202));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}t.TextFieldAlign=r.TextFieldAlign,t.TextFieldLabelType=r.TextFieldLabelType,t.TextFieldType=r.TextFieldType;var o=r.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(222));i(n(224));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(256)),o=a(n(257));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.shape,a=void 0===n?"line":n,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["shape"]);return"line"===a?(0,r.createElement)(o.default,s({},l,{ref:t})):(0,r.createElement)(i.default,s({},l,{ref:t}))}));t.default=l},function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(51)),i=o(n(181));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default;a.current=i.default.current,a.show=i.default.show,a.hide=i.default.hide;var s=a;t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(66));t.Checkbox=r.default;var i=o(n(199));function o(e){return e&&e.__esModule?e:{default:e}}t.Group=i.default;var a=r.default;a.Group=i.default;var s=a;t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(201)),i=o(n(76));function o(e){return e&&e.__esModule?e:{default:e}}t.SlidePicker=i.default;var a=r.default;t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(85));t.Radio=r.default;var i=o(n(259));function o(e){return e&&e.__esModule?e:{default:e}}t.Group=i.default;var a=r.default;a.Group=i.default;var s=a;t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(87)),i=o(n(90));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default;a.Tab=i.default;var s=a;t.default=s},function(e,t,n){var r;!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,r=0;r<n;++r)i(e,t[r])}e.prototype=Object.create(null);var n={}.hasOwnProperty;var r=/\s+/;function i(e,i){if(i){var o=typeof i;"string"===o?function(e,t){for(var n=t.split(r),i=n.length,o=0;o<i;++o)e[n[o]]=!0}(e,i):Array.isArray(i)?t(e,i):"object"===o?function(e,t){for(var r in t)n.call(t,r)&&(e[r]=!!t[r])}(e,i):"number"===o&&function(e,t){e[t]=!0}(e,i)}}return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=new e;t(o,r);var a=[];for(var s in o)o[s]&&a.push(s);return a.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=[],o=!1;var a={push:function(e,t){i.push({message:e,duration:t}),this.show()},show:function(){var e=this;if(!i.length)return r&&r.parentNode.removeChild(r),void(r=null);if(!o){o=!0;var t=i.shift();!function(e){if(!r){for(var t in r=document.createElement("div"),s.container)r.style[t]=s.container[t];document.body.appendChild(r)}r.style.transform="translateX(-50%)",r.style.webkitTransform="translateX(-50%)",r.innerHTML=e}(t.message),setTimeout((function(){r&&setTimeout((function(){r.style.transform="translateX(-50%) scale(0.8)",r.style.webkitTransform="translateX(-50%) scale(0.8)"}),0),o=!1,setTimeout((function(){return e.show()}),600)}),t.duration)}}},s={container:{backgroundColor:"rgba(0, 0, 0, 0.6)",boxSizing:"border-box",maxWidth:"80%",color:"#ffffff",padding:"8px 16px",position:"fixed",left:"50%",bottom:"50%",fontSize:"16px",lineHeight:"32px",fontWeight:"600",borderRadius:"4px",textAlign:"center",transition:"all 0.4s ease-in-out",webkitTransition:"all 0.4s ease-in-out",transform:"translateX(-50%)",webkitTransform:"translateX(-50%)",zIndex:9999}},l={SHORT:2e3,LONG:3500,show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;a.push(e,t)}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=h(n(52)),o=h(n(29)),a=n(4),s=h(n(27)),l=h(n(6)),c=n(11),u=h(n(1)),d=h(n(2)),f=h(n(180));function h(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=(0,r.forwardRef)((function(e,t){var n=e.visible,h=e.title,m=e.fullWidth,v=e.renderContent,g=e.cancelButton,_=void 0===g?{}:g,y=e.buttons,b=void 0===y?[]:y,x=e.items,w=void 0===x?[]:x,T=e.onClick,A=void 0===T?function(){}:T,E=e.onUnmount,O=e.onShow,M=e.onHide,S=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["visible","title","fullWidth","renderContent","cancelButton","buttons","items","onClick","onUnmount","onShow","onHide"]),C=(0,c.useLocale)("ActionSheet",S,{cancel:""}),R=(0,a.useStyles)(f.default,S,(function(e){return{root:e(["action-sheet",m?"action-sheet__fullwidth":null]),body:e(["action-sheet__body",m?"action-sheet__body__fullwidth":null]),footer:e(["action-sheet__footer",m?"action-sheet__footer__fullwidth":null]),drawer:m?e("action-sheet__fullwidth_drawer"):null,title:e("action-sheet__title"),titleText:e("action-sheet__title__text"),content:e("action-sheet__content"),button:e("action-sheet__button"),buttonFirst:e("action-sheet__button--first"),buttonText:e("action-sheet__button__text"),gallery:e("action-sheet__gallery"),galleryContainer:e("action-sheet__gallery__container"),galleryItem:e("action-sheet__gallery__item"),galleryItemCell:e("action-sheet__gallery__item-cell"),galleryItemIcon:e("action-sheet__gallery__item-icon"),galleryItemText:e("action-sheet__gallery__item-text"),cancel:e(["action-sheet__button","action-sheet__button--first","action-sheet__cancel"]),cancelText:e(["action-sheet__button__text","action-sheet__cancel__text"]),active:e("action-sheet__button--active")}})),k=function(){A.apply(void 0,arguments),M("buttonClick")};return(0,r.createElement)(s.default,p({},S,{visible:n,placement:"bottom",onHide:M,onShow:O,bgTransparent:!0,onUnmount:E,ref:t,styles:{"drawer--bottom":R.drawer}}),(0,r.createElement)(u.default,{style:R.root},(0,r.createElement)(u.default,{style:R.body},h?(0,r.createElement)(u.default,{style:R.title},(0,r.createElement)(d.default,{style:R.titleText},h)):null,(0,r.createElement)(u.default,{style:R.content},v?v():w&&w.length>0?w.map((function(e,t){return(0,r.createElement)(i.default,{horizontal:!0,style:R.gallery,contentContainerStyle:R.galleryContainer},e.map((function(e,n){return(0,r.createElement)(u.default,{onClick:function(r){e.onClick&&e.onClick(r),k(t,n,r)},style:R.galleryItem},(0,r.createElement)(u.default,{style:p({},R.galleryItemCell,{},e.style||{})},e.image?(0,r.createElement)(o.default,{source:{uri:e.image},style:p({width:R.galleryItemCell.width,height:R.galleryItemCell.height},e.mediaStyle||{})}):(0,r.createElement)(l.default,{name:e.icon,style:p({},R.galleryItemIcon,{},e.mediaStyle||{})})),e.text?(0,r.createElement)(d.default,{style:p({},R.galleryItemText,{},e.textStyle)},e.text):null)})))})):b.map((function(e,t){return(0,r.createElement)(u.default,{key:t,style:p({},R.button,{},t?null:R.buttonFirst,{},e.style),onClick:function(n){e.onClick&&e.onClick(n),k(t,n)}},(0,r.createElement)(d.default,{style:p({},R.buttonText,{},e.textStyle)},e.text))})))),(0,r.createElement)(u.default,{style:R.footer},(0,r.createElement)(u.default,{style:p({},R.cancel,{},_.style),onClick:function(){return M("cancelClick")}},(0,r.createElement)(d.default,{style:p({},R.cancelText,{},_.textStyle)},_.text||C.cancel)))))}));t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=c(n(1)),o=c(n(53)),a=c(n(13)),s=c(n(24)),l=c(n(146));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=c(n(147)).default;function f(e){var t=d.__cache||(d.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=d[r[0].trim()]:r.forEach((function(e){i=Object.assign(i,d[e.trim()])})),t[n]=i),i}var h="rax-scrollview",p=(0,r.forwardRef)((function(e,t){var n,c=e.className,d=e.style,p=e.horizontal,v=e.contentContainerStyle,g=e.scrollEventThrottle,_=e.showsHorizontalScrollIndicator,y=e.showsVerticalScrollIndicator,b=(e.onEndReached,e.onEndReachedThreshold),x=(e.onScroll,e.children),w=(0,r.useState)(0),T=(w[0],w[1],(0,r.useRef)(0)),A=(0,r.useRef)(0),E=(0,r.useRef)(0),O=(0,r.useRef)(null),M=(0,r.useRef)(null),S=function(t){if(e.onScroll&&(t.nativeEvent={get contentOffset(){return{x:t.target.scrollLeft,y:t.target.scrollTop}},get contentSize(){return{width:t.target.scrollWidth,height:t.target.scrollHeight}}},e.onScroll(t)),e.onEndReached){var n=O.current;E.current=e.horizontal?n.offsetWidth:n.offsetHeight;var r=e.horizontal?n.scrollWidth:n.scrollHeight,i=e.horizontal?n.scrollLeft:n.scrollTop,o=r-i-E.current<b,a=i>T.current,s=r!=A.current;o&&a&&s&&(A.current=r,e.onEndReached(t)),T.current=i}};if((0,r.useImperativeHandle)(t,(function(){return{_nativeNode:O.current,resetScroll:function(){A.current=0,T.current=0},scrollTo:function(e){var t=e||{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.animated,s=void 0===a||a,c=t.duration,u=void 0===c?400:c,d=document.documentElement.clientWidth/750,f=O.current,h=f.scrollLeft,p=f.scrollTop;s?new l.default({duration:u,easing:"easeOutSine",onRun:function(e){r>=0&&(O.current.scrollLeft=h+e.percent*(r*d-h)),o>=0&&(O.current.scrollTop=p+e.percent*(o*d-p))}}).run():(r>=0&&(O.current.scrollLeft=d*r),o>=0&&(O.current.scrollTop=d*o))},scrollIntoView:function(e){var t=e||{},n=t.id;t.animated;if(!n)throw new Error("Params missing id.");(0,a.default)(n)}}})),b="string"==typeof b?parseInt(b,10):b,d){var C=["alignItems","justifyContent"].filter((function(e){return void 0!==d[e]}));0!==C.length&&console.warn("ScrollView child layout ("+JSON.stringify(C)+") must be applied through the contentContainerStyle prop.")}(0,r.createElement)(i.default,null);var R=null;R=Array.isArray(x)?x.map((function(e){return"object"==typeof e&&null!==e&&"type"in e&&(e.type,o.default),e})):x;var k=(0,r.createElement)(i.default,{ref:M,className:(0,s.default)((n={},n[h+"-content-container-horizontal"]=p,n[h+"-webcontainer"]=!p,n)),style:Object.assign({},f((0,s.default)((n={},n[h+"-content-container-horizontal"]=p,n[h+"-webcontainer"]=!p,n))),v)},R),P=Object.assign({},d),L=(0,s.default)(h,h+"-"+(p?"horizontal":"vertical"),c);if(!(e.horizontal?_:y)&&"undefined"!=typeof document&&"function"==typeof document.getElementById&&!document.getElementById("rax-scrollview-style")){var I=document.createElement("style");I.id="rax-scrollview-style",document.head.appendChild(I),I.innerHTML="."+h+"::-webkit-scrollbar{display: none;}"}P.WebkitOverflowScrolling="touch",P.overflow="scroll";var F=Object.assign({},e);return delete F.onEndReachedThreshold,(0,r.createElement)(i.default,u({},F,{ref:O,className:L,style:Object.assign({},f(L),P),onScroll:g?m(S,g):S}),k)}));function m(e,t){var n,r,i,o,a=0;function s(){o=0,a=+new Date,i=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var e=(new Date).getTime()-a;return o||(e>=t?s():o=setTimeout(s,t-e)),i}}p.defaultProps={scrollEventThrottle:50,onEndReachedThreshold:500,showsHorizontalScrollIndicator:!0,showsVerticalScrollIndicator:!0,className:"rax-scrollview"},p.displayName="ScrollView";var v=p;t.default=v},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;n(0);var r=function(){return null};r.displayName="RefreshControl";var i=r;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return document.getElementById(e)};n(55)},function(e,t,n){e.exports=n(145)},function(e,t,n){"use strict";t.__esModule=!0,t.useStyles=function(e,t,n){void 0===t&&(t={});var i=t.styles,a=void 0===i?{}:i,l=(0,r.useContext)(o.default).transformUnit,d=u(),f={fontFamily:d.Core["font-family-base"],boxSizing:"border-box"};"function"==typeof a&&(a=a(d));var h="function"==typeof e?e(d):e;return Object.keys(a).forEach((function(e){h[e]&&a[e]&&(h[e]=s({},h[e],{},a[e]))})),Object.keys(h).forEach((function(e){c(h[e],l),h[e]=s({},f,{},h[e])})),delete t.styles,n?n((function e(t){if(!t)return{};if(Array.isArray(t))return Object.assign.apply(Object,[{}].concat(Array.from(new Set(t)).map((function(t){return e(t)}))));switch(typeof t){case"object":return e(Object.keys(t).filter((function(e){return!!t[e]})).join(" "));case"string":return Object.assign.apply(Object,[{}].concat(t.split(" ").filter((function(e){return!!e&&!!h[e]})).map((function(e){return h[e]}))))}return{}})):h},t.useTheme=t.transformUnit=void 0;var r=n(0),i=a(n(148)),o=a(n(31));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=["fontWeight","zIndex","flex","flexGrow","flexShinrk","opacity"],c=function(e,t){void 0===e&&(e={}),Object.keys(e).forEach((function(n){-1!==l.indexOf(n)||"number"!=typeof e[n]||"lineHeight"===n&&e[n]<4||(e[n]="function"!=typeof t?[e[n],"rpx"].join(""):t(e[n]))}))};t.transformUnit=c;var u=function(){var e=(0,r.useContext)(o.default).theme,t=void 0===e?{}:e;return t.Core=s({},i.default,{},t.Core||{}),t};t.useTheme=u},function(e,t,n){"use strict";function r(e,t){return e*t}t.__esModule=!0,t.default=void 0;var i={"size-base":8,"s-0":r(8,0),"s-1":r(8,1),"s-2":r(8,2),"s-3":r(8,3),"s-4":r(8,4),"s-5":r(8,5),"s-6":r(8,6),"s-7":r(8,7),"s-8":r(8,8),"s-9":r(8,9),"s-10":r(8,10),"s-11":r(8,11),"s-12":r(8,12),"s-13":r(8,13),"s-14":r(8,14),"s-15":r(8,15),"s-16":r(8,16),"s-17":r(8,17),"s-18":r(8,18),"s-19":r(8,19),"s-20":r(8,20)};t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={"color-transparent":"transparent","color-white":"#FFFFFF","color-black":"#000000","color-brand1-1":"#EEF3f9","color-brand1-6":"#5584FF","color-brand1-9":"#3E71F7","color-line1-1":"#E6E7EB","color-line1-2":"#DCDEE3","color-line1-3":"#C4C6CF","color-fill1-1":"#F7F8FA","color-fill1-2":"#F2F3F7","color-fill1-3":"#EBECF0","color-text1-1":"#CCCCCC","color-text1-2":"#999999","color-text1-3":"#666666","color-text1-4":"#333333","color-success-1":"#E4FDDA","color-success-2":"#46BC15","color-success-3":"#41A716","color-notice-1":"#E3F2FD","color-notice-2":"#4494F9","color-notice-3":"#2E7DE0","color-warning-1":"#FFF3E0","color-warning-2":"#FF9800","color-warning-3":"#EB7E10","color-error-1":"#FFECE4","color-error-2":"#FF3000","color-error-3":"#E72B00","color-help-1":"#E3FFF8","color-help-2":"#01C1B2","color-help-3":"#01A79A","color-link-1":"#5584FF","color-link-2":"#5584FF","color-link-3":"#3E71F7"};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(157))&&r.__esModule?r:{default:r};t.Modal=i.default;var o=i.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=s(n(1)),o=s(n(158)),a=s(n(13));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={},u=1999091012138,d=function(e,t,n){if(void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n=!0),n&&Object.keys(e).length!==Object.keys(t).length)return!1;for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(e[o]!==t[o])return!1}return!0},f=(0,r.forwardRef)((function(e,t){var n=e.properties,s=void 0===n?[]:n,f=e.delay,h=void 0===f?0:f,p=e.duration,m=e.timingFunction,v=void 0===m?"ease":m,g=e.onTransitionEnd,_=void 0===g?function(){}:g,y=e.style,b=void 0===y?{}:y,x=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["properties","delay","duration","timingFunction","onTransitionEnd","style"]),w=(0,r.useState)({}),T=w[0],A=w[1],E=(0,r.useState)(b),O=E[0],M=E[1],S=(0,r.useState)(0),C=S[0],R=S[1],k=(0,r.useState)(null),P=(k[0],k[1],function(e,t,n){var r={},i={};return Object.keys(e).forEach((function(o){if(-1!==n.indexOf(o))return r[o]=e[o],void(t.hasOwnProperty(o)&&(i[o]=t[o]));i[o]=e[o]})),{transition:r,view:i}}(b,O,s));d(T,P.transition)||A(P.transition),d(O,P.view)||M(P.view),C||R(u++);var L=function(){c[C]&&(M(l({},O,{},T)),_())};return(0,r.useEffect)((function(){p&&0!==s.length&&!d(T,O,!1)&&function(e,t,n,r,i){c[i]&&(clearTimeout(c[i]),c[i]=null),c[i]=setTimeout((function(){r()}),n.duration+n.delay),(0,o.default)(e,t,n)}((0,a.default)(t.current),l({},T),{delay:h,duration:p,timingFunction:v},L,C)}),[T,O]),(0,r.useEffect)((function(){return function(){C&&(clearTimeout(C),delete c[C])}}),[]),(0,r.createElement)(i.default,l({},x,{ref:t,style:P.view}))}));t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.rpx2px=t.px2rpx=void 0;var r=n(164);t.px2rpx=function(e){return Number((750*e/r.screenWidth).toFixed(8))};t.rpx2px=function(e){return Number((r.screenWidth/750*e).toFixed(8))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){return{backdrop:{position:"absolute",left:0,top:0,bottom:0,right:0,touchAction:"none",zIndex:-1,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},modal:{position:"fixed",zIndex:1300,left:0,right:0,bottom:0,top:0},"modal--view":{position:"absolute",zIndex:1},"modal--hidden":{right:800,left:"auto"}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.useLocale=function(e,t,n){void 0===t&&(t={});void 0===n&&(n={});var r=t.locale,s=void 0===r?{}:r,l=(0,i.useContext)(o.default).locale,c=void 0===l?{}:l;return delete t.locale,a({},n,{},c[e]||{},{},s||{})};var r,i=n(0),o=(r=n(32))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=f(n(8)),o=f(n(10)),a=f(n(9)),s=n(4),l=f(n(1)),c=f(n(2)),u=f(n(6)),d=f(n(184));function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=(0,r.forwardRef)((function(e,t){var n=e.type,f=void 0===n?"normal":n,p=e.size,m=void 0===p?"medium":p,v=e.cell,g=void 0!==v&&v,_=e.text,y=void 0!==_&&_,b=e.block,x=void 0!==b&&b,w=e.disabled,T=void 0!==w&&w,A=e.press,E=void 0!==A&&A,O=e.prefixIcon,M=e.suffixIcon,S=e.children,C=e.style,R=void 0===C?{}:C,k=e.onTouchStart,P=void 0===k?function(){}:k,L=e.onTouchEnd,I=void 0===L?function(){}:L,F=e.onClick,D=void 0===F?function(){}:F,N=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["type","size","cell","text","block","disabled","press","prefixIcon","suffixIcon","children","style","onTouchStart","onTouchEnd","onClick"]),z=(0,r.useState)("normal"),j=z[0],B=z[1];j=function(e){var t=e.disabled,n=e.state,r=e.press;return t?"disabled":r?"press":n}({disabled:T,state:j,press:E});var U=(0,s.useStyles)(d.default,N,(function(e){var t=g?"--cell":y?"--text":"",n="normal"!==f?"--"+f:"",r="normal"!==j?"--"+j:"";return{button:h({},e(["button","button"+t,"button"+t+n,"button"+t+n+r,"button"+t+"--"+m,{"button--block":x||g}]),{},R),text:e(["button__text","button"+t+"__text","button"+t+n+"__text","button"+t+n+r+"__text","button"+t+"--"+m+"__text"]),icon:e(["button__icon","button"+t+"__icon","button"+t+n+"__icon","button"+t+n+r+"__icon","button"+t+"--"+m+"__icon"]),iconFirst:e(["button__icon--first"]),iconLast:e(["button__icon--last"])}}));return(0,r.createElement)(l.default,h({},N,{ref:t,style:U.button,onTouchStart:function(e){T||(B("press"),P(e))},onTouchEnd:function(e){T||(B("normal"),I(e))},onClick:function(e){T||D(e)}}),O?(0,r.createElement)(u.default,{key:"prefix-icon",style:h({},U.icon,{},U.iconFirst,{},S||M?{}:U.iconLast),name:O}):null,function(e,t){var n=i.default.count(e);return i.default.map(e,(function(e,i){var s=e.key||"button_"+i;switch(!0){case"string"==typeof e:return(0,r.createElement)(c.default,{key:s,style:t.text},e);case(0,o.default)(e)&&e.type===c.default:return(0,a.default)(e,{key:s,style:h({},t.text,{},e.props.style||{})});case(0,o.default)(e)&&e.type===u.default:return(0,a.default)(e,{key:s,style:h({},t.icon,{},0===i?t.iconFirst:{},{},i===n-1?t.iconLast:{},{},e.props.style||{})});default:return(0,a.default)(e,{key:s})}}))}(S,U),M?(0,r.createElement)(u.default,{key:"suffix-icon",name:M,style:h({},U.icon,{},U.iconLast,{},S||O?{}:U.iconFirst)}):null)}));p.displayName="Button";var m=p;t.default=m},function(e,t,n){e.exports=n(189)()},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=c(n(1)),a=c(n(2)),s=c(n(6)),l=c(n(198));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=(0,r.forwardRef)((function(e,t){var n=e.children,c=e.checked,d=e.indeterminate,f=e.disabled,h=e.defaultChecked,p=e.defaultIndeterminate,m=e.checkIcon,v=void 0===m?"checkbox":m,g=e.indeterminateIcon,_=void 0===g?"semi-select":g,y=e.readOnly,b=e.onChange,x=e.style,w=e.onTouchStart,T=void 0===w?function(){}:w,A=e.onTouchEnd,E=void 0===A?function(){}:A,O=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","checked","indeterminate","disabled","defaultChecked","defaultIndeterminate","checkIcon","indeterminateIcon","readOnly","onChange","style","onTouchStart","onTouchEnd"]),M=(0,r.useState)(h),S=M[0],C=M[1],R=(0,r.useState)(p),k=R[0],P=R[1];"checked"in e&&C(c),"indeterminate"in e&&P(d);var L=(0,i.useStyles)(l.default,O,(function(e){var t=S?"--selected":"",n=f?"--disabled":"",r=!S&&k?"--indeterminate":"";return{container:u({},e(["checkbox__container"]),{},x),circle:e(["checkbox__circle","checkbox"+t+r+n+"__circle"]),icon:e(["checkbox__icon","checkbox"+t+r+n+"__icon"]),text:e(["checkbox__text","checkbox"+t+r+n+"__text"])}}));return(0,r.createElement)(o.default,u({ref:t},O,{onTouchStart:function(e){f||y||T(e)},onTouchEnd:function(e){f||y||E(e)},onClick:function(t){f||y||("indeterminate"in e&&b&&b(!k,t),"checked"in e?b&&b(!S,t):"indeterminate"in e||(C(!S),b&&b(!S,t)))},style:L.container}),(0,r.createElement)(o.default,{style:L.circle},S&&(0,r.createElement)(s.default,{name:v,style:L.icon}),!S&&k&&(0,r.createElement)(s.default,{name:_,style:L.icon})),"string"==typeof n?(0,r.createElement)(a.default,{style:L.text},n):(0,r.createElement)(o.default,{style:L.text},n))}));t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TextFieldLabelType=t.TextFieldAlign=void 0;var r,i,o=n(0),a=u(n(40)),s=u(n(1)),l=u(n(2)),c=u(n(33));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.TextFieldAlign=r,function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center"}(r||(t.TextFieldAlign=r={})),t.TextFieldLabelType=i,function(e){e.INNER="inner",e.UPPER="upper",e.DYNAMIC="dynamic"}(i||(t.TextFieldLabelType=i={}));var f=(0,o.forwardRef)((function(e,t){var n=e.data,r=void 0===n?[]:n,i=e.label,u=e.labelWidth,f=e.labelType,h=e.icon,p=e.type,m=e.actionIcon,v=void 0===m?"dropdown-down":m,g=e.value,_=e.defaultValue,y=e.disabled,b=e.readOnly,x=void 0!==b&&b,w=e.solo,T=e.outline,A=e.placeholder,E=e.helpText,O=e.errorText,M=e.align,S=e.clear,C=e.append,R=e.prepend,k=e.renderSelection,P=void 0===k?null:k,L=e.renderPicker,I=void 0===L?function(){return null}:L,F=e.onClick,D=void 0===F?function(){}:F,N=e.onFocus,z=e.onBlur,j=e.onShow,B=void 0===j?function(){}:j,U=e.onHide,V=void 0===U?function(){}:U,H=e.onChange,G=void 0===H?function(){}:H,W=e.styles,X=void 0===W?{}:W,Y=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","label","labelWidth","labelType","icon","type","actionIcon","value","defaultValue","disabled","readOnly","solo","outline","placeholder","helpText","errorText","align","clear","append","prepend","renderSelection","renderPicker","onClick","onFocus","onBlur","onShow","onHide","onChange","styles"]),q=(0,o.useState)(!1),K=q[0],Q=q[1],J=(0,o.useState)(0),Z=J[0],$=J[1],ee=(0,o.useState)(_),te=ee[0],ne=ee[1],re=(0,o.useState)(""),ie=re[0],oe=re[1],ae=(r||[]).find((function(e){return e.value===te}))||null;"value"in e&&ne(g);return(0,o.createElement)(a.default,d({},Y,{styles:X,ref:t,label:i,labelWidth:u,labelType:f,icon:h,value:ie,actionIcon:v,disabled:y,solo:w,outline:T,placeholder:A,helpText:E,errorText:O,align:M,clear:S,focused:K,onChange:function(e){e||ne(null)},append:C,prepend:R,onClick:function(){y||x||(Q(!0),$(Z+1),c.default.setPicking(!1),B(),D.apply(void 0,arguments))},onFocus:N,onBlur:z,renderInput:function(e){var t=e.value,n=e.placeholder,r=e.align,i=e.style,a={color:i.color,fontSize:i.fontSize,lineHeight:i.lineHeight,textAlign:r,flex:1,textOverflow:"ellipsis"};return(0,o.createElement)(s.default,{style:d({},i,{position:"relative"})},te&&"multiple"!==p&&P?P(te,ie,ae):(0,o.createElement)(s.default,{style:{position:"absolute",left:0,right:0,top:i.paddingTop||0,bottom:i.paddingBottom||0,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",overflow:"hidden"}},(0,o.createElement)(l.default,{numberOfLines:1,style:a},t||n)))}}),I({data:r,value:te,visible:K,onHide:function(){Q(!1),c.default.setPicking(!1),V.apply(void 0,arguments)},onChange:function(t){"value"in e||ne(t);for(var n=(r||[]).find((function(e){return e.value===t}))||null,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];G.apply(null,[t].concat(o,[n]))},valueLabel:ie,setValueLabel:function(e){return oe(e)}}))}));t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(203),i=n(0),o=s(n(204)),a=s(n(206));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=s(n(207)).default;function u(e){var t=c.__cache||(c.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=c[r[0].trim()]:r.forEach((function(e){"object"==typeof c[e.trim()]&&(i=Object.assign(i,c[e.trim()]))})),t[n]=i),i}var d=0;function f(e){return e.target.value}function h(e){var t=f(e);return{nativeEvent:{text:t},originalEvent:e,value:t,target:e.target}}var p=(0,i.forwardRef)((function(e,t){var n=(0,i.useRef)(null),s=(0,i.useState)(0)[1],c="rax-textinput-placeholder-"+d++,p=e.className,m=e.accessibilityLabel,v=e.autoComplete,g=e.editable,_=e.keyboardType,y=e.maxNumberOfLines,b=e.maxLength,x=e.maxlength,w=e.multiline,T=e.numberOfLines,A=e.confirmType,E=e.randomNumber,O=e.showCount,M=void 0===O||O,S=e.selectionStart,C=e.selectionEnd,R=e.onBlur,k=e.onFocus,P=e.onChange,L=e.onChangeText,I=e.onInput,F=e.password,D=e.secureTextEntry,N=e.style,z=e.placeholderColor,j=void 0===z?"#999999":z,B=e.value,U=e.defaultValue,V=e.controlled,H=F||D?"password":void 0===a.default[_]?_:a.default[_],G=function(e){P&&P(h(e)),L&&L(f(e))},W=Object.assign(Object.assign({},e),{"aria-label":m,autoComplete:v&&"on",maxlength:x||b,onChange:(P||L)&&G,onInput:function(e){I&&I(h(e)),s((function(e){return e+1}))},onBlur:R&&function(e){R(h(e))},onFocus:k&&function(e){k(h(e))},ref:n}),X=Boolean(void 0!==g&&!g),Y=T||y;return(0,i.useImperativeHandle)(t,(function(){return{_nativeNode:n.current,focus:function(){n.current.focus()},blur:function(){n.current.blur()},clear:function(){!function(e){void 0===e&&(e=""),(0,o.default)(n.current,{value:e})}("")}}})),(0,i.useEffect)((function(){if(V&&null!=B&&n.current){var e=n.current.value,t=""+B;e!==t&&(n.current.value=t)}})),w?(0,i.createElement)(i.Fragment,null,(0,r.createCondition)([[function(){return j},function(){return(0,i.createElement)("style",{dangerouslySetInnerHTML:{__html:"."+c+"::placeholder {\n            color: "+j+"\n          }"}})}]]),(0,i.createElement)("textarea",l({},W,{className:["rax-textinput",c,p||""].join(" "),style:Object.assign({},u(["rax-textinput",c,p||""].join(" ")),Object.assign(Object.assign({},N),{placeholderColor:j})),row:Y,rows:Y,disabled:X,onChange:G,value:B||U,"confirm-type":A,"show-count":M}),W.value||U||"")):(0,i.createElement)(i.Fragment,null,(0,r.createCondition)([[function(){return j},function(){return(0,i.createElement)("style",{dangerouslySetInnerHTML:{__html:"."+c+"::placeholder {\n            color: "+j+"\n          }"}})}]]),(0,i.createElement)("input",l({},W,{className:["rax-textinput",c,p||""].join(" "),style:Object.assign({},u(["rax-textinput",c,p||""].join(" ")),Object.assign(Object.assign({},N),{placeholderColor:j})),type:H,disabled:X,value:B||U,"confirm-type":A,"random-Number":E,"selection-start":S,"selection-end":C})))}));p.displayName="TextInput";var m=p;t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=h(n(1)),a=h(n(2)),s=h(n(27)),l=h(n(17)),c=h(n(41)),u=n(11),d=h(n(73)),f=n(74);h(n(33));function h(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=(0,r.forwardRef)((function(e,t){var n=e.visible,h=e.onHide,m=e.title,v=e.styles,g=e.onChange,_=void 0===g?function(){}:g,y=e.onPickerChange,b=void 0===y?function(){}:y,x=e.value,w=e.view,T=void 0!==w&&w,A=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["visible","onHide","title","styles","onChange","onPickerChange","value","view"]),E=(0,r.useState)(null),O=E[0],M=E[1],S=(0,r.useState)(null),C=S[0],R=S[1],k=(0,u.useLocale)("Select",A,{ok:"",cancel:"",empty:""});O!==x&&(M(x),R(x));var P=(0,i.useStyles)(d.default,{styles:v},(function(e){return{picker:e("select__picker"),toolbar:e("select__picker__toolbar"),title:e("select__picker__title"),titleText:e("select__picker__title__text"),emptyText:e("select__picker__text--empty")}}));return(0,r.createElement)(s.default,{placement:"bottom",styles:v,view:T,visible:n,onMaskClick:h},(0,r.createElement)(o.default,{ref:t,style:P.picker},(0,r.createElement)(o.default,{style:P.toolbar},(0,r.createElement)(l.default,{text:!0,styles:v,onClick:h,type:"primary"},k.cancel),(0,r.createElement)(o.default,{style:P.title},(0,r.createElement)(a.default,{style:P.titleText},m)),(0,r.createElement)(l.default,{text:!0,styles:v,onClick:function(){h();var t=e.data;if(Array.isArray(t)&&t.length){var n=C&&0!==C.length?C:function(e){var t=e.data,n=e.cascade;return 0===t.length?null:n?(0,f.treeFilter)(t,(function(e,t,n){return 0===n})).map((function(e){return e.value})):t.map((function(e){return e[0]})).filter((function(e){return!!e})).map((function(e){return e.value}))}({data:A.data,cascade:!1!==A.cascade});_(n)}},type:"primary"},k.ok)),Array.isArray(e.data)&&e.data.length?(0,r.createElement)(c.default,p({},A,{styles:v,value:C,onChange:function(e){R(e),b(e)}})):(0,r.createElement)(a.default,{style:P.emptyText},k.empty)))}));t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{picker:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row"},picker__item:{flex:1,textAlign:"center"},picker__col:{overflow:"hidden",width:"100%",position:"relative",height:7*n["s-9"]},"picker__col-content":{position:"absolute",left:0,top:0,width:"100%",height:"100%",paddingTop:3*n["s-9"],paddingBottom:3*n["s-9"]},"picker__col-item":{touchAction:"manipulation",textAlign:"center",fontSize:n["font-size-subhead"],height:n["s-9"],lineHeight:n["s-9"],color:n["color-text1-4"],whiteSpace:"nowrap",textOverflow:"ellipsis"},"picker__col-item--disabled":{color:n["color-text1-1"]},"picker__col-item--selected":{fontSize:n["font-size-subhead"]},picker__mask:{position:"absolute",left:0,top:0,height:"100%",margin:"0 auto",width:"100%",zIndex:3,backgroundImage:"\n        linear-gradient(to bottom, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6)),\n        linear-gradient(to top, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.6))\n      ",backgroundPosition:"top, bottom",backgroundRepeat:"no-repeat"},picker__indicator:{position:"absolute",left:0,top:3*n["s-9"],zIndex:3,width:"100%",height:n["s-9"],borderTop:"1px solid "+n["color-line1-2"],borderBottom:"1px solid "+n["color-line1-2"]},"picker__text--empty":{color:n["color-text1-1"],fontSize:n["font-size-subhead"],textAlign:"center",alignItems:"center",width:"100%",margin:n["s-8"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=(0,n(0).createContext)({styles:{picker:{},item:{},col:{},colContent:{},colItem:{},colItemSelected:{},colItemDisabled:{},mask:{},indicator:{}}});t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.getDataArray=function(e,t,n){void 0===e&&(e=[]);if(!n)return e;if(Array.isArray(e)&&0===e.length)return e;var r=[].concat(e),i=[e],o=[].concat(t);0===o.length&&e.length>0&&o.push(e[0].value);var a=0;for(;r.length>0;){var s=(r.find((function(e){return e.value===o[a]}))||r[0]).children,l=void 0===s?[]:s;l.length>0&&i.push(l),r=l,a++}return i},t.getDataArrayByIndex=function(e,t,n){void 0===t&&(t=[]);if(!n)return e;var r=0,i=[].concat(e),o=[e];for(;i&&i.length>0;){var a=i[t[r]||0].children;a&&o.push(a),i=a,r++}return o},t.getIndex=function(e,t){return e.reduce((function(e,n,r){return n.forEach((function(n,i){n.value===t[r]&&(e=e.concat(i))})),e}),[])},t.formatNewIndexByLast=function(e,t){void 0===e&&(e=[]);void 0===t&&(t=[]);var n=!0;if(!t.length)return e;return e.map((function(e,r){return n?(void 0!==t[r]&&e===t[r]||(n=!1),e):0}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{select__picker:{backgroundColor:n["color-white"]},select__picker__toolbar:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",height:n["s-11"],borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:n["color-line1-2"],position:"relative"},select__picker__title:{position:"absolute",left:"20%",right:"20%",top:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},select__picker__title__text:{fontSize:n["font-size-subhead"],color:n["color-text1-4"],width:"100%",wordWrap:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"},select__picker__content:{height:7*n["s-12"]},"select__picker__text--empty":{marginTop:n["s-8"],marginBottom:n["s-8"],color:n["color-text1-1"],fontSize:n["font-size-subhead"],textAlign:"center"}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.treeFilter=function(e,t,n){(n=n||{}).childrenKeyName=n.childrenKeyName||"children";var r=e||[],i=[],o=0;do{var a=r.filter((function(e,n){return t(e,o,n)}))[0];if(!a)break;i.push(a),r=a[n.childrenKeyName]||[],o+=1}while(r.length>0);return i}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=h(n(27)),a=h(n(17)),s=h(n(1)),l=h(n(2)),c=h(n(52)),u=h(n(225)),d=n(11),f=h(n(73));function h(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=(0,r.forwardRef)((function(e,t){var n=e.data,h=void 0===n?[]:n,m=e.visible,v=e.onHide,g=e.title,_=e.styles,y=e.onChange,b=e.value,x=e.view,w=void 0!==x&&x,T=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","visible","onHide","title","styles","onChange","value","view"]),A=(0,r.useState)(null),E=A[0],O=A[1],M=(0,r.useState)(null),S=M[0],C=M[1],R=(0,d.useLocale)("Select",T,{ok:"",cancel:"",empty:""});E!==b&&(O(b),C(b));var k=(0,i.useStyles)(f.default,{styles:_},(function(e){return{picker:e("select__picker"),toolbar:e("select__picker__toolbar"),title:e("select__picker__title"),titleText:e("select__picker__title__text"),content:Array.isArray(h)&&h.length?e("select__picker__content"):null,emptyText:e("select__picker__text--empty")}}));return(0,r.createElement)(o.default,{placement:"bottom",view:w,styles:_,visible:m,onMaskClick:v},(0,r.createElement)(s.default,{ref:t,style:k.picker},(0,r.createElement)(s.default,{style:k.toolbar},(0,r.createElement)(a.default,{text:!0,styles:_,onClick:v,type:"primary"},R.cancel),(0,r.createElement)(s.default,{style:k.title},(0,r.createElement)(l.default,{style:k.titleText},g)),(0,r.createElement)(a.default,{text:!0,styles:_,onClick:function(){v(),y(S)},type:"primary"},R.ok)),(0,r.createElement)(s.default,{style:k.content},Array.isArray(h)&&h.length?(0,r.createElement)(c.default,null,(0,r.createElement)(u.default,p({},T,{style:{borderTopWidth:0,borderBottomWidth:0},styles:_,data:h,value:S,onChange:function(e){C(e)}}))):(0,r.createElement)(l.default,{style:k.emptyText},R.empty))))}));t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n(18)),a=((r=n(34))&&r.__esModule,n(11)),s=n(77);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=new Date,d=new Date(u.getFullYear()+20,11,31,23,59,59,999),f=new Date(2e3,0,1,0,0,0,0),h={year:"",month:"",day:"",hour:"",minute:"",second:"",am:"",pm:""},p=(0,i.forwardRef)((function(e,t){var n=e.styles,r=e.type,l=void 0===r?"date":r,u=e.value,p=void 0===u?null:u,m=e.maxDate,v=void 0===m?d:m,g=e.minDate,_=void 0===g?f:g,y=e.use12Hours,b=void 0!==y&&y,x=e.selectSecond,w=void 0!==x&&x,T=e.visible,A=void 0!==T&&T,E=e.onHide,O=e.title,M=void 0===O?"":O,S=e.onChange,C=void 0===S?function(){}:S,R=e.view,k=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["styles","type","value","maxDate","minDate","use12Hours","selectSecond","visible","onHide","title","onChange","view"]),P=(0,a.useLocale)("DatePicker",k,h),L=(0,i.useState)(null),I=L[0],F=L[1],D=(0,i.useState)((0,s.getDate)(new Date,v,_)),N=D[0],z=D[1],j=(0,i.useState)((0,s.getDataSource)(N,l,w,b,v,_,P)),B=j[0],U=j[1],V=(0,i.useState)((0,s.getValues)(p,l,w,b,v,_)),H=V[0],G=V[1];return I!==p&&(F(p),z((0,s.getDate)(p,v,_)),G((0,s.getValues)(p,l,w,b,v,_)),U((0,s.getDataSource)(N,l,w,b,v,_,P))),(0,i.createElement)(o.default.Picker,c({},k,{data:B,value:H,visible:A,cascade:!1,styles:n,ref:t,onHide:E,title:M,onPickerChange:function(e){var t=(0,s.getDate)((0,s.getDateByValues)(N,e,l,w,b),v,_);t.getTime()!==N.getTime()&&(z(N),G(e),U((0,s.getDataSource)(t,l,w,b,v,_,P)))},onChange:function(e){var t=(0,s.getDate)((0,s.getDateByValues)(N,e,l,w,b),v,_);C(t)},view:R}))}));t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.cloneDate=a,t.getDataSource=t.getAMPM=t.getSeconds=t.getMinutes=t.getHours=t.getDays=t.getMonths=t.getYears=t.formatNumber=t.getValues=t.getDateByValues=t.getDaysInMonth=t.getDate=t.getDefaultFormat=void 0;var r,i=(r=n(34))&&r.__esModule?r:{default:r};function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){return new Date(e.getTime())}var s=function(e,t,n){var r="HH:mm";return t&&(r+=":ss"),n&&(r=r.replace("HH","hh")+" A"),{date:"YYYY-MM-DD",year:"YYYY",month:"YYYY-MM",datetime:["YYYY-MM-DD",r].join(" "),time:r}[e]};t.getDefaultFormat=s;var l=function(e,t,n){return e||(e=new Date),e.getTime()>t.getTime()&&(e=a(t)),e.getTime()<n.getTime()&&(e=a(n)),e};t.getDate=l;var c=function(e){var t=new Date(e.getFullYear(),e.getMonth(),1);return t.setMonth(t.getMonth()+1),t.setDate(t.getDate()-1),t.getDate()};t.getDaysInMonth=c;t.getDateByValues=function(e,t,n,r,i){var o=a(e);return o.setDate(1),{date:"year_month_date",year:"year",month:"year_month",datetime:"year_month_date_hour_minute"+(r?"_second":""),time:"hour_minute"+(r?"_second":"")}[n].split("_").forEach((function(e,n){var r=t[n],a=c(o);switch(e){case"year":o.setFullYear(r);break;case"month":o.setMonth(r);break;case"date":o.setDate(r>a?a:r);break;case"hour":if(i&&"am"===t[t.length-1]&&r>11){o.setHours(r-12);break}if(i&&"pm"===t[t.length-1]&&r<12){o.setHours(r+12);break}o.setHours(r);break;case"minute":o.setMinutes(r);break;case"second":o.setSeconds(r)}})),o};t.getValues=function(e,t,n,r,o,a){e=l(e,o,a);var c=(0,i.default)(e),u=[],d=s(t,n,r),f=c.hour();return-1!==d.indexOf("YYYY")&&u.push(c.year()),-1!==d.indexOf("MM")&&u.push(c.month()),-1!==d.indexOf("DD")&&u.push(c.date()),-1===d.indexOf("HH")&&-1===d.indexOf("hh")||u.push(f),-1!==d.indexOf("mm")&&u.push(c.minute()),-1!==d.indexOf("ss")&&u.push(c.second()),r&&u.push(f>11?"pm":"am"),u};var u=function(e){return e>9?e:"0"+e};t.formatNumber=u;var d=function(e,t,n){void 0===n&&(n={});for(var r=[],i=e.getFullYear(),o=t.getFullYear();o<=i;o+=1)r.push({label:""+o+(n.year||""),value:o});return r};t.getYears=d;var f=function(e,t,n,r){void 0===r&&(r={});var i=[],o=0,a=11;e.getFullYear()===n.getFullYear()&&(o=n.getMonth()),e.getFullYear()===t.getFullYear()&&(a=t.getMonth());for(var s=o;s<=a;s+=1)i.push({label:""+u(s+1)+(r.month||""),value:s});return i};t.getMonths=f;var h=function(e,t,n,r){void 0===r&&(r={});var i=[],o=c(e),a=1;e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&(o=t.getDate()),e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&(a=n.getDate());for(var s=a;s<=o;s+=1)i.push({label:""+u(s)+(r.day||""),value:s});return i};t.getDays=h;var p=function(e,t,n,r,i){void 0===r&&(r={});var a=[],s=23,l=0;e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&(s=t.getHours()),e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()&&(l=n.getHours());for(var c=l;c<=s;c+=1)a.push({label:""+u(c)+(r.hour||""),value:c});if(i){var d=e.getHours()>11;if((a=a.filter((function(e){return d&&e.value>11||!d&&e.value<12})).map((function(e){if(d){var t=e.value-12;return{label:""+u(t)+(r.hour||""),value:e.value}}return e}))).length>0&&(0===a[0].value||12===a[0].value)){var f=a[0];a.splice(0,1),a.push(o({},f,{label:"12"+(r.hour||"")}))}}return a};t.getHours=p;var m=function(e,t,n,r){void 0===r&&(r={});var i=[],o=59,a=0;e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&(o=t.getMinutes()),e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()&&e.getHours()===n.getHours()&&(a=n.getMinutes());for(var s=a;s<=o;s+=1)i.push({label:""+u(s)+(r.minute||""),value:s});return i};t.getMinutes=m;var v=function(e,t,n,r){void 0===r&&(r={});var i=[],o=59,a=0;e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&(o=t.getSeconds()),e.getFullYear()===n.getFullYear()&&e.getMonth()===n.getMonth()&&e.getDate()===n.getDate()&&e.getHours()===n.getHours()&&e.getMinutes()===n.getMinutes()&&(a=n.getSeconds());for(var s=a;s<=o;s+=1)i.push({label:""+u(s)+(r.second||""),value:s});return i};t.getSeconds=v;var g=function(e){return["am","pm"].map((function(t){return{label:e[t],value:t}}))};t.getAMPM=g;t.getDataSource=function(e,t,n,r,i,o,a){e=l(e,i,o);var c=s(t,n,r),u=[];return-1!==c.indexOf("YYYY")&&u.push(d(i,o,a)),-1!==c.indexOf("MM")&&u.push(f(e,i,o,a)),-1!==c.indexOf("DD")&&u.push(h(e,i,o,a)),-1===c.indexOf("HH")&&-1===c.indexOf("hh")||u.push(p(e,i,o,a,r)),-1!==c.indexOf("mm")&&u.push(m(e,i,o,a)),-1!==c.indexOf("ss")&&u.push(v(e,i,o,a)),r&&u.push(g(a)),u}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=d(n(59)),o=n(4),a=n(11),s=d(n(6)),l=d(n(1)),c=d(n(2)),u=d(n(229));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h={transition:{enter:{properties:["transform","opacity"],duration:250},exit:{properties:["transform","opacity"],duration:200}},styles:{enter:{opacity:1,transform:"scale(1)"},exit:{opacity:0,transform:"scale(0.6)"}}},p=(0,r.forwardRef)((function(e,t){var n=e.visible,d=void 0!==n&&n,p=e.view,m=void 0!==p&&p,v=e.type,g=void 0===v?"none":v,_=e.title,y=e.message,b=e.icon,x=e.iconColor,w=e.buttons,T=void 0===w?[]:w,A=e.buttonsDirection,E=void 0===A?"row":A,O=e.close,M=void 0!==O&&O,S=e.free,C=void 0!==S&&S,R=e.transition,k=void 0===R?h:R,P=e.renderBanner,L=e.onShow,I=e.onHide,F=void 0===I?function(){}:I,D=e.onEntered,N=e.disableBackdropClose,z=e.onButtonClick,j=void 0===z?function(){}:z,B=e.onOk,U=void 0===B?function(){}:B,V=e.onCancel,H=void 0===V?function(){}:V,G=e.style,W=e.styles,X=e.className,Y=e.children,q=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["visible","view","type","title","message","icon","iconColor","buttons","buttonsDirection","close","free","transition","renderBanner","onShow","onHide","onEntered","disableBackdropClose","onButtonClick","onOk","onCancel","style","styles","className","children"]),K=b;"notice"===K&&(K="prompt");var Q=(0,o.useStyles)(u.default,{styles:W},(function(e){var t=x;return t="prompt"===K?"notice":"info"===K?"normal":K,{container:e(["dialog__container"]),dialog:e(["dialog"]),banner:e(["dialog__banner"]),close:e(["dialog__close",{"dialog__close--free":C}]),closeIcon:e(["dialog__close__icon",{"dialog__close--alternate":!!P||C}]),title:e(["dialog__title"]),titleText:e("dialog__title__text"),content:e(["dialog__content",{"dialog__content--title":!!_}]),iconContainer:e("dialog__icon-container"),icon:e(["dialog__icon",{"dialog__icon--success":"success"===t,"dialog__icon--warning":"warning"===t,"dialog__icon--notice":"notice"===t,"dialog__icon--error":"error"===t}]),contentText:e(["dialog__content__text"]),buttons:e(["dialog__buttons",{"dialog__buttons--row":"row"===E,"dialog__buttons--column":"column"===E}]),button:e(["dialog__button",{"dialog__button--row":"row"===E,"dialog__button--column":"column"===E}]),buttonFirst:e(["dialog__button--first"]),buttonText:e(["dialog__button__text"])}})),J=(0,a.useLocale)("Dialog",q,{ok:"",cancel:""}),Z=T;if(!Z||0===Z.length){var $={text:J.cancel,onClick:function(e){H(e),F("cancel",e)}},ee={text:J.ok,onClick:function(e){U(e),F("ok",e)}};"confirm"===g?Z=[$,ee]:"alert"===g&&(Z=[ee])}var te=K&&(-1!==K.indexOf("://")||-1!==K.indexOf("data:image"));return(0,r.createElement)(i.default,f({},q,{styles:W,visible:d,view:m,disableBackdropClose:N||"none"!==g,containerStyle:Q.container,style:f({},Q.dialog,{},G),className:X,onClose:F,transition:k,ref:t,onEntered:function(){D&&D(),L&&L()}}),P?(0,r.createElement)(l.default,{style:Q.banner},P()):null,_?(0,r.createElement)(l.default,{style:Q.title},(0,r.createElement)(c.default,{style:Q.titleText},_)):null,(0,r.createElement)(l.default,{style:Q.content},K?(0,r.createElement)(l.default,{style:Q.iconContainer},(0,r.createElement)(s.default,{style:Q.icon,name:te?null:K,uri:te?K:null})):null,y?(0,r.createElement)(c.default,{style:Q.contentText},y):null,Y),M?(0,r.createElement)(l.default,{style:Q.close,onClick:function(){return F("closeClick")}},(0,r.createElement)(s.default,{name:"close",style:Q.closeIcon})):null,Z&&Z.length>0?(0,r.createElement)(l.default,{style:Q.buttons},Z.map((function(e,t){return(0,r.createElement)(l.default,{key:"buttons_"+t,onClick:function(e){return function(e,t){var n=Z[e].onClick;"function"==typeof n&&n(t),j(e,t)}(t,e)},style:f({},Q.button,{},e.style,{},0===t?Q.buttonFirst:{})},(0,r.createElement)(c.default,{style:f({},Q.buttonText,{},e.textStyle)},e.text))}))):null)}));t.default=p},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{"linear-progress":{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",position:"relative",height:n["s-1"]},"linear-progress__track":{height:n["s-1"],flex:1,backgroundColor:n["color-fill1-3"],borderRadius:n["s-1"],overflow:"hidden",position:"relative"},"linear-progress__bar":{position:"absolute",left:0,top:0,height:n["s-1"],backgroundColor:n["color-brand1-6"],borderRadius:n["s-1"],transition:"all 300ms",zIndex:1},"circle-progress":{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"relative",width:n["s-20"],height:n["s-20"]},"circle-progress__track":{stroke:n["color-fill1-3"],strokeWidth:n["line-3"]},"circle-progress__bar":{stroke:n["color-brand1-6"],strokeWidth:n["line-3"],strokeLinecap:"round"},"circle-progress__text-wrap":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute"},"circle-progress__text":{color:n["color-brand1-6"],fontSize:n["s-4"],textAlign:"center"}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.getValue=t.addRpx=void 0;t.addRpx=function(e){return e?"string"==typeof e?e:e+"rpx":e};t.getValue=function(e){if(!e)return 0;if("number"==typeof e)return e;var t=e.indexOf("rpx");return Number(-1===t?e:e.substring(0,t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=c(n(1)),a=c(n(2)),s=n(15),l=c(n(258));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=(0,r.forwardRef)((function(e,t){var n=e.children,c=e.checked,d=e.onChange,f=e.disabled,h=e.defaultChecked,p=e.readOnly,m=e.style,v=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","checked","onChange","disabled","defaultChecked","readOnly","style"]),g=(0,r.useState)(h),_=g[0],y=g[1];"checked"in e&&y(c);var b=(0,i.useStyles)(l.default,v,(function(e){var t=_?"--selected":"",n=f?"--disabled":"";return{container:u({},e(["radio__container"]),{},m),circle:e(["radio__circle","radio"+t+n+"__circle"]),point:e(["radio__point","radio"+t+n+"__point"]),text:e(["radio__text","radio"+t+n+"__text"]),button:e(["radio__button"])}}));return(0,r.createElement)(o.default,u({ref:t,onClick:function(t){f||p||(d&&d(!_,t),"checked"in e||y(!_))},style:b.container},v),(0,r.createElement)(o.default,{style:b.circle},(0,r.createElement)(s.Transition,{in:_,transition:{enter:{properties:["transform"],duration:100},exit:{properties:["transform"],duration:100}},styles:{enter:{transform:"scale(1)"},exit:{transform:"scale(0)"}}},(0,r.createElement)(s.TransitionView,{style:b.point}))),"string"==typeof n?(0,r.createElement)(a.default,{style:b.text},n):(0,r.createElement)(o.default,{style:b.text},n))}));t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t,r=n["s-7"],i=n["s-3"],o=n["s-2"];return{stepper:{display:"flex"},"stepper--horizontal":{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},"stepper--vertical":{flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start"},stepper__step:{flex:2},"stepper--horizontal__step":{flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},"stepper--horizontal__step--first":{justifyContent:"flex-start",flex:1},"stepper--horizontal__step--last":{justifyContent:"flex-end",flex:1},"stepper--vertical__step":{flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",marginTop:o,position:"relative"},"stepper--vertical__step--first":{marginTop:0},stepper__step__header:{display:"flex",justifyContent:"flex-start",alignItems:"center"},"stepper--horizontal__step__header":{flexDirection:"row",marginBottom:n["s-2"],width:"100%"},"stepper--horizontal__step--first__header":{paddingLeft:(200-r)/2,justifyContent:"flex-start"},"stepper--horizontal__step--last__header":{paddingRight:(200-r)/2,justifyContent:"flex-end"},"stepper--dot--horizontal__step--first__header":{paddingLeft:(200-i)/2,justifyContent:"flex-start"},"stepper--dot--horizontal__step--last__header":{paddingRight:(200-i)/2,justifyContent:"flex-end"},"stepper--vertical__step__header":{flexDirection:"column",marginRight:n["s-2"],minHeight:"100%"},stepper__step__connector:{flex:1},"stepper--horizontal__step__connector":{borderTopWidth:n["line-1"],borderTopStyle:n["line-solid"],borderTopColor:n["color-text1-1"],width:"100%"},"stepper--vertical__step__connector":{position:"absolute",left:(r-n["line-1"])/2,top:r+o,bottom:0,borderLeftWidth:n["line-1"],borderLeftStyle:n["line-solid"],borderLeftColor:n["color-text1-1"]},"stepper--dot--vertical__step__connector":{left:(i-n["line-1"])/2,top:i+o},"stepper--horizontal__step--finished__connector":{borderTopColor:n["color-brand1-6"]},"stepper--vertical__step--finished__connector":{borderLeftColor:n["color-brand1-6"]},stepper__step__node:{borderWidth:n["line-1"],borderStyle:n["line-solid"],borderColor:n["color-text1-3"],backgroundColor:n["color-transparent"],borderRadius:n["corner-round"],alignItems:"center",justifyContent:"center",width:r,height:r},"stepper--dot__step__node":{width:i,height:i},"stepper__step--finished__node":{borderColor:n["color-brand1-6"],backgroundColor:n["color-white"]},"stepper__step--processing__node":{borderColor:n["color-brand1-6"],backgroundColor:n["color-brand1-6"]},"stepper--horizontal__step__node":{marginLeft:o,marginRight:o},"stepper--horizontal__step--first__node":{marginLeft:0},"stepper--horizontal__step--last__node":{marginRight:0},"stepper--vertical__step__node":{marginBottom:o},"stepper--vertical__step--last__node":{marginBottom:0},stepper__step__icon:{fontSize:n["icon-xxs"],color:n["color-text1-3"]},"stepper__step--finished__icon":{color:n["color-brand1-6"]},"stepper__step--processing__icon":{color:n["color-white"]},stepper__step__number:{fontSize:n["font-size-body-1"],color:n["color-text1-3"]},"stepper__step--finished__number":{color:n["color-brand1-6"]},"stepper__step--processing__number":{color:n["color-white"]},stepper__step__body:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},"stepper--horizontal__step__body":{width:200,alignSelf:"center"},"stepper--vertical__step__body":{paddingTop:(r-n["font-size-body-1"])/2,paddingBottom:n["s-4"],flex:1},"stepper--dot--vertical__step__body":{paddingTop:(i-n["font-size-body-1"])/2},stepper__step__title:{fontSize:n["font-size-body-1"],fontWeight:n["font-weight-7"],color:n["color-text1-3"],lineHeight:1*n["font-size-body-1"],textAlign:"center"},"stepper__step--finished__title":{color:n["color-text1-3"]},"stepper__step--processing__title":{color:n["color-text1-4"]},"stepper--vertical__step__title":{textAlign:"left"},stepper__step__content:{fontSize:n["font-size-caption"],color:n["color-text1-3"],marginTop:n["s-1"],textAlign:"center"},"stepper--vertical__step__content":{textAlign:"left"},"stepper__step--finished__content":{color:n["color-text1-3"]},"stepper__step--processing__content":{color:n["color-text1-4"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TabsContext=void 0;var r=m(n(7)),i=n(0),o=m(n(8)),a=m(n(13)),s=n(4),l=n(275),c=m(n(1)),u=m(n(278)),d=m(n(9)),f=m(n(286)),h=m(n(90)),p=n(91);function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}n(287);var _=document.documentElement.clientWidth,y=(0,i.createContext)({activeValue:-1,styles:{tabs:{},container:{},activeLine:{},tab:{},tabIcon:{},tabText:{},activeTab:{},activeTabIcon:{},activeTabText:{},tabTextMargin:{}},bottom:!1,change:function(){}});t.TabsContext=y;var b=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)((0,p.guid)("tabs-"))[0],m=e.activeValue,b=e.defaultActiveValue,x=void 0===b?-1:b,w=e.type,T=void 0===w?"normal":w,A=e.bottom,E=void 0!==A&&A,O=e.fullWidth,M=void 0===O||O,S=e.renderTool,C=void 0===S?function(){return null}:S,R=e.onChange,k=void 0===R?function(){}:R,P=e.style,L=void 0===P?{}:P,I=e.tabs,F=void 0===I?[]:I,D=e.renderTab,N=e.children,z=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["activeValue","defaultActiveValue","type","bottom","fullWidth","renderTool","onChange","style","tabs","renderTab","children"]),j=(0,i.useState)(x),B=j[0],U=j[1],V=(0,i.useRef)(),H=(0,i.useRef)();"activeValue"in e&&U(m);var G=(0,s.useStyles)(f.default,z,(function(e){return{tabs:e(["tabs",{"tabs--bottom":E,"tabs--primary":"primary"===T}]),divider:e(["tabs__divider",{"tabs--bottom__divider":E}]),container:e("tabs__container"),activeLine:e(["tabs__active-line",{"tabs--primary__active-line":"primary"===T}]),tab:e(["tabs__tab",{"tabs__tab--full-width":M,"tabs--bottom__tab":E}]),tabIcon:e(["tabs__tab-icon",{"tabs--bottom__tab-icon":E,"tabs--primary__tab-icon":"primary"===T}]),tabText:e(["tabs__tab-text",{"tabs--bottom__tab-text":E,"tabs--primary__tab-text":"primary"===T}]),activeTab:e(["tabs__tab",{"tabs__tab--full-width":M,"tabs--bottom__tab":E},"tabs__tab--active"]),activeTabIcon:e(["tabs__tab-icon",{"tabs--bottom__tab-icon":E,"tabs--primary__tab-icon":"primary"===T,"tabs__tab--active-icon":!0,"tabs--primary__tab--active-icon":"primary"===T}]),activeTabText:e(["tabs__tab-text",{"tabs--bottom__tab-text":E,"tabs--primary__tab-text":"primary"===T,"tabs__tab--active-text":!0,"tabs--primary__tab--active-text":"primary"===T}]),tabTextMargin:e([E?"tabs--bottom__tab-text--icon":"tabs__tab-text--icon"])}}));(0,i.useEffect)((function(){var e;(e=r.default.mark((function e(){var t,i,o,s,c,u,d,f,h,p,m,v,g;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.current&&H.current.id,e.next=4,(0,l.getBoundingClientRect)("#"+t).then((function(e){return e&&e[0]?e[0]:{left:0,width:0}}));case 4:return i=e.sent,o=i.left,e.next=8,(0,l.getScrollOffset)("#"+n).then((function(e){return e&&e[0]?e[0]:{scrollLeft:0}}));case 8:return s=e.sent,c=s.scrollLeft,e.next=12,(0,l.getBoundingClientRect)("#"+n).then((function(e){return e&&e[0]?e[0]:{width:0}}));case 12:u=e.sent,d=u.width,f=d/3,h=d/3*2,V.current&&H.current&&(m=o<h,v=_/750,(p=o>f)&&m||(g=0,g=p?c+.5*d:c-(f-o),V.current.scrollTo({x:Math.max(g,0)/v,y:0}))),e.next=21;break;case 19:__weex_require__("@weex-module/dom").scrollToElement((0,a.default)(H.current),{offset:0});case 21:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){g(o,r,i,a,s,"next",e)}function s(e){g(o,r,i,a,s,"throw",e)}a(void 0)}))})()}));var W;return W=F&&F.length>0?F.map((function(e,t){return(0,i.createElement)(h.default,v({key:"raxui_tabs_"+t,renderContent:D,ref:e.value===B?H:null},e))})):o.default.map(N,(function(e,t){return(0,d.default)(e,{key:"raxui_tabs_"+t,ref:e.props.value===B?H:null,renderContent:e.renderContent||D})})),(0,i.createElement)(y.Provider,{value:{styles:G,activeValue:B,change:function(t){"activeValue"in e||U(t),k(t)},bottom:E}},(0,i.createElement)(c.default,v({},z,{style:v({},G.tabs,{},L),ref:t}),(0,i.createElement)(u.default,{id:n,ref:V,horizontal:!0,className:"tab-scroll",showsHorizontalScrollIndicator:!1,contentContainerStyle:v({},G.container,{flex:e.renderTool?null:G.container.flex})},(0,i.createElement)(c.default,{style:v({display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},G.container,{flex:e.renderTool?null:G.container.flex})},W)),"primary"!==T?(0,i.createElement)(c.default,{style:G.divider}):null,C(G)))}));t.default=b},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){function e(){this.cache={}}return e.prototype.getSelector=function(e){if(this.cache[e])return this.cache[e];var t=Array.from(document.querySelectorAll(e));return this.cache[e]=t,t},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(55),i=a(n(49)),o=a(n(280));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},c=o.default;function u(e){var t=c.__cache||(c.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=c[r[0].trim()]:r.forEach((function(e){"object"==typeof c[e.trim()]&&(i=Object.assign(i,c[e.trim()]))})),t[n]=i),i}var d=(0,r.forwardRef)((function(e,t){var n=(0,r.useRef)(null),o=e.className,a=e.style,c=e.onFirstAppear,d=e.onAppear,f=l(e,["className","style","onFirstAppear","onAppear"]),h=d;return c&&(h=function(e){d&&d(e),n.triggeredAppear?n.triggeredAppear=!0:c&&c(e)}),(0,r.createElement)("div",s({},f,{onAppear:h,ref:t,className:(0,i.default)("rax-view-v2",o),style:Object.assign({},u((0,i.default)("rax-view-v2",o)),a)}))}));d.displayName="View";var f=d;t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=u(n(1)),o=u(n(2)),a=u(n(6)),s=u(n(15)),l=n(87),c=n(91);function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=(0,r.forwardRef)((function(e,t){var n=e.value,u=e.style,f=void 0===u?{}:u,h=e.title,p=void 0===h?"":h,m=e.icon,v=void 0===m?"":m,g=e.renderContent,_=void 0===g?null:g,y=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["value","style","title","icon","renderContent"]),b=(0,r.useContext)(l.TabsContext),x=b.activeValue,w=b.change,T=b.styles,A=b.bottom,E=(0,r.useState)((0,c.guid)("tab-"))[0],O=x===n,M=d({},O?T.activeTabText:T.tabText,{},v?T.tabTextMargin:{}),S=O?T.activeTabIcon:T.tabIcon;return(0,r.createElement)(i.default,d({id:E},y,{ref:t,style:d({},O?T.activeTab:T.tab,{},f),onClick:function(){return w(n)}}),_?_({title:p,icon:v,active:O,styles:{title:M,icon:S}}):[v?(0,r.createElement)(a.default,{key:"tab-icon",style:S,name:v}):null,p?(0,r.createElement)(o.default,{key:"tab-text",style:M},p):null],A?null:(0,r.createElement)(s.default,{transition:{enter:{properties:["transform"],duration:250},exit:{properties:["transform"],duration:200}},styles:{enter:{transform:"scaleX(1)"},exit:{transform:"scale(0)"}},in:O,style:T.activeLine}))}));t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.guid=function(e){void 0===e&&(e="");return""+e+(r+=1)};var r=0},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=d(n(15)),o=n(4),a=d(n(6)),s=d(n(297)),l=d(n(1)),c=d(n(2)),u=n(298);function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h={enter:{properties:["opacity"],duration:250},exit:{properties:["opacity"],duration:200}},p=(0,r.forwardRef)((function(e,t){var n=e.visible,d=void 0!==n&&n,p=e.view,m=void 0!==p&&p,v=e.icon,g=void 0===v?null:v,_=e.image,y=void 0===_?null:_,b=e.title,x=void 0===b?null:b,w=e.content,T=void 0===w?null:w,A=e.onEntered,E=void 0===A?function(){}:A,O=e.onExited,M=void 0===O?function(){}:O,S=e.onHide,C=void 0===S?function(){}:S,R=e.duration,k=void 0===R?2e3:R,P=e.style,L=void 0===P?{}:P,I=e.children,F=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["visible","view","icon","image","title","content","onEntered","onExited","onHide","duration","style","children"]),D=(0,r.useState)(null),N=D[0],z=D[1],j=(0,r.useRef)(null),B=!!(g||x||y),U=(0,o.useStyles)(s.default,F,(function(e){return{toast:e(["toast",{"toast--view":m}]),icon:e("toast__icon"),title:e("toast__title"),titleText:e({toast__title__text:!0,"toast__title__text--icon":!(!g&&!y)}),content:e({toast__content:!0,"toast__content--has-title":B}),contentText:e({toast__content__text:!0})}}));return(0,r.useImperativeHandle)(t,(function(){return{_nativeNode:j.current}})),(0,r.useEffect)((function(){N||(0,u.getComponentRect)(j.current,(function(e){var t=e.size.width;z({width:t+"rpx",left:(750-t)/2+"rpx"})}),!0)})),(0,r.useEffect)((function(){var e=null;return d&&k>0&&(e=setTimeout((function(){C("auto",null)}),k)),function(){e&&clearTimeout(e)}}),[d]),(0,r.createElement)(i.default,{in:d,appear:!m,transition:h,styles:{enter:{opacity:1},exit:{opacity:0}},onEntered:E,onExited:M},(0,r.createElement)(i.default.View,f({},F,{style:f({},U.toast,{},N,{},L),ref:j}),B?(0,r.createElement)(l.default,{style:U.title},g||y?(0,r.createElement)(a.default,{name:g,uri:y,style:U.icon}):null,x?(0,r.createElement)(c.default,{style:U.titleText},x):null):null,(0,r.createElement)(l.default,{style:U.content},T||"string"==typeof I?(0,r.createElement)(c.default,{style:U.contentText},T):(0,r.createElement)(l.default,{style:U.contentText},I))))}));t.default=p},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){e.exports=n(132)},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=((r=n(182))&&r.__esModule?r:{default:r}).default;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(187)),a=l(n(1)),s=l(n(197));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.defaultSlideIndex,a=void 0===n?0:n,l=e.hideIndicators,u=void 0!==l&&l,d=e.autoplay,f=void 0!==d&&d,h=e.interval,p=void 0===h?3e3:h,m=e.onChange,v=void 0===m?function(){}:m,g=e.slideWidth,_=void 0===g?"":g,y=e.slideHeight,b=void 0===y?"":y,x=e.children,w=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["defaultSlideIndex","hideIndicators","autoplay","interval","onChange","slideWidth","slideHeight","children"]),T=(0,i.useStyles)(s.default,w,(function(e){return{dotWrapper:e("carousel__dot-wrapper"),dot:e("carousel__dot"),dotActive:e("carousel__dot--active")}}));return(0,r.createElement)(o.default,c({},w,{ref:t,width:_,height:b,index:a,autoPlay:f,showsPagination:!u,paginationStyle:c({},T.dotWrapper,{itemColor:T.dot.color,itemSize:T.dot.width,itemSelectedColor:T.dotActive.color}),loop:f,autoPlayInterval:p,onChange:v}),x)}));u.Item=a.default;var d=u;t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(78))&&r.__esModule?r:{default:r},o=n(230);var a=i.default;a.show=o.show,a.hide=o.hide,a.alert=o.alert,a.confirm=o.confirm;var s=i.default;t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(10)),o=a(n(9));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return e&&(0,i.default)(e)?(0,o.default)(e,{key:"error"}):(e&&"string"!=typeof e&&(e=e.message),e)}var l=function(e){var t,n;function i(t,n){var r=Object.assign({processErrorMessage:s},n);return e.call(this,t,r)||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.useField=function(e){return this.getUseField({useState:r.useState,useMemo:r.useMemo})(e)},i.prototype.validate=function(e,t){return this.validatePromise(e,t)},i}(a(n(231)).default);t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(249))&&r.__esModule?r:{default:r};t.Grid=i.default;var o=i.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n(251))&&r.__esModule?r:{default:r};t.default=i.default},function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n(254))&&r.__esModule?r:{default:r};t.default=i.default},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=((r=n(261))&&r.__esModule?r:{default:r}).default;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(266))&&r.__esModule?r:{default:r};t.Stepper=i.default;var o=i.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n(268))&&r.__esModule?r:{default:r};t.default=i.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=f(n(8)),o=f(n(10)),a=f(n(9)),s=n(4),l=f(n(1)),c=f(n(2)),u=f(n(6)),d=f(n(288));function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=(0,r.forwardRef)((function(e,t){var n=e.shape,f=void 0===n?"normal":n,p=e.type,m=void 0===p?"normal":p,v=e.size,g=void 0===v?"medium":v,_=e.disabled,y=void 0!==_&&_,b=e.selected,x=void 0!==b&&b,w=e.onDelete,T=void 0===w?function(){}:w,A=e.onClick,E=void 0===A?function(){}:A,O=e.style,M=void 0===O?{}:O,S=e.children,C=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["shape","type","size","disabled","selected","onDelete","onClick","style","children"]),R=function(e){var t=e.shape,n=e.disabled,r=e.selected;if("selectable"===t)switch(!0){case n&&r:return"disabled--selected";case n:return"disabled";case r:return"selected";default:return"normal"}return n?"disabled":"normal"}({shape:f,disabled:y,selected:x}),k=(0,s.useStyles)(d.default,C,(function(e){var t="normal"===f?"":"--"+f,n="normal"===m||"normal"!==f?"":"--"+m,r="normal"===R?"":"--"+R,i="--"+g;return{tag:h({},e(["tag","tag"+t,"tag"+t+i,"tag"+t+n,"tag"+t+n+r,"tag"+i,"tag"+t+i]),{},M),text:e(["tag__text","tag"+t+"__text","tag"+i+"__text","tag"+t+i+"__text","tag"+t+n+"__text","tag"+t+n+r+"__text"]),icon:e(["tag__icon","tag"+t+"__icon","tag"+i+"__icon","tag"+t+i+"__icon","tag"+t+n+"__icon","tag"+t+n+r+"__icon"]),iconFirst:e(["tag__icon--first"]),iconLast:e(["tag__icon--last"]),delete:e(["tag--deletable__delete","tag--deletable"+i+"__delete","tag--deletable"+r+"__delete"]),deleteIcon:e(["tag--deletable__delete-icon","tag--deletable"+i+"__delete-icon","tag--deletable"+r+"__delete-icon"])}}));return(0,r.createElement)(l.default,h({},C,{ref:t,style:k.tag,onClick:function(e){y||E(e)}}),function(e,t){var n=i.default.count(e);return i.default.map(e,(function(e,i){switch(!0){case"string"==typeof e:return(0,r.createElement)(c.default,{key:i,style:t.text},e);case(0,o.default)(e)&&e.type===c.default:return(0,a.default)(e,{style:h({},t.text,{},e.props.style||{}),key:i});case(0,o.default)(e)&&e.type===u.default:return(0,a.default)(e,{style:h({},t.icon,{},0===i?t.iconFirst:{},{},i===n-1?t.iconLast:{},{},e.props.style||{}),key:i});default:return e}}))}(S,k),"deletable"===f?(0,r.createElement)(l.default,{style:k.delete,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation(),y||T(e)}},(0,r.createElement)(u.default,{name:"close",style:k.deleteIcon})):null)}));t.default=p},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=((r=n(289))&&r.__esModule?r:{default:r}).default;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(92))&&r.__esModule?r:{default:r},o=n(299);var a=i.default;a.show=o.show,a.hide=o.hide;var s=a;t.default=s},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=(r=n(2))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=(0,i.forwardRef)((function(e,t){var n=e.className,r=e.style,l=void 0===r?{}:r,c=e.onClick,u=e.onPress,d=e.children,f=(e.miniappHref,s(e,["className","style","onClick","onPress","children","miniappHref"])),h={color:l.color,lines:l.lines,fontSize:l.fontSize,fontStyle:l.fontStyle,fontWeight:l.fontWeight,textDecoration:l.textDecoration||"none",textAlign:l.textAlign,fontFamily:l.fontFamily,textOverflow:l.textOverflow};return(0,i.createElement)("a",a({},f,{ref:t,className:n,style:l,onClick:c||u}),"string"==typeof d?(0,i.createElement)(o.default,{style:h},d):d)}));l.displayName="Link";var c=l;t.default=c},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports=n(118)},function(e,t,n){"use strict";var r=s(n(7)),i=n(0),o=s(n(318)),a=s(n(319));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var c={};function u(){return(0,i.createElement)(o.default,c)}(function(){var e,t=(e=r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.default.getInitialProps){e.next=7;break}return e.t0=Object,e.t1=c,e.next=5,o.default.getInitialProps();case 5:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 7:(0,i.render)((0,i.createElement)(u),document.getElementById("root"),{driver:a.default,hydrate:!1});case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}})()()},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return E()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function d(){}function f(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(A([])));v&&v!==t&&n.call(v,i)&&(p=v);var g=h.prototype=d.prototype=Object.create(p);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function A(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=g.constructor=h,h.constructor=f,f.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){!function(){var t={n:1,t:!1,driver:null,rootComponents:{},rootInstances:{},owner:null};function n(e,t,n,r,i){return{type:e,key:t,ref:n,props:r,_owner:i}}function r(e){return null===e}function i(e){return"function"==typeof e}function o(e){return"object"==typeof e}function a(e){return Array.isArray(e)}function s(e){return"string"==typeof e}function l(e){return"number"==typeof e}function c(e){if(null==e)return e;var t=[];return function e(t,n){if(a(t))for(var r=0,i=t.length;r<i;r++)e(t[r],n);else n.push(t)}(e,t),t.length-1?t:t[0]}function u(e){throw Error("Minified error: "+e)}var d={key:!0,ref:!0};function f(e,r,i){null==e&&u(0);var o,s={},l=null,f=null,h=t.owner;if(null!=r){var p=!1;if(null!=r.ref&&(p=!0,f=r.ref),null!=r.key&&(p=!0,l=""+r.key),p)for(o in r)d[o]||(s[o]=r[o]);else s=r}var m=arguments.length-2;if(0<m)if(1!==m||a(i)){var v=i;if(1<m){v=Array(m);for(var g=0;g<m;g++)v[g]=arguments[g+2]}s.children=c(v)}else s.children=i;if(e&&e.defaultProps){var _=e.defaultProps;for(o in _)void 0===s[o]&&(s[o]=_[o])}return new n(e,l,f,s,h)}function h(e,t,n){for(var r=0,i=e&&e.length;r<i;r++)e[r].call(t,n)}var p=[],m=[],v=setTimeout;function g(e){0===p.length&&v(_),p.push(e)}function _(){for(var e;e=p.shift();)e()}function y(e){0===m.length&&v(b),m.push(e)}function b(){for(var e;e=m.shift();)e()}var x={}.hasOwnProperty;function w(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function T(e,t){if(w(e,t))return!0;if(!o(e)||r(e)||!o(t)||r(t))return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var i=0;i<n.length;i++)if(!x.call(t,n[i])||!w(e[n[i]],t[n[i]]))return!1;return!0}var A="_internal",E="_instance",O="_nativeNode",M="_renderedComponent";function S(){return t.owner&&t.owner[E]}function C(){var e=S();if(e)return e;u(1)}function R(e,t){if(r(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!w(e[n],t[n]))return!1;return!0}function k(e){var n=C(),r=n.getHookID(),o=n.getHooks();o[r]||(i(e)&&(e=e()),o[r]=[e,function(e){t.t||b();var a=o[r],s=a[2];i(e)&&(e=e(s)),w(e,s)||(a[2]=e,S()===n?n.i=!0:n.r())},e]);var a=o[r];return w(a[0],a[2])||(a[0]=a[2],n.u=!0),a}function P(e,t){L(e,t)}function L(e,t,n){var r=C(),i=r.getHookID(),o=r.getHooks();if(t=void 0===t?null:t,o[i]){var a=o[i],s=a.e,l=a.f;a.f=t,a.s=l,s.current=e}else{var c=function e(t){if(!t&&n)return y((function(){return e(!0)}));var r=e.current;r&&(u.current=r(),e.current=null)},u=function e(t){if(!t&&n)return y((function(){return e(!0)}));var r=e.current;r&&(r(),e.current=null)};c.current=e,o[i]={e:c,o:u,s:t,f:t},r.didMount.push(c),r.willUnmount.push(u),r.didUpdate.push((function(){var e=o[i],t=e.f,n=e.e;null!=t&&R(t,e.s)||(u(),n())}))}}function I(e,t){var n=C(),i=n.getHookID(),o=n.getHooks();if(t=void 0===t?null:t,o[i]){var a=o[i][1];!r(t)&&R(t,a)||(o[i]=[e(),t])}else o[i]=[e(),t];return o[i][0]}function F(e){return a(e)?e:[e]}function D(e,t){for(var n;e&&e[A];){if(t(e)){n=e;break}e=e[A].h}return n}var N=0;function z(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var j=function(){function e(e){this.c=e}var n=e.prototype;return n.a=function(e,n,r){this._parent=e,this.h=n,this._context=r,this._mountID=t.n++},n.l=function(){this.c=this[O]=this._parent=this.h=this._context=null,this[E]&&(this[E]=this[E][A]=null)},n.v=function(e,t,n,r){this.a(e,t,n),this.d(r);var i={};return i[A]=this,i},n.unmountComponent=function(e){this[O]&&!e&&t.driver.removeChild(this[O],this._parent),this.l()},n._=function(){var e=this.c,t=e&&e.type;return t&&t.displayName||t&&t.name||t||e},n.d=function(e){var n=this.p(),r=this._parent;e?e(n,r):t.driver.appendChild(n,r)},n.p=function(){return null==this[O]?this[O]=this.w():this[O]},n.m=function(){return this.p()},e}(),B=function(e){function n(){return e.apply(this,arguments)||this}return z(n,e),n.prototype.w=function(){return t.driver.createEmpty(this)},n}(j);function U(e,t,n){var r=e?e.ref:null,i=t?t.ref:null;r!==i&&(r&&H(e._owner,r,n),i&&V(t._owner,i,n))}function V(e,t,n){e||u(3);var r=n.m();i(t)?t(r):o(t)?t.current=r:e[E].refs[t]=r}function H(e,t,n){if(i(t))t(null);else{var r=n.m();o(t)&&t.current===r?t.current=null:e[E].refs[t]===r&&delete e[E].refs[t]}}function G(e){var n;return o(e)&&null!==e&&e.type?n=s(e.type)?new t.y(e):new t.b(e):s(e)||l(e)?n=new t.C(e+""):void 0===e||r(e)||!1===e||!0===e?n=new t.g:a(e)?n=new t.j(e):W(),n}function W(){u(2)}function X(e,t){var n=r(e),i=r(t);return n||i?n===i:!(!a(e)||!a(t))||(s(e)||l(e)?s(t)||l(t):o(e)&&o(t)&&e.type===t.type&&e.key===t.key)}function Y(e,t,n){var r=t&&t.key,i="."+n.toString(36);if(s(r)){var o="$"+r;return void 0===e[o]?o:i}return i}function q(e){for(var n=e;n=e.h&&e.h[A];)if(n instanceof t.b)e=n;else{for(var r=Object.keys(n.k),i=e.I-1;0<=i;i--){var o=n.k[r[i]].p();if(!a(o))return o;if(0<o.length)return o[o.length-1]}if(!(n instanceof t.j))return null;e=n}}var K=function(){function e(e,t){this.props=e,this.context=t,this.refs={}}var t=e.prototype;return t.setState=function(e,t){this.updater.setState(this,e,t)},t.forceUpdate=function(e){this.updater.forceUpdate(this,e)},e}(),Q=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).O=!0,t}return z(t,e),t}(K),J=1,Z=function(e){function t(){var t;return(t=e.call(this)||this).R=[],t.P=J++,t}z(t,e);var n=t.prototype;return n.m=function(){return this.x().m()},n.x=function(){return this[A][M]},n.r=function(e){this.R=e,this.forceUpdate()},n.render=function(){return this.R},t}(K),$={set:function(e,n){e._r||(e._r=n).P&&(t.rootInstances[n.P]=n,t.rootComponents[n.P]=n[A])},get:function(e){return e._r},remove:function(e){var n=this.get(e);n&&(e._r=null,n.P&&(delete t.rootComponents[n.P],delete t.rootInstances[n.P]))},mount:function(e,n,r){var i=r.parent,o=r.hydrate,a=t.driver;null==n&&(n=a.createBody());var s,l={element:e,container:n,hydrate:o};if(a.beforeRender&&a.beforeRender(l),i){var c=i[A];s=c.A(c._context)}var u=this.get(n);if(u&&u.P)return s&&(u[A].S=s),u.r(e),u;var d=G(f(Z)).v(n,null,s||{});return this.set(n,d),d.r(e),a.afterRender&&a.afterRender(l),d}},ee=Object.assign,te="style",ne="children",re=/^on[A-Z]/,ie=function(e){function n(){return e.apply(this,arguments)||this}z(n,e);var o=n.prototype;return o.v=function(e,t,n,r){this.a(e,t,n);var i=this.c,o=i.props,a=i.type,s=o[ne],l=o.append||"tree";this.D=ee({},o[te]);var c={type:a,props:o};if((c[A]=this)[E]=c,"tree"===l){var u,d=[];for(this.H(s,n,d),this.d(r);u=d.pop();)u()}else this.d(r),this.H(s,n);return i&&i.ref&&V(i._owner,i.ref,this),c},o.H=function(e,t,n){if(null==e)return e;var r=this.p();return this.M(r,F(e),t,null,n)},o.M=function(e,t,n,r,i){for(var o=this.k={},a=[],s=0,l=t.length;s<l;s++){var c=t[s],u=G(c);(o[Y(o,c,s)]=u).I=s;var d=u.v(e,this[E],n,r,i);a.push(d)}return a},o.N=function(e){var t=this.k;if(t){for(var n in t)t[n].unmountComponent(e);this.k=null}},o.unmountComponent=function(e){if(this[O]){var n=this.c.ref;n&&H(this.c._owner,n,this),$.remove(this[O]),e||t.driver.removeChild(this[O],this._parent)}this.N(!0),this.D=null,this.l()},o.U=function(e,t,n,r){U(e,this.c=t,this);var i=e.props,o=t.props;this.F(i,o),null==i[ne]||a(i[ne])&&0===i[ne].length?this.H(o[ne],r):this.L(o[ne],r)},o.F=function(e,n){var r,o,a,s=t.driver,l=this.p();for(r in e)if(r!==ne&&null!=e[r]&&!n.hasOwnProperty(r))if(r===te){var c=this.D;for(o in c)(a=a||{})[o]="";this.D=null}else if(re.test(r)){var u=e[r];i(u)&&s.removeEventListener(l,r.slice(2).toLowerCase(),u)}else s.removeAttribute(l,r,e[r]);for(r in n){var d=n[r],f=r===te?this.D:null!=e?e[r]:void 0;if(r!==ne&&f!==d&&(null!=d||null!=f))if(r===te)if(d?d=this.D=ee({},d):this.D=null,null!=f){for(o in f)d&&(d[o]||0===d[o])||((a=a||{})[o]="");for(o in d)f[o]!==d[o]&&((a=a||{})[o]=d[o])}else a=d;else if(re.test(r)){var h=r.slice(2).toLowerCase();i(f)&&s.removeEventListener(l,h,f,n),i(d)&&s.addEventListener(l,h,d,n)}else null!=d?s.setAttribute(l,r,d):s.removeAttribute(l,r,e[r])}a&&s.setStyle(l,a)},o.L=function(e,n){var i=this.k,o=t.driver;if(null!=e||null!=i){var s={};if(null!=e)for(var l=0,c=(e=F(e)).length;l<c;l++){var u=e[l],d=Y(s,u,l),f=i&&i[d],h=f&&f.c,p=f&&f._context;s[d]=null!=f&&X(h,u)?(h===u&&p===n||f.U(h,u,n,n),f):(f&&(f.T=!0),G(u))}var m=this.p(),v=a(m),g=null,_=null,y=!1,b=!1,x=null,w=!(!o.removeChildren||!(r(e)||e&&!e.length));if(null!=i){for(var T in i){var A=i[T],M=A.T||!s[T];g?M&&A.unmountComponent(w):(b=M,a(_=(g=A).p())&&(y=0===_.length,_=_[0]))}(v&&0===m.length||y)&&(x=q(this))}var S=function(e,t){for(var n=0,r=(e=F(e)).length;n<r;n++)x?o.insertAfter(e[r-n-1],x):_?o.insertBefore(e[n],_):t&&o.appendChild(e[n],t)},C=0,R=[];for(var k in s){var P=s[k],L=i&&i[k];if(L===P){var I=L.p();L.I!==C&&S(I)}else v&&(m=this._parent),P.v(m,this[E],n,S);P.I=C++,a(x=P.p())?(R=R.concat(x),x=x[x.length-1]):R.push(x)}a(this[O])&&(this[O].length=0,ee(this[O],R)),b&&g.unmountComponent(w),w&&o.removeChildren(this[O]),this.k=s}},o.w=function(){var e=this[E],n=t.driver.createElement(e.type,e.props,this);return $.set(n,e),n},n}(j),oe=function(e){function n(){return e.apply(this,arguments)||this}z(n,e);var r=n.prototype;return r.U=function(e,n){e!==(n=""+n)&&(this.c=n,t.driver.updateText(this.p(),n))},r.w=function(){return t.driver.createText(this.c,this)},n}(j),ae=function(e){function t(t,n){var r;(r=e.call(this)||this).V=!0,r.Z=t,r.$=0,r.q=0,r.z={},r.i=!1,r.u=!1,r.B=null,r.G={},r.didMount=[],r.didUpdate=[],r.willUnmount=[],r.state={},t.J&&(r.K=r.J=n);var i=t.Q;return i&&(r.shouldComponentUpdate=function(e){for(var t=!0,n=i.length-1;-1<n&&!(t=i[n](r.props,e));n--);return!t||r.K!==r.J}),r}z(t,e);var n=t.prototype;return n.getHooks=function(){return this.z},n.getHookID=function(){return++this.$},n.useContext=function(e){var t=this,n=e._contextID,r=this.G[n];function i(){return r.W?r.W.getValue():e._defaultValue}if(!r){var o=e.X(this);if(r=this.G[n]={W:o},o){var a=function(){r.Y!==i()&&(t.u=!0,t.r())};o.nn(a),this.willUnmount.push((function(){return o.tn(a)}))}}return r.Y=i()},n.componentWillMount=function(){this.u=!0},n.componentDidMount=function(){h(this.didMount)},n.componentWillReceiveProps=function(){this.u=!0},n.componentDidUpdate=function(){h(this.didUpdate)},n.componentWillUnmount=function(){h(this.willUnmount)},n.r=function(){this[A].in=!0,this.setState({})},n.render=function(){this.$=0,this.q=0,this.i=!1;for(var e=this.Z(this.props,this.J?this.J:this.context);this.i;)this.q++,24<this.q&&u(4),this.$=0,this.i=!1,e=this.Z(this.props,this.J?this.J:this.context);return this.u&&(this.B=e,this.u=!1),this.B},t}(K),se=[];function le(e){return e.rn}function ce(e,t){return e.rn=t}function ue(e){return e.un}function de(e){var n=e[A];if(n){t.t=!0;var r=le(n);ce(n,null);var i=n.c,o=n._context,a=n.S||o;n.S=void 0,(ue(n)||n.in)&&n.U(i,i,o,a),h(r,e),t.t=!1}}function fe(e,t){return t[A]._mountID-e[A]._mountID}function he(){if(t.t)return g(he);var e,n=se;if(0<n.length)for(b(),se=[],1<n.length&&(n=n.sort(fe));e=n.pop();)de(e)}function pe(e,t){if(se.indexOf(e)<0&&se.push(e),t){if(1<se.length)return;g(he)}else he()}function me(e,t,n){var r=e[A];if(r){var i,o;n&&(o=n,(le(i=r)||ce(i,[])).push(o));var a,s,l=r[M];t?(s=t,(ue(a=r)||(a.un=[])).push(s),!r.en&&l&&pe(e,!0)):(r.in=!0,l&&pe(e))}}var ve={setState:function(e,n,r){t.t||b(),me(e,n,r)},forceUpdate:function(e,t){me(e,null,t)},runCallbacks:h};function ge(e,t,n){try{return e()}catch(e){n?n(e):_e(t,e)}}function _e(e,t){var n=D(e,(function(e){return e.componentDidCatch}));if(n){var r=n[A];r&&(r.rn||(r.rn=[])).push((function(){return n.componentDidCatch(t)}))}else v((function(){throw t}),0)}var ye=function(e){function n(){return e.apply(this,arguments)||this}z(n,e);var r=n.prototype;return r.v=function(e,n,r,o,a){this.a(e,n,r);var s,l,c=this.c,u=c.type,d=c.ref,f=c.props,p=u.prototype,m=this.fn(r);try{p&&p.render?s=new u(f,m):i(u)?s=new ae(u,d):W()}catch(e){return _e(n,e)}s.props=f,s.context=m,s.refs={},s.updater=ve;var v=((s[A]=this)[E]=s).state;void 0===v&&(s.state=v=null);var g=null,_=function(e){g=e};if(s.componentWillMount&&ge((function(){s.componentWillMount()}),s,_),null==l&&(s.state=(t.owner=this).sn(f,m),ge((function(){l=s.render()}),s,_),t.owner=null),this[M]=G(l),this[M].v(this._parent,s,this.A(r),o,a),g&&_e(s,g),!c.type.J&&d&&V(c._owner,d,this),s.componentDidMount){var y=function(){ge((function(){s.componentDidMount()}),s)};a?a.push(y):y()}var b=this.rn;return b&&(this.rn=null,h(b,s)),s},r.unmountComponent=function(e){var t=this[E];if(t&&t.componentWillUnmount&&ge((function(){t.componentWillUnmount()}),t),null!=this[M]){var n=this.c,r=n.ref;!n.type.J&&r&&H(n._owner,r,this),this[M].unmountComponent(e),this[M]=null}this.un=null,this.in=!1,this.l()},r.fn=function(e){var t={},n=this.c.type.contextTypes;if(n)for(var r in n)t[r]=e[r];return t},r.A=function(e){var t=this[E],n=t.getChildContext&&t.getChildContext();return n?ee({},e,n):e},r.sn=function(e,t){var n=this[E],r=this.un;if(!r)return n.state;this.un=null;for(var o=ee({},n.state),a=0;a<r.length;a++){var s=r[a];ee(o,i(s)?s.call(n,o,e,t):s)}return o},r.U=function(e,t,n,r){var i=this[E];if(i){var o,a,s;this._context===r?a=i.context:(a=this.fn(r),o=!0),s=t.props,e!==t&&(o=!0),o&&i.componentWillReceiveProps&&(this.en=!0,ge((function(){i.componentWillReceiveProps(s,a)}),i),this.en=!1),this.c.type.J?(i.K=e.ref,i.J=t.ref):U(e,t,this);var l=!0,c=i.props,u=i.state,d=this.sn(s,a);if(this.in||(i.shouldComponentUpdate?l=ge((function(){return i.shouldComponentUpdate(s,d,a)}),i):i.O&&(l=!T(c,s)||!T(u,d))),l){this.in=!1;var f=i.context;i.componentWillUpdate&&ge((function(){i.componentWillUpdate(s,d,a)}),i),this.c=t,this._context=r,i.props=s,i.state=d,i.context=a,this.on(r),i.componentDidUpdate&&ge((function(){i.componentDidUpdate(c,u,f)}),i)}else this.c=t,this._context=r,i.props=s,i.state=d,i.context=a;var p=this.rn;p&&(this.rn=null,h(p,i))}},r.on=function(e){var n,r=this[M],i=r.c,o=this[E];if(t.owner=this,ge((function(){n=o.render()}),o),t.owner=null,X(i,n)){var s=r._context,l=this.A(e);i===n&&s===l||r.U(i,n,s,l)}else{var c=null,u=r.p();a(u)&&0===u.length&&null==o.P&&(c=q(r)),r.unmountComponent(!0),this[M]=G(n),this[M].v(this._parent,o,this.A(e),(function(e,n){u=F(u),e=F(e);for(var r=t.driver,i=0;i<e.length;i++){var o=e[i];u[i]?r.replaceChild(o,u[i]):c?r.insertAfter(o,c):r.appendChild(o,n),c=o}for(var a=e.length;a<u.length;a++)r.removeChild(u[a])}))}},r.p=function(){var e=this[M];if(e)return e.p()},r.m=function(){var e=this[E];return e.V?null:e},n}(j),be=function(e){function n(){return e.apply(this,arguments)||this}z(n,e);var r=n.prototype;return r.v=function(e,n,r,i){this.a(e,n,r);var o=this[E]={},a=[];(o[A]=this).H(this.c,r,a);var s,l=this.p();if(i)i(l,e);else for(var c=0;c<l.length;c++)t.driver.appendChild(l[c],e);for(;s=a.pop();)s();return o},r.H=function(e,t,n){var r=this.p();return this.M(this._parent,e,t,(function(e){e=F(e);for(var t=0;t<e.length;t++)r.push(e[t])}),n)},r.unmountComponent=function(e){var n=this[O];if(n&&($.remove(n),!e))for(var r=0,i=n.length;r<i;r++)t.driver.removeChild(n[r]);this.N(!0),this.l()},r.U=function(e,t,n,r){this.c=t,this.L(this.c,r)},r.w=function(){return[]},n}(ie),xe={createElement:f,createContext:function(e){var t="_c"+N++;function n(e){return D(e,(function(e){return e.hn===t}))}return{Provider:function(){function n(){this.hn=t,this.cn=[]}var r=n.prototype;return r.nn=function(e){this.cn.push(e)},r.tn=function(e){this.cn=this.cn.filter((function(t){return t!==e}))},r._getChildContext=function(){var e;return(e={})[t]=this,e},r.getValue=function(){return void 0!==this.props.value?this.props.value:e},r.componentDidUpdate=function(e){this.props.value!==e.value&&h(this.cn,null,this.getValue())},r.render=function(){return this.props.children},n}(),Consumer:function(r,o){var a=this,s=k((function(){return o[t]||n(a)}))[0],l=s?s.getValue():e,c=k(l),u=c[1];if(l===c[0]){P((function(){if(s)return s.nn(u),function(){s.tn(u)}}),[]);var d=F(r.children)[0];return i(d)?d(l):void 0}u(l)},_contextID:t,_defaultValue:e,X:n}},createRef:function(){return{current:null}},forwardRef:function(e){return e.J=!0,e},memo:function(e,t){return t=t||T,e.Q?e.Q.push(t):e.Q=[t],e},Fragment:function(e){return e.children},render:function(e,n,r,o){var a;i(r)&&(o=r,r=null),a=(r=r||{}).driver,t.g=B,t.y=ie,t.C=oe,t.j=be,t.b=ye,(t.driver=a||t.driver)||u(5);var s=$.mount(e,n,r).m();return o&&o.call(s),s},Component:K,version:"1.0.13",shared:{Host:t,Instance:$,Element:n,flattenChildren:c},useState:k,useContext:function(e){return C().useContext(e)},useEffect:function(e,t){L(e,t,!0)},useLayoutEffect:P,useRef:function(e){var t=C(),n=t.getHookID(),r=t.getHooks();return r[n]||(r[n]={current:e}),r[n]},useCallback:function(e,t){return I((function(){return e}),t)},useMemo:I,useReducer:function(e,n,r){var o=C(),a=o.getHookID(),s=o.getHooks(),l=s[a];if(!l){var c=i(r)?r(n):n;return s[a]=[c,function(e){t.t||b();var n=s[a][2];if(S()===o)n.an.push(e),o.i=!0;else{var r=n.ln,i=(0,n.vn)(r,e);if(w(i,r))return;n.ln=i,n.an.push(e),o.r()}},{an:[],vn:e,ln:c}]}var u=l[2],d=l[0];if(0<o.q)for(var f=0;f<u.an.length;f++)d=e(d,u.an[f]);else d=u.ln;return w(d,l[0])||(l[0]=d,o.u=!0),u.vn=e,u.ln=d,u.an.length=0,s[a]},useImperativeHandle:function(e,t,n){P((function(){return i(e)?(e(t()),function(){return e(null)}):null!=e?(e.current=t(),function(){e.current=null}):void 0}),a(n)?n.concat([e]):null)},PureComponent:Q};e.exports=xe}()},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(1)),o=l(n(29)),a=l(n(123)),s=l(n(131));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u={}.toString,d=Array.isArray||function(e){return"[object Array]"==u.call(e)},f=!1,h=!1;function p(e,t){var n=function(e){var t=[],n=[];return"string"==typeof e&&(n=e.split(",")),d(e)&&(n=e),n&&n[0]&&(t[0]=n[0]),n&&n[1]&&(t[1]=n[1]),t}(t);return e?n[0]:n[1]}function m(e,t){var n=e.children,s=e.style,l=void 0===s?{}:s,u=e.resizeMode,d=e.width,m=e.height,v=e.placeholder,g=void 0===v?"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==":v,_=e.source,y=void 0===_?{uri:""}:_,b=e.autoRemoveScheme,x=void 0===b||b,w=e.autoReplaceDomain,T=void 0!==w&&w,A=e.autoScaling,E=void 0===A||A,O=e.autoWebp,M=void 0===O||O,S=e.ignoreGif,C=void 0===S||S,R=e.autoCompress,k=void 0===R||R,P=e.highQuality,L=void 0===P||P,I=e.compressSuffix,F=void 0===I?["Q75","Q50"]:I,D=e.defaultHeight,N=void 0===D?"750rem":D,z=e.lazyload,j=void 0===z||z,B=e.autoPixelRatio,U=void 0===B||B,V=y.uri,H=V,G=Object.assign({},e);l=function(e){if(e&&"object"==typeof e&&e instanceof Array){var t={};return e.map((function(e){t=Object.assign(t,e||{})})),t}return e}(l)||l;var W=(0,r.useState)(!1),X=W[0],Y=W[1],q=l.width,K=l.height;if(!K&&m&&(K=m),!q&&d&&(q=d),!K&&q&&d&&m){var Q=d/parseInt(q,10);K=parseInt(m/Q,10)}var J=Object.assign({height:K,width:q},l);V&&(U&&window.devicePixelRatio>1&&("string"==typeof q&&q.indexOf("rem")>-1&&(q=2*parseInt(q.split("rem")[0])+"rem"),"string"==typeof K&&K.indexOf("rem")>-1&&(K=2*parseInt(K.split("rem")[0])+"rem")),V=(0,a.default)(V,{ignoreGif:C,ignorePng:!0,removeScheme:x,replaceDomain:T,scalingWidth:E?q:0,scalingHeight:E?K:0,webp:M&&f&&h,compressSuffix:k?p(L,F):""})),u&&(J.resizeMode=u);var Z=g;return(window.__isHydrating||window.__isSSR||e.isHydrating||e.isSSR)&&(j=!1),j?(G.onAppear=function(){t.current&&Y(!0)},X&&(Z=V)):Z=V,n?(0,r.createElement)(i.default,c({ref:t},G,{"data-once":!0,style:c({},J,{backgroundImage:"url("+Z+")",backgroundSize:u||"cover",backgroundRepeat:"no-repeat"},{backgroundPosition:"cover"===u||"contain"===u?"center":null},{height:J.height?J.height:N})}),n):(0,r.createElement)(o.default,c({ref:t},G,{"data-once":!0,source:{uri:Z},fallbackSource:{uri:H},style:J}))}s.default.isSupport((function(e){f=e})),s.default.isSupport((function(e){h=e}),"alpha"),m=(0,r.forwardRef)(m);var v=(0,r.memo)(m,(function(e){if(e.children)return!0}));t.default=v},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=t.scalingWidth,u=t.scalingHeight,f=t.webp,h=t.compressSuffix,p=t.quality,m=t.acutance,v=t.removeScheme,g=t.replaceDomain,_=t.ignoreGif,y=t.ignorePng,b=e;if("string"==typeof e){var x=(0,r.default)(e);if(x){var w=(0,i.default)(e),T=x[1],A=x[2],E=A.match(d)||[],O=!~A.indexOf("gif")&&!~A.indexOf("GIF")||!_,M=!~A.indexOf("png")&&!~A.indexOf("png")||!y,S=E[1]||"";n&&O&&(S=(0,s.default)(n,u,w)||S);var C=E[5]||"";f&&O&&(C=(0,l.default)(w)||C);var R=E[3]||"";(h||p||m)&&O&&M&&(R=(0,c.default)(h,p,m,w)||R);var k=S&&E[2]||"",P=S||R?E[4]||".jpg":"",L=S||R?"_":"";w&&("_"==L&&(L="@"),e.split("@")[1]&&(L="")),O&&("_.jpg"!==E[0]&&(b=b.replace(E[0],"")),b+=w?L+S+k+R+C:L+S+k+R+P+C,v&&(b=(0,o.default)(b))),g&&(b=(0,a.default)(b,T))}}return b};var r=u(n(124)),i=u(n(125)),o=u(n(126)),a=u(n(127)),s=u(n(128)),l=u(n(129)),c=u(n(130));function u(e){return e&&e.__esModule?e:{default:e}}var d=/_(\d+x\d+|cy\d+i\d+|sum|m|b)?(xz|xc)?((?:q\d+)?(?:s\d+)?)(\.jpg)?(_\.webp)?$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.match(r)};var r=/^(?:(?:http|https):)?\/\/(.+\.(?:alicdn|taobaocdn|taobao)\.(?:com|net))(\/.*(?:\.(jpg|png|gif|jpeg|webp))?)$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return r.test(e)};var r=/^(?:(?:http|https):)?\/\/(ossgw\.(?:alicdn|taobaocdn|taobao)\.(?:com|net))(\/.*(?:\.(jpg|png|gif|jpeg|webp))?)|(?:(?:http|https):)?\/\/(img-ovs\.alicdn\.com)(\/tmg-app\/.*(?:\.(jpg|png|gif|jpeg|webp)))$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(/(http|https):/gi,"")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=t.match(r);if(n&&"gw.alicdn.com"!=n[0]&&-1===i.indexOf(t))return e.replace(t,"gw.alicdn.com");return e};var r=/(.+\.(?:alicdn|taobaocdn|taobao|mmcdn)\.com)/,i=["a.tbcdn.cn","assets.alicdn.com","wwc.taobaocdn.com","wwc.alicdn.com","cbu01.alicdn.com","ossgw.alicdn.com"]},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r="string"==typeof e&&e.indexOf("rem")>-1,s="string"==typeof e&&e.indexOf("px")>-1;if(r||"number"==typeof e||s){var l=parseFloat(e,10),c=parseFloat(t,10),u=1;r&&i&&(u=750/i);var d=a(parseInt(l/u,10),o),f=a(parseInt(c/u,10),o);if(d)return n?"_"+d+"w":d+"x"+f}return""};var r="object"==typeof window,i=window.screen&&window.screen.width;r&&!window.__isSSR&&(i=document.documentElement.clientWidth/750*i);var o=[110,140,150,170,220,230,240,290,300,360,450,570,580,620,790,800,1e3];function a(e,t){var n=1e3,r=e,i=0;if(t.forEach((function(t,o){var a=Math.abs(t-e);if(0===a)return r=t,i=o,!1;n>a&&(n=a,r=t,i=o)})),e>r&&t[i+1]&&(r=t[i+1]),t.indexOf(r)>-1)return r}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e?".webp":"_.webp"}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,r){return r?(e.startsWith("Q")&&(e="_"+e.split("Q")[1]+"Q"),e||(t?"_"+t:"Q")):e||(t?"Q"+t:"")+(n?"S"+n:"")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r;function i(e,t){if(window.localStorage&&"function"==typeof window.localStorage.setItem)try{window.localStorage.setItem("webpsupport-"+t,e)}catch(e){}}window.__isSSR||(r=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));var o={isSupport:function(e,t){if("function"==typeof e)if(t=t||"lossy",window.__isSSR)e(!0);else if(window.navigator.userAgent.match(/windows|win32/i)||r&&window.navigator.userAgent.match(/UCBrowser/i))e(!1);else if(window.chrome||window.opera||window.ucweb)e(!0);else{var n=window.localStorage&&window.localStorage.getItem("webpsupport-"+t);n?e("true"==n):function(e,t){if("function"==typeof e){var n=new Image;n.onload=function(){var r=n.width>0&&n.height>0;i(r,t),e(r)},n.onerror=function(){i(!1,t),e(!1)}}}(e,t)}}},a=o;t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(50),i=n.n(r);n.d(t,"default",(function(){return i.a}))},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=(r=n(30))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=(0,i.forwardRef)((function(e,t){var n=e.children,r=e.style,l=void 0===r?{}:r,c=e.source,u=e.resizeMode,d=e.width,f=e.height,h=e.defaultHeight,p=s(e,["children","style","source","resizeMode","width","height","defaultHeight"]),m=l.width,v=l.height;if(!v&&m&&d&&f){var g=d/("string"==typeof m?parseInt(m,10):m);v=parseInt(f/g+"",10)}v||(v=h,u||(u="contain"));var _=Object.assign({height:v},l);return u&&(_.resizeMode=u),(0,i.createElement)(o.default,a({},p,{ref:t,source:c,style:_}),n)}));l.displayName="Picture";var c=(0,i.memo)(l,(function(e,t){return!(!e.forceUpdate&&!e.children)||e.source.uri!==t.source.uri}));t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(1)),o=l(n(30)),a=l(n(136)),s=n(144);function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=!1,d=!1;function f(e,t){var n=function(e){var t=[],n=[];return"string"==typeof e&&(n=e.split(",")),Array.isArray(e)&&(n=e),n&&n[0]&&(t[0]=n[0]),n&&n[1]&&(t[1]=n[1]),t}(t);return e?n[0]:n[1]}(0,s.isSupport)((function(e){u=e})),(0,s.isSupport)((function(e){d=e}),"alpha");var h=(0,r.forwardRef)((function(e,t){var n=e.children,s=e.className,l=e.style,h=void 0===l?{}:l,p=e.resizeMode,m=e.width,v=e.height,g=e.placeholder,_=void 0===g?"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==":g,y=e.source,b=void 0===y?{uri:""}:y,x=e.autoRemoveScheme,w=void 0===x||x,T=e.autoReplaceDomain,A=void 0===T||T,E=e.autoScaling,O=void 0===E||E,M=e.autoWebp,S=void 0===M||M,C=e.ignoreGif,R=void 0===C||C,k=e.autoCompress,P=void 0===k||k,L=e.highQuality,I=void 0===L||L,F=e.compressSuffix,D=void 0===F?["Q75","Q50"]:F,N=e.defaultHeight,z=void 0===N?"750rem":N,j=e.lazyload,B=void 0!==j&&j,U=e.autoPixelRatio,V=void 0===U||U,H=b.uri,G=Object.assign({},e),W=(0,r.useState)(!1),X=W[0],Y=W[1],q=h.width,K=h.height;if(!K&&q&&m&&v){var Q=m/("string"==typeof q?parseInt(q,10):q);K=parseInt(v/Q+"",10)}var J=Object.assign({height:K},h);H&&(V&&window.devicePixelRatio>1&&"string"==typeof q&&q.indexOf("rem")>-1&&(q=2*parseInt(q.split("rem")[0])+"rem"),H=(0,a.default)(H,{ignoreGif:R,ignorePng:!0,removeScheme:w,replaceDomain:A,scalingWidth:O?q:0,webp:S&&u&&d,compressSuffix:P?f(I,D):""})),p&&(J.resizeMode=p);var Z=_;return(window.__isHydrating||e.isHydrating||window.navigator.userAgent.match(/PHA/))&&(B=!1),B?(G.onAppear=function(){return Y(!0)},X&&(Z=H)):Z=H,n?(0,r.createElement)(i.default,c({},G,{className:s,style:Object.assign(Object.assign({},J),{backgroundImage:"url("+Z+")",backgroundSize:p||"cover",backgroundRepeat:"no-repeat",backgroundPosition:"cover"===p||"contain"===p?"center":null,height:J.height?J.height:z}),"data-once":!0}),n):(0,r.createElement)(o.default,c({},G,{ref:t,className:s,style:J,"data-once":!0,source:{uri:Z}}))}));h.displayName="Picture";var p=(0,r.memo)(h,(function(e){return!!e.children}));t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=t.scalingWidth,u=t.webp,f=t.compressSuffix,h=t.quality,p=t.acutance,m=t.removeScheme,v=t.replaceDomain,g=t.ignoreGif,_=t.ignorePng,y=e;if("string"==typeof e){var b=(0,r.default)(e);if(b){var x=(0,i.default)(e),w=b[1],T=b[2],A=T.match(d)||[],E=!~T.indexOf("gif")&&!~T.indexOf("GIF")||!g,O=!~T.indexOf("png")&&!~T.indexOf("png")||!_,M=A[1]||"";n&&E&&(M=(0,s.default)(n,x)||M);var S=A[5]||"";u&&E&&(S=(0,l.default)(x)||S);var C=A[3]||"";(f||h||p)&&E&&O&&(C=(0,c.default)(f,h,p,x)||C);var R=M&&A[2]||"",k=M||C?A[4]||".jpg":"",P=M||C?"_":"";x&&("_"==P&&(P="@"),e.split("@")[1]&&(P="")),E&&("_.jpg"!==A[0]&&(y=y.replace(A[0],"")),y+=x?P+M+R+C+S:P+M+R+C+k+S,m&&(y=(0,o.default)(y))),v&&(y=(0,a.default)(y,w))}}return y};var r=u(n(137)),i=u(n(138)),o=u(n(139)),a=u(n(140)),s=u(n(141)),l=u(n(142)),c=u(n(143));function u(e){return e&&e.__esModule?e:{default:e}}var d=/_(\d+x\d+|cy\d+i\d+|sum|m|b)?(xz|xc)?((?:q\d+)?(?:s\d+)?)(\.jpg)?(_\.webp)?$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.match(r)};var r=/^(?:(?:http|https):)?\/\/(.+\.(?:alicdn|taobaocdn|taobao)\.(?:com|net))(\/.*(?:\.(jpg|png|gif|jpeg|webp))?)$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.match(r)};var r=/^(?:(?:http|https):)?\/\/(ossgw\.(?:alicdn|taobaocdn|taobao)\.(?:com|net))(\/.*(?:\.(jpg|png|gif|jpeg|webp))?)$/i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e.replace(/(http|https):/gi,"")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=t.match(r);if(n&&"gw.alicdn.com"!=n[0]&&-1===i.indexOf(t))return e.replace(t,"gw.alicdn.com");return e};var r=/(.+\.(?:alicdn|taobaocdn|taobao|mmcdn)\.com)/,i=["a.tbcdn.cn","assets.alicdn.com","wwc.taobaocdn.com","wwc.alicdn.com","cbu01.alicdn.com","ossgw.alicdn.com"]},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=0,i=1;"string"==typeof e?e.indexOf("rem")>-1&&(n=parseFloat(e),r&&(i=750/r)):n=e;var a=function(e,t){for(var n=1e3,r=e,i=0,o=0;o<t.length;o++){var a=t[o],s=Math.abs(a-e);if(0===s)return r=a,i=o,!1;n>s&&(n=s,r=a,i=o)}e>r&&t[i+1]&&(r=t[i+1]);if(t.indexOf(r)>-1)return r;return!1}(Math.floor(n/i),o);return a?t?"_"+a+"w":a+"x10000":""};var r,i=window.screen.width;r=i||document.documentElement.clientWidth/750*i;var o=[110,140,150,170,220,230,240,290,300,360,450,570,580,620,790]},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return e?".webp":"_.webp"}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,r){return r?(e.startsWith("Q")&&(e="_"+e.split("Q")[1]+"Q"),e||(t?"_"+t:"Q")):e||(t?"Q"+t:"")+(n?"S"+n:"")}},function(e,t,n){"use strict";t.__esModule=!0,t.isSupport=function(e,t){void 0===t&&(t="lossy");if("function"==typeof e)if(window.navigator.userAgent.match(/PHA/))e(!0);else if(window.navigator.userAgent.match(/windows|win32/i)||r&&window.navigator.userAgent.match(/UCBrowser/i))e(!1);else if(window.chrome||window.opera)e(!0);else{var n=window.localStorage&&window.localStorage.getItem("webpsupport-"+t);n?e("true"==n):function(e,t){if("function"!=typeof e)return;var n=new Image;n.onload=function(){var r=n.width>0&&n.height>0;i(r,t),e(r)},n.onerror=function(){i(!1,t),e(!1)}}(e,t)}};var r=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);function i(e,t){if(window.localStorage&&"function"==typeof window.localStorage.setItem)try{window.localStorage.setItem("webpsupport-"+t,e+"")}catch(e){}}},function(e,t,n){!function(){var t={n:1,t:!1,driver:null,rootComponents:{},rootInstances:{},owner:null};function n(e,t,n,r,i){return{type:e,key:t,ref:n,props:r,_owner:i}}function r(e){return null===e}function i(e){return"function"==typeof e}function o(e){return"object"==typeof e}function a(e){return"[object Object]"===d.toString.call(e)}function s(e){return Array.isArray(e)}function l(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(){}var d={};function f(e){if(null==e)return e;var t=[];return function e(t,n){if(s(t))for(var r=0,i=t.length;r<i;r++)e(t[r],n);else n.push(t)}(e,t),t.length-1?t:t[0]}var h=[],p=[],m=[],v=setTimeout;function g(e){for(var t;t=e.shift();)t()}function _(e){0===h.length&&v(y),h.push(e)}function y(){g(h)}function b(e){0===p.length&&v(x),p.push(e)}function x(){g(p)}function w(e){m.push(e)}function T(e,n,r){var i=void 0===r?"":" got: "+(a(i=r)?Object.keys(i):i);return Error(e+": #"+n+", "+((n=t.owner)?"check <"+n.i()+">":"no owner")+"."+i)}function A(e,t){throw T("Error",e,t)}function E(e,t){var n=T("Warn",e,t);v((function(){throw n}),0)}var O={key:!0,ref:!0};function M(e,r,i){var o,a={},l=null,c=null;if(null!=r)for(o in c=void 0===r.ref?null:r.ref,l=void 0===r.key?null:""+r.key,r)O[o]||(a[o]=r[o]);var d=arguments.length-2;if(0<d)if(1!=d||s(i)){var h=i;if(1<d){h=Array(d);for(var p=0;p<d;p++)h[p]=arguments[p+2]}a.children=f(h)}else a.children=i;if(e&&e.defaultProps){var m=e.defaultProps;for(o in m)void 0===a[o]&&(a[o]=m[o])}return null==e&&(e=u,E(0)),new n(e,l,c,a,t.owner)}function S(e,t,n){for(var r=0,i=e&&e.length;r<i;r++)e[r].call(t,n)}var C=d.hasOwnProperty;function R(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function k(e,t){if(R(e,t))return!0;if(!o(e)||r(e)||!o(t)||r(t))return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var i=0;i<n.length;i++)if(!C.call(t,n[i])||!R(e[n[i]],t[n[i]]))return!1;return!0}var P="_internal",L="_instance",I="_nativeNode",F="_renderedComponent";function D(){return t.owner&&t.owner[L]}function N(){var e=D();if(e)return e;A(1)}function z(e,t){if(!r(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!R(e[n],t[n]))return;return 1}}function j(e){var n=N(),r=n.getHookID(),o=n.getHooks();return o[r]||(i(e)&&(e=e()),o[r]=[e,function(e){t.t||x();var a=o[r],s=a[2];i(e)&&(e=e(s)),R(e,s)||(a[2]=e,D()===n?n.r=!0:n.u())},e]),R((e=o[r])[0],e[2])||(e[0]=e[2],n.e=!0),e}function B(e,t){U(e,t)}function U(e,t,n){var r,i,o,a,s=N(),l=s.getHookID(),c=s.getHooks();t=void 0===t?null:t,c[l]?(o=(r=c[l]).o,i=r.f,r.f=t,r.s=i,o.current=e):(o=function e(t){if(!t&&n)return b((function(){return e(!0)}));(t=e.current)&&(a.current=t(),e.current=null)},a=function e(t){if(!t&&n)return b((function(){return e(!0)}));(t=e.current)&&(t(),e.current=null)},o.current=e,c[l]={o:o,c:a,s:t,f:t},s.didMount.push(o),s.willUnmount.push((function(){return a(!0)})),s.didUpdate.push((function(){var e=c[l],t=e.f,n=e.o;null!=t&&z(t,e.s)||(a(),n())})))}function V(e,t){var n,i=(n=N()).getHookID();return t=void 0===t?null:t,(n=n.getHooks())[i]&&!r(t)&&z(t,n[i][1])||(n[i]=[e(),t]),n[i][0]}function H(e){return s(e)?e:[e]}function G(e,t){for(var n;e&&e[P];){if(t(e)){n=e;break}e=e[P].h}return n}var W=0;function X(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var Y=function(){function e(e){this.l=e}var n=e.prototype;return n.a=function(e,n,r){this._parent=e,this.h=n,this._context=r,this._mountID=t.n++},n.v=function(){this.l=this[I]=this._parent=this.h=this._context=null,this[L]&&(this[L]=this[L][P]=null)},n.d=function(e,t,n,r){return this.a(e,t,n),this._(r),(r={})[P]=this,r},n.unmountComponent=function(e){this[I]&&!e&&t.driver.removeChild(this[I],this._parent),this.v()},n.i=function(){var e=this.l,t=e&&e.type;return t&&t.displayName||t&&t.name||t||e},n._=function(e){var n=this.p(),r=this._parent;e?e(n,r):t.driver.appendChild(n,r)},n.p=function(){return null==this[I]?this[I]=this.m():this[I]},n.w=function(){return this.p()},e}(),q=function(e){function n(){return e.apply(this,arguments)||this}X(n,e);var r=n.prototype;return r.m=function(){return t.driver.createEmpty(this)},r.y=function(){},n}(Y);function K(e,t,n){var r=e?e.ref:null,i=t?t.ref:null;r!==i&&(r&&J(e._owner,r,n),i&&Q(t._owner,i,n))}function Q(e,t,n){e?(n=n.w(),i(t)?t(n):o(t)?t.current=n:e[L].refs[t]=n):E(3)}function J(e,t,n){i(t)?t(null):(n=n.w(),o(t)&&t.current===n?t.current=null:e[L].refs[t]===n&&delete e[L].refs[t])}function Z(e){return e=a(e)&&null!==e&&e.type?new(l(e.type)?t.b:t.j)(e):l(e)||c(e)?new t.C(e+""):s(e)?new t.g(e):(void 0===e||r(e)||!1===e||!0===e||E(2,e),new t.O(e))}function $(e,t){var n=r(e),i=r(t);return n||i?n===i:s(e)&&s(t)||(l(e)||c(e)?l(t)||c(t):o(e)&&o(t)&&e.type===t.type&&e.key===t.key)}function ee(e,t,n){return t=t&&t.key,n="."+n.toString(36),l(t)&&void 0===e[t="$"+t]?t:n}function te(e){for(var n=e;n=e.h&&e.h[P];)if(n instanceof t.j)e=n;else{for(var r=Object.keys(n.k),i=e.I-1;0<=i;i--){var o=n.k[r[i]].p();if(!s(o))return o;if(0<o.length)return o[o.length-1]}if(!(n instanceof t.g))return null;e=n}}var ne=function(){function e(e,t){this.props=e,this.context=t,this.refs={}}var t=e.prototype;return t.setState=function(e,t){this.updater.setState(this,e,t)},t.forceUpdate=function(e){this.updater.forceUpdate(this,e)},e}(),re=function(e){function t(t,n){return(n=e.call(this,t,n)||this).R=!0,n}return X(t,e),t}(ne),ie=1,oe=function(e){function t(){var t=e.call(this)||this;return t.P=[],t.x=ie++,t}X(t,e);var n=t.prototype;return n.w=function(){return this.A().w()},n.A=function(){return this[P][F]},n.u=function(e){this.P=e,this.forceUpdate()},n.render=function(){return this.P},t}(ne),ae={set:function(e,n){e._r||(e._r=n).x&&(t.rootInstances[n.x]=n,t.rootComponents[n.x]=n[P])},get:function(e){return e._r},remove:function(e){var n=this.get(e);n&&(e._r=null,n.x&&(delete t.rootComponents[n.x],delete t.rootInstances[n.x]))},mount:function(e,n,r){var i=r.parent,o=r.hydrate;r=t.driver;null==n&&(n=r.createBody()),o={element:e,container:n,hydrate:o},r.beforeRender&&r.beforeRender(o),i&&(s=(a=i[P]).S(a._context));var a=this.get(n);if(a&&a.x)return s&&(a[P].D=s),a.u(e),r.afterRender&&r.afterRender(o),a;var s=Z(M(oe)).d(n,i,s||{});return this.set(n,s),s.u(e),r.afterRender&&r.afterRender(o),s}},se=Object.assign,le="style",ce="children",ue=/^on[A-Z]/,de=function(e){function n(){return e.apply(this,arguments)||this}X(n,e);var o=n.prototype;return o.d=function(e,t,n,r){this.a(e,t,n);var i=this.l,o=i.props,a=i.type;e=o[ce],t=o.append||"tree";return this.H=se({},o[le]),((o={type:a,props:o})[P]=this)[L]=o,"tree"===t?(this.N(e,n),this._(r)):(this._(r),this.N(e,n)),i&&i.ref&&Q(i._owner,i.ref,this),o},o.N=function(e,t){if(null==e)return e;var n=this.p();return this.U(n,H(e),t)},o.U=function(e,t,n,r){for(var i=this.k={},o=[],a=0,s=t.length;a<s;a++){var l=t[a],c=Z(l);(i[ee(i,l,a)]=c).I=a,c=c.d(e,this[L],n,r),o.push(c)}return o},o.F=function(e){var t=this.k;if(t){for(var n in t)t[n].unmountComponent(e);this.k=null}},o.unmountComponent=function(e){var n;this[I]&&((n=this.l.ref)&&J(this.l._owner,n,this),ae.remove(this[I]),e||t.driver.removeChild(this[I],this._parent)),this.F(!0),this.H=null,this.v()},o.y=function(e,t,n,r){K(e,this.l=t,this),e=e.props,t=t.props,this.L(e,t),null==e[ce]||s(e[ce])&&0===e[ce].length?this.N(t[ce],r):this.M(t[ce],r)},o.L=function(e,n){var r,o,a,s,l=t.driver,c=this.p();for(r in e)if(r!==ce&&null!=e[r]&&!n.hasOwnProperty(r))if(r===le){for(o in this.H)(a=a||{})[o]="";this.H=null}else ue.test(r)?i(s=e[r])&&l.removeEventListener(c,r.slice(2).toLowerCase(),s):l.removeAttribute(c,r,e[r]);for(r in n){var u,d=n[r],f=r===le?this.H:null!=e?e[r]:void 0;if(r!==ce&&f!==d&&(null!=d||null!=f))if(r===le)if(d?d=this.H=se({},d):this.H=null,null!=f){for(o in f)d&&(d[o]||0===d[o])||((a=a||{})[o]="");for(o in d)f[o]!==d[o]&&((a=a||{})[o]=d[o])}else a=d;else ue.test(r)?(u=r.slice(2).toLowerCase(),i(f)&&l.removeEventListener(c,u,f,n),i(d)&&l.addEventListener(c,u,d,n)):null!=d?l.setAttribute(c,r,d):l.removeAttribute(c,r,e[r])}a&&l.setStyle(c,a)},o.M=function(e,n){var i=this.k,o=t.driver;if(null!=e||null!=i){var a={};if(null!=e)for(var l=0,c=(e=H(e)).length;l<c;l++){var u=e[l],d=ee(a,u,l),f=i&&i[d],h=f&&f.l,p=f&&f._context;null!=f&&$(h,u)?(h===u&&p===n||f.y(h,u,n,n),a[d]=f):(f&&(f.T=!0),a[d]=Z(u))}var m=this.p(),v=s(m),g=null,_=null,y=!1,b=!1,x=null,w=!(!o.removeChildren||!(r(e)||e&&!e.length)||v);if(null!=i){for(var T in i){var A=i[T],E=A.T||!a[T];g?E&&A.unmountComponent(w):(b=E,s(_=(g=A).p())&&(y=0===_.length,_=_[0]))}(v&&0===m.length||y)&&(x=te(this))}var O,M=function(e,t){for(var n=0,r=(e=H(e)).length;n<r;n++)x?o.insertAfter(e[r-1-n],x):_?o.insertBefore(e[n],_):t&&o.appendChild(e[n],t)},S=0;for(O in a){var C,R=a[O],k=i&&i[O];k===R?(C=k.p(),k.I!==S&&M(C)):(v&&(m=this._parent),R.d(m,this[L],n,M)),R.I=S++,s(x=R.p())&&(x=x[x.length-1])}b&&g.unmountComponent(w),w&&o.removeChildren(this[I]),this.k=a}},o.m=function(){var e=this[L],n=t.driver.createElement(e.type,e.props,this);return ae.set(n,e),n},n}(Y),fe=function(e){function n(){return e.apply(this,arguments)||this}X(n,e);var r=n.prototype;return r.y=function(e,n){e!==(n=""+n)&&(this.l=n,t.driver.updateText(this.p(),n))},r.m=function(){return t.driver.createText(this.l,this)},n}(Y),he=function(e){function t(t,n){var r=e.call(this)||this;r.V=!0,r.W=t,r.Z=0,r.$=0,r.q={},r.r=!1,r.e=!1,r.z=null,r.B={},r.didMount=[],r.didUpdate=[],r.willUnmount=[],r.state=d,t._forwardRef&&(r.G=r._forwardRef=n);var i=t.J;return i&&(r.shouldComponentUpdate=function(e){for(var t=!0,n=i.length-1;-1<n&&!(t=i[n](r.props,e));n--);return!t||r.G!==r._forwardRef}),r}X(t,e);var n=t.prototype;return n.getHooks=function(){return this.q},n.getHookID=function(){return++this.Z},n.useContext=function(e){var t,n,r=this,i=e._contextID,o=this.B[i];return o||(t=e.K(this),o=this.B[i]={Q:t},t&&(t.X(n=function(e){o.Y!==e&&(r.e=!0,r.u())}),this.willUnmount.push((function(){return t.nn(n)})))),o.Y=o.Q?o.Q.getValue():e._defaultValue},n.componentWillMount=function(){this.e=!0},n.componentDidMount=function(){S(this.didMount)},n.componentWillReceiveProps=function(){this.e=!0},n.componentDidUpdate=function(){S(this.didUpdate)},n.componentWillUnmount=function(){S(this.willUnmount)},n.u=function(){this[P].tn=!0,this.setState(d)},n.render=function(){this.Z=0,this.$=0,this.r=!1;for(var e=this.W(this.props,this._forwardRef||this.context);this.r;)this.$++,24<this.$&&A(4),this.Z=0,this.r=!1,e=this.W(this.props,this._forwardRef||this.context);return this.e&&(this.z=e,this.e=!1),this.z},t}(ne),pe=[];function me(e){return e.in}function ve(e){var n,r,i=e[P];i&&(t.t=!0,n=i.l,r=i._context,e=i.D||r,i.D=void 0,(me(i)||i.tn)&&(i.y(n,n,r,e),g(m)),t.t=!1)}function ge(e,t){return t[P]._mountID-e[P]._mountID}function _e(){if(t.t)return _(_e);var e,n=pe;if(0<n.length)for(x(),pe=[],1<n.length&&(n=n.filter((function(e){return!!e[P]})).sort(ge));e=n.pop();)ve(e)}function ye(e,t){~pe.indexOf(e)||pe.push(e),t?1<pe.length||_(_e):_e()}function be(e,t,n){var r,i,o=e[P];o&&(n&&(i=n,((r=o).rn||(r.rn=[])).push(i)),r=o[F],t?(i=t,(me(t=o)||(t.in=[])).push(i),!o.un&&r&&ye(e,!0)):(o.tn=!0,r&&ye(e)))}var xe={setState:function(e,n,r){t.t||x(),be(e,n,r)},forceUpdate:function(e,t){be(e,null,t)}};function we(e,t,n){try{return e()}catch(e){n?n(e):(r=e,(i=G(t,(function(e){return e.componentDidCatch||e.constructor&&e.constructor.getDerivedStateFromError})))?w((function(){var e=i[P];e&&we((function(){var e;i.componentDidCatch&&i.componentDidCatch(r),i.constructor&&i.constructor.getDerivedStateFromError&&(e=i.constructor.getDerivedStateFromError(),i.setState(e))}),e.h)})):v((function(){throw r}),0))}var r,i}function Te(e,t){w((function(){we(e,t)}))}function Ae(e,t){e&&Te((function(){S(e,t)}),t)}var Ee=function(e){function n(){return e.apply(this,arguments)||this}X(n,e);var r=n.prototype;return r.d=function(e,n,r,o){this.a(e,n,r);var a,s,l=(e=this.l).type,c=e.ref,u=e.props,d=l.prototype,f=this.en(r);if(we((function(){d&&d.render?a=new l(u,f):i(l)?a=new he(l,c):A(6,l)}),n),a)return a.props=u,a.context=f,a.refs={},a.updater=xe,void 0===((a[P]=this)[L]=a).state&&(a.state=null),a.componentWillMount&&we((function(){a.componentWillMount()}),a),a.state=(t.owner=this).on(u,f),n=this.rn,this.rn=null,we((function(){s=a.render()}),a),t.owner=null,this[F]=Z(s),this[F].d(this._parent,a,this.S(r),o),!e.type._forwardRef&&c&&Q(e._owner,c,this),a.componentDidMount&&Te((function(){a.componentDidMount()}),a),Ae(n,a),a},r.unmountComponent=function(e){var t,n,r=this[L];r&&r.componentWillUnmount&&we((function(){r.componentWillUnmount()}),r),null!=this[F]&&(n=(t=this.l).ref,!t.type._forwardRef&&n&&J(t._owner,n,this),this[F].unmountComponent(e),this[F]=null),this.in=null,this.tn=!1,this.v()},r.en=function(e){var t={},n=this.l.type.contextTypes;if(n)for(var r in n)t[r]=e[r];return t},r.S=function(e){var t;return(t=(t=this[L]).getChildContext&&t.getChildContext())?se({},e,t):e},r.on=function(e,t){var n=this[L],r=this.in;if(!r)return n.state;this.in=null;for(var o=se({},n.state),a=0;a<r.length;a++){var s=r[a];se(o,i(s)?s.call(n,o,e,t):s)}return o},r.y=function(e,t,n,r){var i=this,o=this[L];o&&we((function(){var n,a;i._context===r?n=o.context:(n=i.en(r),f=!0),a=t.props,e!==t&&(f=!0),f&&o.componentWillReceiveProps&&(i.un=!0,o.componentWillReceiveProps(a,n),i.un=!1),i.l.type._forwardRef?(o.G=e.ref,o._forwardRef=t.ref):K(e,t,i);var s,l=!0,c=o.props,u=o.state,d=i.on(a,n),f=i.rn;i.rn=null,i.tn||(o.shouldComponentUpdate?l=o.shouldComponentUpdate(a,d,n):o.R&&(l=!k(c,a)||!k(u,d))),l?(i.tn=!1,s=o.context,o.componentWillUpdate&&o.componentWillUpdate(a,d,n),i.l=t,i._context=r,o.props=a,o.state=d,o.context=n,i.fn(r),o.componentDidUpdate&&Te((function(){o.componentDidUpdate(c,u,s)}),o)):(i.l=t,i._context=r,o.props=a,o.state=d,o.context=n),Ae(f,o)}),o)},r.fn=function(e){var n,r,i,o,a,l=this[F],c=l.l,u=this[L];t.owner=this,n=u.render(),t.owner=null,$(c,n)?(r=l._context,i=this.S(e),c===n&&r===i||l.y(c,n,r,i)):(o=null,s(a=l.p())&&0===a.length&&null==u.x&&(o=te(l)),l.unmountComponent(!0),this[F]=Z(n),this[F].d(this._parent,u,this.S(e),(function(e,n){var r=t.driver;a=H(a),e=H(e);for(var i=0;i<e.length;i++){var s=e[i];a[i]?r.replaceChild(s,a[i]):o?r.insertAfter(s,o):r.appendChild(s,n),o=s}for(var l=e.length;l<a.length;l++)r.removeChild(a[l])})))},r.p=function(){var e=this[F];if(e)return e.p()},r.w=function(){var e=this[L];return e.V?null:e},n}(Y),Oe=function(e){function n(){return e.apply(this,arguments)||this}X(n,e);var r=n.prototype;return r.d=function(e,n,r,i){this.a(e,n,r);n=this[L]={};var o=[];if((n[P]=this).U(this._parent,this.l,r,(function(e){e=H(e);for(var t=0;t<e.length;t++)o.push(e[t])})),i)i(o,e);else for(var a=0;a<o.length;a++)t.driver.appendChild(o[a],e);return n},r.unmountComponent=function(e){if(!e)for(var n=this.p(),r=0,i=n.length;r<i;r++)t.driver.removeChild(n[r]);this.F(!0),this.v()},r.y=function(e,t,n,r){this.l=t,this.M(this.l,r)},r.p=function(){var e=this.k||{};return[].concat.apply([],Object.keys(e).map((function(t){return e[t].p()})))},n}(de);re={__proto__:null,createElement:M,createContext:function(e){var t="_c"+W++;function n(e){return G(e,(function(e){return e.sn===t}))}return{Provider:function(){function n(){this.sn=t,this.cn=[]}var r=n.prototype;return r.X=function(e){this.cn.push(e)},r.nn=function(e){this.cn=this.cn.filter((function(t){return t!==e}))},r._getChildContext=function(){var e={};return e[t]=this,e},r.getValue=function(){return void 0!==this.props.value?this.props.value:e},r.componentDidUpdate=function(e){this.props.value!==e.value&&S(this.cn,null,this.getValue())},r.render=function(){return this.props.children},n}(),Consumer:function(r,o){var a=this,s=j((function(){return o[t]||n(a)}))[0],l=s?s.getValue():e,c=j(l),u=c[1];if(l===c[0])return B((function(){if(s)return s.X(u),function(){s.nn(u)}}),[]),i(r=H(r.children)[0])?r(l):void 0;u(l)},_contextID:t,_defaultValue:e,K:n}},createRef:function(){return{current:null}},forwardRef:function(e){return e._forwardRef=!0,e},memo:function(e,t){return t=t||k,e.J?e.J.push(t):e.J=[t],e},Fragment:function(e){return e.children},render:function(e,n,r,o){var a;return i(r)&&(o=r,r=null),a=(a=r=r||d).driver,t.O=q,t.b=de,t.C=fe,t.g=Oe,t.j=Ee,(t.driver=a||t.driver)||A(5),r=ae.mount(e,n,r).w(),o&&o.call(r),r},Component:ne,version:"1.1.0",shared:{Host:t,Instance:ae,Element:n,flattenChildren:f},useState:j,useContext:function(e){return N().useContext(e)},useEffect:function(e,t){U(e,t,!0)},useLayoutEffect:B,useRef:function(e){var t=N(),n=t.getHookID();return(t=t.getHooks())[n]||(t[n]={current:e}),t[n]},useCallback:function(e,t){return V((function(){return e}),t)},useMemo:V,useReducer:function(e,n,r){var o=N(),a=o.getHookID(),s=o.getHooks(),l=s[a];if(!l)return n=i(r)?r(n):n,s[a]=[n,function(e){t.t||x();var n,r,i=s[a][2];D()===o?(i.hn.push(e),o.r=!0):R(r=(0,i.ln)(n=i.an,e),n)||(i.an=r,i.hn.push(e),o.u())},{hn:[],ln:e,an:n}];var c=l[2],u=l[0];if(0<o.$)for(var d=0;d<c.hn.length;d++)u=e(u,c.hn[d]);else u=c.an;return R(u,l[0])||(l[0]=u,o.e=!0),c.ln=e,c.an=u,c.hn.length=0,s[a]},useImperativeHandle:function(e,t,n){B((function(){return i(e)?(e(t()),function(){return e(null)}):null!=e?(e.current=t(),function(){e.current=null}):void 0}),s(n)?n.concat([e]):null)},PureComponent:re},e.exports=re}()},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=void 0!==window.requestAnimationFrame?window.requestAnimationFrame:function(e){return setTimeout(e,16)},i=void 0!==window.cancelAnimationFrame?window.cancelAnimationFrame:clearTimeout,o="start",a="end",s="run",l="stop",c={easeOutSine:function(e){return Math.sin(e*Math.PI/2)}},u=function(){},d=function(){function e(e){this.config={easing:"linear",duration:1/0,onStart:u,onRun:u,onStop:u,onEnd:u},this.isfinished=!1,this.config=Object.assign(Object.assign({},this.config),e)}var t=e.prototype;return t.run=function(){var e=this.config,t=e.duration,n=e.onStart,r=e.onRun;t<=1&&(this.isfinished=!0,r({percent:1}),this.stop()),this.isfinished||(this._hasFinishedPercent=this._stop&&this._stop.percent||0,this._stop=null,this.start=Date.now(),this.percent=0,n({percent:0,type:o}),this.easingFn=c[this.config.easing],this._run())},t._run=function(){var e=this,t=this.config,n=t.onRun,o=t.onStop;this._raf&&i(this._raf),this._raf=r((function(){if(e.now=Date.now(),e.t=e.now-e.start,e.duration=e.now-e.start>=e.config.duration?e.config.duration:e.now-e.start,e.progress=e.easingFn(e.duration/e.config.duration),e.percent=e.duration/e.config.duration+e._hasFinishedPercent,e.percent>=1||e._stop)return e.percent=e._stop&&e._stop.percent?e._stop.percent:1,e.duration=e._stop&&e._stop.duration?e._stop.duration:e.duration,n({percent:e.progress,originPercent:e.percent,t:e.t,type:s}),o({percent:e.percent,t:e.t,type:l}),void(e.percent>=1&&(e.isfinished=!0,e.stop()));n({percent:e.progress,originPercent:e.percent,t:e.t,type:s}),e._run()}))},t.stop=function(){var e=this.config.onEnd;this._stop={percent:this.percent,now:this.now},e({percent:1,t:this.t,type:a}),i(this._raf)},e}();t.default=d},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(57)),i=u(n(58)),o=u(n(149)),a=u(n(150)),s=u(n(151)),l=u(n(152)),c=u(n(153));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=d({},r.default,{},i.default,{},o.default,{},a.default,{},s.default,{},l.default,{},c.default);t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={"corner-1":6,"corner-2":12,"corner-3":24,"corner-zero":0,"corner-huge":500,"corner-round":"50%","corner-circle":"50%"},i=r;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={"font-family-base":'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',"font-size-display-3":112,"font-size-display-2":96,"font-size-display-1":72,"font-size-headline":48,"font-size-title":40,"font-size-subhead":32,"font-size-body-2":30,"font-size-body-1":28,"font-size-caption":24,"font-size-footnote":20,"font-weight-1":100,"font-weight-2":200,"font-weight-3":300,"font-weight-4":400,"font-weight-5":500,"font-weight-6":600,"font-weight-7":700,"font-weight-8":800,"font-weight-9":900,"font-lineheight-1":1.3,"font-lineheight-2":1.4,"font-lineheight-3":1.5};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={"line-zero":0,"line-1":1,"line-2":4,"line-3":8,"line-solid":"solid","line-dashed":"dashed","line-dotted":"dotted"};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(58))&&r.__esModule?r:{default:r};var o={"shadow-zero":"","shadow-1":"0px 2px 4px 0 rgba(0,0,0,0.20)","shadow-2":"0px 4px 8px 0 rgba(0,0,0,0.24)","shadow-3":"0px 6px 12px 0 rgba(0,0,0,0.24)","shadow-4":"0px 8px 16px 0 rgba(0,0,0,0.28)","shadow-5":"0px 12px 24px 0 rgba(0,0,0,0.32)","shadow-distance-sd1":"2px","shadow-distance-sd2":"4px","shadow-distance-sd3":"6px","shadow-distance-sd4":"8px","shadow-distance-sd5":"12px","shadow-opacity-sd1":.2,"shadow-opacity-sd2":.24,"shadow-opacity-sd3":.24,"shadow-opacity-sd4":.28,"shadow-opacity-sd5":.32,"shadow-color-sd1":i.default["color-black"],"shadow-color-sd2":i.default["color-black"],"shadow-color-sd3":i.default["color-black"],"shadow-color-sd4":i.default["color-black"],"shadow-color-sd5":i.default["color-black"],"shadow-blur-sd1":"4px","shadow-blur-sd2":"8px","shadow-blur-sd3":"12px","shadow-blur-sd4":"16px","shadow-blur-sd5":"24px","shadow-spread-sd1":0,"shadow-spread-sd2":0,"shadow-spread-sd3":0,"shadow-spread-sd4":0,"shadow-spread-sd5":0};t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(57))&&r.__esModule?r:{default:r};var o={"icon-xxs":i.default["s-3"],"icon-xs":i.default["s-4"],"icon-s":i.default["s-5"],"icon-m":i.default["s-6"],"icon-l":i.default["s-8"],"icon-xl":i.default["s-12"],"icon-xxl":i.default["s-16"],"icon-font-path":"https://at.alicdn.com/t/font_1273696_vsjsjac28vc","icon-font-family":"iconfont","icon-content-play":"e605","icon-content-checkbox":"e609","icon-content-trash":"e60c","icon-content-arrow-right":"e607","icon-content-add":"e612","icon-content-close":"e604","icon-content-search":"e606","icon-content-delete":"e618","icon-content-semi-select":"e603","icon-content-error":"e60e","icon-content-prompt":"e60b","icon-content-success":"e613","icon-content-warning":"e611","icon-content-arrow-left":"e60d","icon-content-arrow-up":"e608","icon-content-arrow-down":"e60a","icon-content-double-arrow-left":"e61c","icon-content-double-arrow-right":"e61d","icon-content-dropdown-down":"e614","icon-content-favorite":"e60f","icon-content-sort-descend":"e617","icon-content-sort-ascend":"e616","icon-content-minus":"e615","icon-content-loading":"e600"};t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(8)),o=a(n(31));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children"]);return(0,r.createElement)(o.default.Provider,{value:n},i.default.only(t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return(0,r.forwardRef)((function(n,a){var s;return(0,i.useStyles)(t,n,(function(e){return s=e,{}})),(0,r.createElement)(e,o({},n,{classNames:s,ref:a}))}))};var r=n(0),i=n(56);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(59)),a=l(n(15)),s=l(n(175));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.placement,l=void 0===n?"bottom":n,u=e.visible,d=void 0!==u&&u,f=e.height,h=e.width,p=e.afterVisibleChange,m=void 0===p?function(){}:p,v=e.onMaskClick,g=void 0===v?function(){}:v,_=e.onUnmount,y=void 0===_?function(){}:_,b=e.onShow,x=void 0===b?function(){}:b,w=e.onHide,T=void 0===w?function(){}:w,A=e.keepAlive,E=e.bgTransparent,O=e.children,M=e.styles,S=e.style,C=void 0===S?{}:S,R=e.className,k=e.portal,P=void 0===k||k,L=e.view,I=void 0!==L&&L,F=e.disableBackdropClose,D=void 0!==F&&F,N=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["placement","visible","height","width","afterVisibleChange","onMaskClick","onUnmount","onShow","onHide","keepAlive","bgTransparent","children","styles","style","className","portal","view","disableBackdropClose"]),z=(0,i.useStyles)(s.default,{styles:M},(function(e){return{modal:e("drawer--modal"),drawer:e(["drawer","drawer--"+l,{"drawer--transparent":E}])}}));return(0,r.createElement)(o.default,c({keepMounted:A,disablePortal:!P,onBackdropClick:g,disableBackdropClose:D},N,{style:z.modal,onClose:T,visible:d,view:I,styles:{styles:M}}),(0,r.createElement)(a.default,{in:d,appear:!I,onEnter:x,onExited:A?function(){return m(d)}:y,transition:{enter:{properties:["transform"],duration:300},exit:{properties:["transform"],duration:300}},styles:{enter:{transform:"translate(0, 0)"},exit:{transform:"top"===l?"translate(0, -100%)":"left"===l?"translate(-100%, 0)":"right"===l?"translate(100%, 0)":"translate(0, 100%)"}}},(0,r.createElement)(a.default.View,{style:c({},z.drawer,{},{width:h,height:f},{},C),className:R,ref:t},O)))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.createChainedFunction=m,t.default=void 0;var r=n(0),i=f(n(9)),o=f(n(10)),a=n(4),s=f(n(15)),l=f(n(1)),c=f(n(62)),u=f(n(172)),d=f(n(173));function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e){return e.transition||!!e.children&&Object.prototype.hasOwnProperty.call(e.children.props,"in")}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var v=(0,r.forwardRef)((function(e,t){var n=e.view,f=void 0!==n&&n,v=e.visible,g=void 0!==v&&v,_=e.container,y=void 0===_||_,b=e.disablePortal,x=void 0!==b&&b,w=e.keepMounted,T=void 0!==w&&w,A=e.hideBackdrop,E=void 0!==A&&A,O=e.disableBackdropClose,M=void 0!==O&&O,S=e.onBackdropClick,C=e.onClose,R=void 0===C?function(){}:C,k=e.containerStyle,P=void 0===k?{}:k,L=e.transition,I=e.style,F=void 0===I?{}:I,D=e.className,N=void 0===D?"":D,z=e.styles,j=e.onEnter,B=e.onExit,U=e.onEntering,V=e.onExiting,H=e.onEntered,G=e.onExited,W=e.children,X=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["view","visible","container","disablePortal","keepMounted","hideBackdrop","disableBackdropClose","onBackdropClick","onClose","containerStyle","transition","style","className","styles","onEnter","onExit","onEntering","onExiting","onEntered","onExited","children"]),Y=(0,r.useState)(!g),q=Y[0],K=Y[1],Q=p(e),J=function(e){return!e.visible&&(!p(e)||null)}(e);if(!T&&!g&&(!Q||q))return null;q!==J&&null!==J&&K(J);var Z={};Q&&(Z={onEnter:L?j:m(j,W.props.onEnter),onExit:L?B:m(B,W.props.onExit),onEntering:L?U:m(U,W.props.onEntering),onExiting:L?V:m(V,W.props.onExiting),onEntered:L?H:m(H,W.props.onEntered),onExited:m((function(){K(!0),"function"==typeof G&&G()}),L?null:W.props.onExited)});var $,ee=(0,a.useStyles)(c.default,{styles:z},(function(e){return{modal:e(["modal",{"modal--view":f,"modal--hidden":q}])}}));$=L?(0,r.createElement)(s.default,h({},X,{in:g,appear:!f,style:F,className:N,transition:L.transition,styles:L.styles},Z),W):(0,o.default)(W)?(0,i.default)(W,h({},Z)):W;var te=(0,r.createElement)(l.default,h({},L?{}:X,{className:L?"":N,style:h({},ee.modal,{},L?P:F),ref:t}),E?null:(0,r.createElement)(u.default,{view:f,visible:g,onTouchend:function(e){S&&S(e),!M&&R&&R("backdropClick",e)}}),$);return x||f?te:(0,r.createElement)(d.default,{portal:y},te)}));t.default=v},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(159));i(n(161)),i(n(162)),i(n(163)),i(n(170));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,o){var a;if(!e)return;a=i((0,r.processParams)(n,o),2),n=a[0],o=a[1],t=(0,r.processStyle)(t);var s=Object.keys(t),l=n.duration||0,c=n.timingFunction||"ease",u=n.delay||0,d=s.length?s.map((function(e){return e+" "+l+"ms "+c+" "+u+"ms"})).join(","):"all "+l+"ms "+c+" "+u+"ms";if(e.style.transition=d,e.style.webkitTransition=d,o){var f=function(t){t.stopPropagation(),e.removeEventListener("webkitTransitionEnd",f),e.removeEventListener("transitionend",f),e.style.transition="",e.style.webkitTransition="",o()};e.addEventListener("webkitTransitionEnd",f),e.addEventListener("transitionend",f)}setTimeout((function(){for(var n in t){var r=t[n];e.style[n]=r}}),30)};var r=n(25),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}},function(e,t,n){"use strict";t.__esModule=!0,t.isRpx=l,t.calcRpx=c,t.getRpx=u,t.setRpx=d,t.getViewportWidth=f,t.setViewportWidth=h,t.setDecimalPixelTransformer=function(e){a=e},t.convertUnit=function(e,t,n){var r=t+"-"+e,i=p[r];n&&(r+="-"+n,o=n);return i||(e+="",p[r]=l(e)?c(e):e)};var r=/[-+]?\d*\.?\d+rpx/g,i="object"==typeof window?window:"object"==typeof i?i:{},o="web",a=function(e){return parseFloat(e)*u()+"px"},s=function(e){return t=parseFloat(e)/(f()/100),n=4,r=Math.pow(10,n+1),i=Math.floor(t*r),10*Math.round(i/10)/r+"vw";var t,n,r,i};function l(e){return"string"==typeof e&&r.test(e)}function c(e){return"web"===o?e.replace(r,s):"weex"===o?e.replace(r,a):e}function u(){return i.__rpx_coefficient__}function d(e){i.__rpx_coefficient__=e}function f(){return i.__viewport_width__}function h(e){i.__viewport_width__=e}void 0===u()&&d(1),void 0===f()&&h(750);var p=Object.create(null)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,o){var a;if(!e)return;a=i((0,r.processParams)(n,o),2),n=a[0],o=a[1],t=(0,r.processStyle)(t),weex.requireModule("animation").transition(e.ref,{styles:t,timingFunction:n.timingFunction||"ease",delay:n.delay||0,duration:n.duration||0,needLayout:n.needLayout||!1},o||function(){})};var r=n(25),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,a){var s;s=i((0,r.processParams)(n,a),2),n=s[0],a=s[1];var l=my.createAnimation(Object.assign({},n,{timeFunction:n.timingFunction||"ease"}));return Object.keys(t).map((function(e){if(l[e]&&(l=l[e](t[e])),"transform"===e){var n=function(e){var t={};if(!e||e.length<1)return t;var n=e.match(/\w+\(.+?\)/g);n&&n.forEach((function(e){var n=e.match(/(\w+)\((.+?)\)/);n&&3===n.length&&(t[n[1]]=n[2].replace("deg","").split(","))}));return t}(t[e]);Object.keys(n).forEach((function(e){l[e]&&(l=l[e].apply(l,o(n[e])))}))}})),{export:function(){return l.step().export()}}};var r=n(25),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,s){var l;l=o((0,r.processParams)(n,s),2),n=l[0],s=l[1];var c=wx.createAnimation(Object.assign({},n,{timeFunction:n.timingFunction||"ease"}));return Object.keys(t).map((function(e){if(c[e]&&(c=c[e](t[e])),"transform"===e){var n=function(e){var t={};if(!e||e.length<1)return t;var n=e.match(/\w+\(.+?\)/g);n&&n.forEach((function(e){var n=e.match(/(\w+)\((.+?)\)/);n&&3===n.length&&(t[n[1]]=n[2].replace("deg","").split(","))}));return t}(t[e]);Object.keys(n).forEach((function(e){Array.isArray(n[e])&&(n[e]=n[e].map((function(e){return/rpx$/.test(e)?(0,i.rpx2px)(parseFloat(e)):e})))})),Object.keys(n).forEach((function(e){c[e]&&(c=c[e].apply(c,a(n[e])))}))}})),{export:function(){return c.step().export()}}};var r=n(25),i=n(61),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}},function(e,t,n){"use strict";t.__esModule=!0,t.devicePixelRatio=t.screenHeight=t.screenWidth=t.platform=t.appVersion=t.appName=void 0;var r=i(n(165));i(n(166)),i(n(167)),i(n(168)),i(n(169));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r]();if(i)return i}}((function(){return r.default}),(function(){return null}),(function(){return null}),(function(){return null}),(function(){return null}),(function(){return{}})),a=o.appName;t.appName=a;var s=o.appVersion;t.appVersion=s;var l=o.platform;t.platform=l;var c=o.screenWidth;t.screenWidth=c;var u=o.screenHeight;t.screenHeight=u;var d=o.devicePixelRatio;t.devicePixelRatio=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i={};[{key:"appName",getFn:function(){return navigator.appName}},{key:"platform",getFn:function(){return r||(r=function(){var e=navigator.platform;if(e)return/(iphone|ipod|ipad)/.test(navigator.userAgent.toLowerCase())?"iOS":/android/.test(navigator.userAgent.toLowerCase())?"Android":e}()),r}},{key:"screenWidth",getFn:function(){return window.screen.width}},{key:"screenHeight",getFn:function(){return window.screen.height}},{key:"appVersion",getFn:function(){return navigator.appVersion}},{key:"devicePixelRatio",getFn:function(){return window.devicePixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(i,t,{get:n})}));var o=i;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={};[{key:"appName",getFn:function(){return navigator.appName}},{key:"platform",getFn:function(){return navigator.platform}},{key:"screenWidth",getFn:function(){return window.screen.width/window.devicePixelRatio}},{key:"screenHeight",getFn:function(){return window.screen.height/window.devicePixelRatio}},{key:"appVersion",getFn:function(){return navigator.appVersion}},{key:"devicePixelRatio",getFn:function(){return window.devicePixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(r,t,{get:n})}));var i=r;t.default=i},function(e,t,n){"use strict";var r;function i(){return r||(r=my.getSystemInfoSync())}t.__esModule=!0,t.default=void 0;var o={};[{key:"appName",getFn:function(){return i().app}},{key:"platform",getFn:function(){return i().platform}},{key:"screenWidth",getFn:function(){return i().screenWidth}},{key:"screenHeight",getFn:function(){return i().screenHeight}},{key:"appVersion",getFn:function(){return i().version}},{key:"devicePixelRatio",getFn:function(){return i().pixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(o,t,{get:n})}));var a=o;t.default=a},function(e,t,n){"use strict";var r;function i(){return r||(r=wx.getSystemInfoSync())}t.__esModule=!0,t.default=void 0;var o={};[{key:"appName",getFn:function(){return"wechat"}},{key:"platform",getFn:function(){return i().platform}},{key:"screenWidth",getFn:function(){return i().screenWidth}},{key:"screenHeight",getFn:function(){return i().screenHeight}},{key:"appVersion",getFn:function(){return i().version}},{key:"devicePixelRatio",getFn:function(){return i().pixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(o,t,{get:n})}));var a=o;t.default=a},function(e,t,n){"use strict";var r;function i(){return r||(r=tt.getSystemInfoSync())}t.__esModule=!0,t.default=void 0;var o={};[{key:"appName",getFn:function(){return"bytedance"}},{key:"platform",getFn:function(){return i().platform}},{key:"screenWidth",getFn:function(){return i().screenWidth}},{key:"screenHeight",getFn:function(){return i().screenHeight}},{key:"appVersion",getFn:function(){return i().version}},{key:"devicePixelRatio",getFn:function(){return i().pixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(o,t,{get:n})}));var a=o;t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,s){var l;l=o((0,r.processParams)(n,s),2),n=l[0],s=l[1];var c=tt.createAnimation(Object.assign({},n,{timeFunction:n.timingFunction||"ease"}));return Object.keys(t).map((function(e){if(c[e]&&(c=c[e](t[e])),"transform"===e){var n=function(e){var t={};if(!e||e.length<1)return t;var n=e.match(/\w+\(.+?\)/g);n&&n.forEach((function(e){var n=e.match(/(\w+)\((.+?)\)/);n&&3===n.length&&(t[n[1]]=n[2].replace("deg","").split(","))}));return t}(t[e]);Object.keys(n).forEach((function(e){Array.isArray(n[e])&&(n[e]=n[e].map((function(e){return/rpx$/.test(e)?(0,i.rpx2px)(parseFloat(e)):e})))})),Object.keys(n).forEach((function(e){c[e]&&(c=c[e].apply(c,a(n[e])))}))}})),{export:function(){return c.step().export()}}};var r=n(25),i=n(61),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=n(0),i=s(n(8)),o=s(n(9)),a=s(n(60));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.UNMOUNTED="unmounted";var c="exited";t.EXITED=c;var u="entering";t.ENTERING=u;var d="entered";t.ENTERED=d;t.EXITING="exiting";var f=function(e,t,n,r){return e?t?c:d:n||r?"unmounted":c},h=function(e){var t,n;function s(t){var n=e.call(this,t)||this;n.nextCallback=null,n.timer=null,n.handleTansitionEnd=function(){var e=n.props.unmountOnExit;switch(n.state.status){case u:n.updateStatus(d);break;case"exiting":n.updateStatus(e?"unmounted":c)}},n.updateStatus=function(e,t){void 0===t&&(t=!1);var r=n.props,i=r.onEnter,o=r.onEntered,a=r.onExit,s=r.onExited,l=r.onEntering,f=r.onExiting;if(e!==n.state.status){switch(n.cancelNextCallback(),e){case u:i();break;case"exiting":a()}n.safeSetState({status:e,mounting:t},(function(){switch(e){case u:l();break;case"exiting":f();break;case d:o();break;case c:case"unmounted":t||s()}}))}};var r=t.in,i=void 0!==r&&r,o=t.appear,a=void 0!==o&&o,s=t.mountOnEnter,l=void 0!==s&&s,h=t.unmountOnExit,p=void 0!==h&&h;return n.state={mounting:!1,status:f(i,a,p,l)},n}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var h=s.prototype;return h.componentDidMount=function(){var e=this,t=this.props,n=t.appear,r=t.in;n&&r&&(this.timer=setTimeout((function(){e.updateStatus(u)}),20))},h.componentWillReceiveProps=function(e){var t=this.state.status,n=this.props.in;e.in!==n&&(e.in?"unmounted"===t?this.updateStatus(c,!0):this.updateStatus(u):this.updateStatus("exiting"))},h.componentDidUpdate=function(){var e=this;this.state.mounting?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.updateStatus(u)}),50)):null!==this.nextCallback&&this.nextCallback()},h.componentWillUnmount=function(){this.cancelNextCallback(),this.timer&&clearTimeout(this.timer)},h.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},h.safeSetState=function(e,t){this.setNextCallback(t),this.setState(e)},h.setNextCallback=function(e){var t=this,n=!0;this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1}},h.render=function(){var e=this.props,t=e.styles,n=e.transition,s=e.children,f=e.style,h=void 0===f?{}:f,p=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["styles","transition","children","style"]),m=this.state.status;if(["in","appear","mountOnEnter","unmountOnExit","onEnter","onExit","onEntering","onExiting","onEntered","onExited"].forEach((function(e){delete p[e]})),"unmounted"===m)return null;var v=-1!==[c,u].indexOf(m)?n.enter:n.exit,g=-1!==[d,u].indexOf(m)?t.enter:t.exit,_=s&&!Array.isArray(s)?i.default.only(s):null;return _&&_.type===a.default?(0,o.default)(_,{style:l({},_.props.style||{},{},h,{},g),properties:v.properties,delay:v.delay,duration:v.duration,timingFunction:v.timingFunction,onTransitionEnd:this.handleTansitionEnd}):(0,r.createElement)(a.default,l({},p,{style:l({},h,{},g),properties:v.properties,delay:v.delay,duration:v.duration,timingFunction:v.timingFunction,onTransitionEnd:this.handleTansitionEnd}),s)},s}(r.Component);h.View=a.default,h.defaultProps={in:!1,appear:!1,mountOnEnter:!1,unmountOnExit:!1,onEnter:function(){},onExit:function(){},onEntering:function(){},onExiting:function(){},onEntered:function(){},onExited:function(){}};var p=h;t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=s(n(15)),o=n(4),a=s(n(62));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={enter:{properties:["opacity"],duration:250},exit:{properties:["opacity"],duration:200}},u=(0,r.forwardRef)((function(e,t){var n=e.visible,s=e.view,u=e.style,d=void 0===u?{}:u,f=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["visible","view","style"]),h=(0,o.useStyles)(a.default,f,(function(e){return{backdrop:e("backdrop")}}));return(0,r.useEffect)((function(){if(n){var e=document.body.style.overflow||"auto";return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}})),(0,r.createElement)(i.default,l({},f,{in:n,appear:!s,transition:c,styles:{enter:{opacity:1},exit:{opacity:0}},style:l({},h.backdrop,{},d),ref:t}))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(13)),o=a(n(174));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.portal,n=e.children,a=(0,i.default)(function(e){return"function"==typeof e?e():!0===e?document.body:e}(t)),s=(0,r.useRef)(document.createElement("div"));return(0,r.useEffect)((function(){return a.appendChild(s.current),function(){s.current.parentNode.removeChild(s.current)}}),[]),(0,o.default)(n,s.current)};t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return(0,i.createElement)(a,{element:e,container:t})};var r,i=n(0),o=(r=n(14))&&r.__esModule?r:{default:r};var a=function(e){var t,n;function r(t,n){return e.call(this,t,n)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.componentDidMount=function(){this.renderPortal()},a.componentDidUpdate=function(e){e.container!==this.props.container&&(0,o.default)(e.container),this.renderPortal()},a.componentWillUnmount=function(){(0,o.default)(this.props.container)},a.renderPortal=function(){(0,i.render)(this.props.element,this.props.container,{parent:this})},a.render=function(){return null},r}(i.Component)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core;return{drawer:{position:"absolute",boxSizing:"border-box",backgroundColor:t["color-white"],overflow:"hidden"},"drawer--modal":{zIndex:1200},"drawer--transparent":{backgroundColor:"rgba(0, 0, 0, 0)"},"drawer--left":{top:0,bottom:0,left:0,borderTopRightRadius:t["corner-zero"],borderBottomRightRadius:t["corner-zero"]},"drawer--right":{top:0,bottom:0,right:0,borderTopLeftRadius:t["corner-zero"],borderBottomLeftRadius:t["corner-zero"]},"drawer--top":{top:0,left:0,right:0,borderBottomLeftRadius:t["corner-zero"],borderBottomRightRadius:t["corner-zero"]},"drawer--bottom":{bottom:0,left:0,right:0,borderTopLeftRadius:t["corner-zero"],borderTopRightRadius:t["corner-zero"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=s(n(29)),a=s(n(177));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=o.default;function u(e){if(String.fromCodePoint)return String.fromCodePoint(e);var t,n,r=String.fromCharCode,i=Math.floor,o=[],a=-1,s=arguments.length;if(!s)return"";for(var l="";++a<s;){var c=Number(arguments[a]);if(!isFinite(c)||c<0||c>1114111||i(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?o.push(c):(t=55296+((c-=65536)>>10),n=c%1024+56320,o.push(t,n)),(a+1===s||o.length>16384)&&(l+=r.apply(void 0,o),o.length=0)}return l}var d=function(e){var t=e.uri,n=e.name,o=e.size,s=void 0===o?"medium":o,d=e.style,f=void 0===d?{}:d,h=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["uri","name","size","style"]),p=(0,i.useTheme)().Core,m=void 0===p?{}:p,v=m["icon-font-path"],g=m["icon-font-family"];v.indexOf(".ttf")<=-1&&(v+=".ttf");var _={xs:m["icon-xs"],small:m["icon-s"],medium:m["icon-m"],large:m["icon-l"]},y="string"==typeof _[s]?_[s]:_[s]+"rpx",b=l({fontSize:y,fontWeight:400,lineHeight:y},f,{fontFamily:g,textAlign:"center"});if(t&&!n)return(0,r.createElement)(c,{source:{uri:t},style:l({width:y,height:y},b)});var x,w,T=m["icon-content-"+n];return T?(0,r.createElement)(a.default,l({},h,{style:b,fontFamily:g,source:{uri:v,codePoint:(x=T,w=x.raw||x,0===w.indexOf("\\")&&(w=w.substring(1)),w=0===w.indexOf("&#x")?u(parseInt(w.replace("&#x","0x").replace(";",""),16)):0===w.indexOf("\\u")?x:u(parseInt("0x"+w.replace(/(e[\w\d]{3})/,"$1").replace(/\\/,"").replace(";",""),16)))}})):null};t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.createIconSet=function(e,t,n){void 0===e&&(e={});var i=(0,r.forwardRef)((function(i,o){var a=i.name,c=i.className,d=i.codePoint,f=i.style,h=void 0===f?{}:f,p=l(i,["name","className","codePoint","style"]);return(0,r.createElement)(u,s({},p,{ref:o,className:c,style:h,source:{uri:n,codePoint:d||e[a]},fontFamily:t}))}));return i.displayName="IconFont",i},t.default=void 0;var r=n(0),i=a(n(2)),o=a(n(30));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},c=new Map,u=(0,r.forwardRef)((function(e,t){var n=e.source,a=(n=void 0===n?{}:n).uri,u=n.codePoint,d=e.fontFamily,f=e.style,h=void 0===f?{}:f,p=l(e,["source","fontFamily","style"]);if(a&&!u&&!d)return(0,r.createElement)(o.default,s({},p,{source:{uri:a},style:h}));if(!d)return(0,r.createElement)(i.default,s({},p,{ref:t,style:h}),u);var m=c.get(d);if(m){if(m!==a)return console.error("font-family "+d+" should be unique!"),null}else{c.set(d,a);var v="url('"+a+"')";if(window.FontFace){var g=new window.FontFace(d,v);document.fonts.add(g)}else{var _=document.createElement("style");_.type="text/css",_.appendChild(document.createTextNode("@font-face {\n                src: "+v+";\n                font-family: "+d+";\n              }")),document.head.appendChild(_)}}return(0,r.createElement)(i.default,s({},p,{ref:t,style:Object.assign(Object.assign({},h),{fontFamily:d})}),u)}));u.displayName="Icon";var d=u;t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(8)),o=a(n(32));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children"]);return(0,r.createElement)(o.default.Provider,{value:n},i.default.only(t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=t.name,a=t.defaultLocale;return(0,r.forwardRef)((function(t,s){var l=(0,i.useLocale)(n,t,a);return(0,r.createElement)(e,o({},t,{locale:l,ref:s}))}))};var r=n(0),i=n(63);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core;return{"action-sheet":{paddingBottom:t["s-4"],paddingLeft:t["s-2"],paddingRight:t["s-2"],backgroundColor:t["color-transparent"]},"action-sheet__fullwidth":{paddingLeft:0,paddingRight:0},"action-sheet__fullwidth_drawer":{borderTopLeftRadius:0,borderTopRightRadius:0},"action-sheet__body":{display:"flex",flexDirection:"column",borderRadius:t["corner-3"],overflow:"hidden",backgroundColor:t["color-fill1-2"]},"action-sheet__body__fullwidth":{borderRadius:t["corner-zero"]},"action-sheet__footer":{marginTop:t["s-2"],borderRadius:t["corner-3"],overflow:"hidden",backgroundColor:t["color-fill1-2"]},"action-sheet__footer__fullwidth":{borderRadius:t["corner-zero"]},"action-sheet__title":{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxSizing:"border-box",paddingTop:t["s-4"],paddingBottom:t["s-4"],paddingLeft:t["s-3"],paddingRight:t["s-3"],borderBottomWidth:t["line-1"],borderBottomColor:t["color-line1-1"],borderBottomStyle:t["line-solid"]},"action-sheet__title__text":{lineHeight:t["s-5"],fontSize:t["font-size-subhead"],color:t["color-text1-2"],wordBreak:"break-all",textAlign:"center"},"action-sheet__button":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:t["s-14"],borderTopWidth:t["line-1"],borderTopColor:t["color-line1-1"],borderTopStyle:t["line-solid"],boxSizing:"border-box",paddingLeft:t["s-3"],paddingRight:t["s-3"],userSelect:"none"},"action-sheet__button--active":{backgroundColor:"rgba(0, 0, 0, 0.1)"},"action-sheet__button--first":{borderTopWidth:0},"action-sheet__button__text":{lineHeight:t["s-6"],fontSize:t["s-5"],color:t["color-brand1-6"]},"action-sheet__gallery":{paddingLeft:t["s-4"],paddingRight:t["s-4"],paddingTop:t["s-5"],paddingBottom:t["s-5"],borderBottomWidth:t["line-1"],borderBottomColor:t["color-line1-1"],borderBottomStyle:t["line-solid"]},"action-sheet__gallery__container":{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",flexWrap:"nowrap"},"action-sheet__gallery__item":{width:t["s-15"],minWidth:t["s-15"],flexDirection:"column",alignItems:"center",justifyContent:"flex-start",marginRight:t["s-4"]},"action-sheet__gallery__item-cell":{display:"flex",alignItems:"center",justifyContent:"center",width:t["s-15"],height:t["s-15"],borderRadius:t["corner-3"],backgroundColor:t["color-white"]},"action-sheet__gallery__item-icon":{fontSize:t["icon-xl"],color:t["color-text1-3"]},"action-sheet__gallery__item-text":{fontSize:t["font-size-caption"],color:t["color-text1-3"],marginTop:t["s-1"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=(r=n(51))&&r.__esModule?r:{default:r};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){var t=e.title,n=e.fullWidth,r=e.content,s=e.cancelButton,l=void 0===s?"cancel":s,c=e.buttons,u=void 0===c?[]:c,d=e.items,f=void 0===d?[]:d,h=e.onUnmount,p=void 0===h?function(){}:h,m=e.callback,v=void 0===m?function(){}:m,g=e.maskCancelable,_=void 0===g||g,y=e.current,b=(0,i.useState)(!0),x=b[0],w=b[1],T=(u||[]).filter((function(e){return!!e})).map((function(e,t){return"string"==typeof e&&(e={text:e}),e.index=t,e})),A="string"==typeof l?{text:l,style:{},textStyle:{}}:l,E=function(e){w(!1),v&&v(e)};function O(){E(a({},A,{cancel:!0,index:T.length}))}var M=function(e){e?E(e):O()};return(0,i.useEffect)((function(){y&&!y.destroyed&&(y.hide=M)})),(0,i.createElement)(o.default,{visible:x,title:t,fullWidth:n,buttons:T,portal:!1,cancelButton:A,items:f,renderContent:r?function(){return r(M)}:null,onUnmount:p,onHide:function(e){switch(e){case"cancelClick":return O();case"backdropClick":return void(_&&E(a({},A,{mask:!0,cancel:!0,index:T.length})))}w(!1)},onClick:function(e,t){f.length>0?E(f[e][t]):E(T[e])}})},l={current:{},show:function(e,t){var n=this.current={},r=document.createElement("div");return document.body.appendChild(r),(0,i.render)((0,i.createElement)(s,a({callback:t},e,{current:n,onUnmount:function(){return document.body.removeChild(r)}})),r,{driver:i.shared.Host.driver}),function(e){n&&n.hide&&(n.hide(e),n.destroyed=!0,delete n.hide)}},hide:function(e){this.current&&this.current.hide&&(this.current.hide(e),this.current={})}};t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(1)),a=l(n(2)),s=l(n(183));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n=e.max,l=e.count,u=e.type,d=e.children,f=e.renderBadge,h=e.style,p=void 0===h?{}:h,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["max","count","type","children","renderBadge","style"]),v="unread"===u,g="dot"===u,_=!!d,y=!!f,b=l;b=Number(l),b=isNaN(b)?l:b>n?n+"+":b;var x=(0,i.useStyles)(s.default,m,(function(e){return{badge:e(["badge",{"badge--auto":_,"badge--dot":g,"badge--unread":v}]),content:y?c({display:"flex",alignItems:"center",justifyContent:"center"},e({"badge--auto__content":_})):e(["badge__content",{"badge--auto__content":_,"badge--dot__content":g,"badge--unread__content":v}]),text:e("badge__text")}})),w=0!==b||"normal"!==u||y?(0,r.createElement)(o.default,{style:x.content},y?f(b):g||v?null:(0,r.createElement)(a.default,{style:x.text},b)):null;return(0,r.createElement)(o.default,c({},m,{ref:t,style:c({},x.badge,{},p)}),d,w)};u.defaultProps={max:99,count:"",type:"normal",renderBadge:null};var d=(0,r.forwardRef)(u);t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{badge:{display:"inline-flex",flexDirection:"row",alignItems:"center",position:"relative"},badge__content:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:n["s-4"],paddingLeft:n["s-1"],paddingRight:n["s-1"],height:n["s-4"],borderRadius:n["s-4"],backgroundColor:n["color-error-2"]},badge__text:{color:n["color-white"],fontSize:n["font-size-caption"],lineHeight:n["s-4"]},"badge--auto":{marginRight:n["s-4"]},"badge--auto__content":{position:"absolute",right:0,top:0,transform:"translate(50%, -50%)"},"badge--dot":{},"badge--dot__content":{borderRadius:"100%",minWidth:n["s-2"],height:n["s-2"]},"badge--unread":{},"badge--unread__content":{backgroundColor:n["color-link-1"],borderRadius:"100%",minWidth:n["s-2"],height:n["s-2"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{button:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:t["s-8"],paddingLeft:t["s-4"],paddingRight:t["s-4"],paddingTop:0,paddingBottom:0,borderWidth:t["line-1"],borderColor:t["color-line1-3"],borderStyle:"solid",borderRadius:t["corner-1"],backgroundColor:t["color-white"],color:t["color-text1-4"],boxShadow:t["shadow-zero"],transition:"all 250ms"},button__text:{fontSize:t["font-size-body-1"],fontWeight:t["font-weight-4"],color:t["color-text1-4"]},button__icon:{fontSize:t["icon-s"],color:t["color-text1-4"],marginLeft:t["s-2"],marginRight:t["s-2"]},"button__icon--first":{marginLeft:0},"button__icon--last":{marginRight:0},"button--small":{height:t["s-6"],paddingLeft:t["s-3"],paddingRight:t["s-3"]},"button--small__text":{fontSize:t["font-size-body-1"],fontWeight:t["font-weight-4"]},"button--small__icon":{fontSize:t["icon-xs"],marginLeft:t["s-2"],marginRight:t["s-2"]},"button--large":{height:t["s-11"],paddingLeft:t["s-4"],paddingRight:t["s-4"]},"button--large__text":{fontSize:t["font-size-subhead"],fontWeight:t["font-weight-4"]},"button--large__icon":{fontSize:t["icon-m"],marginLeft:t["s-2"],marginRight:t["s-2"]},"button--primary":{borderWidth:t["line-zero"]||0,backgroundColor:t["color-brand1-6"],borderColor:t["color-brand1-6"],boxShadow:t["shadow-zero"]},"button--primary__text":{color:t["color-white"]},"button--primary__icon":{color:t["color-white"]},"button--secondary":{borderWidth:t["line-1"],backgroundColor:t["color-white"],borderColor:t["color-brand1-6"],boxShadow:t["shadow-zero"]},"button--secondary__text":{color:t["color-brand1-6"]},"button--secondary__icon":{color:t["color-brand1-6"]},"button--light":{borderWidth:t["line-1"],borderColor:t["color-text1-3"],backgroundColor:"rgba(255, 255, 255, 0.1)",boxShadow:t["shadow-zero"]},"button--light__text":{color:t["color-text1-4"]},"button--light__icon":{color:t["color-text1-4"]},"button--dark":{borderWidth:t["line-1"],borderColor:t["color-white"],backgroundColor:t["color-transparent"],boxShadow:t["shadow-zero"]},"button--dark__text":{color:t["color-white"]},"button--dark__icon":{color:t["color-white"]},"button--warning":{borderWidth:t["line-1"],borderColor:t["color-error-2"],backgroundColor:t["color-white"],boxShadow:t["shadow-zero"]},"button--warning__text":{color:t["color-error-2"]},"button--warning__icon":{color:t["color-error-2"]},"button--block":{display:"flex",width:"100%"},"button--press":{borderColor:t["color-line1-3"],backgroundColor:t["color-fill1-2"],boxShadow:t["shadow-zero"]},"button--press__text":{color:t["color-text1-4"]},"button--press__icon":{color:t["color-text1-4"]},"button--primary--press":{borderColor:t["color-brand1-9"],backgroundColor:t["color-brand1-9"],boxShadow:t["shadow-zero"]},"button--primary--press__text":{color:t["color-white"]},"button--primary--press__icon":{color:t["color-white"]},"button--secondary--press":{borderColor:t["color-brand1-9"],backgroundColor:t["color-brand1-1"],boxShadow:t["shadow-zero"]},"button--secondary--press__text":{color:t["color-brand1-6"]},"button--secondary--press__icon":{color:t["color-brand1-6"]},"button--light--press":{borderColor:t["color-text1-3"],backgroundColor:"rgba(0, 0, 0, 0.2)",boxShadow:t["shadow-zero"]},"button--light--press__text":{color:t["color-text1-4"]},"button--light--press__icon":{color:t["color-text1-4"]},"button--dark--press":{borderColor:t["color-white"],backgroundColor:"rgba(255, 255, 255, 0.2)",boxShadow:t["shadow-zero"]},"button--dark--press__text":{color:t["color-white"]},"button--dark--press__icon":{color:t["color-white"]},"button--warning--press":{borderColor:t["color-error-2"],backgroundColor:"rgba(231, 43, 0, 0.1)",boxShadow:t["shadow-zero"]},"button--warning--press__text":{color:t["color-error-2"]},"button--warning--press__icon":{color:t["color-error-2"]},"button--disabled":{borderColor:t["color-line1-3"],backgroundColor:t["color-fill1-2"],boxShadow:t["shadow-zero"]},"button--disabled__text":{color:t["color-text1-1"]},"button--disabled__icon":{color:t["color-text1-1"]},"button--primary--disabled":{borderColor:t["color-brand1-1"],backgroundColor:t["color-brand1-1"],boxShadow:t["shadow-zero"]},"button--primary--disabled__text":{color:t["color-text1-1"]},"button--primary--disabled__icon":{color:t["color-text1-1"]},"button--secondary--disabled":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-2"],boxShadow:t["shadow-zero"]},"button--secondary--disabled__text":{color:t["color-text1-1"]},"button--secondary--disabled__icon":{color:t["color-text1-1"]},"button--light--disabled":{borderColor:t["color-text1-1"],backgroundColor:"rgba(0, 0, 0, 0.1)",boxShadow:t["shadow-zero"]},"button--light--disabled__text":{color:t["color-text1-1"]},"button--light--disabled__icon":{color:t["color-text1-1"]},"button--dark--disabled":{borderColor:t["color-text1-2"],backgroundColor:"rgba(255, 255, 255, 0.2)",boxShadow:t["shadow-zero"]},"button--dark--disabled__text":{color:t["color-text1-2"]},"button--dark--disabled__icon":{color:t["color-text1-2"]},"button--warning--disabled":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-2"],boxShadow:t["shadow-zero"]},"button--warning--disabled__text":{color:t["color-text1-1"]},"button--warning--disabled__icon":{color:t["color-text1-1"]},"button--text":{backgroundColor:"transparent",borderColor:"transparent",boxShadow:"none",borderRadius:0,borderWidth:0},"button--text__icon":{color:t["color-text1-3"],marginLeft:t["s-3"],marginRight:t["s-3"]},"button--text__text":{color:t["color-text1-3"],fontSize:t["font-size-body-2"],fontWeight:t["font-weight-4"]},"button--text--small__text":{fontSize:t["font-size-body-1"],fontWeight:t["font-weight-4"]},"button--text--small__icon":{fontSize:t["icon-s"],marginLeft:t["s-3"],marginRight:t["s-3"]},"button--text--primary__text":{color:t["color-brand1-6"]},"button--text--primary__icon":{color:t["color-brand1-6"]},"button--text--press__text":{color:t["color-text1-4"]},"button--text--press__icon":{color:t["color-text1-4"]},"button--text--disabled__text":{color:t["color-text1-1"]},"button--text--disabled__icon":{color:t["color-text1-1"]},"button--text--primary--press__text":{color:t["color-brand1-9"]},"button--text--primary--press__icon":{color:t["color-brand1-9"]},"button--text--primary--disabled__text":{color:t["color-text1-1"]},"button--text--primary--disabled__icon":{color:t["color-text1-1"]},"button--cell":{height:t["s-11"],backgroundColor:t["color-white"],borderWidth:t["line-1"],borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:0,borderRadius:0,boxShadow:"none"},"button--cell__text":{fontSize:t["font-size-subhead"],fontWeight:t["font-weight-4"],color:t["color-text1-4"]},"button--cell__icon":{fontSize:t["icon-s"],color:t["color-text1-4"]},"button--cell--press":{backgroundColor:t["color-fill1-2"],borderColor:t["color-line1-3"]},"button--cell--press__text":{color:t["color-text1-4"]},"button--cell--press__icon":{color:t["color-text1-4"]},"button--cell--disabled":{backgroundColor:t["color-fill1-1"],borderColor:t["color-line1-1"]},"button--cell--disabled__text":{color:t["color-text1-1"]},"button--cell--disabled__icon":{color:t["color-text1-1"]},"button--cell--primary":{backgroundColor:t["color-brand1-6"],borderColor:t["color-brand1-6"]},"button--cell--primary__text":{color:t["color-white"]},"button--cell--primary__icon":{color:t["color-white"]},"button--cell--primary--press":{backgroundColor:t["color-brand1-9"],borderColor:t["color-brand1-9"]},"button--cell--primary--press__text":{color:t["color-white"]},"button--cell--primary--press__icon":{color:t["color-white"]},"button--cell--primary--disabled":{backgroundColor:t["color-brand1-1"],borderColor:t["color-brand1-1"]},"button--cell--primary--disabled__text":{color:t["color-text1-1"]},"button--cell--primary--disabled__icon":{color:t["color-text1-1"]},"button--cell--secondary":{backgroundColor:t["color-white"],borderColor:t["color-brand1-6"]},"button--cell--secondary__text":{color:t["color-brand1-9"]},"button--cell--secondary__icon":{color:t["color-brand1-9"]},"button--cell--secondary--press":{backgroundColor:t["color-brand1-1"],borderColor:t["color-brand1-6"]},"button--cell--secondary--press__text":{color:t["color-brand1-9"]},"button--cell--secondary--press__icon":{color:t["color-brand1-9"]},"button--cell--secondary--disabled":{backgroundColor:t["color-fill1-1"],borderColor:t["color-line1-1"]},"button--cell--secondary--disabled__text":{color:t["color-text1-1"]},"button--cell--secondary--disabled__icon":{color:t["color-text1-1"]}}}},function(e,t,n){"use strict";t.__esModule=!0,t.createChainedFunction=h,t.default=void 0;var r=n(0),i=d(n(9)),o=d(n(10)),a=d(n(8)),s=n(4),l=d(n(1)),c=d(n(186)),u=d(n(64));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var p=(0,r.forwardRef)((function(e,t){var n,d=e.size,p=void 0===d?"medium":d,m=e.cell,v=e.buttons,g=void 0===v?[]:v,_=e.onButtonClick,y=void 0===_?function(){}:_,b=e.children,x=e.style,w=e.styles,T=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["size","cell","buttons","onButtonClick","children","style","styles"]),A=g&&g.length>0,E=A?g.length:a.default.count(b),O=(0,s.useStyles)(c.default,{styles:w},(function(e){return{group:f({},e("button-group"),{},x),button:e(["button-group__button"]),lastButton:e(["button-group__button--last"]),firstButton:e(["button-group__button--first"]),middleButton:e(["button-group__button--middle"])}})),M=function(e,t){A&&g[e]&&g[e].onClick&&g[e].onClick(t),y(e,t)};return n=A?g.map((function(e,t){return void 0===e&&(e={}),(0,r.createElement)(u.default,{key:"button_group_"+t,type:e.type,styles:w,style:f({},O.button,{},E>1?0===t?O.firstButton:t===E-1?O.lastButton:O.middleButton:{},{},e.style||{}),prefixIcon:e.prefixIcon,suffixIcon:e.suffixIcon,cell:m,size:p,onClick:function(e){return M(t,e)}},e.text)})):a.default.map(b,(function(e,t){return(0,o.default)(e)&&"Button"===e.type.displayName?(0,i.default)(e,{key:"button_group_"+t,style:f({},O.button,{},E>1?0===t?O.firstButton:t===E-1?O.lastButton:O.middleButton:{},{},e.props.style||{}),size:p,cell:m||e.props.cell,onClick:h((function(e){return M(t,e)}),e.props.onClick)}):e})),(0,r.createElement)(l.default,f({},T,{ref:t,style:O.group}),n)}));p.displayName="ButtonGroup";var m=p;t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(){return{"button-group":{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},"button-group__button":{flex:1},"button-group__button--first":{borderBottomRightRadius:0,borderTopRightRadius:0},"button-group__button--last":{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:0},"button-group__button--middle":{borderRadius:0,borderLeft:0}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=null;(i=n(188)).default&&(i=i.default),i.Item=r.Fragment;var o=i;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=h(n(9)),o=h(n(13)),a=h(n(8)),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(65)),l=h(n(1)),c=h(n(191)),u=h(n(24)),d=h(n(196));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},m=d.default;function v(e){var t=m.__cache||(m.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=m[r[0].trim()]:r.forEach((function(e){i=Object.assign(i,m[e.trim()])})),t[n]=i),i}var g=function(e){var t,n;function s(t){var n=e.call(this,t)||this;return n.onSwipeBegin=function(){n.isSwiping=!0,clearInterval(n.autoPlayTimer)},n.onSwipe=function(e){e.direction;var t=e.distance;e.velocity;if(!n.isLoopEnd()){var r=t/document.documentElement.clientWidth*750-n.offsetX,i=(0,o.default)(n.swipeView.current),a="translate3d("+r+"rpx, 0rpx, 0rpx)";i.style.transform=a,i.style.webkitTransform=a}},n.onSwipeEnd=function(e){var t=e.direction;e.distance,e.velocity;n.isSwiping=!1;var r=n.total,i=n.loopedIndex();n.isLoopEnd()&&(i===r-1&&"SWIPE_LEFT"===t||0===i&&"SWIPE_RIGHT"===t)||n.slideTo(n.index,t),n.props.autoPlay&&n.autoPlay()},n.getPages=function(){var e=n.props.children;return a.default.map(e,(function(e,t){var i=(0,r.createRef)(),o={width:n.width+"rpx",height:n.height+"rpx",left:t*n.width+"rpx"};return n.childRefs[t]=i,(0,r.createElement)(l.default,{ref:i,className:(0,u.default)("rax-slider-children","childWrap"+t),style:Object.assign({},v((0,u.default)("rax-slider-children","childWrap"+t)),o),key:t},e)}))},n.index=t.index,n.height=parseFloat(t.height),n.width=parseFloat(t.width),n.loopIdx=t.index,n.offsetX=n.index*n.width,n.isSwiping=!1,n.swipeView=(0,r.createRef)(),n.childRefs=[],n.total=0,n.autoPlayTimer=null,n.isAutoPlay=!1,n}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=s.prototype;return d.componentDidMount=function(){this.props.autoPlay&&this.total>1&&(this.isAutoPlay=!0,this.autoPlay())},d.componentDidUpdate=function(){!this.isAutoPlay&&this.props.autoPlay&&this.total>1&&(this.isAutoPlay=!0,this.autoPlay())},d.componentWillUnmount=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},d.autoPlay=function(){var e=this,t=this.props.autoPlayInterval;this.isSwiping||(this.autoPlayTimer&&clearInterval(this.autoPlayTimer),this.autoPlayTimer=setInterval((function(){e.isLoopEnd()||e.slideTo(e.index,"SWIPE_LEFT")}),t))},d.slideTo=function(e,t){if(!this.isSwiping){this.index=t?"SWIPE_LEFT"===t?e+1:e-1:e,this.offsetX=this.index*this.width;var n=this.loopedIndex(),r=(0,o.default)(this.swipeView.current),i="translate3d("+-1*this.offsetX+"rpx, 0rpx, 0rpx)";r.style.transform=i,r.style.webkitTransform=i,this.loopIdx=this.index<0&&0!==n?this.total-n:n,this.childRefs[this.loopIdx].current.style.left=this.offsetX/750*document.documentElement.clientWidth+"px",this.props.onChange&&this.props.onChange({index:this.loopIdx}),this.forceUpdate()}},d.isLoopEnd=function(){var e=this.loopedIndex(),t=this.total;return!(this.props.loop||e!==t-1&&0!==e)},d.loopedIndex=function(e,t){return void 0===e&&(e=this.index),void 0===t&&(t=this.total),Math.abs(e)%t},d.renderPagination=function(){if(this.total<=1)return null;for(var e=this.props,t=e.paginationStyle,n=void 0===t?{}:t,o=e.activeDot,a=e.normalDot,s=[],c=n.itemSize,u=n.itemColor,d=n.itemSelectedColor,f=p(n,["itemSize","itemColor","itemSelectedColor"]),h={width:c,height:c},v=o||(0,r.createElement)(l.default,{className:"rax-slider-dot active",style:Object.assign({},m["rax-slider-dot"],m.active,Object.assign({backgroundColor:d},h))}),g=a||(0,r.createElement)(l.default,{className:"rax-slider-dot",style:Object.assign({},m["rax-slider-dot"],Object.assign({backgroundColor:u},h))}),_=this.loopIdx,y=0;y<this.total;y++)s.push(y===_?(0,i.default)(v,{key:y}):(0,i.default)(g,{key:y}));return(0,r.createElement)(l.default,{className:"rax-slider-pagination",style:Object.assign({},m["rax-slider-pagination"],f)},s)},d.renderSwipeView=function(e){var t=this.props,n=t.initialVelocityThreshold,i=t.verticalThreshold,o=t.vertical,a=t.horizontalThreshold,s={width:this.width+"rpx",height:this.height+"rpx"};return 0!==this.total?(0,r.createElement)(c.default,{className:"rax-slider-swipe-wrapper",style:Object.assign({},m["rax-slider-swipe-wrapper"],s),onSwipeBegin:this.onSwipeBegin,onSwipeEnd:this.onSwipeEnd,onSwipe:this.onSwipe,initialVelocityThreshold:n,verticalThreshold:i,vertical:o,horizontalThreshold:a},(0,r.createElement)(l.default,{ref:this.swipeView,className:"rax-slider-swipe",style:Object.assign({},m["rax-slider-swipe"],Object.assign(Object.assign({},s),{transform:"translate3d("+-1*this.offsetX+"rpx, 0rpx, 0rpx)"}))},e)):(0,r.createElement)(l.default,{ref:this.swipeView,className:"rax-slider-swipe",style:Object.assign({},m["rax-slider-swipe"],s)},e)},d.render=function(){var e=this.props,t=e.style,n=e.showsPagination,i=void 0===n||n,o=e.className,s=e.children;return this.total=a.default.toArray(s).length,(0,r.createElement)(l.default,{style:Object.assign({},v((0,u.default)("rax-slider",o)),t),className:(0,u.default)("rax-slider",o)},this.renderSwipeView(this.getPages()),i&&this.renderPagination())},s}(r.Component);g.defaultProps={horizontal:!0,showsPagination:!0,loop:!0,autoPlay:!1,autoPlayInterval:3e3,index:0,paginationStyle:{},initialVelocityThreshold:.7,verticalThreshold:10,horizontalThreshold:10,vertical:!1},g.propTypes={onChange:s.func,paginationStyle:s.object};var _=g;t.default=_},function(e,t,n){"use strict";var r=n(190);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=u(n(65)),o=l(n(1)),a=u(n(192)),s=l(n(195));function l(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},p="SWIPE_UP",m="SWIPE_DOWN",v="SWIPE_LEFT",g="SWIPE_RIGHT",_=function(e){var t,n;function i(t){var n=e.call(this,t)||this;return n.state={swipe:{direction:null,distance:0,velocity:0}},n.swipeDetected=!1,n.velocityProp=null,n.distanceProp=null,n.swipeDirection=null,n.panResponder=a.create({onStartShouldSetPanResponder:function(){return!0},onMoveShouldSetPanResponder:function(){return!0},onPanResponderMove:function(e,t){var r=t.dx,i=t.dy,o=t.vx,a=t.vy,l=n.props,c=l.onSwipeBegin,u=l.onSwipe,d=l.horizontal,f=l.vertical,h=l.initialVelocityThreshold,_=l.horizontalThreshold,y=l.verticalThreshold,b=l.left,x=l.right,w=l.up,T=l.down;if(n.props.continuous||!n.swipeDetected){var A=!1,E=!1,O=!1;if(n.swipeDetected||(A=!0,E=!!d&&(0,s.default)(o,i,h,y),O=!!f&&(0,s.default)(a,r,h,_),E?(e.preventDefault&&e.preventDefault(),n.velocityProp="vx",n.distanceProp="dx",(d||b)&&r<0?n.swipeDirection=v:(d||x)&&r>0&&(n.swipeDirection=g)):O&&(n.velocityProp="vy",n.distanceProp="dy",(f||w)&&i<0?n.swipeDirection=p:(f||T)&&i>0&&(n.swipeDirection=m)),n.swipeDirection&&(n.swipeDetected=!0)),n.swipeDetected){var M=t[n.distanceProp],S=t[n.velocityProp],C={direction:n.swipeDirection,distance:M,velocity:S};A?c&&c(C):u&&u(C),n.props.setGestureState&&n.setState({swipe:C})}}},onPanResponderTerminationRequest:function(){return!0},onPanResponderTerminate:n.handleTerminationAndRelease.bind(f(n)),onPanResponderRelease:n.handleTerminationAndRelease.bind(f(n))}),n}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=i.prototype;return l.handleTerminationAndRelease=function(){if(this.swipeDetected){var e=this.props.onSwipeEnd;e&&e({direction:this.swipeDirection,distance:this.state.swipe.distance,velocity:this.state.swipe.velocity})}this.swipeDetected=!1,this.velocityProp=null,this.distanceProp=null,this.swipeDirection=null},l.render=function(){var e=this.props,t=(e.onSwipeBegin,e.onSwipe,e.onSwipeEnd,h(e,["onSwipeBegin","onSwipe","onSwipeEnd"])),n=this.props.setGestureState?this.state:null;return(0,r.createElement)(o.default,d({},this.panResponder.panHandlers,{style:Object.assign(Object.assign({},{alignSelf:"flex-start"}),t.handlerStyle)}),(0,r.createElement)(o.default,d({},t,n),this.props.children))},i}(r.Component);_.propTypes={onSwipeBegin:i.func,onSwipe:i.func,onSwipeEnd:i.func,swipeDecoratorStyle:i.object},_.defaultProps={horizontal:!0,vertical:!0,left:!1,right:!1,up:!1,down:!1,continuous:!0,initialVelocityThreshold:.2,verticalThreshold:1,horizontalThreshold:5,setGestureState:!0,handlerStyle:{}};var y=_;t.default=y},function(e,t,n){"use strict";var r=o(n(193)),i=o(n(194));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.currentCentroidXOfTouchesChangedAfter,s=r.default.currentCentroidYOfTouchesChangedAfter,l=r.default.previousCentroidXOfTouchesChangedAfter,c=r.default.previousCentroidYOfTouchesChangedAfter,u=r.default.currentCentroidX,d=r.default.currentCentroidY,f={_initializeGestureState:function(e){e.moveX=0,e.moveY=0,e.x0=0,e.y0=0,e.dx=0,e.dy=0,e.vx=0,e.vy=0,e.numberActiveTouches=0,e._accountsForMovesUpTo=0},_updateGestureStateOnMove:function(e,t){e.numberActiveTouches=t.numberActiveTouches,e.moveX=a(t,e._accountsForMovesUpTo),e.moveY=s(t,e._accountsForMovesUpTo);var n=e._accountsForMovesUpTo,r=l(t,n),i=a(t,n),o=c(t,n),u=s(t,n),d=e.dx+(i-r),f=e.dy+(u-o),h=t.mostRecentTimeStamp-e._accountsForMovesUpTo;e.vx=(d-e.dx)/h,e.vy=(f-e.dy)/h,e.dx=d,e.dy=f,e._accountsForMovesUpTo=t.mostRecentTimeStamp},create:function(e){var t={stateID:Math.random()};f._initializeGestureState(t);var n=function(n){return void 0!==e.onStartShouldSetPanResponder&&e.onStartShouldSetPanResponder(n,t)},r=function(n){return void 0!==e.onMoveShouldSetPanResponder&&e.onMoveShouldSetPanResponder(n,t)},o=function(n){return t.x0=u(i.default.touchHistory),t.y0=d(i.default.touchHistory),t.dx=0,t.dy=0,e.onPanResponderGrant&&e.onPanResponderGrant(n,t),void 0===e.onShouldBlockNativeResponder||e.onShouldBlockNativeResponder()},a=function(n){e.onPanResponderReject&&e.onPanResponderReject(n,t)},s=function(n){e.onPanResponderRelease&&e.onPanResponderRelease(n,t),f._initializeGestureState(t)},l=!1,c={onTouchStart:function(r){l=!0,i.default.recordTouchTrack("start",r),o(r);var s=i.default.touchHistory;if(t.numberActiveTouches=s.numberActiveTouches,!n(r))return a(r);e.onPanResponderStart&&e.onPanResponderStart(r,t)},onTouchMove:function(n){if(l){i.default.recordTouchTrack("move",n);var o=i.default.touchHistory;t._accountsForMovesUpTo!==o.mostRecentTimeStamp&&(f._updateGestureStateOnMove(t,o),r(n)&&e.onPanResponderMove&&e.onPanResponderMove(n,t))}},onTouchEnd:function(n){l=!1,i.default.recordTouchTrack("end",n);var r=i.default.touchHistory;t.numberActiveTouches=r.numberActiveTouches,e.onPanResponderEnd&&e.onPanResponderEnd(n,t),s(n)}};return{panHandlers:c="ontouchstart"in window?{onTouchStart:c.onTouchStart,onTouchMove:c.onTouchMove,onTouchEnd:c.onTouchEnd}:{onMouseDown:c.onTouchStart,onMouseMove:c.onTouchMove,onMouseUp:c.onTouchEnd}}}};e.exports=f},function(e,t,n){"use strict";var r={centroidDimension:function(e,t,n,i){var o=e.touchBank,a=0,s=0,l=1===e.numberActiveTouches?e.touchBank[e.indexOfSingleActiveTouch]:null;if(null!==l)l.touchActive&&l.currentTimeStamp>t&&(a+=i&&n?l.currentPageX:i&&!n?l.currentPageY:!i&&n?l.previousPageX:l.previousPageY,s=1);else for(var c in o){var u=o[c];if(null!=u&&u.touchActive&&u.currentTimeStamp>=t)a+=i&&n?u.currentPageX:i&&!n?u.currentPageY:!i&&n?u.previousPageX:u.previousPageY,s++}return s>0?a/s:r.noCentroid},currentCentroidXOfTouchesChangedAfter:function(e,t){return r.centroidDimension(e,t,!0,!0)},currentCentroidYOfTouchesChangedAfter:function(e,t){return r.centroidDimension(e,t,!1,!0)},previousCentroidXOfTouchesChangedAfter:function(e,t){return r.centroidDimension(e,t,!0,!1)},previousCentroidYOfTouchesChangedAfter:function(e,t){return r.centroidDimension(e,t,!1,!1)},currentCentroidX:function(e){return r.centroidDimension(e,0,!0,!0)},currentCentroidY:function(e){return r.centroidDimension(e,0,!1,!0)},noCentroid:-1};e.exports=r},function(e,t,n){"use strict";var r={touchBank:{},numberActiveTouches:0,indexOfSingleActiveTouch:-1,mostRecentTimeStamp:0},i=function(e){var t=r.touchBank,n=t[e.identifier];n?function(e,t){e.touchActive=!0,e.startTimeStamp=t.timestamp,e.startPageX=t.pageX,e.startPageY=t.pageY,e.currentPageX=t.pageX,e.currentPageY=t.pageY,e.currentTimeStamp=t.timestamp,e.previousPageX=t.pageX,e.previousPageY=t.pageY,e.previousTimeStamp=t.timestamp}(n,e):t[e.identifier]=function(e){return{touchActive:!0,startTimeStamp:e.timestamp,startPageX:e.pageX,startPageY:e.pageY,currentPageX:e.pageX,currentPageY:e.pageY,currentTimeStamp:e.timestamp,previousPageX:e.pageX,previousPageY:e.pageY,previousTimeStamp:e.timestamp}}(e),r.mostRecentTimeStamp=e.timestamp},o=function(e){var t=r.touchBank[e.identifier];t.touchActive=!0,t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=e.timestamp,r.mostRecentTimeStamp=e.timestamp},a=function(e){var t=r.touchBank[e.identifier];t.previousPageX=t.currentPageX,t.previousPageY=t.currentPageY,t.previousTimeStamp=t.currentTimeStamp,t.currentPageX=e.pageX,t.currentPageY=e.pageY,t.currentTimeStamp=e.timestamp,t.touchActive=!1,r.mostRecentTimeStamp=e.timestamp};function s(e,t){var n,r=t.timeStamp||t.timestamp;return(n=e,n&&Array.prototype.slice.call(n)||[]).map((function(e){return{clientX:e.clientX,clientY:e.clientY,force:e.force,pageX:e.screenX,pageY:e.screenY,radiusX:e.radiusX,radiusY:e.radiusY,rotationAngle:e.rotationAngle,screenX:e.screenX,screenY:e.screenY,target:e.target||t.target,timestamp:r,identifier:e.identifier||1}}))}var l={recordTouchTrack:function(e,t){var n=r.touchBank,l=s(t.changedTouches||[t],t);if("move"===e)l.forEach(o);else if("start"===e)l.forEach(i),r.numberActiveTouches=l.length,1===r.numberActiveTouches&&(r.indexOfSingleActiveTouch=l[0].identifier);else if("end"===e&&(l.forEach(a),r.numberActiveTouches=l.length,1===r.numberActiveTouches))for(var c in n){var u=n[c];if(null!=u&&u.touchActive){r.indexOfSingleActiveTouch=c;break}}},touchHistory:r};e.exports=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e,t,n,r){return Math.abs(e)>n&&Math.abs(t)<r}},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{"carousel__dot-wrapper":{position:"absolute",bottom:n["s-2"],left:0,width:"100%"},carousel__dot:{width:n["s-2"],color:"rgba(0, 0, 0, 0.3)",marginLeft:n["s-1"],marginRight:n["s-1"]},"carousel__dot--active":{color:n["color-brand1-6"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{checkbox__container:{flexDirection:"row",alignItems:"center",paddingTop:t["s-1"],paddingBottom:t["s-1"]},checkbox__circle:{height:t["s-6"],width:t["s-6"],borderRadius:t["corner-round"],borderWidth:t["line-1"],borderStyle:"solid",borderColor:t["color-line1-3"],justifyContent:"center",alignItems:"center"},"checkbox--press__circle":{backgroundColor:t["color-white"],borderColor:t["color-line1-3"]},"checkbox--selected__circle":{backgroundColor:t["color-brand1-6"],borderColor:t["color-brand1-6"]},"checkbox--indeterminate__circle":{backgroundColor:t["color-brand1-6"],borderWidth:t["line-zero"]},"checkbox--selected--press__circle":{backgroundColor:t["color-brand1-9"],borderColor:t["color-brand1-9"]},"checkbox--disabled__circle":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"checkbox--selected--disabled__circle":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"checkbox--indeterminate--disabled__circle":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"checkbox--indeterminate--press__circle":{backgroundColor:t["color-brand1-9"],borderColor:t["color-brand1-9"]},checkbox__icon:{fontSize:t["icon-xxs"]},"checkbox--selected__icon":{color:t["color-white"]},"checkbox--selected--disabled__icon":{color:t["color-text1-1"]},"checkbox--indeterminate__icon":{color:t["color-white"]},"checkbox--indeterminate--disabled__icon":{color:t["color-text1-1"]},checkbox__text:{fontSize:t["font-size-subhead"],color:t["color-text1-3"],marginLeft:t["s-3"],marginRight:t["s-3"]},"checkbox--selected__text":{color:t["color-text1-3"]},"checkbox--disabled__text":{color:t["color-text1-1"]},"checkbox--indeterminate__text":{color:t["color-text1-3"]},"checkbox--selected--disabled__text":{color:t["color-text1-1"]},"checkbox--indeterminate--disabled__text":{color:t["color-text1-1"]}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=d(n(9)),o=d(n(10)),a=d(n(8)),s=n(4),l=d(n(1)),c=d(n(200)),u=d(n(66));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=(0,r.forwardRef)((function(e,t){var n=e.defaultValue,d=e.data,h=e.style,p=e.direction,m=void 0===p?"vertical":p,v=e.onChange,g=e.disabled,_=e.children,y=e.readOnly,b=e.styles,x=(e.value,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["defaultValue","data","style","direction","onChange","disabled","children","readOnly","styles","value"])),w=e.value||[],T=(0,r.useState)(function(e,t){var n=[];return e?n=e:t&&(n=t),n}(w,n)),A=T[0],E=T[1],O="value"in e,M=(0,s.useStyles)(c.default,{styles:b},(function(e){return{group:f({},e("checkbox--group"),{},e("checkbox--group__"+m),{},h),checkbox:e(["checkbox--item__"+m])}}));Array.isArray(w)&&Array.isArray(A)&&A.sort().toString()===w.sort().toString()||E(w||[]);var S,C=function(e,t,n){if(!e){var r=A.indexOf(t),i=[].concat(A);r>=0&&(i.splice(r,1),O||E(i)),g||y||!v||v(i,n)}if(!g&&!y&&e){var o=[].concat(A,[t]);O||E(o),v&&v(o,n)}};return S=d&&d.length>0?d.map((function(e,t){void 0===e&&(e={});var n=e.label||e.text||e.value;return(0,r.createElement)(u.default,f({},e,{styles:b,key:"meet_ck_"+t,style:f({},M.checkbox,{},e.style),onChange:function(t,n){return C(t,e.value,n)},checked:e.checked||A.includes(e.value),disabled:g||e.disabled}),n)})):a.default.map(_,(function(e,t){if((0,o.default)(e)){var n=e.props,r=n.value,a=n.checked,s=n.disabled,l=n.style;return(0,i.default)(e,{key:"meet_ck_"+t,style:f({},M.checkbox,{},l||{}),onChange:function(e,t){return C(e,r,t)},checked:a||A.includes(r),disabled:g||s})}})),(0,r.createElement)(l.default,f({ref:t,style:M.group},x),S)}));t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return{"checkbox--group":{display:"flex",flexDirection:"column"},"checkbox--group__horizontal":{flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",flexWrap:"wrap"},"checkbox--group__vertical":{},"checkbox--item__horizontal":{marginRight:e.Core["s-2"]}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(18)),o=l(n(76)),a=n(77),s=l(n(34));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.type,l=void 0===n?"date":n,u=e.maxDate,d=e.minDate,f=e.use12Hours,h=e.selectSecond,p=(e.locale,e.styles),m=(e.format,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["type","maxDate","minDate","use12Hours","selectSecond","locale","styles","format"]));return(0,r.createElement)(i.default.Base,c({},m,{ref:t,styles:p,renderPicker:function(t){var n=t.value,i=t.visible,c=t.onHide,m=t.onChange,v=t.valueLabel,g=t.setValueLabel,_=function(e,t){var n=e.format,r=e.type,i=void 0===r?"date":r,o=e.selectSecond,l=e.use12Hours;return t?"function"==typeof n?n(t):(0,s.default)(t).format(n||(0,a.getDefaultFormat)(i,o,l)):""}(e,n);return _!==v&&g(_),(0,r.createElement)(o.default,{type:l,maxDate:u,minDate:d,use12Hours:f,selectSecond:h,value:n,visible:i,onHide:c,styles:p,onChange:m})}}))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.TextFieldLabelType=t.TextFieldAlign=t.TextFieldType=void 0;var r,i,o,a=n(0),s=n(4),l=m(n(1)),c=m(n(2)),u=m(n(68)),d=m(n(10)),f=m(n(6)),h=m(n(19)),p=m(n(221));function m(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.TextFieldType=r,function(e){e.TEXT="text",e.URL="url",e.PASSWORD="password",e.TEL="tel",e.EMAL="email",e.NUMBER="number"}(r||(t.TextFieldType=r={})),t.TextFieldAlign=i,function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center"}(i||(t.TextFieldAlign=i={})),t.TextFieldLabelType=o,function(e){e.INNER="inner",e.UPPER="upper",e.DYNAMIC="dynamic"}(o||(t.TextFieldLabelType=o={}));var g=(0,a.forwardRef)((function(e,t){var n,i=e.type,m=void 0===i?r.TEXT:i,g=e.label,_=void 0===g?"":g,y=e.icon,b=void 0===y?null:y,x=e.labelWidth,w=void 0===x?null:x,T=e.labelType,A=void 0===T?o.INNER:T,E=e.actionIcon,O=void 0===E?null:E,M=e.multiline,S=void 0!==M&&M,C=e.rows,R=void 0===C?3:C,k=e.onChangeText,P=void 0===k?function(){}:k,L=e.value,I=e.defaultValue,F=void 0===I?"":I,D=e.maxLength,N=e.limitHint,z=void 0!==N&&N,j=e.disabled,B=void 0!==j&&j,U=e.focused,V=e.solo,H=void 0!==V&&V,G=e.outline,W=void 0!==G&&G,X=e.placeholder,Y=e.helpText,q=void 0===Y?"":Y,K=e.errorText,Q=void 0===K?"":K,J=e.align,Z=e.clear,$=void 0!==Z&&Z,ee=e.renderInput,te=void 0===ee?null:ee,ne=e.append,re=void 0===ne?null:ne,ie=e.prepend,oe=void 0===ie?null:ie,ae=e.onClick,se=void 0===ae?function(){}:ae,le=e.onActionClick,ce=void 0===le?function(){}:le,ue=e.onFocus,de=void 0===ue?function(){}:ue,fe=e.onBlur,he=void 0===fe?function(){}:fe,pe=e.onChange,me=void 0===pe?function(){}:pe,ve=e.onConfirm,ge=void 0===ve?function(){}:ve,_e=e.style,ye=void 0===_e?{}:_e,be=e.readOnly,xe=void 0!==be&&be,we=e.className,Te=e.children,Ae=e.controlled,Ee=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["type","label","icon","labelWidth","labelType","actionIcon","multiline","rows","onChangeText","value","defaultValue","maxLength","limitHint","disabled","focused","solo","outline","placeholder","helpText","errorText","align","clear","renderInput","append","prepend","onClick","onActionClick","onFocus","onBlur","onChange","onConfirm","style","readOnly","className","children","controlled"]),Oe=(0,a.useState)(!1),Me=Oe[0],Se=Oe[1],Ce=(0,a.useContext)(h.default.ItemContext),Re=Ce.error,ke=Ce.solo,Pe=Ce.align,Le=(0,a.useState)(F),Ie=Le[0],Fe=Le[1],De=H||ke,Ne=J||Pe;"value"in e&&Fe(L||""),"focused"in e&&Se(U);var ze=function(e){var t=e.disabled,n=e.errorText,r=e.focused;return t?"disabled":n?"error":r?"focused":"normal"}({disabled:B,errorText:Q||Re,focused:Me}),je=(0,s.useStyles)(p.default,Ee,(function(e){return{textField:e(["text-field",{"text-field--solo":De}]),input:e(["text-field__input",{"text-field--multiline__input":S,"text-field--solo__input":De,"text-field--outline__input":W,"text-field--disabled__input":B}]),content:e(["text-field__input-content",{"text-field--label-top__input-content":o.UPPER===A,"text-field--label-dynamic__input-content":A===o.DYNAMIC&&!W,"text-field--multiline__input-content":S}]),label:e(["text-field__input-label",{"text-field--label-top__input-label":o.UPPER===A,"text-field--label-dynamic__input-label":A===o.DYNAMIC,"text-field--outline--label-dynamic__input-label":A===o.DYNAMIC&&W,"text-field--label-dynamic--float__input-label":A===o.DYNAMIC&&(Me||!!Ie),"text-field--outline--label-dynamic--float__input-label":A===o.DYNAMIC&&(Me||!!Ie)&&W,"text-field--focused__input-label":"focused"===ze&&-1!==[o.UPPER,o.DYNAMIC].indexOf(A),"text-field--error__input-label":"error"===ze,"text-field--disabled__input-label":B}]),element:e(["text-field__input-element",{"text-field__input-element--placeholder":!Ie,"text-field--solo__input-element":De,"text-field--disabled__input-element":B,"text-field--label-top__input-element":A===o.UPPER,"text-field--label-dynamic__input-element":A===o.DYNAMIC&&!W}]),action:e("text-field__input-action"),actionIcon:e("text-field__input-action-icon"),addonPrepend:e(["text-field__input-addon","text-field__input-addon--prepend"]),addonAppend:e(["text-field__input-addon","text-field__input-addon--append"]),addonIcon:e(["text-field__input-addon-text"]),addonText:e(["text-field__input-addon-text"]),line:e(["text-field__line",{"text-field--outline__line":W,"text-field--error__line":"error"===ze,"text-field--disabled__input-line":B}]),focusLine:e(["text-field__line","text-field--focused__line",{"text-field--outline__line":W,"text-field--error__line":"error"===ze}]),helper:e(["text-field__helper",{}]),helperTextFirst:e(["text-field__helper-text","text-field__helper-text--first",{"text-field--error__helper-text":"error"===ze}]),helperTextLast:e(["text-field__helper-text","text-field__helper-text--last",{"text-field--error__helper-text":"error"===ze}])}})),Be=(Ie||"").length+"/"+D,Ue=function(e){switch(e){case r.EMAL:return"email-address";case r.NUMBER:return"number-pad";case r.TEL:return"phone-pad";case r.URL:return"url";default:return"default"}}(m),Ve=A!==o.DYNAMIC||Me?X:"";b&&A===o.DYNAMIC&&(Me||Ie)&&W&&(je.label=v({},je.label,{left:(je.label.left||0)-((je.addonText.fontSize||0)+(je.addonPrepend.marginRight||0))}));var He=null,Ge=null;(0,d.default)(oe)?He=(0,a.createElement)(l.default,{style:v({},je.addonPrepend,{},je.addonText)},oe):"string"==typeof oe&&""!==oe&&(He=(0,a.createElement)(c.default,{style:v({},je.addonPrepend,{},je.addonText)},oe)),(0,d.default)(re)?Ge=(0,a.createElement)(l.default,{style:v({},je.addonAppend,{},je.addonText)},re):"string"==typeof re&&(Ge=(0,a.createElement)(c.default,{style:v({},je.addonAppend,{},je.addonText)},re));var We=function(t,n){"value"in e||Fe(t),me(t,n)},Xe=((n={}).onClick=se,n);return(0,a.createElement)(l.default,v({},Ee,Xe,{style:v({},je.textField,{},ye),className:we}),(0,a.createElement)(l.default,{style:je.input},De?null:(0,a.createElement)(l.default,{style:je.line}),De||!Me||B?null:(0,a.createElement)(l.default,{style:je.focusLine}),He,b?(0,a.createElement)(l.default,{style:je.addonPrepend},(0,a.createElement)(f.default,{name:b,style:je.addonIcon})):null,(0,a.createElement)(l.default,{style:je.content},_&&!De?(0,a.createElement)(l.default,{style:v({},je.label,{},w?{width:w,whiteSpace:"normal"}:{})},(0,a.createElement)(c.default,{style:{color:je.label.color,fontSize:je.label.fontSize,lineHeight:je.label.lineHeight}},_)):null,te?te({value:L,placeholder:Ve,align:Ne,style:je.element}):(0,a.createElement)(u.default,{ref:t,editable:!B&&!xe,value:Ie,keyboardType:Ue,multiline:S,maxLength:D,numberOfLines:R,style:v({},je.element,{textAlign:Ne}),secureTextEntry:m===r.PASSWORD,onFocus:function(e){Se(!0),de(e)},onBlur:function(e){Se(!1),he(e)},onChangeText:P,onConfirm:function(e){Se(!1),ge(e)},placeholder:Ve,controlled:Ae,onInput:function(e){return We(e.value||e.target.value,e)}})),$&&Ie?(0,a.createElement)(l.default,{style:je.action,onClick:function(e){B||xe||(e&&e.stopPropagation&&e.stopPropagation(),We("",e))}},(0,a.createElement)(f.default,{name:"delete",style:je.actionIcon})):null,O&&!De?(0,a.createElement)(l.default,{style:je.action,onClick:function(e){e&&e.stopPropagation&&e.stopPropagation(),ce(e)}},(0,a.createElement)(f.default,{name:O,style:je.actionIcon})):null,Ge),!De&&Q||q||D&&z?(0,a.createElement)(l.default,{style:je.helper},(0,a.createElement)(c.default,{style:je.helperTextFirst},Q||q),D&&z?(0,a.createElement)(c.default,{style:je.helperTextLast},Be):null):null,Te)}));t.default=g},function(e,t,n){!function(e){"use strict";var t={},n={}.hasOwnProperty;e.$slot=function(e){var t=e.$slots,n=e.name,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["$slots","name"]),i=t?t[n]:null;return"function"==typeof i?i(r):null},e.classnames=function e(){for(var t=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"==o||"number"==o)t.push(i);else if(Array.isArray(i)&&i.length){var a=e.apply(null,i);a&&t.push(a)}else if("object"==o)for(var s in i)n.call(i,s)&&i[s]&&t.push(s)}}return t.join(" ")},e.createCondition=function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r[0],o=r[1];if(i())return o()}return null},e.createJSXMemo=function(e,n){return t.hasOwnProperty(n)?t[n]:t[n]="function"==typeof e?e():e},e.createList=function(e,t){var n,r,i,o,a,s;if(Array.isArray(e)||"string"==typeof e)for(n=new Array(e.length),r=0,i=e.length;r<i;r++)n[r]=t.call(this,e[r],r);else if("number"==typeof e)for(n=new Array(e),r=0;r<e;r++)n[r]=t.call(this,r+1,r);else if(s=e,"[object Object]"==={}.toString.call(s))for(o=Object.keys(e),n=new Array(o.length),r=0,i=o.length;r<i;r++)a=o[r],n[r]=t.call(this,e[a],a,r);return n},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});for(var n in t)if(o=t,d=n,s.call(o,d)){var r=t[n];if("children"!==n&&null!=r)if("style"===n)l(e,r);else if(a.test(n)){var i=n.slice(2).toLowerCase();c(e,i,r)}else u(e,n,r)}var o,d};var r,i=n(28),o=(n(0),(r=n(205))&&r.__esModule?r:{default:r});var a=/^on[A-Z]/,s=Object.prototype.hasOwnProperty;function l(e,t){var n={};for(var r in t){var a=t[r];o.default.isFlexProp(r)?o.default[r](a,n):n[r]=(0,i.convertUnit)(a,r)}for(var s in n){var l=n[s];if(Array.isArray(l))for(var c=0;c<l.length;c++)e.style[s]=l[c];else e.style[s]=l}}function c(e,t,n){return e.addEventListener(t,n)}function u(e,t,n){if("dangerouslySetInnerHTML"===t)return e.innerHTML=n.__html;if("className"===t&&(t="class"),t in e)try{e[t]=n}catch(r){e.setAttribute(t,n)}else e.setAttribute(t,n)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={stretch:"stretch","flex-start":"start","flex-end":"end",center:"center"},i={row:"horizontal",column:"vertical"},o={"flex-start":"start","flex-end":"end",center:"center","space-between":"justify","space-around":"justify"},a={display:!0,flex:!0,alignItems:!0,alignSelf:!0,flexDirection:!0,justifyContent:!0,flexWrap:!0},s={isFlexProp:function(e){return a[e]},display:function(e,t){return void 0===t&&(t={}),t.display="flex"===e?["-webkit-box","-webkit-flex","flex"]:e,t},flex:function(e,t){return void 0===t&&(t={}),t.webkitBoxFlex=e,t.webkitFlex=e,t.flex=e,t},flexWrap:function(e,t){return void 0===t&&(t={}),t.webkitFlexWrap=e,t.flexWrap=e,t},alignItems:function(e,t){return void 0===t&&(t={}),t.webkitBoxAlign=r[e],t.webkitAlignItems=e,t.alignItems=e,t},alignSelf:function(e,t){return void 0===t&&(t={}),t.webkitAlignSelf=e,t.alignSelf=e,t},flexDirection:function(e,t){return void 0===t&&(t={}),t.webkitBoxOrient=i[e],t.webkitFlexDirection=e,t.flexDirection=e,t},justifyContent:function(e,t){return void 0===t&&(t={}),t.webkitBoxPack=o[e],t.webkitJustifyContent=e,t.justifyContent=e,t}};t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={default:"text","ascii-capable":"text","numbers-and-punctuation":"number",url:"url","number-pad":"number","phone-pad":"tel","name-phone-pad":"text","email-address":"email","decimal-pad":"number",twitter:"text","web-search":"search",numeric:"number",number:"number",text:"text",idcard:"idcard",digit:"digit",numberpad:"numberpad",digitpad:"digitpad",idcardpad:"idcardpad"};t.default=r},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(20)),a=l(n(1)),s=l(n(209));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.children,l=(e.align,e.labelType),u=void 0===l?"upper":l,d=e.labelWidth,f=e.style,h=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","align","labelType","labelWidth","style"]),p=(0,i.useStyles)(s.default,h,(function(e){return{form:e("form"),subHeader:e("form__sub-header"),footer:e("form__footer"),content:e("form__content"),item:e("form__item"),itemContainer:e("form__item-container"),itemLabelContainer:e("form__item-label-container"),itemLabelInnerContainer:e("form__item-label-inner-container"),itemLabel:e("form__item-label"),itemInnerContainer:e("form--inner__item-container"),itemInnerLabel:e("form--inner__item-label"),itemInput:e("form__item-input"),itemHelp:e("form__item-help"),itemHelpText:e("form__item-help-text"),itemErrorText:e("form__item-error-text"),itemRequiredText:e("form__item-required-text"),itemInnerRequiredText:e("form__item-required-text__inner")}}));return(0,r.createElement)(o.default.Provider,{value:{styles:p,labelType:u,labelWidth:d}},(0,r.createElement)(a.default,c({},h,{style:c({},p.form,{},f),ref:t}),n))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{form:{},"form__sub-header":{paddingTop:n["s-2"],paddingBottom:n["s-2"],paddingLeft:n["s-3"],paddingRight:n["s-3"],marginTop:n["s-2"],fontSize:n["font-size-subhead"],color:n["color-text1-3"],lineHeight:1.5*n["font-size-subhead"]},form__footer:{marginTop:n["s-4"],paddingLeft:n["s-3"],paddingRight:n["s-3"]},"form__item-container":{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},"form--inner__item-container":{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},"form__item-label-container":{display:"flex",flexDirection:"row",alignItem:"center",marginBottom:n["s-2"]},"form__item-label-inner-container":{marginRight:n["s-3"]},"form__item-label":{fontSize:n["font-size-caption"],color:n["color-text1-4"],lineHeight:"1"},"form--inner__item-label":{fontSize:n["font-size-subhead"],lineHeight:"1.5"},"form__item-input":{minHeight:n["s-6"],flex:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},"form__item-help":{marginTop:n["s-0"]},"form__item-help-text":{fontSize:n["font-size-footnote"],lineHeight:n["font-size-footnote"],color:n["color-text1-2"],marginTop:n["s-1"]},"form__item-error-text":{fontSize:n["font-size-footnote"],color:n["color-error-2"],lineHeight:n["font-size-footnote"]},"form__item-required-text":{color:n["color-error-3"],fontSize:n["font-size-caption"],lineHeight:n["font-size-caption"]},"form__item-required-text__inner":{fontSize:n["font-size-subhead"],lineHeight:n["font-size-subhead"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=s(n(1)),o=s(n(2)),a=s(n(20));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=(0,r.forwardRef)((function(e,t){var n=e.children,s=e.style,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","style"]),u=(0,r.useContext)(a.default).styles;return(0,r.createElement)(i.default,l({},c,{ref:t,style:l({},u.subHeader,{},s)}),(0,r.createElement)(o.default,{style:{color:u.subHeader.color,fontSize:u.subHeader.fontSize,lineHeight:u.subHeader.lineHeight}},n))}));t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(12)),o=a(n(20));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.style,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","style"]),c=(0,r.useContext)(o.default).styles;return(0,r.createElement)(i.default,s({},l,{ref:t,style:s({},c.content,{},a)}),n)}));t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=d(n(1)),a=d(n(8)),s=d(n(10)),l=d(n(9)),c=d(n(213)),u=d(n(16));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=(0,r.forwardRef)((function(e,t){var n=e.style,d=void 0===n?{}:n,h=e.children,p=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["style","children"]),m=(0,i.useStyles)(c.default,p,(function(e){return{list:f({},e("list"),{},d),listItem:e("list__item"),listItemContainer:e("list__item__container"),listItemDivider:e("list__item__divider"),listItemContent:e("list__item__content"),listItemMedia:e("list__item__media"),listItemMediaLast:e("list__item__media--last"),listItemLabel:e("list__item__label"),listItemCaption:e("list__item__caption"),listItemIcon:e("list__item__icon")}})),v=a.default.count(h);return(0,r.createElement)(u.default.Provider,{value:{styles:m}},(0,r.createElement)(o.default,f({},p,{ref:t,style:m.list}),a.default.map(h,(function(e,t){return(0,l.default)(e,{key:"meet_list_"+t,last:t===v-1&&(0,s.default)(e)})}))))}));t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{list:{backgroundColor:n["color-white"],borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:0,borderColor:n["color-line1-3"],borderStyle:"solid"},list__item:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",minHeight:n["s-12"],paddingLeft:n["s-3"],color:n["color-text1-4"],overflow:"hidden",position:"relative"},list__item__container:{flex:1,minWidth:1,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",paddingTop:n["s-3"],paddingBottom:n["s-3"],paddingRight:n["s-3"]},list__item__divider:{position:"absolute",right:-n["s-3"],left:0,bottom:0,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:n["color-line1-3"]},list__item__content:{flex:1,minWidth:1},list__item__media:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginRight:n["s-3"]},"list__item__media--last":{justifyContent:"flex-end",marginRight:0,marginLeft:n["s-3"]},list__item__label:{lineHeight:1.5*n["font-size-subhead"],fontSize:n["font-size-subhead"],color:n["color-text1-4"],overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",wordWrap:"break-word",textAlign:"left",flex:1,minWidth:1},list__item__caption:{lineHeight:1.5*n["font-size-caption"],fontSize:n["font-size-caption"],color:n["color-text1-2"]},list__item__icon:{fontSize:n["icon-s"],color:n["color-text1-2"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(1)),o=a(n(16));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.style,a=void 0===n?{}:n,l=e.children,c=e.last,u=e.media,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["style","children","last","media"]),f=(0,r.useContext)(o.default).styles;return(0,r.createElement)(i.default,s({},d,{ref:t,style:s({},f.listItem,{},a)}),u,(0,r.createElement)(i.default,{style:f.listItemContainer},l,!c&&(0,r.createElement)(i.default,{style:f.listItemDivider})))}));t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.ListItemAction=t.ListItemMedia=void 0;var r=n(0),i=s(n(1)),o=s(n(6)),a=s(n(16));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=(0,r.forwardRef)((function(e,t){var n=e.style,s=void 0===n?{}:n,c=e.action,u=e.icon,d=e.children,f=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["style","action","icon","children"]),h=(0,r.useContext)(a.default).styles;return(0,r.createElement)(i.default,l({},f,{ref:t,style:l({},h.listItemMedia,{},c?h.listItemMediaLast:{},{},s)}),u&&(0,r.createElement)(o.default,{style:h.listItemIcon,name:u}),d)}));t.ListItemMedia=c;var u=(0,r.forwardRef)((function(e,t){return(0,r.createElement)(c,l({},e,{action:!0,ref:t}))}));t.ListItemAction=u;var d=c;t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(1)),o=a(n(16));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)((function(e){var t=e.style,n=void 0===t?{}:t,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["style"]),l=(0,r.useContext)(o.default).styles;return(0,r.createElement)(i.default,s({},a,{style:s({},l.listItemContent,{},n)}))}));t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=s(n(2)),o=s(n(1)),a=s(n(16));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){var t=e.style,n=void 0===t?{}:t,s=e.children,c=(0,r.useContext)(a.default).styles;return"string"==typeof s?(0,r.createElement)(i.default,{style:l({},c.listItemLabel,{},n)},s):(0,r.createElement)(o.default,{style:l({},c.listItemLabel,{},n)},s)};t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(2)),o=a(n(16));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=function(e){var t=e.style,n=void 0===t?{}:t,a=e.children,l=(0,r.useContext)(o.default).styles;return(0,r.createElement)(i.default,{style:s({},l.listItemCaption,{},n)},a)};t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.FormItemContext=void 0;var r=n(0),i=l(n(1)),o=l(n(2)),a=l(n(12)),s=l(n(20));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.createContext)({error:!1,align:"left",solo:!1});t.FormItemContext=u;var d=(0,r.forwardRef)((function(e){var t=e.label,n=e.labelWidth,l=e.labelType,d=e.helpText,f=e.errorText,h=e.tapable,p=(e.style,e.children),m=e.required,v=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["label","labelWidth","labelType","helpText","errorText","tapable","style","children","required"]),g=(0,r.useContext)(s.default),_=g.styles,y=g.labelType,b=l||y,x="upper"===b?"left":"right";return(0,r.createElement)(a.default.Item,v,(0,r.createElement)(a.default.ItemContent,null,(0,r.createElement)(i.default,{style:c({},_.itemContainer,{},"inner"===b?_.itemInnerContainer:{})},t?(0,r.createElement)(i.default,{style:c({},_.itemLabelContainer,{},"inner"===b?_.itemLabelInnerContainer:{},{width:n,flexShrink:0})},(0,r.createElement)(o.default,{style:c({},_.itemLabel,{},"inner"===b?_.itemInnerLabel:{})},t),m?(0,r.createElement)(o.default,{style:c({},_.itemRequiredText,{},"inner"===b?_.itemInnerRequiredText:null)},"*"):null):null,(0,r.createElement)(u.Provider,{value:{error:!!f,align:x,solo:!0}},(0,r.createElement)(i.default,{style:c({},_.itemInput,{justifyContent:"right"===x?"flex-end":"flex-start"})},p))),f||d?(0,r.createElement)(i.default,{style:c({},_.itemHelp,{textAlign:x})},f?(0,r.createElement)(o.default,{style:_.itemErrorText},f):d?(0,r.createElement)(o.default,{style:_.itemHelpText},d):null):null),h?(0,r.createElement)(a.default.ItemAction,{icon:"arrow-right"}):null)}));t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=a(n(1)),o=a(n(20));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=(0,r.forwardRef)((function(e,t){var n=e.children,a=e.style,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","style"]),c=(0,r.useContext)(o.default).styles;return(0,r.createElement)(i.default,s({},l,{ref:t,style:s({},c.footer,{},a)}),n)}));t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t,r=(88+n["s-3"]-n["font-size-subhead"])/2;return{"text-field":{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"},"text-field__input":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",backgroundColor:n["color-white"],transition:"border 100mss, background-color 100ms",willChange:"border, background-color",paddingLeft:n["s-3"],paddingRight:n["s-3"]},"text-field__input-label":{fontSize:n["font-size-subhead"],color:n["color-text1-4"],lineHeight:1.5*n["font-size-subhead"],marginRight:n["s-3"]},"text-field__input-content":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",flex:1},"text-field__input-element":{backgroundColor:"transparent",appearance:"none",outline:"none",border:"none",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,lineHeight:1.5,flex:1,minHeight:88,fontSize:n["font-size-subhead"],color:n["color-text1-4"],textAlign:"left",zIndex:1},"text-field__input-element--placeholder":{color:n["color-fill1-3"],placeholderColor:n["color-fill1-3"]},"text-field__input-action":{height:"100%",marginLeft:n["s-3"],display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",zIndex:1},"text-field__input-action-icon":{fontSize:n["icon-s"],color:n["color-text1-2"]},"text-field__input-addon":{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",height:"100%",zIndex:1},"text-field__input-addon--prepend":{marginRight:n["s-3"]},"text-field__input-addon--append":{marginLeft:n["s-3"]},"text-field__input-addon-text":{fontSize:n["font-size-subhead"],color:n["color-text1-3"]},"text-field__line":{position:"absolute",left:0,right:0,bottom:0,top:0,borderTopWidth:0,borderLeftWidth:0,borderRightWidth:0,borderBottomWidth:"1px",borderStyle:"solid",borderColor:n["color-line1-3"]},"text-field__helper":{display:"flex",justifyContent:"space-between",flexDirection:"row",paddingLeft:n["s-3"],paddingRight:n["s-3"],paddingTop:n["s-1"],paddingBottom:n["s-1"]},"text-field__helper-text":{fontSize:n["font-size-footnote"],color:n["color-text1-3"],whiteSpace:"normal"},"text-field__helper-text--first":{whiteSpace:"normal",flex:1,width:"100%"},"text-field__helper-text--last":{whiteSpace:"nowrap"},"text-field--label-top__input-content":{paddingTop:n["font-size-caption"]},"text-field--label-top__input-label":{position:"absolute",lineHeight:n["s-3"],fontSize:n["font-size-caption"],left:0,top:0},"text-field--label-top__input-element":{paddingTop:n["s-3"],paddingBottom:n["s-3"]},"text-field--label-dynamic__input-content":{paddingTop:n["s-3"]},"text-field--label-dynamic__input-element":{paddingTop:n["s-3"],paddingBottom:n["s-3"]},"text-field--label-dynamic__input-label":{position:"absolute",left:0,top:r,lineHeight:n["font-size-subhead"],fontSize:n["font-size-subhead"],color:n["color-text1-2"],transition:"left 200ms, transform 200ms",willChange:"left, transform",transformOrigin:"left center",transform:"scale(1) translate(0, 0)"},"text-field--label-dynamic--float__input-label":{transform:"translate(0, -"+((r-n["s-3"])/n["font-size-caption"]*100).toFixed(2)+"%) scale("+(n["font-size-caption"]/n["font-size-subhead"]).toFixed(2)+")",color:n["color-text1-4"]},"text-field--outline--label-dynamic__input-label":{top:(88-n["font-size-subhead"])/2,left:0},"text-field--outline--label-dynamic--float__input-label":{transform:"scale("+(n["font-size-caption"]/n["font-size-subhead"]).toFixed(2)+") translate(0, -"+(((88-n["font-size-subhead"])/2+n["font-size-caption"]/2)/n["font-size-caption"]*100).toFixed(2)+"%)",paddingLeft:n["s-1"],paddingRight:n["s-1"],background:n["color-white"],left:-(n["s-1"]*(n["font-size-caption"]/n["font-size-subhead"])).toFixed(2)},"text-field--solo":{flex:1},"text-field--solo__input":{padding:0},"text-field--solo__input-element":{minHeight:48},"text-field--outline__input":{borderRadius:n["corner-1"]},"text-field--outline__line":{borderTopWidth:"1px",borderLeftWidth:"1px",borderRightWidth:"1px",borderRadius:n["corner-1"]},"text-field--multiline__input":{paddingTop:n["s-3"]},"text-field--multiline__input-content":{alignItems:"flex-start"},"text-field--focused__input-label":{color:n["color-brand1-6"]},"text-field--focused__line":{borderColor:n["color-brand1-6"]},"text-field--error__input-label":{color:n["color-error-2"]},"text-field--error__line":{borderColor:n["color-error-2"]},"text-field--error__helper-text":{color:n["color-error-2"]},"text-field--disabled__input":{},"text-field--disabled__input-label":{color:n["color-text1-2"]},"text-field--disabled__input-element":{color:n["color-text1-1"]},"text-field--disabled__input-line":{borderColor:n["color-text1-1"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=f(n(1)),a=f(n(2)),s=f(n(70)),l=f(n(223)),c=f(n(71)),u=n(72),d=n(11);function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e,t){return void 0===t&&(t=[]),e.map((function(e,n){return e.find((function(e){return e.value===t[n]}))?t[n]:e[0].value}))},m=(0,r.forwardRef)((function(e,t){var n=e.data,f=void 0===n?[]:n,m=e.value,v=void 0===m?[]:m,g=e.cascade,_=e.onChange,y=void 0===_?function(){}:_,b=e.style,x=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","value","cascade","onChange","style"]),w=(0,i.useStyles)(s.default,x,(function(e){return{picker:e("picker"),item:e("picker__item"),col:e("picker__col"),colContent:e("picker__col-content"),colItem:e("picker__col-item"),colItemSelected:e(["picker__col-item","picker__col-item--selected"]),colItemDisabled:e(["picker__col-item","picker__col-item--disabled"]),mask:e("picker__mask"),indicator:e("picker__indicator"),emptyText:e("picker__text--empty")}})),T=(0,d.useLocale)("Picker",x,{empty:""}),A=(0,u.getDataArray)(f,v,g),E=p(A,v);return(0,r.createElement)(c.default.Provider,{value:{styles:w}},(0,r.createElement)(o.default,h({},x,{style:h({},w.picker,{},b),ref:t}),A.map((function(e,t){var n=void 0===E[t]?e[0].value:E[t];return(0,r.createElement)(l.default,{onChange:function(e){return function(e,t){var n=[].concat(v);n[t]=e,y(p((0,u.getDataArray)(f,n,g),n),t)}(e,t)},key:t,data:e,value:n})})),A&&0===A.length?(0,r.createElement)(a.default,{style:w.emptyText},T.empty):null))}));t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(13)),o=l(n(1)),a=l(n(2)),s=l(n(71));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n,l,u=e.value,d=e.data,f=void 0===d?[]:d,h=e.onChange,p=void 0===h?function(){}:h,m=e.onScrollChange,v=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["value","data","onChange","onScrollChange"]),g=(0,r.useContext)(s.default).styles,_=null,y=(0,r.createRef)(),b=(0,r.createRef)(),x=(0,r.createRef)(),w=(0,r.createRef)(),T=function(e,t,n){e<0||e>=f.length||!t||n(e*t)},A=function(e,t,n){for(var r=0;r<f.length;r++)if(f[r].value===e)return void T(r,t,n);T(0,t,n)},E=function(e,t,n){var r=Math.round(e/t);return Math.min(r,n-1)},O=function(e){e!==u&&p(e)},M=function(e){_&&_.scrollTo(0,e,0)},S=function(){var e=_.getValue();if(e>=0){var t=E(e,n,f.length);if(l!==t){l=t;var r=f[t];r&&m?m(r.value):!r&&console.warn&&console.warn("child not found",f,t)}}},C=function(){var e=_.getValue();e>=0&&function(e,t,r){var i=E(e,t,f.length),o=f[i];o?o.disabled?setTimeout((function(){A(u,n,(function(e){return _.scrollTo(0,e,.4)}))}),0):r(o.value):console.warn&&console.warn("item not found",f,i)}(e,n,O)};return(0,r.useEffect)((function(){var e=(0,i.default)(x.current),t=(0,i.default)(w.current),r=(0,i.default)(y.current),o=(0,i.default)(b.current);if(n=e.getBoundingClientRect().height,t.style.backgroundSize="100% "+3*n+"px",!_){_=function(e){var t=e.contentDOM,n=e.items,r=e.itemHeight,i=e.onScrollChange,o=e.scrollingComplete,a=-1,s=0,l=0,c=!1,u=!1,d=function(e,t){e.transform=t,e.webkitTransform=t},f=function(e,t){e.transition=t,e.webkitTransition=t},h=function(e,n,r){void 0===r&&(r=.3),a!==n&&(a=n,r&&f(t.style,"cubic-bezier(0,0,0.2,1.15) "+r+"s"),d(t.style,"translate3d(0,"+-n+"px,0)"),setTimeout((function(){o(),t&&f(t.style,"")}),1e3*+r))},p=function(e,t){void 0===e&&(e=30),void 0===t&&(t=100);var n=0,r=0,i=0,o={record:function(o){var a=+new Date;i=(o-r)/(a-n),a-n>=e&&(i=a-n<=t?i:0,r=o,n=a)},getVelocity:function(e){return e!==r&&o.record(e),i}};return o}(),m=function(){u=!1;var e=a,t=(n.length-1)*r,o=.3,s=4*p.getVelocity(e);s&&(e=40*s+e,o=.1*Math.abs(s)),e%r!=0&&(e=Math.round(e/r)*r),e<0?e=0:e>t&&(e=t),h(0,e,o<.3?.3:o),i()},v=function(e){c||(u=!0,l=e,s=a)},g=function(e){!c&&u&&(a=s-e+l,p.record(a),i(),d(t.style,"translate3d(0,"+-a+"px,0)"))};return{touchstart:function(e){return v(e.touches[0].pageY)},mousedown:function(e){return v(e.pageY)},touchmove:function(e){e.preventDefault(),g(e.touches[0].pageY)},mousemove:function(e){e.preventDefault(),g(e.pageY)},touchend:function(){return m()},touchcancel:function(){return m()},mouseup:function(){return m()},getValue:function(){return a},scrollTo:h,setDisabled:function(e){void 0===e&&(e=!1),c=e}}}({contentDOM:o,items:f,itemHeight:n,onScrollChange:S,scrollingComplete:C});var a=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),s=!!a&&{passive:!1},l=!!a&&{passive:!0};Object.keys(_).forEach((function(e){if(0===e.indexOf("touch")||0===e.indexOf("mouse")){var t=e.indexOf("move")>=0?s:l;r.addEventListener(e,_[e],t)}}))}return A(u,n,M),function(){Object.keys(_).forEach((function(e){0!==e.indexOf("touch")&&0!==e.indexOf("mouse")||r.removeEventListener(e,_[e])}))}})),(0,r.createElement)(o.default,c({},v,{style:g.item,ref:t}),(0,r.createElement)(o.default,{style:g.col,ref:y},(0,r.createElement)(o.default,{style:g.mask,ref:w}),(0,r.createElement)(o.default,{style:g.indicator}),(0,r.createElement)(o.default,{style:g.colContent,ref:b},f.map((function(e,t){var n=e.disabled?g.colItemDisabled:e.value===u?g.colItemSelected:g.colItem;return(0,r.createElement)(o.default,{style:n,ref:0===t?x:null},(0,r.createElement)(a.default,{numberOfLines:1,style:{color:n.color,fontSize:n.fontSize,fontWeight:n.fontWeight,lineHeight:n.lineHeight,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},e.label))})))))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=n(4),a=n(72),s=(r=n(70))&&r.__esModule?r:{default:r};function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=(0,i.forwardRef)((function(e,t){var n=e.data,r=e.value,c=void 0===r?[]:r,u=e.cascade,d=e.disabled,f=e.style,h=e.onChange,p=void 0===h?function(){}:h,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","value","cascade","disabled","style","onChange"]),v=(0,o.useStyles)(s.default,m,(function(e){return{picker:e("picker"),colItem:e("picker__col-item"),colItemSelected:e(["picker__col-item","picker__col-item--selected"]),colItemDisabled:e(["picker__col-item","picker__col-item--disabled"]),mask:e("picker__mask"),indicator:e("picker__indicator")}})),g=(0,a.getDataArray)(n,c,u),_=(0,a.getIndex)(g,c);return(0,i.createElement)("picker-view",l({value:_,onChange:function(e){var t=(0,a.formatNewIndexByLast)(e.detail.value,_),r=(0,a.getDataArrayByIndex)(n,t,u),i=[];r.forEach((function(e,n){i.push(e[t[n]||0].value)})),p(i,e)},style:l({},v.picker,{},f),"mask-style":v.mask,"indicator-style":v.indicator,ref:t},m),g.map((function(e,t){return(0,i.createElement)("picker-view-column",{key:t},e.map((function(e,n){var r=n===_[t]||!_[t]&&0===n,o=l({},v.colItem,{},r?v.colItemSelected:null,{},d?v.colItemDisabled:null);return(0,i.createElement)("view",{key:n,style:o},e.label)})))})))}));t.default=c},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=((r=n(226))&&r.__esModule?r:{default:r}).default;t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(12)),a=l(n(6)),s=l(n(227));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.data,l=void 0===n?[]:n,u=e.value,d=e.multiple,f=void 0!==d&&d,h=e.renderItem,p=void 0===h?null:h,m=e.onChange,v=void 0===m?function(){}:m,g=e.tickPosition,_=void 0===g?"right":g,y=e.style,b=e.styles,x=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","value","multiple","renderItem","onChange","tickPosition","style","styles"]),w=(0,i.useStyles)(s.default,{styles:b},(function(e){return{list:e("check-list"),item:e("check-list__item"),itemText:e("check-list__item__text"),itemIcon:e("check-list__item__icon"),itemChecked:e("check-list__item--checked"),itemCheckedIcon:e("check-list__item--checked__icon"),itemCheckedText:e("check-list__item--checked__text"),itemDisabled:e("check-list__item--disabled"),itemDisabledIcon:e("check-list__item--disabled__icon"),itemDisabledText:e("check-list__item--disabled__text")}}));return(0,r.createElement)(o.default,c({},x,{ref:t,style:c({},w.list,{},y),styles:b}),l.map((function(e){var t=f?-1!==(u||[]).indexOf(e.value):u===e.value,n=c({},w.item,{},t?w.itemChecked:{},{},e.disabled?w.itemDisabled:{}),i=c({},w.itemIcon,{},t?w.itemCheckedIcon:{},{},e.disabled?w.itemDisabledIcon:{},{},t?{}:{color:"rgba(0, 0, 0, 0)"}),s=c({},w.itemText,{},t?w.itemCheckedText:{},{},e.disabled?w.itemDisabledText:{}),l=(0,r.createElement)(o.default.ItemLabel,{style:s},e.label);return p&&(l=p(c({},e,{checked:t,styles:{item:n,icon:i,text:s}}))),(0,r.createElement)(o.default.Item,{key:e.value,onClick:function(t){return!e.disabled&&function(e,t){var n=e;if(f){var r=(n=Array.isArray(u)?[].concat(u):[u]).indexOf(e);-1===r?n.push(e):n.splice(r,1)}v(n,t)}(e.value,t)},style:n,media:"left"===_?(0,r.createElement)(o.default.ItemMedia,null,(0,r.createElement)(a.default,{style:i,name:"checkbox"})):null},l,"right"===_?(0,r.createElement)(o.default.ItemAction,null,(0,r.createElement)(a.default,{style:i,name:"checkbox"})):null)})))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{"check-list":{},"check-list__item":{},"check-list__item__text":{},"check-list__item__icon":{color:"rgba(0, 0, 0, 0)",fontSize:n["icon-s"]},"check-list__item--checked":{},"check-list__item--checked__icon":{color:n["color-brand1-6"]},"check-list__item--checked__text":{},"check-list__item--disabled":{},"check-list__item--disabled__icon":{color:n["color-text1-1"]},"check-list__item--disabled__text":{color:n["color-text1-1"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.SelectType=void 0;var r,i=n(0),o=c(n(69)),a=c(n(75)),s=c(n(67)),l=n(74);function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.SelectType=r,function(e){e.SINGLE="single",e.CASCADE="cascade",e.MULTIPLE="multiple"}(r||(t.SelectType=r={}));var d=(0,i.forwardRef)((function(e,t){var n=e.type,c=void 0===n?r.SINGLE:n,d=e.delimiter,f=void 0===d?",":d,h=e.title,p=e.locale,m=e.styles,v=void 0===m?{}:m,g=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["type","delimiter","title","locale","styles"]);return(0,i.createElement)(s.default,u({},g,{styles:v,type:c,renderPicker:function(e){var t=e.data,n=e.value,s=e.visible,u=e.onHide,d=e.onChange,m=e.valueLabel,g=e.setValueLabel,_=n?Array.isArray(n)?n:[n]:[],y=function(e,t,n,i){if(t=t||[],!e||0===e.length)return"";var o;switch(n){case r.SINGLE:case r.CASCADE:o=(0,l.treeFilter)(t,(function(t,n){return t.value===e[n]}));break;case r.MULTIPLE:o=e.map((function(e){return t.find((function(t){return t.value===e}))}));break;default:o=e.map((function(e,n){return t[n].filter((function(t){return t.value===e}))[0]})).filter((function(e){return!!e}))}return o.map((function(e){return e?e.label:""})).join(i)}(_,t,c,f);return y!==m&&g(y),c===r.MULTIPLE?(0,i.createElement)(a.default,{multiple:!0,title:h,data:t,locale:p,value:_,visible:s,onHide:u,styles:v,onChange:d}):(0,i.createElement)(o.default,{cascade:!0,title:h,data:t,locale:p,value:_,visible:s,onHide:u,styles:v,onChange:function(e){return d(c===r.SINGLE?e[0]:e)}})},ref:t}))}));t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{dialog__container:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialog:{width:540,position:"relative",backgroundColor:"#FFFFFF",borderRadius:t["corner-2"],boxSizing:"border-box"},dialog__close:{position:"absolute",right:t["s-4"],top:t["s-4"],display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",borderRadius:"50%"},"dialog__close--free":{top:"auto",right:270-t["s-7"]/2,bottom:-(t["s-7"]+t["s-4"]),width:t["s-7"],height:t["s-7"],borderWidth:"1px",borderStyle:"solid",borderColor:t["color-white"]},dialog__close__icon:{fontSize:t["icon-xs"],color:t["color-text1-3"]},"dialog__close--alternate":{color:t["color-white"]},dialog__banner:{overflow:"hidden",borderTopRightRadius:t["corner-2"],borderTopLeftRadius:t["corner-2"]},dialog__title:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boxSizing:"border-box",paddingTop:t["s-5"],paddingBottom:t["s-1"],paddingLeft:t["s-5"],paddingRight:t["s-5"]},dialog__title__text:{fontSize:t["font-size-title"],textAlign:"center",color:t["color-text1-4"],wordBreak:"break-all",overflowWrap:"break-word"},dialog__content:{paddingLeft:t["s-5"],paddingRight:t["s-5"],paddingBottom:t["s-5"],paddingTop:t["s-5"]},"dialog__content--title":{paddingTop:0},dialog__content__text:{fontSize:t["font-size-body-1"],lineHeight:1.5*t["font-size-body-1"],textAlign:"center",color:t["color-text1-3"],wordBreak:"break-all",overflowWrap:"break-word"},"dialog__icon-container":{display:"flex",justifyContent:"center",alignItems:"center",marginTop:t["s-4"],marginBottom:t["s-4"]},dialog__icon:{width:t["icon-xl"],height:t["icon-xl"],fontSize:t["icon-xl"],color:t["color-brand1-6"]},"dialog__icon--success":{color:t["color-success-2"]},"dialog__icon--warning":{color:t["color-warning-2"]},"dialog__icon--notice":{color:t["color-notice-2"]},"dialog__icon--error":{color:t["color-error-2"]},dialog__buttons:{display:"flex",alignItems:"center",borderTopColor:t["color-line1-2"],borderTopStyle:"solid",borderTopWidth:t["line-1"]},"dialog__buttons--row":{flexDirection:"row"},"dialog__buttons--column":{flexDirection:"column",alignItems:"stretch"},dialog__button:{height:t["s-12"],display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingLeft:t["s-3"],paddingRight:t["s-3"],boxSizing:"border-box"},"dialog__button--row":{flex:1,borderLeftWidth:t["line-1"],borderLeftStyle:t["line-solid"],borderLeftColor:t["color-line1-2"]},"dialog__button--column":{borderTopWidth:t["line-1"],borderTopStyle:t["line-solid"],borderTopColor:t["color-line1-2"]},"dialog__button--first":{borderTopWidth:0,borderLeftWidth:0},dialog__button__text:{flex:1,fontSize:t["font-size-subhead"],fontWeight:t["font-weight-4"],overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:t["color-brand1-6"],textAlign:"center"}}}},function(e,t,n){"use strict";t.__esModule=!0,t.confirm=t.alert=t.hide=t.show=t.current=void 0;var r=n(0),i=a(n(14)),o=a(n(78));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={fade:{styles:{enter:{opacity:1},exit:{opacity:0}},transition:{enter:{properties:["opacity"],timingFunction:"cubic-bezier(.55, 0, .55, .2)",duration:200},exit:{properties:["opacity"],timingFunction:"cubic-bezier(.55, 0, .55, .2)",duration:200}}},zoom:{styles:{enter:{transform:"scale(1)"},exit:{transform:"scale(0)"}},transition:{enter:{properties:["transform"],timingFunction:"cubic-bezier(.18, .89, .32, 1.28)",duration:200},exit:{properties:["transform"],timingFunction:"cubic-bezier(.18, .89, .32, 1.28)",duration:200}}}},u=function(e){var t=e.children,n=e.content,i=e.message,a=e.title,s=e.visible,u=e.buttons,d=e.buttonsDirection,f=e.effect,h=void 0===f?"zoom":f,p=e.onButtonClick,m=void 0===p?function(){}:p,v=e.styles,g=(u||[]).map((function(e){return"string"==typeof e?{text:e}:e})).filter((function(e){return!(!e||!e.text)})).map((function(e,t){return l({},e,{onClick:function(){e.onClick&&e.onClick(),m(l({},e,{index:t}))}})}));return(0,r.createElement)(o.default,{styles:v,visible:s,title:a,message:i,buttons:g,disablePortal:!0,buttonsDirection:d,transition:c[h]},("function"==typeof n?n(e):n)||t)},d=null;t.current=d;var f=function(e,n){var i=r.shared.Host.driver;if(!i)throw new Error("Dialog: use dialog after render App.");h();var o=t.current=d=document.createElement("div");return document.body.appendChild(o),(0,r.render)((0,r.createElement)(u,l({visible:!0,onButtonClick:n},e)),o,{driver:i}),function(){return h(o)}};t.show=f;var h=function(e){if(e||(e=d),e)try{(0,i.default)(e),document.body.removeChild(e)}catch(e){}t.current=d=null};t.hide=h;t.alert=function(e,t){var n=e.button,r=void 0===n?"":n,i=s(e,["button"]);return f(l({},i,{buttonsDirection:"row",buttons:[r]}),(function(e){t&&t(e),h()}))};t.confirm=function(e,t){var n=e.cancelButton,r=void 0===n?"":n,i=e.okButton,o=void 0===i?"":i,a=s(e,["cancelButton","okButton"]);return f(l({},a,{buttonsDirection:"row",buttons:[r,o]}),(function(e){t&&t(l({},e,{ok:!!e.index})),h()}))}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),o=r(n(35)),a=r(n(79)),s=r(n(36)),l=r(n(80)),c=r(n(232)),u=r(n(81)),d=r(n(82)),f=r(n(238)),h=n(247),p={state:"",valueName:"value",trigger:"onChange"},m=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,u.default)(this,e),t||(0,h.warning)("`this` is missing in `Field`, you should use like `new Field(this)`"),this.com=t,this.fieldsMeta={},this.cachedBind={},this.instance={},this.values=(0,l.default)({},r.values),this.processErrorMessage=r.processErrorMessage,this.afterValidateRerender=r.afterValidateRerender,this.options=(0,l.default)({parseName:!1,forceUpdate:!1,scrollToFirstError:!0,first:!1,onChange:function(){},autoUnmount:!0,autoValidate:!0},r),["init","getValue","getValues","setValue","setValues","getError","getErrors","setError","setErrors","validateCallback","validatePromise","getState","reset","resetToDefault","remove","spliceArray","addArrayValue","deleteArrayValue","getNames"].forEach((function(e){n[e]=n[e].bind(n)}))}var t;return(0,d.default)(e,null,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,t)}},{key:"getUseField",value:function(e){var t=this,n=e.useState,r=e.useMemo;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n(),o=(0,c.default)(i,2),a=o[1],s=r((function(){return t.create({setState:a},e)}),[a]);return s}}}]),(0,d.default)(e,[{key:"setOptions",value:function(e){(0,l.default)(this.options,e)}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=n.id,o=n.initValue,a=n.valueName,c=void 0===a?"value":a,u=n.trigger,d=void 0===u?"onChange":u,f=n.rules,p=void 0===f?[]:f,m=n.props,v=void 0===m?{}:m,g=n.getValueFromEvent,_=void 0===g?null:g,y=n.getValueFormatter,b=void 0===y?_:y,x=n.setValueFormatter,w=n.autoValidate,T=void 0===w||w,A=this.options.parseName;_&&(0,h.warning)("`getValueFromEvent` has been deprecated in `Field`, use `getValueFormatter` instead of it");var E,O=(0,l.default)({},v,r),M="default".concat(c[0].toUpperCase()).concat(c.slice(1));void 0!==o?E=o:void 0!==O[M]&&(E=O[M]);var S=this._getInitMeta(e);if((0,l.default)(S,{valueName:c,initValue:E,disabled:"disabled"in O&&O.disabled,getValueFormatter:b,setValueFormatter:x,rules:Array.isArray(p)?p:[p],ref:O.ref}),c in O&&(S.value=O[c],A?this.values=(0,h.setIn)(this.values,e,S.value):this.values[e]=S.value),!("value"in S))if(A){var C=(0,h.getIn)(this.values,e);void 0!==C?S.value=C:(S.value=E,this.values=(0,h.setIn)(this.values,e,S.value))}else{var R=this.values[e];void 0!==R?S.value=R:void 0!==E&&(S.value=E,this.values[e]=S.value)}var k=(0,s.default)({"data-meta":"Field",id:i||e,ref:this._getCacheBind(e,"".concat(e,"__ref"),this._saveRef)},c,x?x(S.value):S.value),P={};if(this.options.autoValidate&&!1!==T){P=(0,h.mapValidateRules)(S.rules,d);var L=function(n){if(n===d)return"continue";var r=P[n];k[n]=function(){t._validate(e,r,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t._callPropsEvent.apply(t,[n,O].concat(o)),t._reRender()}};for(var I in P)L(I)}return k[d]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t._callOnChange.apply(t,[e,P[d],d].concat(r)),t._callPropsEvent.apply(t,[d,O].concat(r)),t.options.onChange(e,S.value),t._reRender()},delete O[M],(0,l.default)({},O,k)}},{key:"_callPropsEvent",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e in t&&"function"==typeof t[e]&&t[e].apply(t,r)}},{key:"_getInitMeta",value:function(e){return e in this.fieldsMeta||(this.fieldsMeta[e]=(0,l.default)({},p)),this.fieldsMeta[e]}},{key:"_callOnChange",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=i[0],s=this._get(e);s&&(s.value=s.getValueFormatter?s.getValueFormatter.apply(this,i):(0,h.getValueFromEvent)(a),this.options.parseName?this.values=(0,h.setIn)(this.values,e,s.value):this.values[e]=s.value,this._resetError(e),t&&this._validate(e,t,n))}},{key:"_getCacheBind",value:function(e,t,n){var r=this.cachedBind[e]=this.cachedBind[e]||{};return r[t]||(r[t]=n.bind(this,e)),r[t]}},{key:"_setCache",value:function(e,t,n){(this.cachedBind[e]=this.cachedBind[e]||{})[t]=n}},{key:"_getCache",value:function(e,t){return(this.cachedBind[e]||{})[t]}},{key:"_saveRef",value:function(e,t){var n="".concat(e,"_field"),r=this.options.autoUnmount;if(!t&&r){var i=this.fieldsMeta[e];return i&&this._setCache(e,n,i),delete this.instance[e],void this.remove(e)}r&&!this.fieldsMeta[e]&&this._getCache(e,n)&&(this.fieldsMeta[e]=this._getCache(e,n),this.setValue(e,this.fieldsMeta[e]&&this.fieldsMeta[e].value,!1));var o=this._get(e);if(o){var s=o.ref;if(s){if("string"==typeof s)throw new Error("can not set string ref for ".concat(e));"function"==typeof s?s(t):"object"===(0,a.default)(s)&&"current"in s&&(s.current=t)}this.instance[e]=t}}},{key:"_validate",value:function(e,t,n){var r=this,i=this._get(e),o=i.value;i.state="loading";var a=this._getCache(e,n);a&&"function"==typeof a.abort&&a.abort(),a=new f.default((0,s.default)({},e,t),{messages:this.options.messages}),this._setCache(e,n,a),a.validate((0,s.default)({},e,o),(function(e){e&&e.length?(i.errors=(0,h.getErrorStrs)(e,r.processErrorMessage),i.state="error"):(i.errors=[],i.state="success"),r._reRender()}))}},{key:"getValue",value:function(e){return this.options.parseName?(0,h.getIn)(this.values,e):this.values[e]}},{key:"getValues",value:function(e){var t=this,n={};return e&&e.length?e.forEach((function(e){n[e]=t.getValue(e)})):(0,l.default)(n,this.values),n}},{key:"setValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e in this.fieldsMeta&&(this.fieldsMeta[e].value=t),this.options.parseName?this.values=(0,h.setIn)(this.values,e,t):this.values[e]=t,n&&this._reRender()}},{key:"setValues",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.options.parseName){this.values=(0,l.default)({},this.values,t);var r=this.getNames();r.forEach((function(t){var n=(0,h.getIn)(e.values,t);void 0!==n?e.fieldsMeta[t].value=n:e.values=(0,h.setIn)(e.values,t,e.fieldsMeta[t].value)}))}else Object.keys(t).forEach((function(n){e.setValue(n,t[n],!1)}));n&&this._reRender()}},{key:"setError",value:function(e,t){var n=Array.isArray(t)?t:t?[t]:[];e in this.fieldsMeta?this.fieldsMeta[e].errors=n:this.fieldsMeta[e]={errors:n},this.fieldsMeta[e].errors&&this.fieldsMeta[e].errors.length>0?this.fieldsMeta[e].state="error":this.fieldsMeta[e].state="",this._reRender()}},{key:"setErrors",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e.setError(n,t[n])}))}},{key:"getError",value:function(e){var t=this._get(e);return t&&t.errors&&t.errors.length?t.errors:null}},{key:"getErrors",value:function(e){var t=this,n=e||this.getNames(),r={};return n.forEach((function(e){r[e]=t.getError(e)})),r}},{key:"getState",value:function(e){var t=this._get(e);return t&&t.state?t.state:""}},{key:"formatGetErrors",value:function(e){var t=this.getErrors(e),n=null;for(var r in t)if(t.hasOwnProperty(r)&&t[r]){var i=t[r];n||(n={}),n[r]={errors:i}}return n}},{key:"validateCallback",value:function(e,t){for(var n=this,r=(0,h.getParams)(e,t),i=r.names,o=r.callback,a=i||this.getNames(),s={},c={},u=!1,d=0;d<a.length;d++){var p=a[d],m=this._get(p);m&&(m.rules&&m.rules.length&&(s[p]=m.rules,c[p]=this.getValue(p),u=!0,m.errors=[],m.state=""))}if(u){new f.default(s,{first:this.options.first,messages:this.options.messages}).validate(c,(function(e){var t=null;e&&e.length&&(t={},e.forEach((function(e){var n=e.field;t[n]||(t[n]={errors:[]}),t[n].errors.push(e.message)}))),t&&Object.keys(t).forEach((function(e){var r=n._get(e);r.errors=(0,h.getErrorStrs)(t[e].errors,n.processErrorMessage),r.state="error"}));var r=n.formatGetErrors(a);r&&(t=(0,l.default)({},r,t));for(var s=0;s<a.length;s++){var c=a[s],u=n._get(c);!u||!u.rules||t&&c in t||(u.state="success")}o&&o(t,n.getValues(i?a:[])),n._reRender(),"function"==typeof n.afterValidateRerender&&n.afterValidateRerender({errorsGroup:t,options:n.options,instance:n.instance})}))}else{var v=this.formatGetErrors(a);o&&o(v,this.getValues(i?a:[]))}}},{key:"validatePromise",value:(t=(0,o.default)(i.default.mark((function e(t,n){var r,o,a,s,l,c,u,d,p,m,v,g,_,y,b,x;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,h.getParams)(t,n),o=r.names,a=r.callback,s=o||this.getNames(),l={},c={},u=!1,d=0;case 6:if(!(d<s.length)){e.next=15;break}if(p=s[d],m=this._get(p)){e.next=11;break}return e.abrupt("continue",12);case 11:m.rules&&m.rules.length&&(l[p]=m.rules,c[p]=this.getValue(p),u=!0,m.errors=[],m.state="");case 12:d++,e.next=6;break;case 15:if(u){e.next=22;break}if(v=this.formatGetErrors(s),!a){e.next=21;break}return e.abrupt("return",a({errors:v,values:this.getValues(o?s:[])}));case 21:return e.abrupt("return",{errors:v,values:this.getValues(o?s:[])});case 22:return g=new f.default(l,{first:this.options.first,messages:this.options.messages}),e.next=25,g.validatePromise(c);case 25:if(_=e.sent,y=_&&_.errors||[],b=this._getErrorsGroup({errors:y,fieldNames:s}),x={errors:b,values:this.getValues(o?s:[])},e.prev=29,!a){e.next=34;break}return e.next=33,a(x);case 33:x=e.sent;case 34:e.next=39;break;case 36:return e.prev=36,e.t0=e.catch(29),e.abrupt("return",e.t0);case 39:return this._reRender(),e.abrupt("return",x);case 41:case"end":return e.stop()}}),e,this,[[29,36]])}))),function(){return t.apply(this,arguments)})},{key:"_getErrorsGroup",value:function(e){var t=this,n=e.errors,r=e.fieldNames,i=null;n&&n.length&&(i={},n.forEach((function(e){var t=e.field;i[t]||(i[t]={errors:[]}),i[t].errors.push(e.message)}))),i&&Object.keys(i).forEach((function(e){var n=t._get(e);n&&(n.errors=(0,h.getErrorStrs)(i[e].errors,t.processErrorMessage),n.state="error")}));var o=this.formatGetErrors(r);o&&(i=(0,l.default)({},o,i));for(var a=0;a<r.length;a++){var s=r[a],c=this._get(s);!c||!c.rules||i&&s in i||(c.state="success")}return i}},{key:"_reset",value:function(e,t){var n=this;"string"==typeof e&&(e=[e]);var r=!1,i=e||Object.keys(this.fieldsMeta);e||(this.values={}),i.forEach((function(e){var i=n._get(e);i&&(r=!0,i.value=t?i.initValue:void 0,i.state="",delete i.errors,delete i.rules,delete i.rulesMap,n.options.parseName?n.values=(0,h.setIn)(n.values,e,i.value):n.values[e]=i.value)})),r&&this._reRender()}},{key:"reset",value:function(e){this._reset(e,!1)}},{key:"resetToDefault",value:function(e){this._reset(e,!0)}},{key:"getNames",value:function(){var e=this.fieldsMeta;return Object.keys(e).filter((function(){return!0}))}},{key:"remove",value:function(e){var t=this;"string"==typeof e&&(e=[e]),e||(this.values={}),(e||Object.keys(this.fieldsMeta)).forEach((function(e){e in t.fieldsMeta&&delete t.fieldsMeta[e],t.options.parseName?t.values=(0,h.deleteIn)(t.values,e):delete t.values[e]}))}},{key:"addArrayValue",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._spliceArrayValue.apply(this,[e,t,0].concat(r))}},{key:"deleteArrayValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this._spliceArrayValue(e,t,n)}},{key:"_spliceArrayValue",value:function(e,t,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var s=o.length,l=n-s,c={},u=new RegExp("^(".concat(e,".)(\\d+)")),d=[],f=this.getNames();f.forEach((function(e){var r=u.exec(e);if(r){var i=parseInt(r[2]);if(i>=t+n){var o=c[i],a={from:e,to:e.replace(u,(function(e,t){return"".concat(t).concat(i-l)}))};o?o.push(a):c[i]=[a]}l>0&&i>=t&&i<t+n&&d.push(e)}}));var h=Object.keys(c).map((function(e){return{index:Number(e),list:c[e]}})).sort((function(e,t){return l>0?e.index-t.index:t.index-e.index}));if(h.forEach((function(e){e.list.forEach((function(e){r.fieldsMeta[e.to]=r.fieldsMeta[e.from]}))})),h.length>0){var p=h.slice(h.length-(l<0?-l:l),h.length);p.forEach((function(e){e.list.forEach((function(e){delete r.fieldsMeta[e.from]}))}))}else d.forEach((function(e){delete r.fieldsMeta[e]}));var m=this.getValue(e);m&&m.splice.apply(m,[t,n].concat(o)),this._reRender()}},{key:"spliceArray",value:function(e,t){var n=this;if(-1!==e.match(/{index}$/)){var r=e.replace("{index}","(\\d+)"),i=new RegExp("^".concat(r)),o={};this.getNames().forEach((function(n){var r=i.exec(n);if(r){var a=parseInt(r[1]);if(a>t){var s=o[a],l={from:n,to:"".concat(e.replace("{index}",a-1)).concat(n.replace(r[0],""))};s?s.push(l):o[a]=[l]}}}));var a=Object.keys(o).map((function(e){return{index:Number(e),list:o[e]}})).sort((function(e,t){return e.index<t.index}));if(a.length>0&&a[0].index===t+1){a.forEach((function(e){e.list.forEach((function(e){var t=n.getValue(e.from);n.setValue(e.to,t,!1)}))})),a[a.length-1].list.forEach((function(e){n.remove(e.from)}));var s=e.replace(".{index}","");s=s.replace("[{index}]","");var l=this.getValue(s);l&&l.length--}}else(0,h.warning)("key should match /{index}$/")}},{key:"_resetError",value:function(e){var t=this._get(e);delete t.errors,t.state=""}},{key:"_reRender",value:function(){this.com&&(!this.options.forceUpdate&&this.com.setState?this.com.setState({}):this.com.forceUpdate&&this.com.forceUpdate())}},{key:"_get",value:function(e){return e in this.fieldsMeta?this.fieldsMeta[e]:null}}]),e}();t.default=m},function(e,t,n){var r=n(233),i=n(234),o=n(235),a=n(237);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t,n){var r=n(236);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),o=r(n(35)),a=r(n(36)),s=r(n(81)),l=r(n(82)),c=n(22),u=r(n(239)),d=n(240);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(){}function m(e,t){var n,r,i={};return Object.keys(t).forEach((function(o){n=t[o],r=e[o],Array.isArray(n)||(n=[n]),n.forEach((function(t){t.validator=(0,d.getValidationMethod)(t),t.field=o,t.validator&&(i[o]=i[o]||[],i[o].push({rule:t,value:r,source:e,field:o}))}))})),i}var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.default)(this,e),this._rules=t,this._options=h({},n,{messages:h({},u.default,{},n.messages)}),this.complete=[]}var t;return(0,l.default)(e,[{key:"abort",value:function(){for(var e=0;e<this.complete.length;e++)this.complete[e]=p}},{key:"messages",value:function(e){this._options.messages=Object.assign({},this._options.messages,e)}},{key:"validate",value:function(e,t){var n=this;if(!t)return this.validatePromise(e);if(this._rules&&0!==Object.keys(this._rules).length){var r=m(e,this._rules);0===Object.keys(r).length&&t(null),this.complete.push((function(e){var n,r,i,o=[],a={};for(n=0;n<e.length;n++)i=e[n],Array.isArray(i)?o=o.concat(i):o.push(i);if(o.length)for(n=0;n<o.length;n++)a[r=o[n].field]=a[r]||[],a[r].push(o[n]);else o=null,a=null;t(o,a)}));var i=this.complete.length;(0,c.asyncMap)(r,this._options,(function(e,t){var r=e.rule;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e;Array.isArray(n)||(n=[n]),n.length&&r.message&&(n=[].concat(r.message)),n=n.map((0,c.complementError)(r)),t(n)}r.field=e.field;var o=r.validator(r,e.value,i,n._options);o&&o.then&&o.then((function(){return i()}),(function(e){return i(e)}))}),(function(e){n.complete[i-1](e)}))}else t&&t(null)}},{key:"validatePromise",value:(t=(0,o.default)(i.default.mark((function e(t){var n,r,a=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._rules&&0!==Object.keys(this._rules).length){e.next=2;break}return e.abrupt("return",Promise.resolve({errors:null}));case 2:if(n=m(t,this._rules),0!==Object.keys(n).length){e.next=5;break}return e.abrupt("return",Promise.resolve({errors:null}));case 5:return e.next=7,(0,c.asyncMapPromise)(n,this._options,function(){var e=(0,o.default)(i.default.mark((function e(t){var n,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.rule).field=t.field,e.prev=2,e.next=5,n.validator(n,t.value,null,a._options);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r=e.t0;case 11:if(!r){e.next=17;break}return Array.isArray(r)||(r=[r]),r.length&&n.message&&(r=[].concat(n.message)),e.abrupt("return",r.map((0,c.complementError)(n)));case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}());case 7:return r=e.sent,e.abrupt("return",(0,c.processErrorResults)(r));case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={default:"%s ",required:"%s ",format:{number:"%s ",email:"%s  email ",url:"%s  URL ",tel:"%s "},number:{length:"%s  %s",min:"%s  %s",max:"%s  %s",minLength:"%s  %s",maxLength:"%s  %s"},string:{length:"%s  %s",min:"%s  %s",max:"%s  %s",minLength:"%s  %s",maxLength:"%s  %s"},array:{length:"%s  %s",minLength:"%s  %s",maxLength:"%s  %s"},pattern:"%s  %s  %s"}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.validateFunc=o,t.getValidationMethod=function(e){if("function"==typeof e.validator)return e.validator;for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];if("required"!==r&&r in i.default)return o(i.default[r],r)}if("required"in e&&e.required)return o(i.default.required,"required");return null};var i=r(n(241));function o(e,t){return function(n,r,o,a){var s=[];if("required"!==t){var l=[];if(i.default.required(n,r,l,a),l.length>0)return"required"in n&&n.required?o?o(l):Promise.reject(l):o?o([]):Promise.resolve(null)}return e(n,r,s,a),o?o(s):Promise?Promise.resolve(s):void 0}}},function(e,t,n){"use strict";var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(242)),o=r(n(243)),a=r(n(244)),s=r(n(245)),l=r(n(246)),c={required:i.default,format:o.default,min:a.default,max:a.default,minLength:s.default,maxLength:s.default,length:s.default,pattern:l.default};t.default=c},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(22));var o=function(e,t,n,r){null!=t&&""!==t&&0!==t.length||n.push(i.format(r.messages.required,e.aliasName||e.field))};t.default=o},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(22)),o={email:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),number:/\d*/,tel:/^(1\d{10})$|(((400)-(\d{3})-(\d{4}))|^((\d{7,8})|(\d{3,4})-(\d{7,8})|(\d{7,8})-(\d{1,4}))$)$|^([ ]?)$/},a={number:function(e){return!isNaN(e)&&("number"==typeof e||"string"==typeof e&&!!e.match(o.number))},email:function(e){return"string"==typeof e&&!!e.match(o.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(o.url)},tel:function(e){return"string"==typeof e&&!!e.match(o.tel)}};var s=function(e,t,n,r){var o=e.format;["email","number","url","tel"].indexOf(o)>-1&&!a[o](t)&&n.push(i.format(r.messages.format[o],e.aliasName||e.field,e.format))};t.default=s},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(22));var o=function(e,t,n,r){var o=null,a="string"==typeof t;if("number"==typeof t?o="number":a&&(o="string"),!o)return!1;var s=t,l=Number(e.max),c=Number(e.min);(c||l)&&(a&&(s=Number(s)),s<c?n.push(i.format(r.messages[o].min,e.aliasName||e.field,e.min)):s>l&&n.push(i.format(r.messages[o].max,e.aliasName||e.field,e.max)))};t.default=o},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(22));var o=function(e,t,n,r){var o=null,a="number"==typeof t,s=Array.isArray(t);if(a?o="number":"string"==typeof t?o="string":s&&(o="array"),!o)return!1;var l=t,c=Number(e.length),u=Number(e.maxLength),d=Number(e.minLength);(d||u||c)&&(a&&(l="".concat(l)),l=l.length,c&&l!==e.length?n.push(i.format(r.messages[o].length,e.aliasName||e.field,e.length)):l<d?n.push(i.format(r.messages[o].minLength,e.aliasName||e.field,e.minLength)):l>u&&n.push(i.format(r.messages[o].maxLength,e.aliasName||e.field,e.maxLength)))};t.default=o},function(e,t,n){"use strict";var r=n(26);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(22));var o=function(e,t,n,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.test(t)||n.push(i.format(r.messages.pattern,e.aliasName||e.field,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||n.push(i.format(r.messages.pattern,e.aliasName||e.field,t,e.pattern))}};t.default=o},function(e,t,n){"use strict";(function(e){var r=n(21);Object.defineProperty(t,"__esModule",{value:!0}),t.getIn=function(e,t){if(!e)return e;var n="string"==typeof t?t.replace(/\[/,".").replace(/\]/,"").split("."):"",r=n.length;if(!r)return;for(var i=e,o=0;o<r&&i;++o)i=i[n[o]];return i},t.setIn=function(e,t,n){return function e(t,n,r,a){if(a>=r.length)return n;var s=r[a],l=e(t&&t[s],n,r,a+1);if(!t){var c=isNaN(s)?{}:[];return c[s]=l,c}if(Array.isArray(t)){var u=[].concat(t);return u[s]=l,u}return(0,o.default)({},t,(0,i.default)({},s,l))}(e,n,"string"==typeof t?t.replace(/\[/,".").replace(/\]/,"").split("."):"",0)},t.deleteIn=function(e,t){if(!e)return;var n="string"==typeof t?t.replace(/\[/,".").replace(/\]/,"").split("."):"",r=n.length;if(!r)return e;for(var i=e,o=0;o<r&&i;++o)o===r-1?delete i[n[o]]:i=i[n[o]];return e},t.getErrorStrs=function(e,t){if(e)return e.map((function(e){var n=e.message||e;return"function"==typeof t?t(n):n}));return e},t.getParams=function(e,t){var n="string"==typeof e?[e]:e,r=t;void 0===t&&"function"==typeof n&&(r=n,n=void 0);return{names:n,callback:r}},t.getValueFromEvent=function(e){if(!e||!e.target)return e;var t=e.target;if("checkbox"===t.type)return t.checked;if("radio"===t.type)return t.value?t.value:t.checked;return t.value},t.mapValidateRules=function(e,t){var n={};return e.forEach((function(e){!function(e,t,n){var r=(0,o.default)({},t);r.trigger||(r.trigger=[n]);"string"==typeof r.trigger&&(r.trigger=[r.trigger]);for(var i=0;i<r.trigger.length;i++){var a=r.trigger[i];a in e?e[a].push(r):e[a]=[r]}delete r.trigger}(n,e,t)})),n},t.warning=void 0;var i=r(n(36)),o=r(n(80));var a=function(){};void 0!==e&&e.env;var s=a;t.warning=s}).call(this,n(248))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=s(n(1)),o=n(4),a=s(n(250));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var u=(0,r.forwardRef)((function(e,t){var n=e.columns,s=void 0===n?3:n,u=e.cells,d=void 0===u?[]:u,f=e.bordered,h=void 0===f||f,p=e.horizontalAlign,m=void 0===p?"center":p,v=e.verticalAlign,g=void 0===v?"center":v,_=e.onCellClick,y=void 0===_?function(){}:_,b=e.renderCell,x=void 0===b?function(){return null}:b,w=e.style,T=void 0===w?{}:w,A=c(e,["columns","cells","bordered","horizontalAlign","verticalAlign","onCellClick","renderCell","style"]),E=(0,o.useStyles)(a.default,A,(function(e){return{grid:l({},e(["grid",{"grid--no-border":!h}]),{},T),row:e(["grid__row",{"grid--no-border__row":!h}]),rowFirst:e(["grid__row--first"]),cell:l({},e(["grid__cell",{"grid--no-border__cell":!h}]),{justifyContent:g,alignItems:m}),cellFirst:e(["grid__cell--first"])}})),O=[],M=[],S=0;return d.forEach((function(e,t){var n=e.colSpan,r=void 0===n?1:n,i=c(e,["colSpan"]);S+=r,M.push({cell:i,style:l({},i.style,{flex:r}),className:i.className,colSpan:r,index:t}),(S>=s||t===d.length-1)&&(O.push(M),S=0,M=[])})),(0,r.createElement)(i.default,l({},A,{ref:t,style:E.grid}),O.map((function(e,t){return(0,r.createElement)(i.default,{key:"row_"+t,style:l({},E.row,{},0===t?E.rowFirst:{})},e.map((function(e,t){return(0,r.createElement)(i.default,{key:"col_"+t,onClick:function(t){return y(e.index,t)},className:e.className,style:l({},E.cell,{},0===t?E.cellFirst:{},{},e.style)},x(e))})))})))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core;return{grid:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",backgroundColor:t["color-white"],borderWidth:t["line-1"],borderStyle:t["line-solid"],borderColor:t["color-line1-2"]},"grid--no-border":{borderWidth:0},grid__row:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",borderTopWidth:t["line-1"],borderTopStyle:t["line-solid"],borderTopColor:t["color-line1-2"]},"grid--no-border__row":{borderTopWidth:0},grid__cell:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1,borderLeftWidth:t["line-1"],borderLeftStyle:t["line-solid"],borderLeftColor:t["color-line1-2"]},"grid__cell--first":{borderLeftWidth:0},"grid__row--first":{borderTopWidth:0},"grid--no-border__cell":{borderLeftWidth:0}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=f(n(7)),i=n(0),o=n(4),a=f(n(1)),s=f(n(17)),l=f(n(6)),c=f(n(68)),u=n(252),d=f(n(253));function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}var v=(0,i.forwardRef)((function(e,t){var n=e.className,f=e.value,p=e.defaultValue,v=void 0===p?1:p,g=e.max,_=void 0===g?1/0:g,y=e.min,b=void 0===y?-1/0:y,x=e.step,w=void 0===x?1:x,T=e.editable,A=void 0===T||T,E=e.disabled,O=void 0!==E&&E,M=e.focused,S=void 0!==M&&M,C=e.onBeforeChange,R=void 0===C?function(){return Promise.resolve()}:C,k=e.onChange,P=void 0===k?function(){}:k,L=e.style,I=void 0===L?{}:L,F=e.onFocus,D=void 0===F?function(){}:F,N=e.onBlur,z=void 0===N?function(){}:N,j=e.styles,B=void 0===j?{}:j,U=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","value","defaultValue","max","min","step","editable","disabled","focused","onBeforeChange","onChange","style","onFocus","onBlur","styles"]),V=(0,i.useState)(!1),H=V[0],G=V[1],W=(0,i.useState)((0,u.toNumber)(v)),X=W[0],Y=W[1];"value"in e&&Y((0,u.toNumber)(f)),"focused"in e&&G(S);var q=function(){return!(0,u.isNumber)(X)||b!==-1/0&&X<=b},K=function(){return!(0,u.isNumber)(X)||_!==1/0&&X>=_},Q=(0,i.useState)(q()),J=Q[0],Z=Q[1],$=(0,i.useState)(K()),ee=$[0],te=$[1];(0,i.useEffect)((function(){re(X),Z(q()),te(K())}),[X]);var ne=function(e){re(e),P(e)},re=function(t){if("value"in e)return null;Y(t)},ie=(0,o.useStyles)(d.default,{styles:B},(function(e){return{numberPicker:e("number-picker"),textInput:e(["number-picker__input",{"number-picker--focused__input":H,"number-picker--disabled__input":O}]),decrease:e(["number-picker__button",{"number-picker--disabled__button":O||J}]),decreaseIcon:e(["number-picker__button-icon",{"number-picker--disabled__button-icon":O||J}]),increase:e(["number-picker__button",{"number-picker--disabled__button":O||ee}]),increaseIcon:e(["number-picker__button-icon",{"number-picker--disabled__button-icon":O||ee}])}})),oe=function(){var e=m(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((t=X-w)>=b)){e.next=8;break}return e.next=5,R(t);case 5:ne(t),e.next=12;break;case 8:if(!(X>b&&t<b)){e.next=12;break}return e.next=11,R(b);case 11:ne(b);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=m(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((t=X+w)<=_)){e.next=8;break}return e.next=5,R(t);case 5:ne(t),e.next=12;break;case 8:if(!(X<_&&t>_)){e.next=12;break}return e.next=11,R(_);case 11:ne(_);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return(0,i.createElement)(a.default,h({},U,{style:h({},ie.numberPicker,{},I),className:n,ref:t}),(0,i.createElement)(s.default,{disabled:O||J,type:"primary",styles:B,style:ie.decrease,onClick:oe},(0,i.createElement)(l.default,{name:"minus",style:ie.decreaseIcon})),(0,i.createElement)(c.default,{controlled:!0,style:ie.textInput,value:X,editable:A&&!O,keyboardType:"number-pad",onFocus:function(e){G(!0),D(e)},onBlur:function(e){var t;G(!1),z(e),ne((t=e.value||e.target.value,(0,u.isNumber)(t)?t>_?_:t<b?b:(0,u.toNumber)(t):""))},onInput:function(e){ne(e.value?parseInt(e.value):"")}}),(0,i.createElement)(s.default,{disabled:O||ee,type:"primary",styles:B,style:ie.increase,onClick:ae},(0,i.createElement)(l.default,{name:"add",style:ie.increaseIcon})))}));t.default=v},function(e,t,n){"use strict";function r(e){return""!==e&&null!==e&&("number"==typeof e&&!isNaN(e)||!isNaN(Number(e)))}t.__esModule=!0,t.isNumber=r,t.toNumber=function(e){if(!r(e))return e;return Number(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{"number-picker":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},"number-picker__input":{textAlign:"center",flexDirection:"row",justifyContent:"space-between",alignItems:"center",position:"relative",backgroundColor:n["color-white"],borderWidth:n["line-1"],borderStyle:n["line-solid"],borderColor:n["color-line1-3"],marginLeft:n["s-2"],marginRight:n["s-2"],width:n["s-20"],height:n["s-11"],borderRadius:n["corner-1"],color:n["color-text1-4"],fontSize:n["font-size-subhead"],outline:"none",appearance:"none"},"number-picker__button":{width:n["s-14"],height:n["s-11"],borderWidth:n["line-1"],borderStyle:n["line-solid"],borderColor:n["color-brand1-6"],borderRadius:n["corner-1"],paddingLeft:0,paddingRight:0},"number-picker__button-icon":{color:n["color-white"],fontSize:n["icon-s"]},"number-picker--disabled__input":{backgroundColor:n["color-fill1-1"],borderColor:n["color-line1-1"],color:n["color-text1-1"]},"number-picker--disabled__button":{borderColor:n["color-line1-1"],backgroundColor:n["color-fill1-1"]},"number-picker--disabled__button-icon":{color:n["color-text1-1"]},"number-picker--focused__input":{borderColor:n["color-brand1-6"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=u(n(1)),o=u(n(2)),a=u(n(17)),s=n(4),l=n(11),c=u(n(255));function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=function(e,t){return e=d({},e),Object.keys(t).forEach((function(n){e[n]&&t[n]&&(e[n]=d({},e[n],{},t[n]))})),d({},t,{},e)},h=(0,r.forwardRef)((function(e,t){var n=e.size,u=void 0===n?"medium":n,h=e.type,p=void 0===h?"normal":h,m=e.disabled,v=void 0!==m&&m,g=e.current,_=void 0===g?1:g,y=e.total,b=void 0===y?1:y,x=e.styles,w=e.onChange,T=void 0===w?function(){}:w,A=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["size","type","disabled","current","total","styles","onChange"]),E=(0,l.useLocale)("Pagination",A,{prev:"previous",next:"next"}),O=(0,r.useState)(_||1),M=O[0],S=O[1];(0,r.useEffect)((function(){(!b||b<1)&&(b=1),!_||_<0?(_=1,S(1)):S(_>b?b:_)}),[_]);var C,R=v||1===M,k=v||M===b,P="medium"===u?"medium":"large",L=(0,s.useStyles)(c.default,{styles:x},(function(e){return{pagination:e("pagination"),first:e("pagination--first"),prev:e(["pagination--prev","mini"===p?"pagination--prev__mini":null]),next:e("pagination--next"),last:e("pagination--last"),current:e(["pagination--number","pagination--current"]),total:e(["pagination--number","pagination--total"])}})),I=function(e,t){S(e),T&&T(e,t)},F={button:{paddingLeft:"22rpx",paddingRight:"22rpx"},button__icon:{fontSize:"24rpx",marginLeft:0,marginRight:0},"button--large__icon":{fontSize:"32rpx"},"button--large":{paddingLeft:"23rpx",paddingRight:"23rpx"}},D={button:{paddingLeft:"24rpx",paddingRight:"24rpx"},button__icon:{fontSize:"24rpx",marginLeft:0,marginRight:0},"button--large__icon":{fontSize:"32rpx",marginRight:0,marginLeft:0},"button--large":{paddingLeft:"24rpx",paddingRight:"24rpx"}};return"function"==typeof x?C=d({},x((0,s.useTheme)())):"object"==typeof x&&(C=d({},x)),(0,r.createElement)(i.default,d({},A,{style:L.pagination,ref:t}),"mini"!==p?(0,r.createElement)(a.default,{disabled:R,size:P,style:L.first,styles:f(C,F),prefixIcon:"double-arrow-left",onClick:function(e){I(1,e)}}):null,(0,r.createElement)(a.default,{disabled:R,size:P,prefixIcon:"arrow-left",onClick:function(e){I(M-1,e)},style:L.prev,styles:f(C,D)},E.prev),"mini"!==p?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.default,{style:L.current},""+M),(0,r.createElement)(o.default,{style:L.total},"/",""+b)):null,(0,r.createElement)(a.default,{disabled:k,size:P,suffixIcon:"arrow-right",onClick:function(e){I(M+1,e)},style:L.next,styles:f(C,D)},E.next),"mini"!==p?(0,r.createElement)(a.default,{disabled:k,size:P,suffixIcon:"double-arrow-right",onClick:function(e){I(b,e)},style:L.last,styles:f(C,F)}):null)}));t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{pagination:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},"pagination--first":{},"pagination--last":{marginLeft:n["s-3"]},"pagination--prev":{marginLeft:n["s-3"]},"pagination--prev__mini":{marginLeft:0},"pagination--next":{marginLeft:n["s-3"]},"pagination--current":{marginLeft:n["s-3"],color:n["color-brand1-6"]},"pagination--total":{color:n["color-text1-4"]},"pagination--number":{fontSize:n["font-size-subhead"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=u(n(1)),a=u(n(2)),s=u(n(10)),l=u(n(83)),c=n(84);function u(e){return e&&e.__esModule?e:{default:e}}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=(0,r.forwardRef)((function(e,t){var n=e.percent,u=void 0===n?0:n,f=e.barWidth,h=e.color,p=e.size,m=e.style,v=void 0===m?{}:m,g=e.children,_=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["percent","barWidth","color","size","style","children"]),y=(0,i.useStyles)(l.default,_,(function(e){return{progress:e("circle-progress"),track:e("circle-progress__track"),bar:e("circle-progress__bar"),textWrap:e("circle-progress__text-wrap"),text:e("circle-progress__text")}}));p&&(y.progress.width=(0,c.addRpx)(p),y.progress.height=(0,c.addRpx)(p)),f&&(y.track.strokeWidth=(0,c.addRpx)(f),y.bar.strokeWidth=(0,c.addRpx)(f)),h&&(y.bar.stroke=h);var b,x=Math.min(Math.max(u,0),100),w=50-(0,c.getValue)(y.bar.strokeWidth)/2,T="\n    M 50,50 \n    m 0,-"+(b=50-(0,c.getValue)(y.track.strokeWidth)/2)+" \n    a "+b+","+b+" 0 1 1 0,"+2*b+" \n    a "+b+","+b+" 0 1 1 0,-"+2*b+"\n  ",A=100===x?T:function(e,t){var n=360*t/100,r=n*(Math.PI/180),i=(Math.sin(r)*e).toFixed(2),o=-(Math.cos(r)*e).toFixed(2);return["M",0,-e,"A",e,e,0,Number(n>180),1,i,o].join(" ")}(w,x);return(0,r.createElement)(o.default,d({},_,{ref:t,style:d({},y.progress,{},v)}),(0,r.createElement)("svg",{viewBox:"0 0 100 100",width:(0,c.getValue)(y.progress.width),height:(0,c.getValue)(y.progress.width)},(0,r.createElement)("path",{d:T,fill:"none",stroke:y.track.stroke,"stroke-width":(0,c.getValue)(y.track.strokeWidth),strokeWidth:(0,c.getValue)(y.track.strokeWidth)}),(0,r.createElement)("g",{transform:A===T?"":"translate(50 50)"},(0,r.createElement)("path",{d:A,fill:"none",stroke:y.bar.stroke,"stroke-linecap":y.bar.strokeLinecap,strokeLinecap:y.bar.strokeLinecap,"stroke-width":8,strokeWidth:8}))),(0,r.createElement)(o.default,{style:y.textWrap},(0,s.default)(g)?g:(0,r.createElement)(a.default,{style:y.text},g||x+"%")))}));t.default=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(1)),a=l(n(83)),s=(l(n(13)),n(84));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.percent,l=void 0===n?0:n,u=e.barWidth,d=e.color,f=e.style,h=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["percent","barWidth","color","style"]),p=(0,r.useState)(0),m=p[0],v=p[1],g=(0,r.useRef)(),_=(0,i.useStyles)(a.default,h,(function(e){return{progress:e("linear-progress"),track:e("linear-progress__track"),bar:e("linear-progress__bar")}}));return u&&(_.progress.height=(0,s.addRpx)(u),_.track.height=(0,s.addRpx)(u),_.track.borderRadius=(0,s.addRpx)(u),_.bar.borderRadius=(0,s.addRpx)(u),_.bar.height=(0,s.addRpx)(u)),d&&(_.bar.backgroundColor=d),(0,r.useEffect)((function(){var e=Math.min(Math.max(l,0),100)+"%";e!==m&&v(e)})),(0,r.createElement)(o.default,c({},h,{ref:t,style:c({},_.progress,{},f)}),(0,r.createElement)(o.default,{style:_.track,ref:g},(0,r.createElement)(o.default,{style:c({},_.bar,{width:m})})))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{radio__container:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",paddingTop:t["s-1"],paddingBottom:t["s-1"]},radio__circle:{height:t["s-6"],width:t["s-6"],borderRadius:t["corner-round"],borderWidth:t["line-1"],borderStyle:"solid",borderColor:t["color-line1-3"],justifyContent:"center",alignItems:"center",backgroundColor:t["color-white"]},"radio--selected__circle":{borderWidth:t["line-1"],borderColor:t["color-brand1-6"]},"radio--disabled__circle":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"radio--selected--disabled__circle":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},radio__point:{width:t["s-3"],height:t["s-3"],borderRadius:t["corner-round"],backgroundColor:t["color-brand1-6"]},"radio--selected__point":{},"radio--selected--disabled__point":{backgroundColor:t["color-text1-1"]},radio__text:{fontSize:t["font-size-subhead"],color:t["color-text1-3"],marginLeft:t["s-3"],marginRight:t["s-3"]},"radio--selected__text":{color:t["color-text1-3"]},"radio--disabled__text":{color:t["color-text1-1"]},"radio--selected--disabled__text":{color:t["color-text1-1"]}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=d(n(9)),o=d(n(10)),a=d(n(8)),s=n(4),l=d(n(1)),c=d(n(260)),u=d(n(85));function d(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=(0,r.forwardRef)((function(e,t){var n=e.children,d=e.disabled,h=e.style,p=e.defaultValue,m=e.value,v=e.direction,g=void 0===v?"vertical":v,_=e.readOnly,y=e.onChange,b=e.data,x=void 0===b?[]:b,w=e.styles,T=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","disabled","style","defaultValue","value","direction","readOnly","onChange","data","styles"]),A=(0,r.useState)(p),E=A[0],O=A[1],M="value"in e,S=(0,s.useStyles)(c.default,{styles:w},(function(e){return{group:f({},e("radio--group"),{},e("radio--group__"+g),{},h),radio:e(["radio--item__"+g])}}));M&&O(m);var C,R=function(e,t,n,r){e||M||O(t),r||_||!e||(M||O(t),y&&y(t,n))};return C=x&&x.length>0?x.map((function(e,t){var n=d||e.disabled,i=e.label||e.text||e.value;return(0,r.createElement)(u.default,f({},e,{key:"radio_"+t,style:S.radio,styles:w,disabled:n,value:e.value,checked:e.checked||e.value===E,onChange:function(t,r){return R(t,e.value,r,n)}}),i)})):a.default.map(n,(function(e,t){if((0,o.default)(e)){var n=e.props,r=n.value,a=n.checked,s=n.disabled,l=d||s;return(0,i.default)(e,{key:"mt_rd_"+t,onChange:function(e,t){return R(e,r,t,l)},checked:a||r===E,disabled:l,style:S.radio,styles:w})}})),(0,r.createElement)(l.default,f({ref:t,style:S.group},T),C)}));t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){return{"radio--group":{},"radio--group__horizontal":{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",flexWrap:"wrap"},"radio--item__horizontal":{marginRight:e.Core["s-2"]},"radio--item__vertical":{}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=n(4),a=f(n(1)),s=f(n(262)),l=f(n(264)),c=f(n(265)),u=f(n(37)),d=n(38);function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}!function(e){e[e.single=1]="single",e[e.double=2]="double"}(r||(r={}));var p=function(e,t){var n=e.min,f=e.max,p=e.count,m=e.value,v=e.defaultValue,g=e.step,_=e.disabled,y=e.marks,b=e.readOnly,x=e.style,w=e.tooltipVisible,T=e.onChange,A=e.onMove,E=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["min","max","count","value","defaultValue","step","disabled","marks","readOnly","style","tooltipVisible","onChange","onMove"]),O=(0,i.useState)(function(e,t,n){var r=e;return Array.isArray(r)||(r=[r]),r.map((function(e){return e>t?t:e<n?n:e})).reduce((function(e,r,i){var o;return h({},e,((o={})[i]=(r-n)/(t-n),o))}),{})}(m||v,f,n)),M=O[0],S=O[1],C=(0,i.useState)(),R=C[0],k=C[1],P=(0,i.useState)(!1),L=P[0],I=P[1],F=(0,i.useState)(0),D=F[0],N=F[1],z=p===r.double?{0:(0,i.useRef)(),1:(0,i.useRef)()}:{0:(0,i.useRef)()},j=(0,o.useStyles)(c.default,E,(function(e){var t=_?"--disabled":"";return{range:h({},e("range"),{},x),track:e(["range__track","range"+t+"__track"]),trackSelected:e(["range__track--selected","range"+t+"__track--selected"]),thumb:e(["range__thumb","range"+t+"__thumb"]),thumbActive:e(["range__thumb","range__thumb--active","range"+t+"__thumb"]),mark:e(["range__mark","range"+t+"__mark"]),markActive:e(["range__mark","range__mark--active","range"+t+"__mark"]),label:e(["range__label","range"+t+"__label"]),labelActive:e(["range__label","range__label--active","range"+t+"__label--active"]),tooltip:e("range__tooltip"),arrow:e("range__arrow")}}));function B(e){return(e*(f-n)+n).toFixed((0,d.getPrecision)(g))}var U=(0,i.useMemo)((function(){var e=h({},y);if(g)for(var t=n;t<=f;t+=g)e[t]=t;return Object.keys(e).map(parseFloat).sort((function(e,t){return e-t}))}),[y,g,n,f]);function V(e){var t=U.map((function(t){return Math.abs(t-e-n)}));return U[t.indexOf(Math.min.apply(Math,t))]}function H(){var e=Object.keys(M).map((function(e){return+B(M[e])})).sort((function(e,t){return e-t}));return 1===e.length?e[0]:e}function G(e,r){(0,d.getNodeRect)(t.current).then((function(t){var i,o=(0,d.getTouchPosition)(e)-t.left,a=V(Math.max(Math.min(o,t.width),0)/t.width*(f-n));S(h({},M,((i={})[r]=(a-n)/(f-n),i)))}))}(0,i.useEffect)((function(){var e={};Object.keys(M).forEach((function(t){return e[t]=(V(M[t]*(f-n))-n)/(f-n)})),S(e)}),[]),(0,i.useEffect)((function(){(0,d.getNodeRect)(t.current).then((function(e){N(e.width)}))}),[]);var W=Object.values(M).sort((function(e,t){return e-t}));return(0,i.createElement)(u.default.Provider,{value:{styles:j}},(0,i.createElement)(a.default,{ref:t,style:j.range,onTouchStart:function(e){if(!_&&!b){var t=(0,d.getTouchPosition)(e);(0,d.getClosestThumbIndex)(t,z).then((function(t){I(!0),k(t),G(e,t),(0,d.pauseEvent)(e)}))}},onTouchMove:function(e){L&&(G(e,R),(0,d.pauseEvent)(e),A&&A(H(),e))},onTouchEnd:function(e){if(L){I(!1),k(null);var t=H();T&&T(t,e),(0,d.pauseEvent)(e)}}},(0,i.createElement)(s.default,{min:n,max:f,step:g,marks:y,ratio:W,rangeWidth:D}),Object.keys(z).map((function(e){return(0,i.createElement)(l.default,{key:e,ref:z[e],isActive:""+R==""+e,tooltipVisible:w,offset:M[e]*D,value:B(M[e])})}))))};p.defaultProps={min:0,max:100,step:1,count:1,disabled:!1,readOnly:!1,onChange:d.noop,marks:{}};var m=(0,i.forwardRef)(p);t.default=m},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(1)),o=l(n(2)),a=l(n(37)),s=n(38);function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.min,l=e.max,u=e.ratio,d=e.marks,f=e.rangeWidth,h=(0,r.useContext)(a.default).styles,p=[],m=[];(0,s.handleMarks)(d).forEach((function(e){var t=(e-n)/(l-n)*f,a=(0,s.isInRange)((e-n)/(l-n),u);p.push((0,r.createElement)(i.default,{key:"mark-"+e,style:c({},a?h.markActive:h.mark,{left:t+s.unit})})),m.push((0,r.createElement)(i.default,{key:"label-"+e,style:c({},a?h.labelActive:h.label,{left:t+s.unit})},(0,r.createElement)(o.default,null,d[e])))}));var v=2===u.length?u[0]*f:0,g=2===u.length?Math.abs(u[1]-u[0])*f:u[0]*f;return(0,r.createElement)(i.default,{ref:t,style:c({},h.track)},(0,r.createElement)(i.default,{ref:t,style:c({},h.trackSelected,{left:v+s.unit,width:g+s.unit})}),(0,r.createElement)(i.default,null,p),(0,r.createElement)(i.default,null,m))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.px2rem=o,t.getEl=function(e){return(0,i.default)(e)},t.getComponentRect=function(e,t){if(t){var n=(e=(0,i.default)(e)).getBoundingClientRect();t({result:!0,size:{x:o(n.x),y:o(n.y),width:o(n.width),height:o(n.height),top:o(n.top),bottom:o(n.bottom),left:o(n.left),right:o(n.right)}})}},t.rAF=void 0;var r,i=(r=n(13))&&r.__esModule?r:{default:r};function o(e){return 750*e/window.innerWidth}var a=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}).bind(window);t.rAF=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(1)),o=l(n(2)),a=l(n(37)),s=n(38);function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e,t){var n,l=e.offset,u=e.isActive,d=e.tooltipVisible,f=e.value,h=(0,r.useContext)(a.default).styles;n=(0,s.isNil)(d)?u?"flex":"none":d?"flex":"none";var p=u?h.thumbActive:h.thumb;return(0,r.createElement)(i.default,{style:c({},p,{left:l+s.unit}),ref:t},"flex"===n&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(i.default,{style:h.tooltip},(0,r.createElement)(o.default,null,""+f)),(0,r.createElement)(i.default,{style:h.arrow})))};u.defaultProps={offset:0};var d=(0,r.forwardRef)(u);t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{range:{position:"relative",boxSizing:"border-box",touchAction:"none",height:n["s-8"]},range__track:{position:"relative",top:n["s-4"],height:n["s-1"]/2,backgroundColor:n["color-line1-3"]},"range__track--selected":{position:"absolute",height:n["s-1"]/2,backgroundColor:n["color-brand1-6"]},"range--disabled__track":{backgroundColor:n["color-line1-3"]},"range--disabled__track--selected":{backgroundColor:n["color-line1-3"]},range__thumb:{position:"absolute",width:n["s-8"],height:n["s-8"],marginLeft:-n["s-4"],backgroundColor:n["color-white"],borderRadius:n["s-4"],borderWidth:n["s-1"]/4,borderStyle:"solid",borderColor:n["color-line1-2"],boxShadow:"none"},"range__thumb--active":{boxShadow:n["shadow-2"]},range__mark:{position:"absolute",width:n["line-3"],height:n["s-4"],top:-n["s-2"],backgroundColor:n["color-line1-3"]},"range__mark--active":{backgroundColor:n["color-brand1-6"]},"range--disabled__mark":{backgroundColor:n["color-text1-1"]},"range--disabled__mark--active":{backgroundColor:n["color-text1-2"]},range__label:{position:"absolute",transform:"translateX(-50%)",top:n["s-4"],color:n["color-text1-2"],fontSize:n["font-size-footnote"],fontWeight:n["font-weight-5"]},"range__label--active":{color:n["color-brand1-6"]},"range--disabled__label":{},"range--disabled__label--active":{color:n["color-text1-3"]},range__tooltip:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:n["s-10"],left:-n["s-2"],width:n["s-10"],height:n["s-12"],borderRadius:n["s-1"],boxShadow:n["shadow-1"],backgroundColor:n["color-white"],color:n["color-text1-3"]},range__arrow:{display:"block",transform:"translate(0px, "+n["line-3"]+"px) rotate(45deg)",position:"absolute",bottom:n["s-10"],left:n["s-2"],borderWidth:n["s-1"],borderStyle:"solid",borderColor:n["color-white"],borderTopColor:"transparent",borderLeftColor:"transparent",boxShadow:n["shadow-1"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=n(4),o=l(n(1)),a=l(n(86)),s=l(n(267));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=(0,r.forwardRef)((function(e,t){var n=e.shape,l=void 0===n?"circle":n,u=e.current,d=void 0===u?0:u,f=e.direction,h=void 0===f?"horizontal":f,p=e.steps,m=void 0===p?[]:p,v=e.styles,g=e.style,_=void 0===g?{}:g,y=e.renderStepContent,b=void 0===y?function(){return null}:y,x=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["shape","current","direction","steps","styles","style","renderStepContent"]),w=(0,i.useStyles)(a.default,{styles:v},(function(e){return{stepper:c({},e(["stepper","stepper--"+h]),{},_)}}));return(0,r.createElement)(o.default,c({},x,{ref:t,style:w.stepper}),m.map((function(e,t){var n=t===d?"processing":t<d?"finished":"awaiting",i=t===m.length-1;return(0,r.createElement)(s.default,{key:"step_"+t,title:e.title,content:e.content,icon:e.icon,index:t,styles:v,status:n,last:i,shape:l,direction:h},b(c({},e,{index:t,status:n,last:i,shape:l,direction:h})))})))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=c(n(1)),o=c(n(2)),a=c(n(6)),s=n(4),l=c(n(86));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d={borderWidth:0,borderRadius:0,backgroundColor:"transparent",padding:0},f=(0,r.forwardRef)((function(e,t){var n=e.shape,c=void 0===n?"circle":n,f=e.status,h=void 0===f?"awaiting":f,p=e.direction,m=void 0===p?"horizontal":p,v=e.last,g=void 0!==v&&v,_=e.index,y=void 0===_?0:_,b=e.title,x=e.content,w=e.icon,T=e.style,A=void 0===T?{}:T,E=e.children,O=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["shape","status","direction","last","index","title","content","icon","style","children"]),M=0===y,S=(0,s.useStyles)(l.default,O,(function(e){var t,n,r,i="awaiting"===h?"":"--"+h,o="--"+m,a="circle"===c?"":"--"+c;return{root:u({},e(["stepper__step","stepper__step"+a,"stepper"+o+"__step","stepper"+a+o+"__step",(t={"stepper__step--first":M,"stepper__step--last":g},t["stepper"+o+"__step--first"]=M,t["stepper"+o+"__step--last"]=g,t)]),{},A),header:e(["stepper__step__header","stepper"+a+"__step__header","stepper"+o+"__step__header","stepper"+a+o+"__step__header",(n={},n["stepper"+a+o+"__step--first__header"]=M,n["stepper"+a+o+"__step--last__header"]=g,n)]),body:e(["stepper__step__body","stepper"+a+"__step__body","stepper"+o+"__step__body","stepper"+a+o+"__step__body"]),connector:e(["stepper__step__connector","stepper"+a+"__step__connector","stepper"+o+"__step__connector","stepper"+a+o+"__step__connector","stepper"+o+"__step"+i+"__connector","stepper"+a+o+"__step"+i+"__connector"]),prevConnector:e(["stepper__step__connector","stepper"+a+"__step__connector","stepper"+o+"__step__connector","stepper"+a+o+"__step__connector","stepper"+o+"__step--"+("processing"===h?"finished":h)+"__connector","stepper"+a+o+"__step--"+("processing"===h?"finished":h)+"__connector"]),node:e(["stepper__step__node","stepper"+a+"__step__node","stepper"+o+"__step__node","stepper"+a+o+"__step__node","stepper__step"+i+"__node",(r={},r["stepper"+o+"__step--first__node"]=M,r["stepper"+o+"__step--last__node"]=g,r)]),icon:e(["stepper__step__icon","stepper"+a+"__step__icon","stepper__step"+i+"__icon","stepper"+a+"__step"+i+"__icon"]),number:e(["stepper__step__number","stepper"+a+"__step__number","stepper__step"+i+"__number","stepper"+a+"__step"+i+"__number"]),title:e(["stepper__step__title","stepper"+a+"__step__title","stepper"+o+"__step__title","stepper__step"+i+"__title","stepper"+a+"__step"+i+"__title"]),content:e(["stepper__step__content","stepper"+a+"__step__content","stepper"+o+"__step__content","stepper__step"+i+"__content","stepper"+a+"__step"+i+"__content"])}}));return(0,r.createElement)(i.default,u({},O,{style:S.root,ref:t}),g||"vertical"!==m?null:(0,r.createElement)(i.default,{style:S.connector}),(0,r.createElement)(i.default,{style:S.header},y>0&&"horizontal"===m?(0,r.createElement)(i.default,{style:S.prevConnector}):null,"circle"===c?(0,r.createElement)(i.default,{style:S.node},"finished"===h?(0,r.createElement)(a.default,{style:S.icon,name:"checkbox"}):w?(0,r.createElement)(a.default,{style:S.icon,name:w}):(0,r.createElement)(o.default,{style:S.number},y+1)):(0,r.createElement)(i.default,{style:u({},S.node,{},w?d:{})},w?(0,r.createElement)(a.default,{style:S.icon,name:w}):null),g||"horizontal"!==m?null:(0,r.createElement)(i.default,{style:S.connector})),(0,r.createElement)(i.default,{style:S.body},(0,r.createElement)(o.default,{style:S.title},b),(0,r.createElement)(o.default,{style:S.content},x),E?(0,r.createElement)(i.default,{style:S.content},E):null))}));f.displayName="Step";var h=f;t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(0),o=n(4),a=n(15),s=(n(269),(r=n(274))&&r.__esModule?r:{default:r});function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var u=(0,i.forwardRef)((function(e){var t,n=e.checked,r=(e.defaultChecked,e.disabled),u=e.onChange,d=e.readOnly,f=e.style,h=void 0===f?{}:f,p=c(e,["checked","defaultChecked","disabled","onChange","readOnly","style"]),m=function(e){return"checked"in e?!!e.checked:!!e.defaultChecked}(e),v=(0,i.useState)(m),g=v[0],_=v[1],y=(0,i.useState)(!1),b=y[0],x=y[1],w=(0,o.useStyles)(s.default,p,(function(e){var t=g?"--checked":"--unchecked",n=r?"--disabled":"";return{switchTrack:l({},e(["switch__track","switch"+t+"__track","switch"+t+n+"__track"]),{},h),switchThumb:e(["switch__thumb","switch"+t+"__thumb","switch"+t+n+"__thumb"])}})),T=w.switchTrack,A=T.backgroundColor,E=c(T,["backgroundColor"]),O=w.switchThumb,M=O.left,S=O.backgroundColor,C=c(O,["left","backgroundColor"]);return(0,i.useEffect)((function(){_(m),x(m)}),[n]),(0,i.createElement)(a.Transition,{in:b,transition:{enter:{properties:["backgroundColor"],duration:100},exit:{properties:["backgroundColor"],duration:100}},styles:{enter:{backgroundColor:A},exit:{backgroundColor:A}}},(0,i.createElement)(a.TransitionView,l({style:E},p,{onClick:function(t){if(!r&&!d){var n=!g;"checked"in e||(_(n),x(n)),u&&u(n,t)}}}),(0,i.createElement)(a.Transition,{in:b,transition:{enter:{properties:["transform","backgroundColor"],duration:100},exit:{properties:["transform","backgroundColor"],duration:100}},styles:{enter:{transform:"translate("+(t=M,void 0===t&&(t=""),parseFloat(t.replace("rpx",""))/parseFloat(w.switchThumb.width)*100+"%, 0)"),backgroundColor:S},exit:{transform:"translate(0, 0)",backgroundColor:S}}},(0,i.createElement)(a.TransitionView,{style:C}))))}));t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.rpx2px=t.px2rpx=t.screenHeight=t.screenWidth=t.platform=t.appName=void 0;var r=i(n(270));i(n(271)),i(n(272)),i(n(273));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r]();if(i)return i}}((function(){return r.default}),(function(){return null}),(function(){return null}),(function(){return null})),a=o.appName;t.appName=a;var s=o.platform;t.platform=s;var l=o.screenWidth;t.screenWidth=l;var c=o.screenHeight;function u(e,t){return function(n){return e(t,n)}}t.screenHeight=c;var d=u((function(e,t){return Number((750*t/e).toFixed(8))}),l);t.px2rpx=d;var f=u((function(e,t){return Number((e/750*t).toFixed(8))}),l);t.rpx2px=f},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i={};[{key:"appName",getFn:function(){return navigator&&navigator.appName}},{key:"platform",getFn:function(){return r||(r=function(){var e=navigator&&navigator.platform;if(e)return/(iphone|ipod|ipad)/.test(navigator.userAgent)?"iOS":/android/.test(navigator.userAgent)?"Android":e}()),r}},{key:"screenWidth",getFn:function(){return window.screen.width}},{key:"screenHeight",getFn:function(){return window.screen.height}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(i,t,{get:n})}));var o=i;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r={};[{key:"appName",getFn:function(){return navigator&&navigator.appName}},{key:"platform",getFn:function(){return navigator&&navigator.platform}},{key:"screenWidth",getFn:function(){return window.screen.width/window.devicePixelRatio}},{key:"screenHeight",getFn:function(){return window.screen.height/window.devicePixelRatio}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(r,t,{get:n})}));var i=r;t.default=i},function(e,t,n){"use strict";function r(){return my.getSystemInfoSync()}t.__esModule=!0,t.default=void 0;var i={};[{key:"appName",getFn:function(){return r().app}},{key:"platform",getFn:function(){return r().platform}},{key:"screenWidth",getFn:function(){return r().screenWidth}},{key:"screenHeight",getFn:function(){return r().screenHeight}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(i,t,{get:n})}));var o=i;t.default=o},function(e,t,n){"use strict";function r(){return wx.getSystemInfoSync()}t.__esModule=!0,t.default=void 0;var i={};[{key:"appName",getFn:function(){return r().app}},{key:"platform",getFn:function(){return r().platform}},{key:"screenWidth",getFn:function(){return r().screenWidth}},{key:"screenHeight",getFn:function(){return r().screenHeight}}].forEach((function(e){var t=e.key,n=e.getFn;Object.defineProperty(i,t,{get:n})}));var o=i;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{switch__track:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:t["s-8"],width:t["s-14"],position:"relative",justifyContent:"flex-start",borderWidth:t["line-2"],borderStyle:"solid",borderRadius:t["s-4"]},"switch--checked__track":{borderColor:t["color-brand1-6"],backgroundColor:t["color-brand1-6"],"backgroundColor:active":t["color-brand1-9"],"backgroundColor:hover":t["color-brand1-9"]},"switch--checked__track:active":{borderColor:t["color-brand1-6"],backgroundColor:t["color-brand1-6"]},"switch--unchecked__track":{borderColor:t["color-line1-2"],backgroundColor:t["color-white"]},"switch--unchecked--disabled__track":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"switch--checked--disabled__track":{borderColor:t["color-brand1-1"],backgroundColor:t["color-brand1-1"],"backgroundColor:active":t["color-brand1-1"],"backgroundColor:hover":t["color-brand1-1"]},switch__thumb:{height:t["s-7"],width:t["s-7"],borderRadius:"100%",borderWidth:t["line-1"],position:"absolute",boxShadow:t["shadow-1"]},"switch--checked__thumb":{backgroundColor:t["color-white"],borderColor:t["color-brand1-6"],borderWidth:0,left:t["s-14"]-t["s-8"]},"switch--unchecked__thumb":{backgroundColor:t["color-white"],borderColor:t["color-line1-2"],left:0},"switch--unchecked--disabled__thumb":{backgroundColor:t["color-fill1-1"],borderColor:t["color-line1-1"]},"switch--checked--disabled__thumb":{borderColor:t["color-brand1-1"]}}}},function(e,t,n){"use strict";t.__esModule=!0,t.getBoundingClientRect=t.getScrollOffset=void 0;r(n(276));function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n(277)).default,o=i.getScrollOffset;t.getScrollOffset=o;var a=i.getBoundingClientRect;t.getBoundingClientRect=a},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=new(((r=n(88))&&r.__esModule?r:{default:r}).default);var o={getScrollOffset:function(e){return new Promise((function(t){i.getSelector(e).scrollOffset().exec((function(e){t(e[0])}))}))},getBoundingClientRect:function(e){return new Promise((function(t){i.getSelector(e).boundingClientRect().exec((function(e){t(e[0])}))}))}};t.default=o},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=new(((r=n(88))&&r.__esModule?r:{default:r}).default);var o={getScrollOffset:function(e){return new Promise((function(t){t(i.getSelector(e).map((function(e){return{scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight}})))}))},getBoundingClientRect:function(e){return new Promise((function(t){t(i.getSelector(e).map((function(e){return e.getBoundingClientRect()})))}))}};t.default=o},function(e,t,n){"use strict";t.__esModule=!0;var r={};t.default=void 0;var i=a(n(279)),o=(a(n(283)),a(n(284)),n(285));function a(e){return e&&e.__esModule?e:{default:e}}Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===o[e]||(t[e]=o[e]))}));var s=null;(s=i.default).defaultProps={scrollEventThrottle:50,onEndReachedThreshold:500,showsHorizontalScrollIndicator:!0,showsVerticalScrollIndicator:!0,className:"rax-scrollview"},s.displayName="ScrollView";var l=s;t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(89)),o=l(n(24)),a=l(n(281)),s=l(n(282));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=l(n(39)).default;function d(e){var t=u.__cache||(u.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=u[r[0].trim()]:r.forEach((function(e){"object"==typeof u[e.trim()]&&(i=Object.assign(i,u[e.trim()]))})),t[n]=i),i}var f="rax-scrollview";function h(e,t,n,r,i){var o=e.current,s=o.scrollLeft,l=o.scrollTop;r?new a.default({duration:i,easing:"easeOutSine",onRun:function(r){t>=0&&(e.current.scrollLeft=s+r.percent*(t-s)),n>=0&&(e.current.scrollTop=l+r.percent*(n-l))}}).run():(t>=0&&(e.current.scrollLeft=t),n>=0&&(e.current.scrollTop=n))}var p=(0,r.forwardRef)((function(e,t){var n,a=e.className,l=e.style,u=e.horizontal,p=e.contentContainerStyle,m=e.disableScroll,v=e.scrollEventThrottle,g=e.showsHorizontalScrollIndicator,_=e.showsVerticalScrollIndicator,y=e.onEndReached,b=e.onEndReachedThreshold,x=e.onScroll,w=e.children,T=(0,r.useRef)(0),A=(0,r.useRef)(0),E=(0,r.useRef)(0),O=(0,r.useRef)(null),M=(0,r.useRef)(null),S=function(t){if(e.onScroll&&(t.nativeEvent={get contentOffset(){return{x:t.target.scrollLeft,y:t.target.scrollTop}},get contentSize(){return{width:t.target.scrollWidth,height:t.target.scrollHeight}}},x(t)),y){var n=O.current;E.current=u?n.offsetWidth:n.offsetHeight;var r=u?n.scrollWidth:n.scrollHeight,i=u?n.scrollLeft:n.scrollTop,o=r-i-E.current<b,a=i>T.current,s=r!=A.current;o&&a&&s&&(A.current=r,e.onEndReached(t)),T.current=i}};if((0,r.useImperativeHandle)(t,(function(){return{_nativeNode:O.current,resetScroll:function(){A.current=0,T.current=0},scrollTo:function(e){var t=e||{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.animated,s=void 0===a||a,l=t.duration,c=void 0===l?400:l,u=document.documentElement.clientWidth/750;h(O,r*u,o*u,s,c)},scrollIntoView:function(e){var t=e||{},n=t.id,r=t.animated,i=void 0===r||r,o=t.duration,a=void 0===o?400:o;if(!n)throw new Error("Params missing id.");var s=document.getElementById(n);s&&h(O,s.offsetLeft,s.offsetTop,i,a)}}})),l){var C=["alignItems","justifyContent"].filter((function(e){return void 0!==l[e]}));0!==C.length&&console.warn("ScrollView child layout ("+JSON.stringify(C)+") must be applied through the contentContainerStyle prop.")}var R=(0,r.createElement)(i.default,{ref:M,className:(0,o.default)((n={},n[f+"-content-container-horizontal"]=u,n[f+"-webcontainer"]=!u,n)),style:Object.assign({},d((0,o.default)((n={},n[f+"-content-container-horizontal"]=u,n[f+"-webcontainer"]=!u,n))),p)},w),k=Object.assign({},l);null!==k.height&&void 0!==k.height||(k.flex=1);var P=(0,o.default)(f,f+"-"+(u?"horizontal":"vertical"),a);if(!(u?g:_)&&"undefined"!=typeof document&&"function"==typeof document.getElementById&&!document.getElementById("rax-scrollview-style")){var L=document.createElement("style");L.id="rax-scrollview-style",document.head.appendChild(L),L.innerHTML="."+f+"::-webkit-scrollbar{display: none;}"}k.WebkitOverflowScrolling="touch",u?(k.overflowX="scroll",k.overflowY="hidden"):(k.overflowX="hidden",k.overflowY="scroll"),m&&(k.overflow="hidden");var I=Object.assign({},e);return delete I.onEndReachedThreshold,(0,r.createElement)(i.default,c({},I,{ref:O,className:P,style:Object.assign({},d(P),k),onScroll:v?(0,s.default)(S,v):S}),R)}));t.default=p},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=void 0!==window.requestAnimationFrame?window.requestAnimationFrame:function(e){return setTimeout(e,16)},i=void 0!==window.cancelAnimationFrame?window.cancelAnimationFrame:clearTimeout,o="start",a="end",s="run",l="stop",c={easeOutSine:function(e){return Math.sin(e*Math.PI/2)}},u=function(){},d=function(){function e(e){this.config={easing:"linear",duration:1/0,onStart:u,onRun:u,onStop:u,onEnd:u},this.isfinished=!1,this.config=Object.assign(Object.assign({},this.config),e)}var t=e.prototype;return t.run=function(){var e=this.config,t=e.duration,n=e.onStart,r=e.onRun;t<=1&&(this.isfinished=!0,r({percent:1}),this.stop()),this.isfinished||(this._hasFinishedPercent=this._stop&&this._stop.percent||0,this._stop=null,this.start=Date.now(),this.percent=0,n({percent:0,type:o}),this.easingFn=c[this.config.easing],this._run())},t._run=function(){var e=this,t=this.config,n=t.onRun,o=t.onStop;this._raf&&i(this._raf),this._raf=r((function(){if(e.now=Date.now(),e.t=e.now-e.start,e.duration=e.now-e.start>=e.config.duration?e.config.duration:e.now-e.start,e.progress=e.easingFn(e.duration/e.config.duration),e.percent=e.duration/e.config.duration+e._hasFinishedPercent,e.percent>=1||e._stop)return e.percent=e._stop&&e._stop.percent?e._stop.percent:1,e.duration=e._stop&&e._stop.duration?e._stop.duration:e.duration,n({percent:e.progress,originPercent:e.percent,t:e.t,type:s}),o({percent:e.percent,t:e.t,type:l}),void(e.percent>=1&&(e.isfinished=!0,e.stop()));n({percent:e.progress,originPercent:e.percent,t:e.t,type:s}),e._run()}))},t.stop=function(){var e=this.config.onEnd;this._stop={percent:this.percent,now:this.now},e({percent:1,t:this.t,type:a}),i(this._raf)},e}();t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n,r,i,o,a=0;function s(){o=0,a=+new Date,i=e.apply(n,r),n=null,r=null}return function(){n=this,r=arguments;var e=(new Date).getTime()-a;return o||(e>=t?s():o=setTimeout(s,t-e)),i}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=o(n(24));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=o(n(39)).default;function l(e){var t=s.__cache||(s.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=s[r[0].trim()]:r.forEach((function(e){"object"==typeof s[e.trim()]&&(i=Object.assign(i,s[e.trim()]))})),t[n]=i),i}var c=(0,r.forwardRef)((function(e,t){var n=e.className,o=e.style,s=e.horizontal,c=e.onEndReached,u=e.onScroll,d=e.children,f=e.disableScroll,h=void 0!==f&&f,p=e.onEndReachedThreshold,m=(0,r.useState)(0)[0],v=(0,r.useState)(0)[0],g=(0,r.useState)(!1),_=g[0],y=g[1],b=(0,r.useState)(400),x=b[0],w=b[1],T=(0,r.useState)(null)[0],A=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return{_nativeNode:A.current,resetScroll:function(){s?A.current.setAttribute("scroll-left","0"):A.current.setAttribute("scroll-top","0")},scrollTo:function(e){var t=e||{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.animated,l=void 0===a||a,c=t.duration,u=void 0===c?400:c;s?A.current.setAttribute("scroll-left",String(r)):A.current.setAttribute("scroll-top",String(o)),y(l),w(u)},scrollIntoView:function(e){var t=e||{},n=t.id,r=t.animated,i=void 0===r||r,o=t.duration,a=void 0===o?400:o;if(!n)throw new Error("Params missing id.");A.current.setAttribute("scroll-into-view",n),y(i),w(a)}}}));var E=Object.assign({},o);null===E.height&&(E.flex=1);var O=(0,i.default)("rax-scrollview","rax-scrollview-"+(s?"horizontal":"vertical"),n);return(0,r.createElement)("scroll-view",a({},e,{ref:A,className:O,style:Object.assign({},l(O),E),"scroll-top":m,"scroll-left":v,onScroll:u?function(e){u&&(e.nativeEvent={get contentOffset(){return{x:e.detail.scrollLeft,y:e.detail.scrollTop}},get contentSize(){return{width:e.detail.scrollWidth,height:e.detail.scrollHeight}}},u(e))}:null,onScrollToLower:c,"lower-threshold":p,"scroll-with-animation":_,"scroll-animation-duration":x,"scroll-x":!h&&s,"scroll-y":!h&&!s,"scroll-into-view":T}),d)}));t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(0),i=l(n(89)),o=l(n(53)),a=l(n(54)),s=l(n(24));function l(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=l(n(39)).default;function d(e){var t=u.__cache||(u.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=u[r[0].trim()]:r.forEach((function(e){"object"==typeof u[e.trim()]&&(i=Object.assign(i,u[e.trim()]))})),t[n]=i),i}var f="rax-scrollview",h=(0,r.forwardRef)((function(e,t){var n,l=e.className,u=e.style,h=e.horizontal,p=e.contentContainerStyle,m=e.showsHorizontalScrollIndicator,v=e.showsVerticalScrollIndicator,g=e.onEndReached,_=e.onEndReachedThreshold,y=e.onScroll,b=e.children,x=(0,r.useState)(0),w=x[0],T=x[1],A=(0,r.useRef)(null),E=(0,r.useRef)(null);if((0,r.useImperativeHandle)(t,(function(){return{_nativeNode:A.current,resetScroll:function(){T(w+1)},scrollTo:function(e){var t=e||{},n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.animated,s=void 0===a||a,l=__weex_require__("@weex-module/dom"),c=E.current;c&&l.scrollToElement(c,{offset:r||o||0,animated:s})},scrollIntoView:function(e){var t=e||{},n=t.id,r=t.animated,i=void 0===r||r;if(!n)throw new Error("Params missing id.");var o=(0,a.default)(n);o&&__weex_require__("@weex-module/dom").scrollToElement(o,{animated:i})}}})),_="string"==typeof _?parseInt(_,10):_,u){var O=["alignItems","justifyContent"].filter((function(e){return void 0!==u[e]}));0!==O.length&&console.warn("ScrollView child layout ("+JSON.stringify(O)+") must be applied through the contentContainerStyle prop.")}var M=(0,r.createElement)(i.default,null),S=null;S=Array.isArray(b)?b.map((function(e){return"object"==typeof e&&null!==e&&"type"in e&&e.type==o.default?(M=e,null):e})):b;var C=(0,r.createElement)(i.default,{ref:E,className:(0,s.default)((n={},n[f+"-content-container-horizontal"]=h,n)),style:Object.assign({},d((0,s.default)((n={},n[f+"-content-container-horizontal"]=h,n))),p)},S),R=Object.assign({},u);null===R.height&&(R.flex=1);var k=(0,s.default)(f,f+"-"+(h?"horizontal":"vertical"),l),P=h?m:v;return(0,r.createElement)("scroller",c({},e,{ref:A,className:k,style:Object.assign({},d(k),R),showScrollbar:P,onLoadmore:g,onScroll:y?function(e){e.nativeEvent={contentOffset:{x:-e.contentOffset.x,y:-e.contentOffset.y},contentSize:e.contentSize?{width:e.contentSize.width,height:e.contentSize.height}:null},y(e)}:null,loadmoreoffset:_,loadmoreretry:w,scrollDirection:h?"horizontal":"vertical"}),M,C)}));t.default=h},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{tabs:{display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:n["color-white"],boxShadow:n["shadow-zero"],zIndex:100,position:"relative"},tabs__divider:{position:"absolute",left:0,right:0,bottom:0,borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:n["color-line1-2"]},tabs__container:{flex:1,zIndex:1,position:"relative"},tabs__tab:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:n["s-11"],paddingLeft:n["s-3"],paddingRight:n["s-3"],paddingTop:n["s-3"],paddingBottom:n["s-3"],position:"relative"},"tabs__tab--full-width":{flex:1},"tabs__active-line":{position:"absolute",left:0,bottom:0,right:0,height:n["line-2"],backgroundColor:n["color-brand1-6"],transition:"all 300ms"},"tabs__tab-text":{width:"100%",textAlign:"center",lineHeight:1.2*n["font-size-body-1"],fontSize:n["font-size-body-1"],fontWeight:n["font-weight-2"],color:n["color-text1-2"],overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"break-word"},"tabs__tab-text--icon":{"margin-top":n["s-1"]},"tabs__tab-icon":{fontSize:n["icon-m"],color:n["color-text1-2"]},"tabs__tab--active-text":{color:n["color-brand1-6"],fontWeight:n["font-weight-3"]},"tabs__tab--active-icon":{color:n["color-brand1-6"]},"tabs--primary":{backgroundColor:n["color-brand1-6"],boxShadow:n["shadow-2"]},"tabs--primary__active-line":{backgroundColor:n["color-white"]},"tabs--primary__tab-text":{color:"rgba(255, 255, 255, .72)"},"tabs--primary__tab-icon":{color:"rgba(255, 255, 255, .72)"},"tabs--primary__tab--active-text":{color:n["color-white"]},"tabs--primary__tab--active-icon":{color:n["color-white"]},"tabs--bottom":{position:"fixed",bottom:0,left:0,width:750},"tabs--bottom__divider":{bottom:"auto",top:0},"tabs--bottom__tab":{minHeight:0,height:n["s-14"],paddingTop:0,paddingBottom:0},"tabs--bottom__tab-text":{fontSize:n["font-size-footnote"]},"tabs--bottom__tab-icon":{fontSize:n["icon-m"]},"tabs--bottom__tab-text--icon":{"margin-top":n["s-0"]}}};t.default=r},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core;return{tag:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:t["s-8"],paddingLeft:t["s-4"],paddingRight:t["s-4"],paddingTop:0,paddingBottom:0,borderWidth:t["line-1"],borderColor:t["color-line1-3"],borderStyle:"solid",borderRadius:t["corner-1"],backgroundColor:t["color-white"],color:t["color-text1-4"],boxShadow:t["shadow-zero"],transition:"all 250ms"},tag__text:{fontSize:t["font-size-body-1"],fontWeight:t["font-weight-4"],color:t["color-text1-4"]},tag__icon:{fontSize:t["icon-xxs"],color:t["color-text1-4"],marginLeft:t["s-2"],marginRight:t["s-2"]},"tag__icon--first":{marginLeft:0},"tag__icon--last":{marginRight:0},"tag--large":{height:t["s-11"],paddingLeft:t["s-4"],paddingRight:t["s-4"]},"tag--large__text":{fontSize:t["font-size-subhead"],fontWeight:t["font-weight-4"]},"tag--large__icon":{marginLeft:t["s-3"],marginRight:t["s-3"],fontSize:t["icon-xs"]},"tag--primary":{borderWidth:t["line-zero"]||0,backgroundColor:t["color-brand1-6"],borderColor:t["color-brand1-6"],boxShadow:t["shadow-zero"]},"tag--primary__text":{color:t["color-white"]},"tag--primary__icon":{color:t["color-white"]},"tag--selectable":{},"tag--selectable__text":{},"tag--selectable__icon":{},"tag--selectable--large":{},"tag--selectable--large__text":{},"tag--selectable--large__icon":{},"tag--selectable--selected":{backgroundColor:t["color-brand1-1"],borderColor:t["color-brand1-6"]},"tag--selectable--selected__text":{color:t["color-brand1-6"]},"tag--selectable--selected__icon":{color:t["color-brand1-6"]},"tag--selectable--disabled--selected":{backgroundColor:t["color-fill1-3"],borderColor:t["color-line1-3"]},"tag--selectable--disabled--selected__text":{color:t["color-text1-2"]},"tag--selectable--disabled--selected__icon":{color:t["color-text1-2"]},"tag--disabled":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"tag--disabled__text":{color:t["color-text1-1"]},"tag--disabled__icon":{color:t["color-text1-1"]},"tag--primary--disabled":{borderColor:t["color-brand1-1"],backgroundColor:t["color-brand1-1"]},"tag--primary--disabled__text":{color:t["color-text1-1"]},"tag--primary--disabled__icon":{color:t["color-text1-1"]},"tag--selectable--disabled":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"tag--selectable--disabled__text":{color:t["color-text1-1"]},"tag--selectable--disabled__icon":{color:t["color-text1-1"]},"tag--deletable":{},"tag--deletable__text":{},"tag--deletable__icon":{},"tag--deletable__delete":{display:"flex",backgroundColor:t["color-transparent"],borderRadius:"100%",marginLeft:t["s-2"]},"tag--deletable__delete-icon":{fontSize:t["icon-xxs"],color:t["color-text1-4"]},"tag--deletable--large":{},"tag--deletable--large__icon":{},"tag--deletable--large__text":{},"tag--deletable--large__delete":{marginLeft:t["s-3"]},"tag--deletable--large__delete-icon":{fontSize:t["icon-xs"]},"tag--deletable--disabled":{borderColor:t["color-line1-1"],backgroundColor:t["color-fill1-1"]},"tag--deletable--disabled__text":{color:t["color-text1-1"]},"tag--deletable--disabled__icon":{color:t["color-text1-1"]},"tag--deletable--disabled__delete":{},"tag--deletable--disabled__delete-icon":{color:t["color-text1-1"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(7)),i=n(0),o=n(4),a=n(11),s=p(n(42)),l=p(n(6)),c=p(n(1)),u=p(n(2)),d=p(n(29)),f=p(n(290)),h=p(n(296));function p(e){return e&&e.__esModule?e:{default:e}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var g=(0,i.forwardRef)((function(e,t){var n=e.className,p=e.mode,g=void 0===p?"image":p,_=e.limit,y=void 0===_?0:_,b=(e.sourceType,e.fileList),x=void 0===b?[]:b,w=e.chooser,T=e.onChange,A=void 0===T?function(){}:T,E=e.onRemove,O=void 0===E?function(){}:E,M=e.onPreview,S=void 0===M?function(){}:M,C=e.style,R=void 0===C?{}:C,k=e.styles,P=void 0===k?{}:k,L=e.readOnly,I=e.disabled,F=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","mode","limit","sourceType","fileList","chooser","onChange","onRemove","onPreview","style","styles","readOnly","disabled"]),D=(0,a.useLocale)("Upload",F,{add:""}),N=(0,i.useRef)((function(){return Math.ceil(1e7*Math.random())})),z=function(e){return(0,o.useStyles)(h.default,{styles:P},(function(t){return function(e){return{image:{upload:e("upload"),uploadItem:e("upload__item"),uploadItemFail:e("upload__item--fail"),uploadItemImage:e("upload__item-image"),uploadItemProgress:e("upload__item-progress"),uploadFail:e("upload__fail"),uploadFailImage:e("upload__fail-image"),uploadAdd:e("upload__add"),uploadAddIcon:e("upload__add__icon"),uploadAddText:e("upload__add__text"),uploadRemove:e("upload__remove"),uploadRemoveIcon:e("upload__remove-image")},file:{upload:e("upload-file"),uploadItem:e("upload-file__item"),uploadItemFail:e("upload-file__item--fail"),uploadItemName:e("upload-file__item-name"),uploadItemNameText:e("upload-file__item-name-text"),uploadItemFailNameText:e("upload-file__item-name-text--fail"),uploadItemSize:e("upload-file__item-size"),uploadItemProgress:e("upload-file__item-progress"),uploadRemove:e("upload-file__remove"),uploadRemoveIcon:e("upload-file__remove-icon")}}}(t)[e]}))}(g),j=function(){var e,t=(e=r.default.mark((function e(){var t,n,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I&&!L){e.next=2;break}return e.abrupt("return");case 2:return t=w||f.default,e.next=5,t();case 5:n=e.sent,i=n.data,o=i.map((function(e){return{uid:N.current(),name:"attachment",thumbUrl:"",size:"",url:e,status:"uploading",percent:0,canRemove:!0}})),A(o);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,i.useImperativeHandle)(t,(function(){return{upload:j}}));var B=function(e){I||L||O(e)},U=function(e){return"uploading"===e.status},V=function(e){return"fail"===e.status},H=function(e){return["fail","success"].indexOf(e.status)>-1},G=function(e){return V(e)?z.uploadItemFail:null},W=(0,i.createElement)(c.default,m({},F,{style:m({},z.upload,{},R),className:n,ref:t}),x.map((function(e){return(0,i.createElement)(c.default,{style:m({},z.uploadItem,{},G(e)),key:"rax_ui_"+e.uid,onClick:function(){return function(e){return"success"===e.status}(e)&&S(e)}},(0,i.createElement)(d.default,{source:{uri:e.thumbUrl||e.url},style:z.uploadItemImage}),V(e)?(0,i.createElement)(c.default,{style:z.uploadFail},(0,i.createElement)(l.default,{name:"error",style:z.uploadFailImage})):null,H(e)&&e.canRemove?(0,i.createElement)(c.default,{style:z.uploadRemove,onClick:function(){return B(e)}},(0,i.createElement)(l.default,{name:"close",style:z.uploadRemoveIcon})):null,U(e)?(0,i.createElement)(c.default,{style:z.uploadItemProgress},(0,i.createElement)(s.default,{styles:P,barWidth:6,shape:"circle",percent:e.percent})):null)})),!y||y>x.length?(0,i.createElement)(c.default,{style:m({},z.uploadItem,{},z.uploadAdd),onClick:j},(0,i.createElement)(l.default,{name:"add",style:z.uploadAddIcon}),(0,i.createElement)(u.default,{style:z.uploadAddText},D.add)):null),X=(0,i.createElement)(c.default,m({},F,{style:m({},z.upload,{},R),className:n,ref:t}),x.map((function(e){return(0,i.createElement)(c.default,{style:m({},z.uploadItem,{},G(e)),key:"rax_ui_"+e.uid},(0,i.createElement)(c.default,{style:m({},z.uploadItemName)},(0,i.createElement)(u.default,{style:m({},z.uploadItemNameText,{},V(e)?z.uploadItemFailNameText:null)},e.name),e.size&&(0,i.createElement)(u.default,{style:z.uploadItemSize},"(",e.size,")")),U(e)?(0,i.createElement)(c.default,{style:z.uploadItemProgress},(0,i.createElement)(s.default,{barWidth:6,shape:"line",percent:e.percent})):null,H(e)&&e.canRemove?(0,i.createElement)(c.default,{style:z.uploadRemove,onClick:function(){return B(e)}},(0,i.createElement)(l.default,{name:"close",style:z.uploadRemoveIcon})):null)})));return"image"===g?W:X}));t.default=g},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=i(n(291));i(n(292)),i(n(293)),i(n(294)),i(n(295));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return void 0===e&&(e={}),new Promise((function(t,n){var r=e.count,i=void 0===r?1:r,o=function(e,t){var n=document.createElement("INPUT");return n.name="file",n.id="input-"+1e8*Math.random(),n.type="file",e&&n.setAttribute("multiple","multiple"),n.style.display="none",n.setAttribute("accept",t||"image/*"),document.body.appendChild(n),n}(i>1,e.accept);o.addEventListener("change",(function(r){var a=r.target.files&&Array.from(r.target.files).slice(0,i);e.disableConvert?(t({data:[],files:a}),o.remove&&o.remove()):function(e){return new Promise((function(t,n){!e.length&&n();var r=[],i=0;e.forEach((function(n,o){var a=new FileReader;a.readAsDataURL(n),a.onload=function(e){r[o]=e.target.result},a.onloadend=function(){++i===e.length&&t(r)}}))}))}(a).then((function(e){return t({data:e,files:a})})).catch(n).finally((function(){return o.remove&&o.remove()}))}),!1);var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),o.dispatchEvent(a)}))};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){return Promise.reject()};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return void 0===e&&(e={}),new Promise((function(t,n){var r=e,i=r.count,o=void 0===i?1:i,a=r.sourceType,s=void 0===a?["camera","album"]:a;my.chooseImage({sourceType:s,count:o,success:function(e){t(Object.assign({},{data:e.apFilePaths},e))},fail:function(e){n(e)}})}))};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return void 0===e&&(e={}),new Promise((function(t,n){var r=e,i=r.count,o=void 0===i?1:i,a=r.sourceType,s=void 0===a?["camera","album"]:a,l=r.sizeType;wx.chooseImage({sourceType:s,count:o,sizeType:l,success:function(e){t(Object.assign({},{data:e.tempFilePaths},e))},fail:function(e){n(e)}})}))};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){return void 0===e&&(e={}),new Promise((function(t,n){var r=e,i=r.count,o=void 0===i?1:i,a=r.sourceType,s=void 0===a?["camera","album"]:a,l=r.sizeType;tt.chooseImage({sourceType:s,count:o,sizeType:l,success:function(e){t(Object.assign({},{data:e.tempFilePaths},e))},fail:function(e){n(e)}})}))};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(e){var t=e.Core,n=void 0===t?{}:t;return{upload:{display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap"},upload__add:{textAlign:"center",borderWidth:"1px",borderStyle:"dashed",borderColor:n["color-line1-3"]},upload__add__icon:{fontSize:n["icon-l"]},upload__add__text:{fontSize:n["font-size-caption"],marginTop:n["s-2"]},upload__item:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:2*n["s-13"],height:2*n["s-13"],color:n["color-text1-3"],borderWidth:"1px",borderStyle:"solid",borderColor:n["color-line1-3"],marginLeft:n["s-3"],marginBottom:n["s-3"],overflow:"hidden"},"upload__item-image":{display:"inline-block",width:2*n["s-13"],height:2*n["s-13"]},"upload__item-progress":{position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, .8)"},upload__remove:{position:"absolute",right:0,top:0,backgroundColor:"rgba(0, 0, 0, .3)",borderRadius:n["corner-round"],width:n["s-7"],height:n["s-7"],display:"flex",justifyContent:"center",alignItems:"center"},"upload__remove-image":{fontSize:n["icon-xs"],color:n["color-white"]},upload__fail:{position:"absolute",width:2*n["s-13"],height:2*n["s-13"],display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, .8)"},"upload__fail-image":{fontSize:n["icon-l"]},"upload__item--fail":{borderColor:n["color-error-2"]},"upload-file__item":{position:"relative",height:n["s-9"],flexDirection:"column",justifyContent:"center",alignItems:"flex-start",backgroundColor:n["color-fill1-2"],marginBottom:n["s-3"]},"upload-file__item--fail":{backgroundColor:n["color-error-1"],color:n["color-error-2"]},"upload-file__item-progress":{display:"flex",width:600,marginTop:n["s-1"]/2,marginLeft:n["s-2"],marginRight:n["s-12"]},"upload-file__item-name":{flexDirection:"row",paddingLeft:n["s-2"]},"upload-file__item-name-text":{fontSize:n["s-3"]},"upload-file__item-name-text--fail":{color:n["color-error-2"]},"upload-file__item-size":{fontSize:n["s-3"],color:n["color-text1-2"],paddingLeft:n["s-1"]},"upload-file__remove":{position:"absolute",right:0,top:0,width:n["s-7"],height:n["s-7"],flexDirection:"row",justifyContent:"center",alignItems:"center"},"upload-file__remove-icon":{fontSize:n["font-size-caption"],color:n["color-text1-2"]}}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var t=e.Core;return{toast:{position:"fixed",left:0,top:500,minWidth:t["s-6"]+1.5*t["font-size-body-1"]+t["s-2"]+2*t["s-3"]+t["s-1"],borderRadius:t["corner-1"],backgroundColor:"rgba(0, 0, 0, 0.6)",paddingLeft:t["s-3"],paddingRight:t["s-3"],paddingTop:t["s-3"],paddingBottom:t["s-3"],boxSizing:"border-box",opacity:0,maxWidth:540,zIndex:1400,pointerEvents:"none",touchAction:"none"},"toast--view":{position:"static",left:"auto",top:"auto",zIndex:1},toast__title:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",boxSizing:"content-box"},toast__title__text:{fontSize:t["font-size-body-2"],lineHeight:1.3*t["font-size-body-2"],color:t["color-white"],wordBreak:"break-all"},"toast__title__text--icon":{marginLeft:t["s-2"]},toast__icon:{width:t["s-6"],height:t["s-6"],fontSize:t["s-6"],color:t["color-white"],quality:"original"},toast__content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"toast__content--has-title":{marginTop:t["s-2"]},toast__content__text:{minWidth:4*t["font-size-body-1"]+t["s-1"],fontSize:t["font-size-body-1"],lineHeight:1.5*t["font-size-body-1"],color:t["color-white"],wordBreak:"break-all",textAlign:"center"}}}},function(e,t,n){"use strict";t.__esModule=!0,t.px2rem=o,t.getComponentRect=function(e,t){if(t){var n=(e=(0,i.default)(e)).getBoundingClientRect();t({result:!0,size:{x:o(n.x),y:o(n.y),width:o(n.width),height:o(n.height),top:o(n.top),bottom:o(n.bottom),left:o(n.left),right:o(n.right)}})}},t.rAF=void 0;var r,i=(r=n(13))&&r.__esModule?r:{default:r};function o(e){return 750*e/window.innerWidth}var a=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}).bind(window);t.rAF=a},function(e,t,n){"use strict";t.__esModule=!0,t.hide=t.show=void 0;var r=n(0),i=a(n(14)),o=a(n(92));function a(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l=null,c=(0,r.forwardRef)((function(e,t){var n=e.icon,i=e.title,a=e.content,l=e.duration,c=void 0===l?2e3:l,d=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["icon","title","content","duration"]),f=(0,r.useState)(!0),h=f[0],p=f[1],m=n&&(-1!==n.indexOf("://")||-1!==n.indexOf("data:image"));return(0,r.createElement)(o.default,s({},d,{ref:t,icon:m?null:n,image:m?n:null,title:i,content:a,visible:h,duration:c,onHide:function(){p(!1)},onExited:function(){u()}}))}));t.show=function(e,t){var n=r.shared.Host.driver;if(!n)throw new Error("Toast: use toast after render App.");"string"==typeof e&&(e={content:e}),"number"==typeof t&&(e.duration=t),u();var i=l=document.createElement("div");document.body.appendChild(i),(0,r.render)((0,r.createElement)(c,e),i,{driver:n})};var u=function(){if(clearTimeout(null),l)try{(0,i.default)(l),document.body.removeChild(l)}catch(e){}l=null};t.hide=u},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["2","3","4","5"]},"2":{"id":"2","parent":"0","name":"model","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["4"]},"3":{"id":"3","parent":"0","name":"camera","isActive":true,"position":[0,1.7,5],"scale":[1,1,1],"rotation":[0,180,0],"children":[],"abilities":["3","7"]},"4":{"id":"4","parent":"0","name":"","isActive":true,"position":[0,5,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["5"]},"5":{"id":"5","parent":"0","name":"PBR","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]}},"abilities":{"3":{"type":"Camera","props":{"backgroundColor":[0,0,0,0],"fieldOfView":45,"nearClipPlane":1,"farClipPlane":10,"clearMode":1,"pixelRatio":2,"isOrthographic":false},"node":"3","id":"3"},"4":{"props":{"asset":{"type":"asset","id":1},"isAnimate":true,"autoPlay":"CINEMA_4D_Main","loop":1},"node":"2","type":"GLTFModel","id":"4"},"5":{"props":{"color":[1,1,1],"intensity":1.7},"node":"4","type":"AAmbientLight","id":"5"},"6":{"props":{"specularIntensity":0.2,"specularMap":{"type":"asset","id":6}},"node":"5","type":"AEnvironmentMapLight","id":"6"},"7":{"props":{"id":7,"name":"Script5418940"},"node":"3","type":"script.Script5418940","id":"7"}},"assets":{"1":{"name":".gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/fbbee7b3-19f8-4fa9-b5fd-a7af3813565a/97000008/0.48569261899524196.gltf","source":null,"size":36460,"virtual":false,"props":{"animationsNames":["CINEMA_4D_Main"],"newMaterial":[{"id":2,"type":"asset","meta":{"name":"DefaultMaterial"},"props":{}},{"id":3,"type":"asset","meta":{"name":"DefaultMaterial","type":"PBRMaterial"},"props":{}}]},"fid":null,"id":1},"2":{"id":2,"name":"DefaultMaterial","type":"unlitMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.5,0.5,0.5,1],"opacity":1,"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"3":{"id":3,"name":"DefaultMaterial","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.5,0.5,0.5,1],"opacity":1,"baseColorTexture":{"type":"asset","id":5},"metallicFactor":0.07,"roughnessFactor":0.76,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"4":{"name":"CINEMA_4D_Main","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":1,"action":"CINEMA_4D_Main"}},"fid":null,"id":4},"5":{"name":".png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/cfa5553a-f22e-48b9-94e5-8f83afb3e301/97000008/0.0913300333470628.png","source":null,"size":3130060,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":5},"6":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/309d7f22-fc28-4615-8bba-fb2736a66970/97000008/0.9384396042409142.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/c43df521-f000-482c-9083-0fb2ad1ce044/97000008/0.02424088237822275.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/a903642c-8230-4d76-93c6-5a9131069bd2/97000008/0.29949204910389127.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/9e831d44-02a6-4a65-bda5-2aa4a0b097ce/97000008/0.06618889263541461.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/f25e7608-7d8d-4fb0-b77f-ffed6e647963/97000008/0.001567729344714719.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/7b543800-2759-468b-a685-0b469846c43e/97000008/0.5960574197219191.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":6},"7":{"name":"script5418940.ts","type":"script","icon":"icon-ts","path":"/","preload":false,"downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/c65f11e3-e531-4204-8c22-e33b32735a16/0.988/projects/97000008/script/script5418940_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/adefd73a-9ea6-4c6e-b008-14c182c15694/0.895/projects/97000008/script/script5418940.ts","size":"0","virtual":false,"props":{"scripts":[{"name":"Script5418940"}]},"fid":null,"id":7}},"animator":{"animators":{},"animationClips":{"4":{"id":4,"type":"Skeleton","options":{"gltfAssetId":1,"action":"CINEMA_4D_Main"},"action":null}},"animations":{}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(302),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script5418940=void 0;var o=n(3),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,1.5,0]});e.maxDistance=5,e.minDistance=5},t}(o.Script);t.Script5418940=a},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["1","2","3","4","5"]},"1":{"id":"1","parent":"0","name":"directLight","isActive":true,"position":[3,3,5],"scale":[1,1,1],"rotation":[30,200,0],"children":[],"abilities":["1"]},"2":{"id":"2","parent":"0","name":"model","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["4"]},"3":{"id":"3","parent":"0","name":"camera","isActive":true,"position":[-0.004888840019702911,2.5055932998657227,5],"scale":[1,1,1],"rotation":[-173.55213275593303,-0.48983706319992143,179.99999999973784],"children":[],"abilities":["3","7"]},"4":{"id":"4","parent":"0","name":"PBR","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["5"]},"5":{"id":"5","parent":"0","name":"","isActive":true,"position":[-5,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]}},"abilities":{"1":{"type":"ADirectLight","props":{"color":[1,1,1],"intensity":0.6},"node":"1"},"3":{"type":"Camera","props":{"backgroundColor":[0,0,0,0],"fieldOfView":45,"nearClipPlane":1,"farClipPlane":100,"clearMode":1},"node":"3"},"4":{"props":{"asset":{"type":"asset","id":6},"isAnimate":true,"autoPlay":"Take 001","loop":1},"node":"2","type":"GLTFModel","id":"4"},"5":{"props":{"specularIntensity":1.4,"specularMap":null},"node":"4","type":"AEnvironmentMapLight","id":"5"},"6":{"props":{"color":[1,1,1],"intensity":0.6},"node":"5","type":"AAmbientLight","id":"6"},"7":{"props":{"id":17,"name":"Script4101243"},"node":"3","type":"script.Script4101243","id":"7"}},"assets":{"6":{"name":"jietouchaoren_v001.gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/9354b865-18c5-404c-9bf8-9d5811dacbd2/110000013/0.2959944087306663.gltf","source":null,"size":33773,"virtual":false,"props":{"animationsNames":["Take 001"],"newMaterial":[{"id":7,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":8,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":9,"type":"asset","meta":{"name":"lambert35","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":10,"type":"texture","meta":{"name":"file2","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":11,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":12,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}}]},"fid":null,"id":6},"7":{"id":7,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":14},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"8":{"id":8,"name":"file1","type":"texture","icon":"icon-pic","preload":false,"downloadable":true,"editable":false,"path":"/","url":"https://gw.alipayobjects.com/zos/OasisHub/c8c7a67f-90ab-4f5a-9f4f-eb20937e5318/110000013/0.21382028045644308.png","source":null,"size":"0","props":{}},"9":{"id":9,"name":"lambert35","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":14},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"10":{"id":10,"name":"file2","type":"texture","icon":"icon-pic","preload":false,"downloadable":true,"editable":false,"path":"/","url":"https://gw.alipayobjects.com/zos/OasisHub/7c7fd344-46b8-429f-b2e3-f498d8a7d049/110000013/0.5961147768113229.png","source":null,"size":"0","props":{}},"11":{"id":11,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":14},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"12":{"id":12,"name":"file1","type":"texture","icon":"icon-pic","preload":false,"downloadable":true,"editable":false,"path":"/","url":"https://gw.alipayobjects.com/zos/OasisHub/f67fda1b-3d46-4946-84cb-ca3dda01877c/110000013/0.6803140497850635.png","source":null,"size":"0","props":{}},"13":{"name":"Take 001","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":6,"action":"Take 001"}},"fid":null,"id":13},"14":{"name":"_2.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/f20aa595-e3cf-4564-90fb-c3cecb95f1fe/110000013/0.49356326420394936.png","source":null,"size":1248292,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":14},"16":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/e2707bb8-d872-42b9-af23-8b705831444b/110000013/0.9946606620328804.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/05b47a68-ab19-48de-860e-9f278bf50857/110000013/0.8684759577316719.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/c9983d30-cdd2-4644-8157-bda1c7a76688/110000013/0.6022036894625817.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/60ad8f69-ed96-402d-816c-3acb7562ffd4/110000013/0.7209702727262066.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/93e28e7e-3e5d-49fe-a82a-c8e465708b89/110000013/0.21818930706731465.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/cc5e7903-098e-4a62-bffd-a707d9e9c06e/110000013/0.03088568180208906.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":16},"17":{"name":"script4101243.ts","type":"script","icon":"icon-ts","path":"/","downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/dbbe1bf2-fe0d-498c-a8ca-d8b5ebb60b5b/0.653/projects/110000013/script/script4101243_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/4cfdf3da-d367-47b7-a53e-ab0185a3a8b5/0.538/projects/110000013/script/script4101243.ts","virtual":false,"props":{"scripts":[{"name":"Script4101243"}]},"fid":null,"id":17}},"animator":{"animators":{},"animationClips":{"13":{"id":13,"type":"Skeleton","options":{"gltfAssetId":6,"action":"Take 001"},"action":null}},"animations":{}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(305),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script4101243=void 0;var o=n(3),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,1.8,0]});e.maxDistance=5,e.minDistance=5},t}(o.Script);t.Script4101243=a},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["1","3","4","5","6"]},"1":{"id":"1","parent":"0","name":"directLight","isActive":false,"position":[3,3,5],"scale":[1,1,1],"rotation":[30,200,0],"children":[],"abilities":["1"]},"3":{"id":"3","parent":"0","name":"camera","isActive":true,"position":[0.1,2.5,4.3],"scale":[1,1,1],"rotation":[190.17760659070936,0,179.9999999990361],"children":[],"abilities":["3","7"]},"4":{"id":"4","parent":"0","name":"","isActive":true,"position":[0,-0.3,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["4"]},"5":{"id":"5","parent":"0","name":"","isActive":true,"position":[-5,0,3],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["5"]},"6":{"id":"6","parent":"0","name":"PBR","isActive":true,"position":[0,0,3],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]}},"abilities":{"1":{"type":"ADirectLight","props":{"color":[1,1,1],"intensity":0.6},"node":"1"},"3":{"type":"Camera","props":{"backgroundColor":[0,0,0,0],"fieldOfView":45,"nearClipPlane":1,"farClipPlane":10,"clearMode":1,"isOrthographic":false},"node":"3","id":"3"},"4":{"props":{"asset":{"type":"asset","id":32},"isAnimate":true,"autoPlay":"Take 001","loop":1},"node":"4","type":"GLTFModel","id":"4"},"5":{"props":{"color":[1,1,1],"intensity":1.3},"node":"5","type":"AAmbientLight","id":"5"},"6":{"props":{"specularIntensity":0.6,"specularMap":null},"node":"6","type":"AEnvironmentMapLight","id":"6"},"7":{"props":{"id":28,"name":"Script0452255"},"node":"3","type":"script.Script0452255","id":"7"}},"assets":{"6":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/49a22dc9-a86b-494e-90ae-0cb364a5abfa/90000007/0.6436414182280574.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/12c37e2d-b606-474d-a18c-d4efa1e9c7f9/90000007/0.21044060740705217.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/7f4d2fa1-c32d-47d9-9760-a54fe9d0a003/90000007/0.6350890920575056.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/3a2817ea-c5e4-4125-ab68-f003f745164d/90000007/0.4600447824147038.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/d96e743b-b2a0-4843-be19-5d4a208102d2/90000007/0.48940383962996226.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/2c71a576-990b-4290-ad3b-8755e2deb334/90000007/0.19903293520591991.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":6},"26":{"name":"CINEMA_4D_Main","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":23,"action":"CINEMA_4D_Main"}},"fid":null,"id":26},"29":{"name":"script0452255.ts","type":"script","icon":"icon-ts","path":"/","preload":false,"downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/604c626f-fb25-42a7-8de2-54eca0514acb/0.777/projects/90000007/script/script0452255_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/a1fa3192-658d-481a-b544-e312fb6c57c9/0.934/projects/90000007/script/script0452255.ts","virtual":false,"props":{"scripts":[{"name":"Script0452255"}]},"fid":null,"id":29},"32":{"name":"zhajiachuanda_v001.gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/255ee1d1-b012-4fd5-a690-f141e9b42918/90000007/0.521071474734232.gltf","source":null,"size":16519,"virtual":false,"props":{"animationsNames":["Take 001"],"newMaterial":[{"id":33,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":34,"type":"texture","meta":{"name":"file3","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":35,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":36,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}}]},"fid":null,"id":32},"33":{"id":33,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":38},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"35":{"id":35,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":38},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":0.92,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false,"metallicRoughnessTexture":null,"occlusionTexture":{"type":"asset","id":39}}},"37":{"name":"Take 001","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":32,"action":"Take 001"}},"fid":null,"id":37},"38":{"name":"3.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/939507db-9c7a-49b5-a161-966c0eb8621a/90000007/0.1386199834279147.png","source":null,"size":1694434,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":38},"39":{"name":"4.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/51a9fdd6-7706-4c35-939c-303055f03229/90000007/0.07501312625756484.png","source":null,"size":1695094,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":39}},"animator":{"animators":{},"animationClips":{"4":{"id":4,"type":"Skeleton","options":{"gltfAssetId":1,"action":"CINEMA_4D_Main"},"action":null},"12":{"id":12,"type":"Skeleton","options":{"gltfAssetId":7,"action":"CINEMA_4D___"},"action":null},"22":{"id":22,"type":"Skeleton","options":{"gltfAssetId":17,"action":"CINEMA_4D___"},"action":null},"26":{"id":26,"type":"Skeleton","options":{"gltfAssetId":23,"action":"CINEMA_4D_Main"},"action":null},"37":{"id":37,"type":"Skeleton","options":{"gltfAssetId":32,"action":"Take 001"},"action":null}},"animations":{}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(308),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script0452255=void 0;var o=n(3),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,1,0]});e.maxDistance=5.2,e.minDistance=5.2},t}(o.Script);t.Script0452255=a},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["1","2","4","5","11"]},"1":{"id":"1","parent":"0","name":"directLight","isActive":false,"position":[3,3,5],"scale":[1,1,1],"rotation":[30,200,0],"children":[],"abilities":["1"]},"2":{"id":"2","parent":"0","name":"model","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["4"]},"4":{"id":"4","parent":"0","name":"","isActive":true,"position":[-3,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["5"]},"5":{"id":"5","parent":"0","name":"PBR","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]},"11":{"id":"11","parent":"0","name":"camera","isActive":true,"position":[0.2,2.6213836669921875,5],"scale":[1,1,1],"rotation":[-170.34748884545036,-0.9379883283792426,179.9999999984962],"children":[],"abilities":["14","15"]}},"abilities":{"1":{"type":"ADirectLight","props":{"color":[1,1,1],"intensity":0.6},"node":"1"},"4":{"props":{"asset":{"type":"asset","id":56},"isAnimate":true,"autoPlay":"Take 001","loop":1,"enabled":true},"node":"2","type":"GLTFModel","id":"4"},"5":{"props":{"color":[1,1,1],"intensity":1.2},"node":"4","type":"AAmbientLight","id":"5"},"6":{"props":{"specularIntensity":0.2,"specularMap":{"type":"asset","id":32}},"node":"5","type":"AEnvironmentMapLight","id":"6"},"14":{"props":{"backgroundColor":[0,0,0,0],"priority":0,"isOrthographic":false,"fieldOfView":45,"nearClipPlane":0.1,"farClipPlane":100,"orthographicSize":10,"pixelRatio":null},"node":"11","type":"Camera","id":"14"},"15":{"props":{"id":67,"name":"Script276682"},"node":"11","type":"script.Script276682","id":"15"}},"assets":{"32":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/2b851c2e-f81b-4007-9d57-dfe6b054abbf/48000129/0.5800242796728763.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/bedf323a-ec73-48c5-80fd-c73f64349ab3/48000129/0.25156035954083866.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/d3077f83-ad65-498e-a53e-5e9fc1e75024/48000129/0.9861351549366169.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/34887b44-8385-48b9-afaf-1e519553393b/48000129/0.2588401341042139.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/a171b6ad-7de4-46f6-a3f5-db96145ddc3f/48000129/0.07806635753464919.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/ae92a29f-c7c9-48c6-bf18-608a7d6dd079/48000129/0.7577274329200392.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":32},"56":{"name":"yundongyangguang_v001.gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/3f420af3-24dc-4502-ab41-32a404ddd17b/48000129/0.3006451663066443.gltf","source":null,"size":44858,"virtual":false,"props":{"animationsNames":["Take 001"],"newMaterial":[{"id":57,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":58,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":59,"type":"asset","meta":{"name":"lambert9","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":60,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":61,"type":"asset","meta":{"name":"","type":"PBRMaterial"},"props":{"baseColorTexture":{"id":62,"type":"texture","meta":{"name":"file2","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}}]},"fid":null,"id":56},"57":{"id":57,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":66},"metallicFactor":0.2,"roughnessFactor":0.66,"normalScale":10,"emissiveFactor":[0,0,0],"occlusionStrength":1.97,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":0.8,"refractionRatio":0.7518796992481203,"refractionDepth":1.31,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false,"normalTexture":null,"_debug_refractionTexture":false}},"59":{"id":59,"name":"lambert9","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":66},"metallicFactor":0.28,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"61":{"id":61,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0,0,0,1],"opacity":1,"baseColorTexture":null,"metallicFactor":0.19,"roughnessFactor":0.2,"normalScale":0.52,"emissiveFactor":[0,0,0],"occlusionStrength":3.84,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":0.2,"refractionRatio":0.7518796992481203,"refractionDepth":2.03,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":true,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false,"_debug_refractionTexture":false,"metallicRoughnessTexture":{"type":"asset","id":65},"normalTexture":{"type":"asset","id":65}}},"63":{"name":"Take 001","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":56,"action":"Take 001"}},"fid":null,"id":63},"65":{"name":"_eye.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/abf9f35a-b29d-42a9-8237-6222e6126a5f/48000129/0.943026028349915.png","source":null,"size":29296,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":65},"66":{"name":"_3.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/4fe8032c-de26-4d81-9d1e-94a8b96c00e5/48000129/0.3565450130779506.png","source":null,"size":1770668,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":66},"67":{"name":"script276682.ts","type":"script","icon":"icon-ts","path":"/","preload":false,"downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/13062e34-7811-4f6b-8173-6f7b027d97a5/0.884/projects/48000129/script/script276682_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/5a4b93df-0948-4497-83fc-91621140132a/0.614/projects/48000129/script/script276682.ts","virtual":false,"props":{"scripts":[{"name":"Script276682"}]},"fid":null,"id":67}},"animator":{"animators":{},"animationClips":{"6":{"id":6,"type":"Skeleton","options":{"gltfAssetId":1,"action":"CINEMA_4D_Main"},"action":null},"10":{"id":10,"type":"Skeleton","options":{"gltfAssetId":7,"action":"CINEMA_4D___"},"action":null},"16":{"id":16,"type":"Skeleton","options":{"gltfAssetId":11,"action":"CINEMA_4D_Main"},"action":null},"20":{"id":20,"type":"Skeleton","options":{"gltfAssetId":18,"action":"CINEMA_4D___"},"action":null},"23":{"id":23,"type":"Skeleton","options":{"gltfAssetId":21,"action":"CINEMA_4D___"},"action":null},"29":{"id":29,"type":"Skeleton","options":{"gltfAssetId":24,"action":"Take 001"},"action":null},"38":{"id":38,"type":"Skeleton","options":{"gltfAssetId":33,"action":"Take 001"},"action":null},"44":{"id":44,"type":"Skeleton","options":{"gltfAssetId":40,"action":"CINEMA_4D___"},"action":null},"55":{"id":55,"type":"Skeleton","options":{"gltfAssetId":50,"action":"CINEMA_4D___"},"action":null},"63":{"id":63,"type":"Skeleton","options":{"gltfAssetId":56,"action":"Take 001"},"action":null}},"animations":{}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(311),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script276682=void 0;var o=n(3),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,1,0]});e.maxDistance=5.2,e.minDistance=5.2},t.prototype.onUpdate=function(){},t}(o.NodeAbility);t.Script276682=a},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["2","3","4","5","6"]},"2":{"id":"2","parent":"0","name":"model","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["4"]},"3":{"id":"3","parent":"0","name":"camera","isActive":true,"position":[-2.3552374839782715,6.1020121574401855,2.0943655967712402],"scale":[1,1,1],"rotation":[-120.16950962588137,47.486162137398075,-179.99999935212495],"children":[],"abilities":["3","8"]},"4":{"id":"4","parent":"0","name":"","isActive":true,"position":[-5,5,5],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["5"]},"5":{"id":"5","parent":"0","name":"PNR","isActive":true,"position":[-3.674203872680664,3.1796512603759766,5.4649553298950195],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]},"6":{"id":"6","parent":"0","name":"directLight","isActive":false,"position":[-3,4,5],"scale":[1,1,1],"rotation":[0,150,-30],"children":[],"abilities":["7"]}},"abilities":{"3":{"type":"Camera","props":{"backgroundColor":[0,0,0,0],"fieldOfView":45,"nearClipPlane":1,"farClipPlane":100,"clearMode":1,"pixelRatio":3},"node":"3","id":"3"},"4":{"props":{"asset":{"type":"asset","id":9},"isAnimate":true,"autoPlay":"CINEMA_4D___","loop":1},"node":"2","type":"GLTFModel","id":"4"},"5":{"props":{"color":[1,1,1],"intensity":1},"node":"4","type":"AAmbientLight","id":"5"},"6":{"props":{"specularIntensity":0.2,"specularMap":{"type":"asset","id":7}},"node":"5","type":"AEnvironmentMapLight","id":"6"},"7":{"props":{"color":[1,1,1],"intensity":0.1},"node":"6","type":"ADirectLight","id":"7"},"8":{"props":{"id":16,"name":"Script4905828"},"node":"3","type":"script.Script4905828","id":"8"}},"assets":{"7":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/b02cf40d-cfaf-4dca-b67a-c65c496af453/90000012/0.058458654534844445.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/c3f543da-3400-4fdb-9aff-e1111f700bae/90000012/0.8460454781086735.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/42a39bb1-4b50-4087-9267-45ac09fa716d/90000012/0.6337187523897183.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/b6a3238c-5e98-4a9f-ae33-ad2e270af09e/90000012/0.07907420007431032.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/cb9b1253-2f2d-4f57-b464-07c26ee4f848/90000012/0.7717368382206933.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/9d5384e4-a777-4ed0-8420-548116396374/90000012/0.01199443693925173.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":7},"8":{"name":".png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/8124b0d8-00a5-4b46-95f1-bd36f83d3a90/90000012/0.9372824440485676.png","source":null,"size":1799895,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":8},"9":{"name":"FBX.gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/d146b62d-f576-40fb-a03f-10de9d282678/90000012/0.03230758328886574.gltf","source":null,"size":29976,"virtual":false,"props":{"animationsNames":["CINEMA_4D___"],"newMaterial":[{"id":10,"type":"asset","meta":{"name":".1"},"props":{}},{"id":11,"type":"asset","meta":{"name":""},"props":{"baseColorTexture":{"id":12,"type":"texture","meta":{"name":"5","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png"},"props":{}}}},{"id":13,"type":"asset","meta":{"name":""},"props":{"baseColorTexture":{"id":14,"type":"texture","meta":{"name":"5","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png"},"props":{}}}}]},"fid":null,"id":9},"10":{"id":10,"name":".1","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[1,1,1,0.33],"opacity":0.33,"metallicFactor":0.54,"roughnessFactor":0.2,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"BLEND","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"11":{"id":11,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[1,1,1,1],"opacity":1,"baseColorTexture":{"id":12,"type":"asset","meta":{"name":"5","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png"},"props":{}},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"12":{"id":12,"name":"5","type":"texture","icon":"icon-pic","preload":false,"downloadable":true,"editable":false,"path":"/","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png","source":null,"size":"0","props":{}},"13":{"id":13,"name":"","type":"unlitMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[1,1,1,1],"opacity":1,"baseColorTexture":{"id":14,"type":"asset","meta":{"name":"5","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png"},"props":{}},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"BLEND","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"14":{"id":14,"name":"5","type":"texture","icon":"icon-pic","preload":false,"downloadable":true,"editable":false,"path":"/","url":"https://gw.alipayobjects.com/zos/OasisHub/2158b5ac-bfc6-42b5-bdb4-7e6a35221c4a/90000012/0.7823274848576449.png","source":null,"size":"0","props":{}},"15":{"name":"CINEMA_4D___","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":9,"action":"CINEMA_4D___"}},"fid":null,"id":15},"16":{"name":"script4905828.ts","type":"script","icon":"icon-ts","path":"/","downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/11fc6f69-c476-46f0-a66e-3d0525df72cf/0.508/projects/90000012/script/script4905828_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/caa2f0e5-c30a-49b7-a308-c2de4ca19932/0.100/projects/90000012/script/script4905828.ts","virtual":false,"props":{"scripts":[{"name":"Script4905828"}]},"fid":null,"id":16}},"animator":{"animators":{},"animationClips":{"6":{"id":6,"type":"Skeleton","options":{"gltfAssetId":1,"action":"Take 001"},"action":null},"14":{"id":14,"type":"Skeleton","options":{"gltfAssetId":9,"action":"Take 001"},"action":null},"15":{"id":15,"type":"Skeleton","options":{"gltfAssetId":9,"action":"CINEMA_4D___"},"action":null},"20":{"id":20,"type":"Skeleton","options":{"gltfAssetId":16,"action":"CINEMA_4D___"},"action":null},"26":{"id":26,"type":"Skeleton","options":{"gltfAssetId":22,"action":"CINEMA_4D___"},"action":null}},"animations":{}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(314),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script4905828=void 0;var o=n(3),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,1.5,0]});e.maxDistance=5.5,e.minDistance=5.5},t}(o.Script);t.Script4905828=a},function(e){e.exports=JSON.parse('{"nodes":{"0":{"id":"0","parent":-1,"name":"root","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":["2","3","4","5","6","7"]},"2":{"id":"2","parent":"0","name":"","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,-10,0],"children":[],"abilities":["4"]},"3":{"id":"3","parent":"0","name":"camera","isActive":true,"position":[0,1,5.3],"scale":[1,1,1],"rotation":[0,180,0],"children":[],"abilities":["10","11"]},"4":{"id":"4","parent":"0","name":"","isActive":true,"position":[-5,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["6"]},"5":{"id":"5","parent":"0","name":"node","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["7"]},"6":{"id":"6","parent":"0","name":"PBR","isActive":true,"position":[0,0,0],"scale":[1,1,1],"rotation":[0,0,0],"children":[],"abilities":["8"]},"7":{"id":"7","parent":"0","name":"directLight","isActive":true,"position":[0,2,100],"scale":[1,1,1],"rotation":[0,180,0],"children":[],"abilities":["9"]}},"abilities":{"4":{"props":{"asset":{"type":"asset","id":55},"isAnimate":true,"autoPlay":"Take 001","loop":1},"node":"2","type":"GLTFModel","id":"4"},"6":{"props":{"color":[1,1,1],"intensity":1.2},"node":"4","type":"AAmbientLight","id":"6"},"7":{"props":{"animationData":{"type":"asset","id":16},"autoPlay":false,"wrapMode":1},"node":"5","type":"AAnimationNew","id":"7"},"8":{"props":{"specularIntensity":1.1,"specularMap":null},"node":"6","type":"AEnvironmentMapLight","id":"8"},"9":{"props":{"color":[1,1,1],"intensity":0.2},"node":"7","type":"ADirectLight","id":"9"},"10":{"props":{"id":53,"name":"Script3122220"},"node":"3","type":"script.Script3122220","id":"10"},"11":{"props":{"backgroundColor":[0,0,0,0],"priority":0,"isOrthographic":false,"fieldOfView":45,"nearClipPlane":0.1,"farClipPlane":20,"orthographicSize":10,"pixelRatio":null},"node":"3","type":"Camera","id":"11"}},"assets":{"12":{"name":"minisampler","type":"cubeTexture","icon":"icon-cubemap","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"images":{"nx":{"url":"https://gw.alipayobjects.com/zos/OasisHub/735cd60e-a9f1-4993-b001-647b054499fd/48000130/0.11952283782268669.jpg"},"ny":{"url":"https://gw.alipayobjects.com/zos/OasisHub/d23a54ad-823c-447b-950c-e3ec063203fc/48000130/0.0013654702879528635.jpg"},"nz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/b231d7aa-a794-4c35-909b-a3bb5b546db8/48000130/0.48033772199717606.jpg"},"pz":{"url":"https://gw.alipayobjects.com/zos/OasisHub/e6d8d2e3-af58-4b11-bf5e-05ead7bdbbbd/48000130/0.509906296314214.jpg"},"px":{"url":"https://gw.alipayobjects.com/zos/OasisHub/2fd785c1-2a20-420e-9f6e-ec277a1800d2/48000130/0.47006035659089007.jpg"},"py":{"url":"https://gw.alipayobjects.com/zos/OasisHub/7ad42872-86fa-4778-81be-e0f06d9d9051/48000130/0.4085652560851831.jpg"}},"wrapModeU":0,"wrapModeV":0,"filterMode":1,"anisoLevel":1},"fid":null,"id":12},"53":{"name":"script3122220.ts","type":"script","icon":"icon-ts","path":"/","preload":false,"downloadable":true,"editable":true,"url":"https://gw.alipayobjects.com/os/OasisHub/9c60bdae-5178-479b-91b6-873ed0a29595/0.489/projects/48000130/script/script3122220_compiled.ts","source":"https://gw.alipayobjects.com/os/OasisHub/2e736cf0-b177-497a-9c3e-2ee6bd2a8ddb/0.430/projects/48000130/script/script3122220.ts","virtual":false,"props":{"scripts":[{"name":"Script3122220"}]},"fid":null,"id":53},"55":{"name":"rihantianmei_v001.gltf","type":"gltf","icon":"icon-gltfmoxing-","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/os/OasisHub/d943df59-556c-4a0e-b5c5-74022ee654db/48000130/0.4091783414239507.gltf","source":null,"size":39144,"virtual":false,"props":{"animationsNames":["Take 001"],"newMaterial":[{"id":56,"type":"asset","meta":{"name":"lambert8"},"props":{"baseColorTexture":{"id":57,"type":"texture","meta":{"name":"file6","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":58,"type":"asset","meta":{"name":"lambert5"},"props":{"baseColorTexture":{"id":59,"type":"texture","meta":{"name":"file4","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":60,"type":"asset","meta":{"name":"lambert6"},"props":{"baseColorTexture":{"id":61,"type":"texture","meta":{"name":"file5","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":62,"type":"asset","meta":{"name":"lambert4"},"props":{"baseColorTexture":{"id":63,"type":"texture","meta":{"name":"file2","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":64,"type":"asset","meta":{"name":"lambert7"},"props":{"baseColorTexture":{"id":65,"type":"texture","meta":{"name":"file3","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}},{"id":66,"type":"asset","meta":{"name":"lambert3"},"props":{"baseColorTexture":{"id":67,"type":"texture","meta":{"name":"file1","url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="},"props":{}}}}]},"fid":null,"id":55},"56":{"id":56,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":68},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"58":{"id":58,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":70},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"60":{"id":60,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":70},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"62":{"id":62,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":70},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"64":{"id":64,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":70},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"66":{"id":66,"name":"","type":"PBRMaterial","icon":"icon-pbrcaizhi-","preload":false,"downloadable":false,"editable":false,"path":"/","url":null,"source":null,"size":"0","props":{"baseColorFactor":[0.800000011920929,0.800000011920929,0.800000011920929,1],"opacity":1,"baseColorTexture":{"type":"asset","id":68},"metallicFactor":0.200000002980232,"roughnessFactor":0.800000011920929,"normalScale":1,"emissiveFactor":[0,0,0],"occlusionStrength":1,"alphaCutoff":0.5,"clearCoat":0,"clearCoatRoughness":1,"specularFactor":[1,1,1],"glossinessFactor":0,"envMapIntensity":1,"refractionRatio":0.7518796992481203,"refractionDepth":1,"perturbationUOffset":0,"perturbationVOffset":0,"alphaMode":"OPAQUE","doubleSided":false,"side":0,"unlit":false,"srgb":false,"srgbFast":false,"gamma":false,"blendFunc":[],"blendFuncSeparate":[770,771,1,1],"depthMask":[false],"getOpacityFromRGB":false,"isMetallicWorkflow":true,"envMapModeRefract":false}},"68":{"name":"rihantianmei.png","type":"texture","icon":"icon-pic","path":"/","preload":false,"downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/7df77666-da3c-4ad1-a368-8fb1f3f31245/48000130/0.557089378406719.png","source":null,"size":1211299,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":68},"69":{"name":"Take 001","type":"AnimationClip","icon":"icon-dianying1","path":"/","preload":false,"downloadable":false,"editable":false,"url":null,"source":null,"size":"0","virtual":false,"props":{"type":"Skeleton","options":{"gltfAssetId":55,"action":"Take 001"}},"fid":null,"id":69},"70":{"name":"_2.png","type":"texture","icon":"icon-pic","path":"/","downloadable":true,"editable":false,"url":"https://gw.alipayobjects.com/zos/OasisHub/8a93821e-381a-45e3-a5b9-2832c400fe4e/48000130/0.794918511744853.png","source":null,"size":1195472,"virtual":false,"props":{"wrapModeU":1,"wrapModeV":1,"filterMode":1,"anisoLevel":1},"fid":null,"id":70}},"animator":{"animators":{},"animationClips":{"10":{"id":10,"type":"Skeleton","options":{"gltfAssetId":1,"action":"Take 001"},"action":null},"11":{"id":11,"type":"Skeleton","options":{"gltfAssetId":1,"action":"CINEMA_4D_Main"},"action":null},"15":{"id":15,"type":"Skeleton","options":{"gltfAssetId":13,"action":"CINEMA_4D_Main"},"action":null},"16":{"id":16,"type":"Skeleton","options":{"gltfAssetId":13,"action":"CINEMA_4D___"},"action":null},"20":{"id":20,"type":"Skeleton","options":{"gltfAssetId":18,"action":"CINEMA_4D___"},"action":null},"26":{"id":26,"type":"Skeleton","options":{"gltfAssetId":19,"action":"CINEMA_4D___"},"action":null},"34":{"id":34,"type":"Skeleton","options":{"gltfAssetId":27,"action":"Take 001"},"action":null},"49":{"id":49,"type":"Skeleton","options":{"gltfAssetId":36,"action":"Take 001"},"action":null},"69":{"id":69,"type":"Skeleton","options":{"gltfAssetId":55,"action":"Take 001"},"action":null}},"animations":{"16":{"id":16,"keyframes":{}}}},"version":2}')},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(317),t)},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Script3122220=void 0;var o=n(3),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){},t.prototype.onStart=function(){var e=this.node.createAbility(o.AOrbitControls,{target:[0,2,0]});e.maxDistance=5.5,e.minDistance=5.5},t}(o.Script);t.Script3122220=a},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return di}));var r=n(43),i=n.n(r),o=n(93),a=n.n(o),s=/\/\/lang\.alicdn\.com\//,l=/_([-\w]+)\.js/,c={get:function(e,t){var n;if(!e)return"";t=t||e;var r="flute_langs",o=i()(window[r])?window[r]:{},c="",u="";if(e.indexOf("#@#")>0&&(u=(n=e.split("#@#"))[0],e=n[1]),o[u]&&(o=o[u]),0===Object.keys(o).length){var d=document.scripts||[];Array.prototype.some.call(d,(function(e){var t=e.src;if(s.test(t)&&l.test(t)){var n=t.match(l);return c=n&&n.length>0?n[1]:""}return!1})),u&&c&&(r=u+"_"+c.toLowerCase(),o=i()(window[r])?window[r]:{})}return a()(o[e])?t:o[e]}},u=n(7),d=n.n(u),f=n(0),h=n(1),p=n.n(h),m=n(3);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?E(e):t}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var I=function(){function e(){v(this,e),this.registeredPlugins=new Set,this.plugins=[]}return _(e,[{key:"register",value:function(e){this.registeredPlugins.add(e)}},{key:"boot",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.registeredPlugins.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;"function"==typeof r&&(r=r(e)),this.plugins.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"reset",value:function(){this.registeredPlugins.clear(),this.plugins=[]}},{key:"nodeAdded",value:function(e){this.delegateMethod("nodeAdded",e)}},{key:"delegateMethod",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.plugins.forEach((function(t){return t[e]&&t[e].apply(void 0,n)}))}}]),e}();function F(e){return function(t,n,r){var i=r.value;r.value=function(){for(var t,n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e.before&&(t=this.oasis.pluginManager).delegateMethod.apply(t,[e.before].concat(o)),Promise.resolve(i.apply(this,arguments)).then((function(t){return e.after&&n.oasis.pluginManager.delegateMethod(e.after,t),t}))}}}function D(e,t,n){if(t!==n&&null!=n){var r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}}function N(e){return e&&"asset"===e.type}function z(e){for(var t=[],n=Object.getPrototypeOf(e),r=Object.getOwnPropertyDescriptors(n),i=0,o=Object.entries(r);i<o.length;i++){var a=C(o[i],2),s=a[0];"function"==typeof a[1].get&&t.push(s)}return t}var j,B,U,V,H={astc:1,s3tc:2,pvrtc:3,etc:4,etc1:5},G=(j=F({after:"nodeAdded"}),B=F({before:"beforeNodeUpdated",after:"nodeUpdated"}),U=F({before:"beforeNodeDeleted"}),L((V=function(){function e(t){v(this,e),this.oasis=t,this.nodeMap={},this.root=void 0,this.root=this.oasis.engine.currentScene.root.createChild("runtime-root")}return _(e,[{key:"add",value:function(e){return this.create(e),this.append(e.id,e.parent,e.index),this.get(e.id)}},{key:"update",value:function(e,t,n){return this.get(e)[t]=n,{id:e,key:t,value:n}}},{key:"get",value:function(e){return this.nodeMap[e]}},{key:"reset",value:function(){this.nodeMap={}}},{key:"delete",value:function(e){this.nodeMap[e].destroy(),delete this.nodeMap[e]}},{key:"create",value:function(e){var t=e.isActive,n=e.position,r=e.rotation,i=e.scale,o=e.id,a=e.name,s=new m.Node(null,null,a);return s.isActive=t,s.position=n,s.setRotationAngles(r[0],r[1],r[2]),s.scale=i,s.id=o,this.nodeMap[o]=s,s}},{key:"append",value:function(e,t,n){var r=this.nodeMap[e],i=this.nodeMap[t]||this.root;i.addChild(r);var o=i.children;D(o,o.length-1,n)}}]),e}()).prototype,"add",[j],Object.getOwnPropertyDescriptor(V.prototype,"add"),V.prototype),L(V.prototype,"update",[B],Object.getOwnPropertyDescriptor(V.prototype,"update"),V.prototype),L(V.prototype,"delete",[U],Object.getOwnPropertyDescriptor(V.prototype,"delete"),V.prototype),V),W=function(){function e(t,n){v(this,e),this.resourceManager=t,this._resource=n,this._meta={},this._attachedResources=[],this.setMeta()}return _(e,[{key:"setMeta",value:function(){}},{key:"resource",get:function(){return this._resource}},{key:"meta",get:function(){return this._meta}},{key:"attachedResources",get:function(){return this._attachedResources}}]),_(e,[{key:"loadWithAttachedResources",value:function(e,t,n){var r=this;return new Promise((function(i){r.load(e,t,n).then((function(){i({resources:[r],structure:{index:0,props:{}}})}))}))}},{key:"getProps",value:function(){return{}}},{key:"bind",value:function(){}},{key:"attach",value:function(){}},{key:"update",value:function(e,t){if(N(t)){var n=this.resourceManager.get(t.id);n?this._resource[e]=n.resource:m.Logger.warn("SchemaResource: ".concat(this.meta.name," can't find asset, which id is: ").concat(t.id))}else this._resource[e]=t}},{key:"updateMeta",value:function(e,t){this._meta[e]=t}},{key:"onDestroy",value:function(){}}]),e}(),X=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t,n){var r=this;return new Promise((function(i,o){var a,s,l,c;if(r.resourceManager.useCompressedTexture&&(null==t||null===(a=t.props)||void 0===a||null===(s=a.compression)||void 0===s?void 0:s.compressions.length)){var u=n.engine.getRHI(n.canvas),d=t.props.compression.compressions;d.sort((function(e,t){return H[e.type]-H[t.type]}));for(var f=0;f<d.length;f++){var h=d[f];if("ktx"===h.container&&u.canIUse(m.GLCapabilityType[h.type])){c=h.url,l=new m.Resource(t.name,{type:"ktxNew",url:h.url});break}}}l||(c=t.url,l=new m.Resource(t.name,{type:"textureNew",url:t.url})),e.load(l,(function(e,t){e?o(e):(r._resource=t.asset,r._meta.url=c,r.setMeta(),i(r))}),n.options.timeout)}))}},{key:"setMeta",value:function(){this.resource&&(this._meta.name=this.resource.name,this.resource.image&&(this._meta.url=this.resource.image.src))}}]),n}(W),Y=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).configProps=void 0,e}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){var r=new m.PBRMaterial(t.name);for(var i in n.configProps=t.props,n.configProps)N(n.configProps[i])||(r[i]=n.configProps[i]);n._resource=r,n.setMeta(),e(n)}))}},{key:"loadWithAttachedResources",value:function(e,t){var n=this;return new Promise((function(r,i){var o;t.resource instanceof m.PBRMaterial?o=new Promise((function(e){n._resource=t.resource,n.setMeta(),e(n)})):t.props?o=n.load(e,t):i("Load PBRMaterial Error"),o&&o.then((function(){var e={resources:[n],structure:{index:0,props:{}}},t=n._resource;z(n._resource).forEach((function(r){if(t[r]instanceof m.Texture){var i=new X(n.resourceManager,t[r]);n.attachedResources.push(i),e.resources.push(i),e.structure.props[r]={index:e.resources.length-1}}})),r(e)}))}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}},{key:"getProps",value:function(){var e=this,t={};return z(this.resource).forEach((function(n){return t[n]=e.resource[n]})),t}},{key:"bind",value:function(){var e=this,t=this._resource;Object.keys(this.configProps).forEach((function(n){var r=e.configProps[n];if(N(r)){var i=e.resourceManager.get(r.id);i&&i instanceof X?(t[n]=i.resource,e._attachedResources.push(i)):(t[n]=null,m.Logger.warn("PBRMaterialResource: ".concat(e.meta.name," can't find asset \"").concat(n,'", which id is: ').concat(r.id)))}}))}}]),n}(W),q=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t,n){var r=this;return new Promise((function(i,o){var a=new m.Resource(t.name,{type:t.type,url:t.url});e.load(a,(function(e,n){e?o(e):(t.props&&(n.asset.newMaterial=t.props.newMaterial),r._resource=n.asset,r.setMeta(t),i(r))}),n.options.timeout)}))}},{key:"loadWithAttachedResources",value:function(e,t,n){var r=this;return new Promise((function(i){r.load(e,t,n).then((function(){for(var t=r.resource.materials,n=[],o={resources:[r],structure:{index:0,props:{newMaterial:[]}}},a=0;a<t.length;a++){var s=t[a],l=new Y(r.resourceManager);r._attachedResources.push(l),n.push(l.loadWithAttachedResources(e,{type:"PBRMaterial",name:s.name,resource:s}))}Promise.all(n).then((function(e){var t=o.structure.props.newMaterial;e.forEach((function(e){var n=e.structure,r=e.resources[n.index];for(var i in o.resources.push(r),n.index=o.resources.length-1,n.props)if(n.props.hasOwnProperty(i)){var a=n.props[i],s=e.resources[a.index];o.resources.push(s),a.index=o.resources.length-1}t.push(n)})),i(o)}))}))}))}},{key:"setMeta",value:function(e){e&&(this.meta.name=e.name)}},{key:"bind",value:function(){var e=this._resource;this.bindMaterials(e.newMaterial)}},{key:"update",value:function(e,t){"newMaterial"===e?this.bindMaterials(t):this._resource[e]=t}},{key:"bindMaterials",value:function(e){if(e&&e.length){var t=this._resource,n=t.meshes;if(e.length!==t.materials.length){for(var r=0;r<e.length;r++){this.resourceManager.get(e[r].id)&&(t.materials[r]=this.resourceManager.get(e[r].id).resource)}for(var i=0,o=0;o<n.length;o++)for(var a=0;a<n[o].primitives.length;a++){var s=this.resourceManager.get(e[i].id);s&&(this._attachedResources.push(s),n[o].primitives[a].material=s.resource),i++}}else{for(var l=0;l<e.length;l++){var c=this.resourceManager.get(e[l].id);c?(this._attachedResources.push(c),t.materials[l]=c.resource):m.Logger.warn("GLTFResource: ".concat(this.meta.name,' can\'t find asset "material", which id is: ').concat(e[l].id))}for(var u=0;u<n.length;u++)for(var d=0;d<n[u].primitives.length;d++)if(void 0!==n[u].primitives[d].materialIndex){var f=t.materials.length-1-n[u].primitives[d].materialIndex;n[u].primitives[d].material=t.materials[f]}}}}}]),n}(W),K=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).scripts=void 0,e}return _(n,[{key:"loadShaderDefine",value:function(e){var t=this;return new Promise((function(n){var r=t.scripts[0].name;if(t.resourceManager.isLocal){var i,o;n(null!==(i=null===(o=e.options)||void 0===o?void 0:o.scripts[r])&&void 0!==i?i:{})}else{var a=document.getElementById(r);a&&document.body.removeChild(a);var s=document.createElement("script");s.crossOrigin="anonymous",s.onload=function(){var e,t=window.o3Scripts;n(null!==(e=t&&t[r])&&void 0!==e?e:{})},s.id=r,s.src=t._meta.url,document.body.appendChild(s)}})).then((function(e){var n=e.vertexShader,r=void 0===n?"":n,i=e.fragmentShader,o=void 0===i?"":i,a=e.states,s=void 0===a?{}:a,l=e.uniforms,c=void 0===l?{}:l,u=e.attributes,d=void 0===u?{}:u;t._resource.uniforms=c,t._resource.attributes=d,t._resource.vertexShader=r,t._resource.fragmentShader=o,t._resource.renderStates=s}))}},{key:"createMaterial",value:function(){var e=new m.ShaderMaterial(this.meta.name||"shader_mtl");this._resource=e}},{key:"load",value:function(e,t,n){var r=this;return this.setMeta(t),this.scripts=t.props.scripts,this.createMaterial(),this.loadShaderDefine(n).then((function(){return new Promise((function(e,n){try{for(var i in t.props)r._resource[i]=t.props[i];r._resource.updateTechnique(),e(r)}catch(e){n("[shader material] createTechnique error")}}))}))}},{key:"setMeta",value:function(e){e&&(this._meta.name=e.name,this._meta.url=e.url,this._meta.source=e.source)}},{key:"updateMeta",value:function(e,t){var r=this;S(T(n.prototype),"updateMeta",this).call(this,e,t),"url"===e&&this.loadShaderDefine().then((function(){try{r._resource.updateTechnique()}catch(e){console.error("[shader material] createTechnique error")}}))}},{key:"update",value:function(e,t){this._resource[e]=t,this._resource.updateTechnique()}}]),n}(W),Q={};var J,Z,$,ee,te,ne,re,ie=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).isInit=!1,e}return _(n,[{key:"initScriptContext",value:function(){this.isInit||(this.isInit=!0,window.__r3_script_context__={r3:m,script:function(e){return function(t){Q[e]=t}}})}},{key:"load",value:function(e,t,n){var r=this;return this.initScriptContext(),new Promise((function(e){var i=t.props.scripts[0].name;if(r.resourceManager.isLocal){var o;Q[i]=null===(o=n.options)||void 0===o?void 0:o.scripts[i],e(r)}else{var a=document.createElement("script");a.crossOrigin="anonymous",r.setMeta(t),a.onload=function(){var t=window.o3Scripts;r._resource=t&&t[i],Q[i]=r._resource,e(r)},a.src=t.url,document.body.appendChild(a)}}))}},{key:"setMeta",value:function(e){e&&(this._meta.name=e.name,this._meta.url=e.url,this._meta.source=e.source)}}]),n}(W),oe=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){var r=new m.BlinnPhongMaterial(t.name);for(var i in t.props)r[i]=t.props[i];n._resource=r,n.setMeta(),e(n)}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}}]),n}(W),ae={px:0,nx:1,py:2,ny:3,pz:4,nz:5},se=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t,n){var r=this;return new Promise((function(i,o){var a,s,l,c=[];if(r.resourceManager.useCompressedTexture&&(null==t||null===(a=t.props)||void 0===a||null===(s=a.compression)||void 0===s?void 0:s.compressions.length)){var u=n.engine.getRHI(n.canvas),d=t.props.compression.compressions;d.sort((function(e,t){return H[e.type]-H[t.type]}));for(var f=0;f<d.length;f++){var h=d[f];if("ktx"===h.container&&u.canIUse(m.GLCapabilityType[h.type])){for(var p in h.files)if(h.files.hasOwnProperty(p)){var v=h.files[p];c[ae[p]]=v.url}l=new m.Resource(t.name,{type:"ktxNew",urls:c});break}}}if(!l){for(var g in t.props.images)if(t.props.images.hasOwnProperty(g)){var _=t.props.images[g];c[ae[g]]=_.url}l=new m.Resource(t.name,{type:"cubemapNew",urls:c})}e.load(l,(function(e,t){e?o(e):(r._resource=t.asset,r.setMeta(),i(r))}))}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}}]),n}(W),le=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).config=void 0,e}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){n.config=t;var r=t.name,i=t.props||{},o=i.type,a=void 0===o?"Interpolation":o,s=i.options,l=void 0===s?{}:s,c=new m.AnimationClipNew(r,a,l);n._resource=c,n.setMeta(),e(n)}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}},{key:"bind",value:function(){var e=m.AnimationClipType.Skeleton;m.AnimationClipType.AnimationComponent;switch(this.resource.AnimationClipType){case e:var t=this.config.props.options,n=t.gltfAssetId,r=t.action,i=this.resourceManager.get(n);if(i){var o=i.resource.animations,a=[];o.forEach((function(e){a[e.name]=e})),this._resource.options=a[r]}else m.Logger.warn("AnimationClip: ".concat(this.meta.name,' can\'t find asset "gltf", which id is: ').concat(n))}}}]),n}(W),ce=m.Animation,ue=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).config=void 0,e}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){n.config=t;var r=t.name,i=t.props,o=new ce(r,i);n._resource=o,n.setMeta(),e(n)}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}},{key:"parseDate",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){var i=e[r];n[r]=n[r]||[],i.forEach((function(e){var i=t.resourceManager.get(e);if(i){var o=i.resource;n[r].push(o)}else m.Logger.warn("AnimationResource: ".concat(t.meta.name,' can\'t find asset "animationClip", which id is: ').concat(e))}))})),n}},{key:"update",value:function(e,t){"keyframes"===e?this._resource[e]=this.parseDate(t):S(T(n.prototype),"update",this).call(this,e,t)}},{key:"bind",value:function(){var e=this.config.props.keyframes;this._resource.keyframes=this.parseDate(e)}}]),n}(W),de=m.Animator,fe=function(e){w(n,e);var t=M(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).config=void 0,e.abilityManager=void 0,e}return _(n,[{key:"load",value:function(e,t,n){var r=this,i=n.abilityManager;return new Promise((function(e){r.config=t,r.abilityManager=i;var n=t.name,o=(t.props||{}).keyframes,a=new de(n,o);r._resource=a,r.setMeta(),e(r)}))}},{key:"setMeta",value:function(){this.resource&&(this.meta.name=this.resource.name)}},{key:"parseDate",value:function(e){var t=this,n=e.keyframes,r=void 0===n?{}:n,i={};return Object.keys(r).forEach((function(e){var n=r[e];i[e]=i[e]||[],n.forEach((function(n){var r=t.abilityManager.get(n);i[e].push(r)}))})),x(x({},e),{},{keyframes:i})}},{key:"update",value:function(e,t){"options"===e?this._resource[e]=this.parseDate(t):S(T(n.prototype),"update",this).call(this,e,t)}},{key:"attach",value:function(){var e=this.config.props.options;this._resource.options=this.parseDate(e),this.resource.onAttach&&this.resource.onAttach(this.resource)}}]),n}(W),he=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){n._resource=t,n.setMetaData("name",n.resource.name),n.setMetaData("url",n.resource.url),e(n)}))}},{key:"setMetaData",value:function(e,t){this._meta[e]=t}}]),n}(W),pe=function(e){w(n,e);var t=M(n);function n(){return v(this,n),t.apply(this,arguments)}return _(n,[{key:"load",value:function(e,t){var n=this;return new Promise((function(e){var r,i,o,a=t.props.spineAssets;if(Array.isArray(a))for(var s=0;s<a.length;s+=1){var l=a[s];"json"===l.meta.assetType?r=l.meta.url:"atlas"===l.meta.assetType?i=l.meta.url:o=l.meta.url}else for(var c in a)if(a.hasOwnProperty(c)){var u=a[c],d=u.type;"json"===d?r=u.url:"atlas"===d?i=u.url:o=u.url}var f=new m.AssetManager;f.loadText(r),f.loadTexture(o),f.loadText(i),f.onLoad().then((function(){var t=new m.spine.TextureAtlas(f.get(i),(function(){return f.get(o)})),a=new m.spine.AtlasAttachmentLoader(t),s=new m.spine.SkeletonJson(a).readSkeletonData(f.get(r));n._resource=s,n.setMeta(),e(n)}))}))}},{key:"loadWithAttachedResources",value:function(e,t){var n=this;return new Promise((function(r){n.load(e,t).then((function(){var i={resources:[n],structure:{index:0,props:{spineAssets:[]}}},o=t.props.spineAssets,a=i.structure.props.spineAssets;for(var s in o)if(o.hasOwnProperty(s)){var l={index:i.resources.length},c=new he(e);c.setMetaData("name",s),c.setMetaData("assetType",s.split(".").pop()),c.setMetaData("url",o[s].url),c.setMetaData("size",o[s].size),i.resources.push(c),n.attachedResources.push(c),a.push(l)}r(i)}))}))}},{key:"setMeta",value:function(e){e&&(this.meta.name=e.name)}}]),n}(W),me=(J=F({after:"abilityAdded",before:"beforeAbilityAdded"}),Z=F({before:"beforeAbilityUpdated",after:"abilityUpdated"}),$=F({after:"abilityDeleted",before:"beforeAbilityDeleted"}),L((ee=function(){function e(t){v(this,e),this.oasis=t,this.abilityMap={}}return _(e,[{key:"add",value:function(e){var t=e.type,n=e.node,r=e.props,i=e.id,o=e.index,a=this.oasis.nodeManager.get(n),s=this.getConstructor(t);if(s){var l=this.mixPropsToExplicitProps(r),c=a.createAbility(s,l),u=l.enabled;for(var d in void 0!==u&&(c.enabled=u),l)null!==l[d]&&null!==c[d]&&(c[d]=l[d]);var f=a.abilityArray;return D(f,f.length-1,o),c.id=i,this.abilityMap[i]=c,c}m.Logger.error("".concat(t," abiltiy is not defined"))}},{key:"update",value:function(e,t,n){return n&&this.checkIsAsset(n)?this.get(e)[t]=this.oasis.resourceManager.get(n.id).resource:this.get(e)[t]=n,{id:e,key:t,value:n}}},{key:"get",value:function(e){return this.abilityMap[e]}},{key:"delete",value:function(e){return this.abilityMap[e].destroy(),delete this.abilityMap[e],e}},{key:"getConstructor",value:function(e){var t=e.split(".");if("script"===t[0])return Q[t[1]];var n=m[e];if(!n)throw new Error("".concat(e," is not defined"));return n}},{key:"mixPropsToExplicitProps",value:function(e){var t=x({},e);for(var n in e){var r=e[n];if(r&&this.checkIsAsset(r)){var i=this.oasis.resourceManager.get(r.id);i?t[n]=i.resource:(t[n]=null,m.Logger.warn("AbilityManager: can't get asset \"".concat(n,'", which id is ').concat(r.id)))}}return t}},{key:"checkIsAsset",value:function(e){return"asset"===e.type}}]),e}()).prototype,"add",[J],Object.getOwnPropertyDescriptor(ee.prototype,"add"),ee.prototype),L(ee.prototype,"update",[Z],Object.getOwnPropertyDescriptor(ee.prototype,"update"),ee.prototype),L(ee.prototype,"delete",[$],Object.getOwnPropertyDescriptor(ee.prototype,"delete"),ee.prototype),ee),ve={script:ie,gltf:q,texture:X,cubeTexture:se,PBRMaterial:Y,PBRSpecularMaterial:Y,unlitMaterial:Y,ShaderMaterial:K,BlinnPhongMaterial:oe,AnimationClip:le,Animation:ue,Animator:fe,spine:pe,base:he},ge=new Map;for(var _e in ve)if(ve.hasOwnProperty(_e)){var ye=ve[_e];ge.set(ye,_e)}var be,xe,we=function(e,t){return new(0,ve[t])(e)},Te=(te=F({before:"beforeResourceRemove"}),ne=F({after:"resourceUpdated",before:"beforeResourceUpdate"}),L((re=function(){function e(t){v(this,e),this.oasis=t,this.resourceMap={},this.resourceIdMap=new WeakMap,this.resourceLoader=new m.ResourceLoader(this.oasis.engine,null,this.oasis.engine.getRHI(this.oasis.canvas)),this.maxId=0}return _(e,[{key:"load",value:function(e){var t=this,n=we(this,e.type),r=n.load(this.resourceLoader,e,this.oasis);return this.maxId=Math.max(+e.id,this.maxId),r.then((function(){t.resourceMap[e.id]=n,t.resourceIdMap.set(n,e.id)})),r}},{key:"add",value:function(e){var t=this,n=we(this,e.type);return new Promise((function(r){n.loadWithAttachedResources(t.resourceLoader,e,t.oasis).then((function(e){r(t.getAddResourceResult(e.resources,e.structure))}))}))}},{key:"remove",value:function(e){var t=this;return new Promise((function(n){var r=t.resourceMap[e],i=[e],o=!1;if(delete t.resourceMap[e],r)for(var a=r.attachedResources,s=0;s<a.length;s++){var l=a[s],c=t.resourceIdMap.get(l);c&&(o=!0,t.remove(c).then((function(e){i.push.apply(i,R(e)),n(i)})))}o||n(i)}))}},{key:"update",value:function(e,t,n){var r=this.get(e);return r&&r.update(t,n),{resource:r,id:e,key:t,value:n}}},{key:"updateMeta",value:function(e,t,n){var r=this.get(e);r&&r.updateMeta(t,n)}},{key:"get",value:function(e){return this.resourceMap[e]}},{key:"getAll",value:function(){return Object.values(this.resourceMap)}},{key:"getAddResourceResult",value:function(e,t){var n=this,r={},i=e[t.index],o="".concat(++this.maxId);for(var a in this.resourceMap[o]=i,this.resourceIdMap.set(i,o),r.id=this.maxId,r.type=ge.get(i.constructor),r.meta=i.meta,r.props={},t.props)if(t.props.hasOwnProperty(a)){var s=t.props[a];s&&(Array.isArray(s)?r.props[a]=s.map((function(t){return n.getAddResourceResult(e,t)})):r.props[a]=this.getAddResourceResult(e,s))}return r}},{key:"isLocal",get:function(){return this.oasis.options.local}},{key:"useCompressedTexture",get:function(){var e;return null===(e=this.oasis.options.useCompressedTexture)||void 0===e||e}}]),e}()).prototype,"remove",[te],Object.getOwnPropertyDescriptor(re.prototype,"remove"),re.prototype),L(re.prototype,"update",[ne],Object.getOwnPropertyDescriptor(re.prototype,"update"),re.prototype),re),Ae=(be=F({after:"schemaParsed"}),L((xe=function(e){w(n,e);var t=M(n);function n(e,r){var i;return v(this,n),(i=t.call(this))._options=e,i.pluginManager=r,i.engine=new m.Engine,i.nodeManager=new G(E(i)),i.abilityManager=new me(E(i)),i.resourceManager=void 0,i._canvas=void 0,i.schema=void 0,i.timeout=void 0,i.oasis=E(i),i.resetFeature(),i.schema=e.config,i.timeout=e.timeout,i.nodeManager.add=i.nodeManager.add.bind(i.nodeManager),i.abilityManager.add=i.abilityManager.add.bind(i.abilityManager),i.engine.requireRHI(m.GLRenderHardware,i.canvas,i.options.rhiAttr||{}),i.resourceManager=new Te(E(i)),e.fps&&i.engine.setFPS(e.fps),i}return _(n,[{key:"updateConfig",value:function(e){this.schema=e,this.init()}},{key:"init",value:function(){var e=this;return this.pluginManager.boot(this),this.loadResources().then((function(){e.bindResources(),e.parseNodes(),e.parseNodeAbilities(),e.attach()}))}},{key:"loadResources",value:function(){var e=this,t=this.schema.assets,n=void 0===t?{}:t,r=Object.values(n).map((function(t){return e.resourceManager.load(t)}));return Promise.all(r)}},{key:"bindResources",value:function(){this.resourceManager.getAll().forEach((function(e){e.bind()}))}},{key:"parseNodes",value:function(){var e=this.schema.nodes;this.bfsNodes().map((function(t){return e[t]})).forEach(this.nodeManager.add)}},{key:"parseNodeAbilities",value:function(){var e=this.schema.abilities;Object.keys(e).map((function(t){return x({id:t},e[t])})).forEach(this.abilityManager.add)}},{key:"bfsNodes",value:function(){var e=this.schema.nodes,t=Object.values(e).filter((function(t){return!e[t.parent]})).map((function(e){return e.id})),n=[];return function t(r){n=n.concat(r),r.forEach((function(n){var r=e[n].children;r&&t(r)}))}(t),n}},{key:"resetFeature",value:function(){var e=this.engine.currentScene;e.features.splice(1,1),e.features.splice(3,1),e.hasFogFeature=void 0,e.getFogMacro=void 0,e.bindFogToMaterial=void 0}},{key:"attach",value:function(){this.resourceManager.getAll().forEach((function(e){e.attach()}))}},{key:"canvas",get:function(){return this._options.canvas}},{key:"options",get:function(){return this._options}}],[{key:"create",value:function(e,t){var r=new n(e,t);return r.init().then((function(){return e.autoPlay&&r.engine.run(),r}))}}]),n}(m.EventDispatcher)).prototype,"init",[be],Object.getOwnPropertyDescriptor(xe.prototype,"init"),xe.prototype),xe),Ee=function(e){var t=[],n=[];return{beforeAbilityAdded:function(r){"Camera"===r.type&&(m.vec3.copy(t,e.options.config.nodes[r.node].position),m.vec3.copy(n,e.options.config.nodes[r.node].rotation))},abilityAdded:function(r){(r instanceof m.Camera||r instanceof m.OldCamera)&&(r.attachToScene(e.canvas,e.options.rhiAttr),r instanceof m.Camera&&(r.node.transform.position=t,r.node.transform.rotation=n))}}},Oe=function(){function e(){v(this,e),this.pluginManager=new I}return _(e,[{key:"parse",value:function(e){var t,n;2!==(null==e||null===(t=e.config)||void 0===t?void 0:t.version)&&console.warn('schema-parser: schema version "'.concat(null==e||null===(n=e.config)||void 0===n?void 0:n.version,'" is out of date, please re-pull the latest version (version ').concat(2,") of the schema"));return Ae.create(e,this.pluginManager)}},{key:"register",value:function(e){this.pluginManager.register(e)}},{key:"resetPlugins",value:function(){this.pluginManager.reset()}}]),_(e,null,[{key:"create",value:function(){var t=new e;return t.register(Ee),t}}]),e}(),Me=(Oe.create(),function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))});function Se(e){var t=e.canvas,n=e.schema,r=e.scripts,i=e.fps,o=e.mustWebgl1;return Me(this,void 0,void 0,d.a.mark((function e(){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.create().parse({config:n,canvas:t,autoPlay:!0,local:!0,rhiAttr:{disableWebGL2:o},scripts:r});case 2:return a=e.sent,s=a.engine,i&&s.setFPS(i),document.addEventListener("pause",s.pause.bind(s)),document.addEventListener("resume",s.resume.bind(s)),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))}var Ce=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Re=function(e){var t=e.schema,n=e.mustWebgl1,r=e.detectDowngrade,i=e.handleDowngrade,o=e.handleSceneLoaded,a=e.scripts,s=e.fps,l=e.downgradeImage,c=e.useDowngradeImage,u=void 0===c||c,h=Object(f.useState)(!1),m=h[0],v=h[1],g=Object(f.useState)(!1),_=g[0],y=g[1],b=function(){return!function(){if(null!=WebGLRenderingContext){var e=document.createElement("canvas");return null!=e.getContext("webgl")||null!=e.getContext("experimental-webgl")}return!1}()||!!r&&r()};Object(f.useEffect)((function(){Ce(void 0,void 0,void 0,d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ce(void 0,void 0,void 0,d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return(t=e.sent)&&i&&i({error:"WebGL Not Supported",code:0}),v(t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,Se({canvas:_,schema:t,scripts:a,fps:s,mustWebgl1:n});case 10:r=e.sent,o&&o(r),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0),v(!0),i&&i({error:"Resource load error",code:1});case 19:case"end":return e.stop()}}),e,null,[[7,14]])})))}),[_]);var x=Object(f.useCallback)((function(e){y(e)}),[]);return Object(f.createElement)(p.a,{style:{width:"100%",height:"100%"}},m?u&&l?Object(f.createElement)("img",{style:{width:"100%",height:"100%"},src:l}):null:Object(f.createElement)("canvas",{ref:x,style:{width:"100%",height:"100%"}}))},ke=n(23),Pe=n.n(ke),Le=n(94),Ie=n.n(Le),Fe=n(2),De=n.n(Fe);var Ne=n(5),ze=n.n(Ne),je=n(95),Be=n.n(je).a,Ue={1:"Jan",2:"Feb",3:"May",4:"Apr",5:"Mar",6:"Jun",7:"Jul",8:"Aug",9:"Sept",10:"Oct",11:"Nov",12:"Dec"},Ve=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=Object(f.useState)({}),o=i[0],a=i[1];return Object(f.useEffect)((function(){new Promise((function(e){e({})})).then((function(e){a(e)}))}),[]),Object(f.createElement)(p.a,{className:"date-info",style:Be["date-info"]},Object(f.createElement)(p.a,{className:"date-wrap",style:Be["date-wrap"]},Object(f.createElement)(p.a,{className:"day",style:Be.day},Object(f.createElement)(De.a,{className:"day-text",style:Be["day-text"]},r)),Object(f.createElement)(p.a,{className:"month",style:Be.month},Object(f.createElement)(De.a,{className:"date-text",style:Be["date-text"]},Ue[n]," / ",t))),Object(f.createElement)(p.a,{className:"weather-info",style:Be["weather-info"]},o.minDegree&&o.maxDegree?Object(f.createElement)(p.a,{className:"weather-line",style:Be["weather-line"]},Object(f.createElement)(ze.a,{className:"weather-icon",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAtCAMAAABhwkCtAAAAP1BMVEVHcEz///////////////////////////////////////////////////////////////////////////////9KjZoYAAAAFHRSTlMAV+U1EnAGQPC/zyfdeUiKr7qjZ4fbz+0AAAEwSURBVDjLtZTbFoQgCEXzbnbRGv//W6cSCcw1PQ1vcFRQNg4DmhVpzjnPSdihY+spFpvXp2wyNdPKInMTXNa+0b1mesytRaaX2uRqB7vKUiM7vuxRl6OKQxOUUAAvkMXF3BUZjzfasADX01X+rb/tv2z8n/6n+kUnP+mw8h3d4wNP0PwEfgIEJuAyNMxUlkLhdAF3wXwsUtESTxovyADcz1nILrPcz7SfG+OSfSOIn9GtEnOjJSjcCJmrNFqJurSVWAeZ9mO+CNzHfO1Q1VJpN3y8ItzwTX87v4Tloz4JCzV2m93P4RAF7C19nxEnytzB+31J8K0/2M1YJ1ZH1nHkw0enrXbRcz6Qr/aLmRDv3gJPAFfyIUvFPpjUyEk3H6DbiLq5zgc7mTT77Odkpjv4BcHuOkc7XdvzAAAAAElFTkSuQmCC"},style:Be["weather-icon"]}),Object(f.createElement)(De.a,{className:"weather-text",style:Be["weather-text"]},o.minDegree," - ",o.maxDegree," ")):null,o.desc?Object(f.createElement)(p.a,{className:"weather-line",style:Be["weather-line"]},Object(f.createElement)(ze.a,{className:"weather-icon",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAMAAAC8RHExAAAASFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////8FevL4AAAAF3RSTlMAA+NufqidSbTr2FliOgtP88mSwB4qF4e68HsAAAEnSURBVDjLjZRbloQgDEQBIQhii8/sf6djCygKsef+eJQ6mqQqMlbANYwejQX3Ye9wZzHh5at6mzFH9LR0Nfigo6SLwAJNaOdSimarSh3WUNUR2KoWm0K4dhMSjOutqcngC/5qkEuPPxii9NPiT3wog4/EuVFSQqrN8q+WaimEgTexPrff9OlsBmVqfvVBbC+v2uX7XJ8my8KilS3RHH5PhMnTaKMlzeNoCFrIpy+PRxODeD0xzxIY62Iu2tuod6CMbdKG4WbxP+bit7IGiGPIA90JtPfVGWNvqhK7x0ZqjN+WmYPEYoVuxWkbkGJtrsTHZbBT41y3Mxzog0ZCCpb4kEtW0JPLS+3cZv8tLf5LJSIfv3t7tXj+AVcnJwB10CZGYYTqz2n+AWVhQgcXN4ssAAAAAElFTkSuQmCC"},style:Be["weather-icon"]}),Object(f.createElement)(De.a,{className:"weather-text",style:Be["weather-text"]},o.desc)):null))},He=n(96),Ge=n.n(He),We=n(97);function Xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ")}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var qe=n.n(We).a;function Ke(e){var t=qe.__cache||(qe.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=qe[r[0].trim()]:r.forEach((function(e){"object"==typeof qe[e.trim()]&&(i=Object.assign(i,qe[e.trim()]))})),t[n]=i),i}var Qe=function(e){var t=e.className,n=e.rad,r=e.completed,i=e.textCls,o=e.hasText,a=void 0===o||o,s=e.hideAfterCompleted,l=void 0===s||s,c=e.color,u=void 0===c?"#fa6400":c,d=Math.round(100*n/360),h={border:"5px solid "+u};return r&&l?null:Object(f.createElement)("div",{className:Xe("round-container",t),style:Object.assign({},Ke(Xe("round-container",t)),{position:"absolute"})},Object(f.createElement)("div",{className:"round",style:Object.assign({},qe.round,{position:"absolute"})},Object(f.createElement)("div",{className:"bg left",style:Object.assign({},qe.bg,qe.left,{position:"absolute"})}),Object(f.createElement)("div",{className:"front right",style:Object.assign({},qe.front,qe.right,Ye({},h,{transform:"rotate(-"+Math.min(n,180)+"deg)"},{position:"absolute"}))}),Object(f.createElement)("div",{className:"bg right",style:Object.assign({},qe.bg,qe.right,{position:"absolute"})}),Object(f.createElement)("div",{className:"front left",style:Object.assign({},qe.front,qe.left,Ye({},h,n>180?{display:"block",transform:"rotate(-"+(n-180)+"deg)"}:{display:"none"},{position:"absolute"}))}),a&&Object(f.createElement)("div",{className:Xe("progress-text",i),style:Ke(Xe("progress-text",i))},d>0?d+"%":0)))},Je=n(44),Ze=n.n(Je),$e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function et(e,t){return Object(f.forwardRef)((function(n,r){var i=n.styles;return Object(f.createElement)(e,$e({},n,{ref:r,styles:function(e){var n={};Array.isArray(t)?t.forEach((function(t){Object.assign(n,t(e))})):Object.assign(n,t(e));var r=i;return"function"==typeof i&&(r=i(e)),r?(Object.keys(r).forEach((function(e){r[e]&&(n[e]=$e($e({},n[e]),r[e]))})),n):n}}))}))}var tt=function(e){var t=e.Core,n=e.ActionSheet||{},r={"wrapper-padding-lr":t["s-2"],"wrapper-padding-tb":t["s-4"],"wrapper-bg-color":t["color-transparent"],"footer-margin-top":t["s-2"],"list-height":t["s-12"],corner:t["corner-3"],"bg-color":t["color-fill1-2"],"font-size":t["font-size-body-1"],color:t["color-brand1-6"],"divider-color":t["color-line1-1"],"title-padding-tb":t["s-3"],"title-padding-lr":t["s-3"],"title-font-size":t["font-size-subhead"],"title-color":t["color-text1-2"],"button-height":t["s-14"],"button-padding-lr":t["s-3"],"button-font-size":t["font-size-subhead"],"button-color":t["color-brand1-6"],"gallery-padding-lr":t["s-4"],"gallery-padding-tb":t["s-5"],"item-size":t["s-15"],"item-icon-size":t["s-9"],"item-font-size":t["font-size-caption"],"item-text-margin":t["s-1"],"item-bg-color":t["color-white"],"item-color":t["color-text1-3"],"md-shadow":t["shadow-2"],"fullwidth-border-radius":t["corner-zero"]};return Object.assign(r,n),r},nt=function(e){var t=tt(e);return{"action-sheet":{paddingBottom:t["wrapper-padding-tb"],paddingLeft:t["wrapper-padding-lr"],paddingRight:t["wrapper-padding-lr"],backgroundColor:t["wrapper-bg-color"]},"action-sheet__fullwidth_drawer":{borderTopLeftRadius:t["fullwidth-border-radius"],borderTopRightRadius:t["fullwidth-border-radius"]},"action-sheet__body":{borderRadius:t.corner,backgroundColor:t["bg-color"]},"action-sheet__footer":{marginTop:t["footer-margin-top"],borderRadius:t.corner,backgroundColor:t["bg-color"]},"action-sheet__title":{paddingTop:t["title-padding-tb"],paddingBottom:t["title-padding-tb"],paddingLeft:t["title-padding-lr"],paddingRight:t["title-padding-lr"],borderBottomColor:t["divider-color"]},"action-sheet__title__text":{fontSize:t["title-font-size"],color:t["title-color"],wordBreak:"break-all",textAlign:"center"},"action-sheet__button":{height:t["button-height"],borderTopColor:t["divider-color"],paddingLeft:t["button-padding-lr"],paddingRight:t["button-padding-lr"]},"action-sheet__button__text":{fontSize:t["button-font-size"],color:t["button-color"]},"action-sheet__gallery":{paddingLeft:t["gallery-padding-lr"],paddingRight:t["gallery-padding-lr"],paddingTop:t["gallery-padding-tb"],paddingBottom:t["gallery-padding-tb"],borderBottomColor:t["divider-color"]},"action-sheet__gallery__item":{width:t["item-size"],minWidth:t["item-size"],flexDirection:"column",alignItems:"center",justifyContent:"flex-start",marginRight:t["gallery-padding-lr"]},"action-sheet__gallery__item-cell":{display:"flex",alignItems:"center",justifyContent:"center",width:t["item-size"],height:t["item-size"],borderRadius:t.corner,backgroundColor:t["item-bg-color"]},"action-sheet__gallery__item-icon":{fontSize:t["item-icon-size"],color:t["item-color"]},"action-sheet__gallery__item-text":{fontSize:t["item-font-size"],color:t["item-color"],marginTop:t["item-text-margin"]}}};Ze.a.defaultProps={bgTransparent:!0};var rt,it=et(Ze.a,nt),ot=n(14),at=n.n(ot),st=n(4),lt=n(11),ct=function(){function e(){this._root=null,this._store=new Map}return e.prototype.empty=function(){return 0===this._store.size},e.prototype.has=function(e){return this._store.has(e)},e.prototype.get=function(e,t){var n=this.has(e)?this._store.get(e):this.root();return null==n?t:n},e.prototype.add=function(e,t){this.empty()&&(this._root=e),this._store.set(e,t)},e.prototype.remove=function(e){this._store.delete(e)},e.prototype.root=function(){return this._store.get(this._root)},e}(),ut=(rt=function(e,t){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dt=function(){return(dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ft=new ct,ht=function(e){function t(t){var n=e.call(this,t)||this;return n.addToCache(),n}return ut(t,e),t.prototype.addToCache=function(){var e=this.props,t=e.theme,n=e.transformUnit,r=e.locale;ft.add(this,dt(dt({},ft.get(this,{})),{theme:t,transformUnit:n,locale:r}))},t.prototype.componentDidUpdate=function(){this.addToCache()},t.prototype.componentWillUnmount=function(){ft.remove(this)},t.prototype.render=function(){var e=this.props,t=e.theme,n=e.locale,r=e.transformUnit,i=e.children;return Object(f.createElement)(st.StyleProvider,{transformUnit:r,theme:t},Object(f.createElement)(lt.LocaleProvider,{locale:n},i))},t.getContext=function(){return dt({},ft.root()||{})},t.Consumer=function(e){var t=e.children;return Object(f.createElement)(st.Context.Consumer,null,(function(e){var n=e.theme,r=e.transformUnit;return Object(f.createElement)(lt.Context.Consumer,null,(function(e){var i=e.locale;return t?t({theme:n,locale:i,transformUnit:r}):null}))}))},t}(f.Component),pt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(){return(mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},vt=function(e){function t(t){var n=e.call(this,t)||this;return n.close=function(){n.setState({visible:!1}),n.props.onClose&&n.props.onClose()},n.state={visible:!0},n}return pt(t,e),t.prototype.handleClick=function(e,t,n,r){e&&e(r),this.props.onClick&&this.props.onClick(t,n,r),this.close()},t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.data,i=t.gallery,o=t.onExited,a=this.state.visible,s=[],l=[];return i?l=r.map((function(t,n){return t.map((function(t,r){return mt(mt({},t),{onClick:function(i){return e.handleClick(t.onClick,n,r,i)}})}))})):s=r.map((function(t,n){return mt(mt({},t),{onClick:function(r){return e.handleClick(t.onClick,n,null,r)}})})),Object(f.createElement)(ht,mt({},ht.getContext()),Object(f.createElement)(it,{visible:a,onExited:o,onHide:this.close,disablePortal:!0,title:n,items:l,buttons:s}))},t.defaultProps={data:[],gallery:!1,onClick:function(){},onClose:function(){},onExited:function(){}},t}(f.Component),gt=it;gt.open=function(e,t){void 0===e&&(e={data:[]});var n=document.createElement("div"),r=function(){n&&(at()(n),document.body.removeChild(n),n=null)};document.body.appendChild(n);var i=Object(f.createElement)(vt,mt({},e,{onClick:t,onExited:r}));return Object(f.render)(i,n,{driver:f.shared.Host.driver}),{close:function(){return r()}}},gt.displayName="ActionSheet";var _t=n(98);var yt=function(e){var t=e.Core,n=e.Badge||{},r={"number-size":t["s-4"],"number-padding":t["s-1"],"number-size-text":t["font-size-caption"],"number-color":t["color-white"],"normal-bg-color":t["color-error-2"],"unread-bg-color":t["color-link-1"],"dot-size":t["s-2"]};return Object.assign(r,n),r},bt=function(e){var t=yt(e);return{badge__content:{minWidth:t["number-size"],paddingLeft:t["number-padding"],paddingRight:t["number-padding"],height:t["number-size"],borderRadius:t["number-size"],backgroundColor:t["normal-bg-color"]},badge__text:{color:t["number-color"],fontSize:t["number-size-text"],lineHeight:t["number-size"]},"badge--auto":{marginRight:t["number-size"]},"badge--dot__content":{minWidth:t["dot-size"],height:t["dot-size"]},"badge--unread__content":{backgroundColor:t["unread-bg-color"],minWidth:t["dot-size"],height:t["dot-size"]}}},xt=et(n.n(_t).a,bt);xt.displayName="Badge";var wt=n(17),Tt=n.n(wt);var At=function(e){var t=e.Core,n=e.Button||{},r={"size-s-height":t["s-6"],"size-m-height":t["s-8"],"size-l-height":t["s-11"],"size-s-padding-lr":t["s-3"],"size-m-padding-lr":t["s-4"],"size-l-padding-lr":t["s-4"],"size-l-font-size":t["font-size-subhead"],"size-m-font-size":t["font-size-body-1"],"size-s-font-size":t["font-size-body-1"],"size-l-font-weight":t["font-weight-4"],"size-m-font-weight":t["font-weight-4"],"size-s-font-weight":t["font-weight-4"],"icon-l-margin-lr":t["s-2"],"icon-m-margin-lr":t["s-2"],"icon-s-margin-lr":t["s-2"],"icon-size-l":t["icon-s"],"icon-size-m":t["icon-xs"],"icon-size-s":t["icon-xxs"],"corner-l":t["corner-1"],"corner-m":t["corner-1"],"corner-s":t["corner-1"],"normal-border-width":t["line-1"],"normal-disabled-color":t["color-text1-1"],"normal-disabled-bg-color":t["color-fill1-1"],"normal-disabled-border-color":t["color-line1-1"],"normal-disabled-shadow":t["shadow-zero"],"normal-color":t["color-text1-4"],"normal-bg-color":t["color-white"],"normal-border-color":t["color-line1-3"],"normal-shadow":t["shadow-zero"],"normal-active-color":t["color-text1-4"],"normal-active-border-color":t["color-line1-3"],"normal-active-bg-color":t["color-fill1-2"],"normal-active-shadow":t["shadow-zero"],"primary-border-width":t["line-zero"],"primary-color":t["color-white"],"primary-bg-color":t["color-brand1-6"],"primary-border-color":t["color-brand1-6"],"primary-shadow":t["shadow-zero"],"primary-active-color":t["color-white"],"primary-active-bg-color":t["color-brand1-9"],"primary-active-border-color":t["color-brand1-9"],"primary-active-shadow":t["shadow-zero"],"primary-disabled-color":t["color-text1-1"],"primary-disabled-bg-color":t["color-brand1-1"],"primary-disabled-border-color":t["color-brand1-1"],"primary-disabled-shadow":t["shadow-zero"],"secondary-border-width":t["line-1"],"secondary-color":t["color-brand1-6"],"secondary-bg-color":t["color-white"],"secondary-border-color":t["color-brand1-6"],"secondary-shadow":t["shadow-zero"],"secondary-active-color":t["color-brand1-6"],"secondary-active-bg-color":t["color-brand1-1"],"secondary-active-border-color":t["color-brand1-9"],"secondary-active-shadow":t["shadow-zero"],"secondary-disabled-color":t["color-text1-1"],"secondary-disabled-bg-color":t["color-fill1-2"],"secondary-disabled-border-color":t["color-line1-1"],"secondary-disabled-shadow":t["shadow-zero"],"light-border-width":t["line-1"],"light-color":t["color-text1-4"],"light-bg-color":t["color-white"],"light-bg-color-opacity":.1,"light-border-color":t["color-text1-3"],"light-shadow":t["shadow-zero"],"light-active-color":t["color-text1-4"],"light-active-bg-color":t["color-black"],"light-active-bg-color-opacity":.2,"light-active-border-color":t["color-text1-3"],"light-active-shadow":t["shadow-zero"],"light-disabled-color":t["color-text1-1"],"light-disabled-bg-color":t["color-black"],"light-disabled-bg-color-opacity":.1,"light-disabled-border-color":t["color-text1-1"],"light-disabled-shadow":t["shadow-zero"],"dark-border-width":t["line-1"],"dark-color":t["color-white"],"dark-bg-color":t["color-transparent"],"dark-border-color":t["color-white"],"dark-shadow":t["shadow-zero"],"dark-active-color":t["color-white"],"dark-active-bg-color":t["color-white"],"dark-active-bg-color-opacity":.2,"dark-active-border-color":t["color-white"],"dark-active-shadow":t["shadow-zero"],"dark-disabled-color":t["color-text1-2"],"dark-disabled-bg-color":t["color-white"],"dark-disabled-bg-color-opacity":.2,"dark-disabled-border-color":t["color-text1-2"],"dark-disabled-shadow":t["shadow-zero"],"warning-border-width":t["line-1"],"warning-color":t["color-error-2"],"warning-bg-color":t["color-white"],"warning-border-color":t["color-error-2"],"warning-shadow":t["shadow-zero"],"warning-active-color":t["color-error-2"],"warning-active-bg-color":t["color-error-3"],"warning-active-bg-color-opacity":.1,"warning-active-border-color":t["color-error-2"],"warning-active-shadow":t["shadow-zero"],"warning-disabled-color":t["color-text1-1"],"warning-disabled-bg-color":t["color-fill1-2"],"warning-disabled-border-color":t["color-line1-1"],"warning-disabled-shadow":t["shadow-zero"],"text-size-m-font-size":t["font-size-body-2"],"text-size-s-font-size":t["font-size-body-1"],"text-size-m-font-weight":t["font-weight-2"],"text-size-s-font-weight":t["font-weight-2"],"text-icon-m-margin-lr":t["s-3"],"text-icon-m-size":t["icon-s"],"text-icon-s-margin-lr":t["s-3"],"text-icon-s-size":t["icon-s"],"text-normal-color":t["color-text1-3"],"text-normal-active-color":t["color-text1-4"],"text-normal-disabled-color":t["color-text1-1"],"text-primary-color":t["color-brand1-6"],"text-primary-active-color":t["color-brand1-9"],"text-primary-disabled-color":t["color-text1-1"],"cell-size-height":t["s-13"],"cell-font-size":t["font-size-body-2"],"cell-font-weight":t["font-weight-2"],"cell-border-width":t["line-1"],"cell-icon-size":t["icon-s"],"cell-icon-margin":t["s-2"],"cell-normal-bg-color":t["color-white"],"cell-normal-border-color":t["color-line1-2"],"cell-normal-color":t["color-text1-3"],"cell-normal-shadow":t["shadow-zero"],"cell-active-bg-color":t["color-fill1-2"],"cell-active-border-color":t["color-line1-3"],"cell-active-color":t["color-text1-4"],"cell-active-shadow":t["shadow-zero"],"cell-disabled-bg-color":t["color-fill1-1"],"cell-disabled-border-color":t["color-line1-1"],"cell-disabled-color":t["color-text1-1"],"cell-disabled-shadow":t["shadow-zero"],"cell-secondary-bg-color":t["color-white"],"cell-secondary-border-color":t["color-line1-2"],"cell-secondary-color":t["color-brand1-6"],"cell-secondary-shadow":t["shadow-zero"],"cell-secondary-active-bg-color":t["color-brand1-1"],"cell-secondary-active-border-color":t["color-brand1-6"],"cell-secondary-active-color":t["color-brand1-9"],"cell-secondary-active-shadow":t["shadow-zero"],"cell-secondary-disabled-bg-color":t["color-fill1-1"],"cell-secondary-disabled-border-color":t["color-line1-1"],"cell-secondary-disabled-color":t["color-text1-1"],"cell-secondary-disabled-shadow":t["shadow-zero"],"cell-primary-bg-color":t["color-brand1-6"],"cell-primary-border-color":t["color-brand1-6"],"cell-primary-color":t["color-white"],"cell-primary-shadow":t["shadow-zero"],"cell-primary-active-bg-color":t["color-brand1-9"],"cell-primary-active-border-color":t["color-brand1-9"],"cell-primary-active-color":t["color-white"],"cell-primary-active-shadow":t["shadow-zero"],"cell-primary-disabled-bg-color":t["color-brand1-1"],"cell-primary-disabled-border-color":t["color-brand1-1"],"cell-primary-disabled-color":t["color-text1-1"],"cell-primary-disabled-shadow":t["shadow-zero"]};return Object.assign(r,n),r},Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ot(e,t,n){return e<t?t:e>n?n:e}function Mt(e){var t,n=e.type,r=e.values;if(n.indexOf("rgb")>-1)for(var i=0;i<3;i++)r[i]=parseInt(r[i]);return t=n.indexOf("hsl")>-1?e.type+"("+r[0]+", "+r[1]+"%, "+r[2]+"%":e.type+"("+r[0]+", "+r[1]+", "+r[2],4===r.length?t+=", "+e.values[3]+")":t+=")",t}function St(e){if("#"===e.charAt(0))return St(function(e){if(4===e.length){for(var t="#",n=1;n<e.length;n++)t+=e.charAt(n)+e.charAt(n);e=t}return"rgb("+parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+")"}(e));var t=e.indexOf("("),n=e.substring(0,t),r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function Ct(e,t){var n;return"object"==typeof e&&(n=e,e=e.raw),"object"==typeof t&&(t=t.raw),"transparent"===e?"transparent":(e=St(e),t=Ot(t,0,1),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,n?Et(Et({},n),{raw:Mt(e)}):Mt(e))}var Rt=function(e){var t=At(e);return{button:{height:t["size-m-height"],paddingLeft:t["size-m-padding-lr"],paddingRight:t["size-m-padding-lr"],borderWidth:t["normal-border-width"],borderColor:t["normal-border-color"],borderRadius:t["corner-m"],backgroundColor:t["normal-bg-color"],boxShadow:t["normal-shadow"]},button__text:{fontSize:t["size-m-font-size"],fontWeight:t["size-m-font-weight"],color:t["normal-color"]},button__icon:{fontSize:t["icon-size-m"],color:t["normal-color"],marginLeft:t["icon-m-margin-lr"],marginRight:t["icon-m-margin-lr"]},"button--small":{height:t["size-s-height"],paddingLeft:t["size-s-padding-lr"],paddingRight:t["size-s-padding-lr"]},"button--small__text":{fontSize:t["size-s-font-size"],fontWeight:t["size-s-font-weight"]},"button--small__icon":{fontSize:t["icon-size-s"],marginLeft:t["icon-s-margin-lr"],marginRight:t["icon-s-margin-lr"]},"button--large":{height:t["size-l-height"],paddingLeft:t["size-l-padding-lr"],paddingRight:t["size-l-padding-lr"]},"button--large__text":{fontSize:t["size-l-font-size"],fontWeight:t["size-l-font-weight"]},"button--large__icon":{fontSize:t["icon-size-l"],marginLeft:t["icon-s-margin-lr"],marginRight:t["icon-s-margin-lr"]},"button--primary":{borderWidth:t["primary-border-width"],backgroundColor:t["primary-bg-color"],borderColor:t["primary-border-color"],boxShadow:t["primary-shadow"]},"button--primary__text":{color:t["primary-color"]},"button--primary__icon":{color:t["primary-color"]},"button--secondary":{borderWidth:t["secondary-border-width"],backgroundColor:t["secondary-bg-color"],borderColor:t["secondary-border-color"],boxShadow:t["secondary-shadow"]},"button--secondary__text":{color:t["secondary-color"]},"button--secondary__icon":{color:t["secondary-color"]},"button--light":{borderWidth:t["light-border-width"],backgroundColor:Ct(t["light-bg-color"],t["light-bg-color-opacity"]||1),borderColor:t["light-border-color"],boxShadow:t["light-shadow"]},"button--light__text":{color:t["light-color"]},"button--light__icon":{color:t["light-color"]},"button--dark":{borderWidth:t["dark-border-width"],backgroundColor:t["dark-bg-color"],borderColor:t["dark-border-color"],boxShadow:t["dark-shadow"]},"button--dark__text":{color:t["dark-color"]},"button--dark__icon":{color:t["dark-color"]},"button--warning":{borderWidth:t["warning-border-width"],backgroundColor:t["warning-bg-color"],borderColor:t["warning-border-color"],boxShadow:t["warning-shadow"]},"button--warning__text":{color:t["warning-color"]},"button--warning__icon":{color:t["warning-color"]},"button--press":{borderColor:t["normal-active-border-color"],backgroundColor:t["normal-active-bg-color"],boxShadow:t["normal-active-shadow"]},"button--press__text":{color:t["normal-active-color"]},"button--press__icon":{color:t["normal-active-color"]},"button--primary--press":{borderColor:t["primary-active-border-color"],backgroundColor:t["primary-active-bg-color"],boxShadow:t["primary-active-shadow"]},"button--primary--press__text":{color:t["primary-active-color"]},"button--primary--press__icon":{color:t["primary-active-color"]},"button--secondary--press":{borderColor:t["secondary-active-border-color"],backgroundColor:t["secondary-active-bg-color"],boxShadow:t["secondary-active-shadow"]},"button--secondary--press__text":{color:t["secondary-active-color"]},"button--secondary--press__icon":{color:t["secondary-active-color"]},"button--light--press":{borderColor:t["light-active-border-color"],backgroundColor:Ct(t["light-active-bg-color"],t["light-active-bg-color-opacity"]||1),boxShadow:t["light-active-shadow"]},"button--light--press__text":{color:t["light-active-color"]},"button--light--press__icon":{color:t["light-active-color"]},"button--dark--press":{borderColor:t["dark-active-border-color"],backgroundColor:Ct(t["dark-active-bg-color"],t["dark-active-bg-color-opacity"]||1),boxShadow:t["dark-active-shadow"]},"button--dark--press__text":{color:t["dark-active-color"]},"button--dark--press__icon":{color:t["dark-active-color"]},"button--warning--press":{borderColor:t["warning-active-border-color"],backgroundColor:Ct(t["warning-active-bg-color"],t["warning-active-bg-color-opacity"]||1),boxShadow:t["warning-active-shadow"]},"button--warning--press__text":{color:t["warning-active-color"]},"button--warning--press__icon":{color:t["warning-active-color"]},"button--disabled":{borderColor:t["normal-disabled-border-color"],backgroundColor:t["normal-disabled-bg-color"],boxShadow:t["normal-disabled-shadow"]},"button--disabled__text":{color:t["normal-disabled-color"]},"button--disabled__icon":{color:t["normal-disabled-color"]},"button--primary--disabled":{borderColor:t["primary-disabled-border-color"],backgroundColor:t["primary-disabled-bg-color"],boxShadow:t["primary-disabled-shadow"]},"button--primary--disabled__text":{color:t["primary-disabled-color"]},"button--primary--disabled__icon":{color:t["primary-disabled-color"]},"button--secondary--disabled":{borderColor:t["secondary-disabled-border-color"],backgroundColor:t["secondary-disabled-bg-color"],boxShadow:t["secondary-disabled-shadow"]},"button--secondary--disabled__text":{color:t["secondary-disabled-color"]},"button--secondary--disabled__icon":{color:t["secondary-disabled-color"]},"button--light--disabled":{borderColor:t["light-disabled-border-color"],backgroundColor:Ct(t["light-disabled-bg-color"],t["light-disabled-bg-color-opacity"]||1),boxShadow:t["light-disabled-shadow"]},"button--light--disabled__text":{color:t["light-disabled-color"]},"button--light--disabled__icon":{color:t["light-disabled-color"]},"button--dark--disabled":{borderColor:t["dark-disabled-border-color"],backgroundColor:Ct(t["dark-disabled-bg-color"],t["dark-disabled-bg-color-opacity"]||1),boxShadow:t["dark-disabled-shadow"]},"button--dark--disabled__text":{color:t["dark-disabled-color"]},"button--dark--disabled__icon":{color:t["dark-disabled-color"]},"button--warning--disabled":{borderColor:t["warning-disabled-border-color"],backgroundColor:t["warning-disabled-bg-color"],boxShadow:t["warning-disabled-shadow"]},"button--warning--disabled__text":{color:t["warning-disabled-color"]},"button--warning--disabled__icon":{color:t["warning-disabled-color"]},"button--text__icon":{color:t["text-normal-color"],fontSize:t["text-icon-m-size"],marginLeft:t["text-icon-m-margin-lr"],marginRight:t["text-icon-m-margin-lr"]},"button--text__text":{color:t["text-normal-color"],fontSize:t["text-size-m-font-size"],fontWeight:t["text-size-m-font-weight"]},"button--text--small__text":{fontSize:t["text-size-s-font-size"],fontWeight:t["text-size-s-font-weight"]},"button--text--small__icon":{fontSize:t["text-icon-s-size"],marginLeft:t["text-icon-s-margin-lr"],marginRight:t["text-icon-s-margin-lr"]},"button--text--primary__text":{color:t["text-primary-color"]},"button--text--primary__icon":{color:t["text-primary-color"]},"button--text--press__text":{color:t["text-normal-active-color"]},"button--text--press__icon":{color:t["text-normal-active-color"]},"button--text--disabled__text":{color:t["text-normal-disabled-color"]},"button--text--disabled__icon":{color:t["text-normal-disabled-color"]},"button--text--primary--press__text":{color:t["text-primary-active-color"]},"button--text--primary--press__icon":{color:t["text-primary-active-color"]},"button--text--primary--disabled__text":{color:t["text-primary-disabled-color"]},"button--text--primary--disabled__icon":{color:t["text-primary-disabled-color"]},"button--cell":{height:t["cell-size-height"],backgroundColor:t["cell-normal-bg-color"],borderWidth:t["cell-border-width"],borderColor:t["cell-normal-border-color"],boxShadow:t["cell-normal-shadow"]},"button--cell__text":{fontSize:t["cell-font-size"],fontWeight:t["cell-font-weight"],color:t["cell-normal-color"]},"button--cell__icon":{fontSize:t["cell-icon-size"],color:t["cell-normal-color"],marginLeft:t["cell-icon-margin"],marginRight:t["cell-icon-margin"]},"button--cell--press":{backgroundColor:t["cell-active-bg-color"],borderColor:t["cell-active-border-color"],boxShadow:t["cell-active-shadow"]},"button--cell--press__text":{color:t["cell-active-color"]},"button--cell--press__icon":{color:t["cell-active-color"]},"button--cell--disabled":{backgroundColor:t["cell-disabled-bg-color"],borderColor:t["cell-disabled-border-color"],boxShadow:t["cell-disabled-shadow"]},"button--cell--disabled__text":{color:t["cell-disabled-color"]},"button--cell--disabled__icon":{color:t["cell-disabled-color"]},"button--cell--primary":{backgroundColor:t["cell-primary-bg-color"],borderColor:t["cell-primary-border-color"],boxShadow:t["cell-primary-shadow"]},"button--cell--primary__text":{color:t["cell-primary-color"]},"button--cell--primary__icon":{color:t["cell-primary-color"]},"button--cell--primary--press":{backgroundColor:t["cell-primary-active-bg-color"],borderColor:t["cell-primary-active-border-color"],boxShadow:t["cell-primary-active-shadow"]},"button--cell--primary--press__text":{color:t["cell-primary-active-color"]},"button--cell--primary--press__icon":{color:t["cell-primary-active-color"]},"button--cell--primary--disabled":{backgroundColor:t["cell-primary-disabled-bg-color"],borderColor:t["cell-primary-disabled-border-color"],boxShadow:t["cell-primary-disabled-shadow"]},"button--cell--primary--disabled__text":{color:t["cell-primary-disabled-color"]},"button--cell--primary--disabled__icon":{color:t["cell-primary-disabled-color"]},"button--cell--secondary":{backgroundColor:t["cell-secondary-bg-color"],borderColor:t["cell-secondary-border-color"],boxShadow:t["cell-secondary-shadow"]},"button--cell--secondary__text":{color:t["cell-secondary-color"]},"button--cell--secondary__icon":{color:t["cell-secondary-color"]},"button--cell--secondary--press":{backgroundColor:t["cell-secondary-active-bg-color"],borderColor:t["cell-secondary-active-border-color"],boxShadow:t["cell-secondary-active-shadow"]},"button--cell--secondary--press__text":{color:t["cell-secondary-active-color"]},"button--cell--secondary--press__icon":{color:t["cell-secondary-active-color"]},"button--cell--secondary--disabled":{backgroundColor:t["cell-secondary-disabled-bg-color"],borderColor:t["cell-secondary-disabled-border-color"],boxShadow:t["cell-secondary-disabled-shadow"]},"button--cell--secondary--disabled__text":{color:t["cell-secondary-disabled-color"]},"button--cell--secondary--disabled__icon":{color:t["cell-secondary-disabled-color"]}}},kt=et(Tt.a,Rt),Pt=et(Tt.a.Group,Rt);kt.Group=Pt,kt.displayName="Button",kt.Group.displayName="ButtonGroup";var Lt=n(99);var It=function(e){var t=e.Core,n=e.Button||{},r={"dot-bottom":t["s-2"],"dot-width":t["s-2"],"dot-active-color":t["color-brand1-6"]};return Object.assign(r,n),r},Ft=function(e){var t=It(e);return{"carousel__dot-wrapper":{bottom:t["dot-bottom"]},carousel__dot:{width:t["dot-width"]},"carousel__dot--active":{color:t["dot-active-color"]}}},Dt=et(n.n(Lt).a,Ft);Dt.displayName="Carousel";var Nt=n(45);var zt=function(e){var t=e.Core,n=e.Checkbox||{},r={"checkbox-padding":t["s-1"],"horizontal-margin":t["s-2"],"circle-size":t["s-6"],"circle-corner":t["corner-round"],"circle-border-width":t["line-1"],"circle-border-color":t["color-line1-3"],"circle-press-bg-color":t["color-white"],"circle-press-border-color":t["color-line1-3"],"circle-selected-bg-color":t["color-brand1-6"],"circle-selected-border-color":t["color-brand1-6"],"circle-indeterminate-bg-color":t["color-brand1-6"],"circle-indeterminate-border-width":t["line-zero"],"circle-selected-press-bg-color":t["color-brand1-9"],"circle-selected-press-border-color":t["color-brand1-9"],"circle-disabled-border-color":t["color-line1-1"],"circle-disabled-bg-color":t["color-fill1-1"],"circle-disabled-selected-border-color":t["color-line1-1"],"circle-disabled-selected-bg-color":t["color-fill1-1"],"icon-size":t["icon-xxs"],"icon-selected-color":t["color-white"],"icon-indeterminate-color":t["color-white"],"icon-disabled-color":t["color-text1-1"],"text-font-size":t["font-size-subhead"],"text-margin":t["s-3"],"text-color":t["color-text1-3"],"text-disbled-color":t["color-text1-1"]};return Object.assign(r,n),r},jt=function(e){var t=zt(e);return{"checkbox--item__horizontal":{marginRight:t["horizontal-margin"]},checkbox__container:{paddingTop:t["checkbox-padding"],paddingBottom:t["checkbox-padding"]},checkbox__circle:{height:t["circle-size"],width:t["circle-size"],borderRadius:t["circle-corner"],borderWidth:t["circle-border-width"],borderColor:t["circle-border-color"]},"checkbox--press__circle":{backgroundColor:t["circle-press-bg-color"],borderColor:t["circle-press-border-color"]},"checkbox--selected__circle":{backgroundColor:t["circle-selected-bg-color"],borderColor:t["circle-selected-border-color"]},"checkbox--indeterminate__circle":{backgroundColor:t["circle-indeterminate-bg-color"],borderWidth:t["circle-indeterminate-border-width"]},"checkbox--selected--press__circle":{backgroundColor:t["circle-selected-press-bg-color"],borderColor:t["circle-selected-press-border-color"]},"checkbox--disabled__circle":{borderColor:t["circle-disabled-border-color"],backgroundColor:t["circle-disabled-bg-color"]},"checkbox--selected--disabled__circle":{borderColor:t["circle-disabled-selected-border-color"],backgroundColor:t["circle-disabled-selected-bg-color"]},"checkbox--indeterminate--disabled__circle":{borderColor:t["circle-disabled-selected-border-color"],backgroundColor:t["circle-disabled-selected-bg-color"]},checkbox__icon:{fontSize:t["icon-size"]},"checkbox--selected__icon":{color:t["icon-selected-color"]},"checkbox--selected--disabled__icon":{color:t["icon-disabled-color"]},"checkbox--indeterminate__icon":{color:t["icon-indeterminate-color"]},"checkbox--indeterminate--disabled__icon":{color:t["icon-disabled-color"]},checkbox__text:{fontSize:t["text-font-size"],color:t["text-color"],marginLeft:t["text-margin"],marginRight:t["text-margin"]},"checkbox--selected__text":{color:t["text-color"]},"checkbox--disabled__text":{color:t["text-disbled-color"]},"checkbox--indeterminate__text":{color:t["text-color"]},"checkbox--selected--disabled__text":{color:t["text-disbled-color"]},"checkbox--indeterminate--disabled__text":{color:t["text-disbled-color"]}}},Bt=et(n.n(Nt).a,jt),Ut=et(Nt.Group,jt);Bt.Group=Ut,Bt.displayName="Checkbox",Bt.Group.displayName="CheckboxGroup";var Vt=n(46);var Ht=function(e){var t=e.Core,n=e.Drawer,r={"content-bg-color":t["color-white"],"content-shadow":t["shadow-zero"],"content-border-radius":t["corner-zero"]};return Object.assign(r,n),r},Gt=function(e){var t=Ht(e);return{drawer:{backgroundColor:t["content-bg-color"],boxShadow:t["content-shadow"]},"drawer--left":{borderTopRightRadius:t["content-border-radius"],borderBottomRightRadius:t["content-border-radius"]},"drawer--right":{borderTopLeftRadius:t["content-border-radius"],borderBottomLeftRadius:t["content-border-radius"]},"drawer--top":{borderBottomLeftRadius:t["content-border-radius"],borderBottomRightRadius:t["content-border-radius"]},"drawer--bottom":{borderTopLeftRadius:t["content-border-radius"],borderTopRightRadius:t["content-border-radius"]}}};var Wt=function(e){var t=e.Core,n=e.Picker||{},r={height:t["s-9"],"font-size":t["font-size-subhead"],"select-font-size":t["font-size-subhead"],"select-color":t["color-text1-4"],"disabled-color":t["color-text1-1"],color:t["color-text1-4"],"divider-color":t["color-line1-2"]};return Object.assign(r,n),r};function Xt(e){return"object"==typeof e&&e.raw?e.raw:e}var Yt=function(e){var t=Wt(e);return{picker__col:{height:7*Xt(t.height)},"picker__col-content":{position:"absolute",left:0,top:0,width:"100%",height:"100%",paddingTop:3*Xt(t.height),paddingBottom:3*Xt(t.height)},"picker__col-item":{fontSize:t["font-size"],height:t.height,lineHeight:t.height,color:t.color},"picker__col-item--disabled":{color:t["disabled-color"]},"picker__col-item--selected":{fontSize:t["select-font-size"],color:t["select-color"]},picker__indicator:{top:3*Xt(t.height),height:t.height,borderTop:"1px solid "+Xt(t["divider-color"]),borderBottom:"1px solid "+Xt(t["divider-color"]),borderTopColor:t["divider-color"],borderBottomColor:t["divider-color"]}}};var qt=function(e){var t=e.Core,n=e.TextField||{},r={height:t["s-11"],"solo-height":t["s-6"],"padding-lr":t["s-3"],"padding-tb":t["s-3"],corner:t["corner-1"],"font-size":t["font-size-subhead"],"error-font-size":t["font-size-footnote"],"error-padding":t["s-1"],"clear-size":t["icon-xs"],"divider-normal-color":t["color-line1-3"],"divider-focus-color":t["color-brand1-6"],"divider-disabled-color":t["color-text1-1"],"divider-error-color":t["color-error-2"],"background-color":t["color-white"],"hint-color":t["color-text1-2"],"input-color":t["color-text1-4"],"input-disabled-color":t["color-text1-1"],"caption-color":t["color-text1-3"],"clear-color":t["color-text1-2"],"error-color":t["color-error-2"],"label-font-size":t["font-size-subhead"],"label-top-font-size":t["font-size-caption"],"label-color":t["color-text1-4"]};return Object.assign(r,n),r},Kt=function(e){var t=qt(e),n=Xt(t.height),r=Xt(t["padding-tb"]),i=Xt(t["font-size"]),o=Xt(t["label-top-font-size"]),a=(n+r-i)/2,s=(n-i)/2,l=Number((o/i).toFixed(2));return{"text-field__input":{backgroundColor:t["background-color"],paddingLeft:t["padding-lr"],paddingRight:t["padding-lr"],borderTopLeftRadius:t.corner,borderTopRightRadius:t.corner},"text-field__input-label":{fontSize:t["label-font-size"],color:t["label-color"],lineHeight:1.5*Xt(t["label-font-size"]),marginRight:t["padding-lr"]},"text-field__input-element":{backgroundColor:"transparent",lineHeight:1.5*Xt(t["font-size"]),minHeight:t.height,fontSize:t["font-size"],color:t["input-color"]},"text-field--solo__input-element":{minHeight:t["solo-height"]},"text-field__input-element--placeholder":{color:t["hint-color"]},"text-field__input-action":{marginLeft:t["padding-lr"]},"text-field__input-action-icon":{fontSize:t["clear-size"],color:t["clear-color"]},"text-field__input-addon--prepend":{marginRight:t["padding-lr"]},"text-field__input-addon--append":{marginLeft:t["padding-lr"]},"text-field__input-addon-text":{fontSize:t["font-size"],color:t["caption-color"]},"text-field__line":{borderColor:t["divider-normal-color"]},"text-field__helper":{paddingLeft:t["padding-lr"],paddingRight:t["padding-lr"],paddingTop:t["error-padding"],paddingBottom:t["error-padding"]},"text-field__helper-text":{fontSize:t["error-font-size"],color:t["hint-color"]},"text-field--label-top__input-content":{paddingTop:t["label-top-font-size"]},"text-field--label-top__input-label":{lineHeight:t["label-top-font-size"],fontSize:t["label-top-font-size"],top:0},"text-field--label-top__input-element":{paddingTop:t["padding-tb"],paddingBottom:t["padding-tb"]},"text-field--label-dynamic__input-content":{paddingTop:t["padding-tb"]},"text-field--label-dynamic__input-element":{paddingTop:t["padding-tb"],paddingBottom:t["padding-tb"]},"text-field--label-dynamic__input-label":{fontSize:t["font-size"],lineHeight:t["font-size"],top:a,color:t["hint-color"]},"text-field--label-dynamic--float__input-label":{transform:"scale("+l+") translate(0, -"+((a-r)/o*100).toFixed(2)+"%)",color:t["input-color"]},"text-field--outline--label-dynamic__input-label":{top:s},"text-field--outline--label-dynamic--float__input-label":{transform:"scale("+l+") translate(0, -"+((s+o/2)/o*100).toFixed(2)+"%)",background:t["background-color"],left:0},"text-field--outline__input":{borderRadius:t.corner},"text-field--outline__line":{borderRadius:t.corner},"text-field--multiline__input":{paddingTop:t["padding-tb"]},"text-field--focused__input-label":{color:t["divider-focus-color"]},"text-field--focused__line":{borderColor:t["divider-focus-color"]},"text-field--error__input-label":{color:t["divider-error-color"]},"text-field--error__line":{borderColor:t["divider-error-color"]},"text-field--error__helper-text":{color:t["error-color"]},"text-field--disabled__input":{},"text-field--disabled__input-label":{color:t["input-disabled-color"]},"text-field--disabled__input-element":{color:t["input-disabled-color"]},"text-field--disabled__input-line":{borderColor:t["divider-disabled-color"]}}};var Qt=function(e){var t=e.Core,n=e.Select||{},r={"background-color":t["color-white"],"toolbar-height":t["s-11"],"divider-color":t["color-line1-2"],"toolbar-title-font-size":t["font-size-subhead"],"toolbar-title-color":t["color-text1-4"],"content-max-height":7*t["s-12"],"checked-icon-size":t["icon-s"]};return Object.assign(r,n),r},Jt=function(e){var t=Qt(e);return{select__picker:{backgroundColor:t["background-color"]},select__picker__toolbar:{height:t["toolbar-height"],borderBottomColor:t["divider-color"]},select__picker__title__text:{fontSize:t["toolbar-title-font-size"],color:t["toolbar-title-color"]},select__picker__content:{height:t["content-max-height"]},"check-list__item__icon":{fontSize:t["checked-icon-size"]}}},Zt=et(n.n(Vt).a,[Gt,Yt,Kt,Rt,Jt]);Zt.SlidePicker=et(Vt.SlidePicker,[Gt,Yt,Rt,Jt]),Zt.displayName="DatePicker",Zt.SlidePicker.displayName="DateSlidePicker";var $t=n(100);var en=function(e){var t=e.Core,n=e.Dialog||{},r={corner:t["corner-3"],"button-height":t["s-12"],"button-padding-lr":t["s-3"],"button-font-size":t["font-size-subhead"],"button-font-weight":t["font-weight-4"],"button-color":t["color-brand1-6"],shadow:t["shadow-zero"],"divider-color":t["color-line1-2"],"title-font-size":t["font-size-title"],"content-font-size":t["font-size-body-1"],"title-margin-bottom":t["s-1"],"content-padding-tb":t["s-5"],"content-padding-lr":t["s-5"],"bg-color":t["color-fill1-1"],"title-color":t["color-text1-4"],"content-color":t["color-text1-3"],"icon-size":t["icon-xl"],"icon-padding":t["s-4"],"icon-normal-color":t["color-brand1-6"],"icon-success-color":t["color-success-2"],"icon-warning-color":t["color-warning-2"],"icon-notice-color":t["color-notice-2"],"icon-error-color":t["color-error-2"],"close-icon-size":t["icon-xs"],"close-icon-color":t["color-text1-3"],"close-icon-margin":t["s-4"]};return Object.assign(r,n),r},tn=function(e){var t=en(e);return{dialog:{backgroundColor:t["bg-color"],borderRadius:t.corner,boxShadow:t.shadow},dialog__close:{right:t["close-icon-margin"],top:t["close-icon-margin"]},dialog__close__icon:{fontSize:t["close-icon-size"],color:t["close-icon-color"]},dialog__banner:{borderTopRightRadius:t.corner,borderTopLeftRadius:t.corner},dialog__title:{paddingTop:t["content-padding-tb"],paddingBottom:t["title-margin-bottom"],paddingLeft:t["content-padding-lr"],paddingRight:t["content-padding-lr"]},dialog__title__text:{fontSize:t["title-font-size"],color:t["title-color"]},dialog__content:{paddingLeft:t["content-padding-lr"],paddingRight:t["content-padding-lr"],paddingBottom:t["content-padding-tb"],paddingTop:t["content-padding-tb"]},dialog__content__text:{fontSize:t["content-font-size"],lineHeight:1.3*Xt(t["content-font-size"]),color:t["content-color"]},"dialog__icon-container":{marginTop:t["icon-padding"],marginBottom:t["icon-padding"]},dialog__icon:{width:t["icon-size"],height:t["icon-size"],fontSize:t["icon-size"],lineHeight:t["icon-size"],color:t["icon-normal-color"]},"dialog__icon--success":{color:t["icon-success-color"]},"dialog__icon--warning":{color:t["icon-warning-color"]},"dialog__icon--notice":{color:t["icon-notice-color"]},"dialog__icon--error":{color:t["icon-error-color"]},dialog__buttons:{borderTopColor:t["divider-color"]},dialog__button:{height:t["button-height"],paddingLeft:t["button-padding-lr"],paddingRight:t["button-padding-lr"]},"dialog__button--row":{borderLeftColor:t["divider-color"]},"dialog__button--column":{borderTopColor:t["divider-color"]},dialog__button__text:{fontSize:t["button-font-size"],fontWeight:t["button-font-weight"],color:t["button-color"]}}},nn=et(n.n($t).a,tn),rn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),on=function(){return(on=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},an=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},sn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!0},t}return rn(t,e),t.prototype.close=function(e){e&&e(),this.setState({open:!1})},t.prototype.render=function(){var e=this,t=this.props,n=t.type,r=void 0===n?"alert":n,i=t.title,o=t.content,a=t.icon,s=t.onExited,l=t.onOk,c=t.onCancel,u=an(t,["type","title","content","icon","onExited","onOk","onCancel"]),d=null,h="";return"string"==typeof o?h=o:d=o,Object(f.createElement)(nn,on({},u,{type:r,visible:this.state.open,onExited:s,onHide:function(){return e.close()},title:i,icon:a,disableBackdropClose:!0,close:!!a,message:h,onOk:l,onCancel:c,disablePortal:!0}),d)},t.defaultProps={type:"alert",title:null,content:null,icon:null,okLabel:"",cancelLabel:"",onExited:function(){},onOk:function(){},onCancel:function(){}},t}(f.Component);function ln(e){var t=f.shared.Host.driver;if(!t)throw new Error("Dialog: use dialog after render App.");var n=document.createElement("div"),r=function(){n&&(at()(n),document.body.removeChild(n),n=null)},i=Object(f.createElement)(ht,on({},ht.getContext()),Object(f.createElement)(sn,on({},e,{onExited:r})));return document.body.appendChild(n),Object(f.render)(i,n,{driver:t}),{close:function(){return r()}}}var cn=nn;cn.open=ln,cn.alert=function(e){return ln(on(on({},e),{type:"alert"}))},cn.confirm=function(e){return ln(on(on({},e),{type:"confirm"}))},cn.success=function(e,t){return ln({content:e,onOk:t,icon:"success"})},cn.warning=function(e,t){return ln({content:e,onOk:t,icon:"warning"})},cn.error=function(e,t){return ln({content:e,onOk:t,icon:"error"})},cn.notice=function(e,t){return ln({content:e,onOk:t,icon:"prompt"})},cn.info=function(e,t){return ln({content:e,onOk:t,icon:"info"})},cn.displayName="Dialog";var un=nn,dn=n(27),fn=et(n.n(dn).a,Gt);fn.displayName="Drawer";var hn=n(101),pn=(n.n(hn).a,n(19)),mn=n.n(pn);var vn=function(e){var t=e.Core,n=e.List||{},r={"list-background-color":t["color-white"],"list-border-color":t["color-line1-3"],"item-height":t["s-12"],"item-padding-tb":t["s-3"],"item-padding-lr":t["s-3"],"item-color":t["color-text1-4"],"divider-right":t["s-0"],"divider-border-bottom-color":t["color-line1-3"],"media-margin-right":t["s-3"],"media-last-margin-left":t["s-3"],"label-font-size":t["font-size-subhead"],"label-color":t["color-text1-4"],"caption-font-size":t["font-size-subhead"],"caption-color":t["color-text1-2"],"icon-font-size":t["icon-s"],"icon-color":t["color-text1-2"]};return Object.assign(r,n),r},gn=function(e){var t=vn(e);return{list:{backgroundColor:t["list-background-color"],borderColor:t["list-border-color"]},list__item:{minHeight:t["item-height"],paddingLeft:t["item-padding-lr"],color:t["item-color"]},list__item__container:{paddingTop:t["item-padding-tb"],paddingBottom:t["item-padding-tb"],paddingRight:t["item-padding-lr"]},list__item__divider:{right:t["divider-right"],borderBottomColor:t["divider-border-bottom-color"]},list__item__media:{marginRight:t["media-margin-right"]},"list__item__media--last":{marginLeft:t["media-last-margin-left"]},list__item__label:{fontSize:t["label-font-size"],lineHeight:1.5*Xt(t["label-font-size"]),color:t["label-color"]},list__item__caption:{lineHeight:1.5*Xt(t["caption-font-size"]),fontSize:t["caption-font-size"],color:t["caption-color"]},list__item__icon:{fontSize:t["icon-font-size"],color:t["icon-color"]}}};var _n=function(e){var t=e.Core,n=e.Form||{},r={"sub-header-padding-lr":t["s-2"],"sub-header-padding-tb":t["s-3"],"sub-header-margin-top":t["corner-3"],"sub-header-font-size":t["font-size-subhead"],"sub-header-line-height":t["font-lineheight-2"],"footer-margin-top":t["s-4"],"footer-padding-lr":t["s-3"],"label-font-size":t["font-size-caption"],"label-margin-bottom":t["s-2"],"label-inner-font-size":t["font-size-subhead"],"label-inner-margin-right":t["s-3"],"min-input-height":t["s-6"],"help-margin-top":t["s-1"],"help-font-size":t["font-size-footnote"],"error-font-size":t["font-size-footnote"],"sub-header-color":t["color-text1-3"],"label-color":t["color-text1-4"],"help-color":t["color-text1-2"],"error-color":t["color-error-2"]};return Object.assign(r,n),r},yn=function(e){var t=_n(e);return{form:{},"form__sub-header":{paddingTop:t["sub-header-padding-tb"],paddingBottom:t["sub-header-padding-tb"],paddingLeft:t["sub-header-padding-lr"],paddingRight:t["sub-header-padding-lr"],marginTop:t["sub-header-margin-top"],fontSize:t["sub-header-font-size"],color:t["sub-header-color"],lineHeight:t["sub-header-font-size"]},form__footer:{marginTop:t["footer-margin-top"],paddingLeft:t["footer-padding-lr"],paddingRight:t["footer-padding-lr"]},"form__item-label-container":{marginBottom:t["label-margin-bottom"]},"form__item-label-inner-container":{marginRight:t["label-inner-margin-right"]},"form__item-label":{fontSize:t["label-font-size"],color:t["label-color"]},"form--inner__item-label":{fontSize:t["label-inner-font-size"]},"form__item-input":{minHeight:t["min-input-height"]},"form__item-help":{marginTop:t["help-margin-top"]},"form__item-help-text":{fontSize:t["help-font-size"],color:t["help-color"]},"form__item-error-text":{fontSize:t["error-font-size"],color:t["error-color"]},"form__item-required-text":{fontSize:t["label-font-size"],lineHeight:t["label-font-size"]},"form__item-required-text__inner":{fontSize:t["label-inner-font-size"],lineHeight:t["label-inner-font-size"]}}},bn=et(mn.a,yn),xn=et(mn.a.Content,gn);bn.displayName="Form",bn.SubHeader=mn.a.SubHeader,bn.Content=xn,bn.Item=mn.a.Item,bn.Footer=mn.a.Footer;var wn=n(102);var Tn=function(e){var t=e.Core,n=e.Grid||{},r={"background-color":t["color-white"],"border-color":t["color-line1-2"]};return Object.assign(r,n),r},An=function(e){var t=Tn(e);return{grid:{backgroundColor:t["background-color"],borderColor:t["border-color"]},grid__row:{borderTopColor:t["border-color"]},grid__cell:{borderLeftColor:t["border-color"]}}},En=et(n.n(wn).a,An);En.displayName="Grid";var On=n(6),Mn=(n.n(On).a,n(12)),Sn=n.n(Mn),Cn=et(Sn.a,gn);Cn.Item=Mn.ListItem,Cn.ItemAction=Sn.a.ItemAction,Cn.ItemMedia=Mn.ListItemMedia,Cn.ItemLabel=Mn.ListItemLabel,Cn.ItemCaption=Mn.ListItemCaption,Cn.ItemContent=Mn.ListItemContent,Cn.displayName="List";var Rn=n(103);var kn=function(e){var t=e.Core,n=e.NumberPicker||{},r={height:t["s-11"],"input-width":t["s-20"],"input-corner":t["corner-1"],"input-padding-lr":t["s-3"],"input-margin":t["s-2"],"input-font-size":t["font-size-subhead"],"input-background-color":t["color-white"],"input-border-color":t["color-line1-3"],"input-color":t["color-text1-4"],"button-width":t["s-14"],"button-corner":t["corner-1"],"button-border-width":t["line-1"],"button-border-color":t["color-brand1-6"],"button-background-color":t["color-brand1-6"],"button-icon-size":t["icon-s"],"button-icon-color":t["color-white"],"input-focused-border-color":t["color-brand1-6"],"input-disabled-border-color":t["color-line1-1"],"input-disabled-background-color":t["color-fill1-1"],"input-disabled-color":t["color-text1-1"],"button-disabled-border-color":t["color-line1-1"],"button-disabled-background-color":t["color-fill1-1"],"button-disabled-icon-color":t["color-text1-1"]};return Object.assign(r,n),r},Pn=function(e){var t=kn(e);return{"number-picker__input":{backgroundColor:t["input-background-color"],marginLeft:t["input-margin"],marginRight:t["input-margin"],paddingLeft:t["input-padding-lr"],paddingRight:t["input-padding-lr"],width:t["input-width"],height:t.height,borderColor:t["input-border-color"],borderRadius:t["input-corner"],color:t["input-color"],fontSize:t["input-font-size"]},"number-picker__button":{width:t["button-width"],height:t.height,borderWidth:t["button-border-width"],borderColor:t["button-border-color"],borderRadius:t["button-corner"],backgroundColor:t["button-background-color"]},"number-picker__button-icon":{color:t["button-icon-color"],fontSize:t["button-icon-size"]},"number-picker--disabled__input":{backgroundColor:t["input-disabled-background-color"],borderColor:t["input-disabled-border-color"],color:t["input-disabled-color"]},"number-picker--disabled__button":{borderColor:t["button-disabled-border-color"],backgroundColor:t["button-disabled-background-color"]},"number-picker--disabled__button-icon":{color:t["button-disabled-icon-color"]},"number-picker--focused__input":{borderColor:t["input-focused-border-color"]}}},Ln=et(n.n(Rn).a,[Rt,Pn]);Ln.displayName="NumberPicker";var In=n(104);var Fn=function(e){var t=e.Core,n=e.Switch||{},r={"button-gap":t["s-4"],"number-font-size":t["font-size-subhead"],"current-text-color":t["color-brand1-6"],"total-text-color":t["color-text1-4"]};return Object.assign(r,n),r},Dn=function(e){var t=Fn(e);return{"pagination--first":{},"pagination--last":{marginLeft:t["button-gap"]},"pagination--prev":{marginLeft:t["button-gap"]},"pagination--prev__mini":{marginLeft:0},"pagination--next":{marginLeft:t["button-gap"]},"pagination--current":{marginLeft:t["button-gap"],color:t["current-text-color"]},"pagination--total":{color:t["total-text-color"]},"pagination--number":{fontSize:t["number-font-size"]}}},Nn=et(n.n(In).a,[Rt,Dn]);Nn.displayName="Pagination";var zn=n(41),jn=et(n.n(zn).a,Yt);jn.displayName="Picker";var Bn=n(42);var Un=function(e){var t=e.Core,n=e.Progress||{},r={"track-background-color":t["color-fill1-3"],"bar-background-color":t["color-brand1-6"],"circle-size":t["s-20"],"circle-text-color":t["color-brand1-6"],"circle-text-font-size":t["font-size-subhead"]};return Object.assign(r,n),r},Vn=function(e){var t=Un(e);return{"linear-progress__track":{backgroundColor:t["track-background-color"]},"linear-progress__bar":{backgroundColor:t["bar-background-color"]},"circle-progress":{width:t["circle-size"],height:t["circle-size"]},"circle-progress__track":{stroke:t["track-background-color"]},"circle-progress__bar":{stroke:t["bar-background-color"]},"circle-progress__text":{color:t["circle-text-color"],fontSize:t["circle-text-font-size"]}}},Hn=et(n.n(Bn).a,Vn);Hn.displayName="Progress";var Gn=n(47);var Wn=function(e){var t=e.Core,n=e.Radio||{},r={"radio-padding":t["s-1"],"horizontal-margin":t["s-2"],"circle-size":t["s-6"],"circle-corner":t["corner-round"],"circle-border-width":t["line-1"],"circle-border-color":t["color-line1-3"],"circle-bg-color":t["color-white"],"circle-selected-border-width":t["line-1"],"circle-selected-border-color":t["color-brand1-6"],"circle-disabled-border-color":t["color-line1-1"],"circle-disabled-bg-color":t["color-fill1-1"],"point-size":t["s-3"],"point-selected-bg-color":t["color-brand1-6"],"point-selected-disabled-bg-color":t["color-text1-1"],"text-font-size":t["font-size-subhead"],"text-left-margin":t["s-3"],"text-color":t["color-text1-3"],"text-selected-color":t["color-text1-3"],"text-disbled-color":t["color-text1-1"]};return Object.assign(r,n),r},Xn=function(e){var t=Wn(e);return{"radio--item__horizontal":{marginRight:t["horizontal-margin"]},radio__container:{paddingTop:t["radio-padding"],paddingBottom:t["radio-padding"]},radio__circle:{height:t["circle-size"],width:t["circle-size"],borderRadius:t["circle-corner"],borderWidth:t["circle-border-width"],borderColor:t["circle-border-color"],backgroundColor:t["circle-bg-color"]},"radio--selected__circle":{borderWidth:t["circle-selected-border-width"],borderColor:t["circle-selected-border-color"]},"radio--disabled__circle":{borderColor:t["circle-disabled-border-color"],backgroundColor:t["circle-disabled-bg-color"]},"radio--selected--disabled__circle":{borderColor:t["circle-disabled-border-color"],backgroundColor:t["circle-disabled-bg-color"]},radio__point:{width:t["point-size"],height:t["point-size"],borderRadius:t["circle-corner"]},"radio--selected__point":{backgroundColor:t["point-selected-bg-color"]},"radio--selected--disabled__point":{backgroundColor:t["point-selected-disabled-bg-color"]},radio__text:{fontSize:t["text-font-size"],color:t["text-color"],marginLeft:t["text-left-margin"],marginRight:t["text-left-margin"]},"radio--selected__text":{color:t["text-selected-color"]},"radio--disabled__text":{color:t["text-disbled-color"]},"radio--selected--disabled__text":{color:t["text-disbled-color"]}}},Yn=et(n.n(Gn).a,Xn),qn=et(Gn.Group,Xn);Yn.Group=qn,Yn.displayName="Radio",Yn.Group.displayName="RadioGroup";var Kn=n(105);var Qn=function(e){var t=e.Core,n=e.Range||{},r={"track-size-height":t["s-1"],"track-bg-color":t["color-line1-3"],"disabled-track-bg-color":t["color-line1-3"],"track-selected-bg-color":t["color-brand1-6"],"disabled-track-selected-bg-color":t["color-line1-2"],"thumb-size":t["s-8"],"thumb-size-margin-top":t["s-4"],"thumb-size-margin-left":t["s-4"],"thumb-bg-color":t["color-white"],"thumb-shadow":t["shadow-1"],"thumb-active-shadow":t["shadow-2"],"thumb-border-width":t["line-1"],"thumb-border-color":t["color-line1-2"],"mark-size-width":t["line-3"],"mark-size-height":t["s-4"],"mark-bg-color":t["color-line1-3"],"active-mark-bg-color":t["color-brand1-6"],"disabled-mark-bg-color":t["color-text1-1"],"disabled-mark-active-bg-color":t["color-text1-2"],"tooltip-size-width":t["s-10"],"tooltip-size-height":t["s-12"],"tooltip-color":t["color-text1-3"],"tooltip-shadow":t["shadow-1"],"tooltip-corner":t["corner-1"],"tooltip-bg-color":t["color-white"],"arrow-border-width":t["line-1"],"label-margin-top":t["s-4"],"label-font-size":t["font-size-footnote"],"label-font-weight":t["font-weight-5"],"label-color":t["color-text1-2"],"label-active-color":t["color-brand1-6"],"disabled-label-color":t["color-text1-2"],"disabled-label-active-color":t["color-text1-2"]};return Object.assign(r,n),r},Jn=function(e){var t=Qn(e);return{range__track:{height:Xt(t["track-size-height"])/2,background:t["track-bg-color"]},"range__track--selected":{height:Xt(t["track-size-height"])/2,background:t["track-selected-bg-color"]},"range--disabled__track":{background:t["disabled-track-bg-color"]},"range--disabled__track--selected":{background:t["disabled-track-selected-bg-color"]},range__thumb:{width:t["thumb-size"],height:t["thumb-size"],marginLeft:-t["thumb-size-margin-left"],backgroundColor:t["thumb-bg-color"],borderWidth:t["thumb-border-width"],borderColor:t["thumb-border-color"],boxShadow:t["thumb-shadow"]},"range__thumb--active":{boxShadow:t["thumb-active-shadow"]},range__mark:{width:t["mark-size-width"],height:t["mark-size-height"],background:t["mark-bg-color"],top:-Xt(t["mark-size-height"])/2+Xt(t["track-size-height"])/4},"range__mark--active":{background:t["active-mark-bg-color"]},"range--disabled__mark":{background:t["disabled-mark-bg-color"]},"range--disabled__mark--active":{background:t["disabled-mark-active-bg-color"]},range__label:{top:t["label-margin-top"],color:t["label-color"],fontSize:t["label-font-size"]},"range__label--active":{color:t["label-active-color"]},"range--disabled__label":{color:t["disabled-label-color"]},"range--disabled__label--active":{color:t["disabled-label-active-color"]},range__tooltip:{width:t["tooltip-size-width"],height:t["tooltip-size-height"],borderRadius:t["tooltip-corner"],boxShadow:t["tooltip-shadow"],background:t["tooltip-bg-color"],color:t["tooltip-color"]},range__arrow:{borderColor:t["tooltip-bg-color"],boxShadow:t["tooltip-shadow"]}}},Zn=et(n.n(Kn).a,Jn);Zn.displayName="Range";var $n=n(18),er=n.n($n),tr=et(er.a,[Gt,Yt,Kt,Rt,gn,Jt]);tr.displayName="Select",tr.Base=et(er.a.Base,[Kt]),tr.Base.displayName="SelectBase",tr.Picker=et(er.a.Picker,[Gt,Yt,Rt,Jt]),tr.Picker.displayName="SelectPicker",tr.CheckListPicker=et(er.a.CheckListPicker,[Gt,Kt,Rt,gn,Jt]),tr.CheckListPicker.displayName="SelectCheckListPicker";var nr=n(106);var rr=function(e){var t=e.Core,n=e.Stepper||{},r={"circle-node-size":t["s-7"],"circle-icon-size":t["icon-xs"],"circle-font-size":t["font-size-body-1"],"circle-line-width":t["line-1"],"circle-line-margin":t["s-2"],"circle-body-width":200,"circle-body-margin":t["s-3"],"title-font-size":t["font-size-subhead"],"content-font-size":t["font-size-caption"],"circle-awaiting-border-color":t["color-text1-3"],"circle-awaiting-background-color":t["color-white"],"circle-awaiting-color":t["color-text1-2"],"circle-awaiting-line-color":t["color-line1-2"],"circle-awaiting-title-color":t["color-text1-3"],"circle-awaiting-title-style":t["font-weight-4"],"circle-awaiting-content-color":t["color-text1-3"],"circle-processing-border-color":t["color-brand1-6"],"circle-processing-background-color":t["color-brand1-6"],"circle-processing-color":t["color-white"],"circle-processing-line-color":t["color-line1-2"],"circle-processing-title-color":t["color-text1-4"],"circle-processing-title-style":t["font-weight-7"],"circle-processing-content-color":t["color-text1-4"],"circle-finished-border-color":t["color-brand1-6"],"circle-finished-background-color":t["color-white"],"circle-finished-color":t["color-brand1-6"],"circle-finished-line-color":t["color-brand1-6"],"circle-finished-title-color":t["color-text1-3"],"circle-finished-title-style":t["font-weight-4"],"circle-finished-content-color":t["color-text1-3"],"dot-node-size":t["s-3"],"dot-line-width":t["line-1"],"dot-line-margin":t["s-2"],"dot-body-width":200,"dot-body-margin":t["s-3"],"dot-awaiting-border-color":t["color-text1-2"],"dot-awaiting-background-color":t["color-white"],"dot-awaiting-line-color":t["color-line1-2"],"dot-awaiting-title-color":t["color-text1-3"],"dot-awaiting-title-style":t["font-weight-4"],"dot-awaiting-content-color":t["color-text1-3"],"dot-processing-border-color":t["color-brand1-6"],"dot-processing-background-color":t["color-brand1-6"],"dot-processing-line-color":t["color-line1-2"],"dot-processing-title-color":t["color-text1-4"],"dot-processing-title-style":t["font-weight-7"],"dot-processing-content-color":t["color-text1-4"],"dot-finished-border-color":t["color-brand1-6"],"dot-finished-background-color":t["color-white"],"dot-finished-line-color":t["color-brand1-6"],"dot-finished-title-color":t["color-text1-3"],"dot-finished-title-style":t["font-weight-4"],"dot-finished-content-color":t["color-text1-3"]};return Object.assign(r,n),r},ir=function(e){var t=rr(e),n=Xt(t["circle-body-width"]),r=Xt(t["dot-body-width"]),i=Xt(t["circle-node-size"]),o=Xt(t["dot-node-size"]);return{"stepper--vertical__step":{marginTop:t["circle-line-margin"]},"stepper--dot--vertical__step":{marginTop:t["dot-line-margin"]},"stepper--horizontal__step__header":{marginBottom:t["circle-body-margin"]},"stepper--dot--horizontal__step__header":{marginBottom:t["dot-body-margin"]},"stepper--horizontal__step--first__header":{paddingLeft:(n-i)/2},"stepper--horizontal__step--last__header":{paddingRight:(n-i)/2},"stepper--dot--horizontal__step--first__header":{paddingLeft:(r-o)/2},"stepper--dot--horizontal__step--last__header":{paddingRight:(r-o)/2},"stepper--vertical__step__header":{marginRight:t["circle-body-margin"]},"stepper--dot--vertical__step__header":{marginRight:t["dot-body-margin"]},"stepper--horizontal__step__connector":{borderTopWidth:t["circle-line-width"],borderTopColor:t["circle-awaiting-line-color"]},"stepper--dot--horizontal__step__connector":{borderTopWidth:t["dot-line-width"],borderTopColor:t["dot-awaiting-line-color"]},"stepper--vertical__step__connector":{left:(i-Xt(t["circle-line-width"]))/2,top:i+Xt(t["circle-line-margin"]),borderLeftWidth:t["circle-line-width"],borderLeftColor:t["circle-awaiting-line-color"]},"stepper--dot--vertical__step__connector":{left:(o-Xt(t["dot-line-width"]))/2,top:o+Xt(t["dot-line-margin"]),borderLeftWidth:t["dot-line-width"],borderLeftColor:t["dot-awaiting-line-color"]},"stepper--horizontal__step--processing__connector":{borderTopColor:t["circle-processing-line-color"]},"stepper--vertical__step--processing__connector":{borderLeftColor:t["circle-processing-line-color"]},"stepper--horizontal__step--finished__connector":{borderTopColor:t["circle-finished-line-color"]},"stepper--vertical__step--finished__connector":{borderLeftColor:t["circle-finished-line-color"]},"stepper--dot--horizontal__step--processing__connector":{borderTopColor:t["dot-processing-line-color"]},"stepper--dot--vertical__step--processing__connector":{borderLeftColor:t["dot-processing-line-color"]},"stepper--dot--horizontal__step--finished__connector":{borderTopColor:t["dot-finished-line-color"]},"stepper--dot--vertical__step--finished__connector":{borderLeftColor:t["dot-finished-line-color"]},stepper__step__node:{borderColor:t["circle-awaiting-border-color"],backgroundColor:t["circle-awaiting-background-color"],width:t["circle-node-size"],height:t["circle-node-size"]},"stepper__step--finished__node":{borderColor:t["circle-finished-border-color"],backgroundColor:t["circle-finished-background-color"]},"stepper__step--processing__node":{borderColor:t["circle-processing-border-color"],backgroundColor:t["circle-processing-background-color"]},"stepper--dot__step__node":{borderColor:t["dot-awaiting-border-color"],backgroundColor:t["dot-awaiting-background-color"],width:t["dot-node-size"],height:t["dot-node-size"]},"stepper--dot__step--finished__node":{borderColor:t["dot-finished-border-color"],backgroundColor:t["dot-finished-background-color"]},"stepper--dot__step--processing__node":{borderColor:t["dot-processing-border-color"],backgroundColor:t["dot-processing-background-color"]},"stepper--horizontal__step__node":{marginLeft:t["circle-line-margin"],marginRight:t["circle-line-margin"]},"stepper--vertical__step__node":{marginBottom:t["circle-line-margin"]},"stepper--dot--horizontal__step__node":{marginLeft:t["dot-line-margin"],marginRight:t["dot-line-margin"]},"stepper--dot--vertical__step__node":{marginBottom:t["dot-line-margin"]},stepper__step__icon:{fontSize:t["circle-icon-size"],color:t["circle-awaiting-color"]},"stepper__step--finished__icon":{color:t["circle-finished-color"]},"stepper__step--processing__icon":{color:t["circle-processing-color"]},stepper__step__number:{fontSize:t["circle-font-size"],color:t["circle-awaiting-color"]},"stepper__step--finished__number":{color:t["circle-finished-color"]},"stepper__step--processing__number":{color:t["circle-processing-color"]},"stepper--dot__step__icon":{fontSize:t["dot-icon-size"],color:t["dot-awaiting-color"]},"stepper--dot__step--finished__icon":{color:t["dot-finished-color"]},"stepper--dot__step--processing__icon":{color:t["dot-processing-color"]},"stepper--dot__step__number":{fontSize:t["dot-font-size"],color:t["dot-awaiting-color"]},"stepper--dot__step--finished__number":{color:t["dot-finished-color"]},"stepper--dot__step--processing__number":{color:t["dot-processing-color"]},"stepper--horizontal__step__body":{width:t["circle-body-width"]},"stepper--dot--horizontal__step__body":{width:t["dot-body-width"]},"stepper--vertical__step__body":{paddingTop:(i-Xt(t["title-font-size"]))/2},"stepper--dot--vertical__step__body":{paddingTop:(o-Xt(t["title-font-size"]))/2},stepper__step__title:{fontSize:t["title-font-size"],fontWeight:t["circle-awaiting-title-style"],color:t["circle-awaiting-title-color"],lineHeight:t["title-font-size"]},"stepper__step--finished__title":{color:t["circle-finished-title-color"],fontWeight:t["circle-finished-title-style"]},"stepper__step--processing__title":{color:t["circle-processing-title-color"],fontWeight:t["circle-processing-title-style"]},"stepper--dot__step__title":{fontWeight:t["dot-awaiting-title-style"],color:t["dot-awaiting-title-color"]},"stepper--dot__step--finished__title":{color:t["dot-finished-title-color"],fontWeight:t["dot-finished-title-style"]},"stepper--dot__step--processing__title":{color:t["dot-processing-title-color"],fontWeight:t["dot-processing-title-style"]},stepper__step__content:{fontSize:t["content-font-size"],color:t["circle-awaiting-content-color"]},"stepper__step--finished__content":{color:t["circle-finished-content-color"]},"stepper__step--processing__content":{color:t["circle-processing-content-color"]},"stepper--dot__step__content":{color:t["dot-awaiting-content-color"]},"stepper--dot__step--finished__content":{color:t["dot-finished-content-color"]},"stepper--dot__step--processing__content":{color:t["dot-processing-content-color"]}}},or=et(n.n(nr).a,ir);or.displayName="Stepper";var ar=n(107);var sr=function(e){var t=e.Core,n=e.Switch||{},r={"track-width":t["s-14"],"track-height":t["s-8"],"track-border-width":t["line-2"],"track-corner":t["s-4"],"track-checked-border-color":t["color-brand1-6"],"track-checked-bg-color":t["color-brand1-6"],"track-unchecked-border-color":t["color-line1-2"],"track-unchecked-bg-color":t["color-white"],"track-unchecked-disabled-border-color":t["color-line1-1"],"track-unchecked-disabled-bg-color":t["color-brand1-1"],"thumb-size":t["s-7"],"thumb-border-width":t["line-1"],"thumb-shadow":t["shadow-1"],"thumb-checked-bg-color":t["color-white"],"thumb-checked-border-color":t["color-brand1-6"],"thumb-unchecked-bg-color":t["color-white"],"thumb-unchecked-border-color":t["color-line1-2"],"thumb-checked-disabled-bg-color":t["color-white"],"thumb-checked-disabled-border-color":t["color-brand1-1"],"thumb-unchecked-disabled-bg-color":t["color-line1-1"],"thumb-unchecked-disabled-border-color":t["color-line1-1"]};return Object.assign(r,n),r},lr=function(e){var t=sr(e);return{switch__track:{height:t["track-height"],width:t["track-width"],borderWidth:t["track-border-width"],borderRadius:Xt(t["track-height"])/2},"switch--checked__track":{borderColor:t["track-checked-border-color"],backgroundColor:t["track-checked-bg-color"]},"switch--unchecked__track":{borderColor:t["track-unchecked-border-color"],backgroundColor:t["track-unchecked-border-color"]},"switch--unchecked--disabled__track":{borderColor:t["track-unchecked-disabled-border-color"],backgroundColor:t["track-unchecked-disabled-bg-color"]},"switch--checked--disabled__track":{borderColor:t["track-unchecked-disabled-border-color"],backgroundColor:t["track-unchecked-disabled-bg-color"]},switch__thumb:{height:t["thumb-size"],width:t["thumb-size"],borderWidth:t["thumb-border-width"],boxShadow:t["thumb-shadow"]},"switch--checked__thumb":{backgroundColor:t["thumb-checked-bg-color"],borderColor:t["thumb-checked-border-color"],borderWidth:0,left:Xt(t["track-width"])-Xt(t["track-height"])},"switch--unchecked__thumb":{backgroundColor:t["thumb-unchecked-bg-color"],borderColor:t["thumb-unchecked-border-color"]},"switch--unchecked--disabled__thumb":{backgroundColor:t["thumb-unchecked-disabled-bg-color"],borderColor:t["thumb-unchecked-disabled-border-color"]},"switch--checked--disabled__thumb":{borderColor:t["thumb-checked-disabled-border-color"],backgroundColor:t["thumb-checked-disabled-bg-color"]}}},cr=et(n.n(ar).a,lr);cr.displayName="Switch";var ur=n(48),dr=n.n(ur);var fr=function(e){var t=e.Core,n=e.Tabs||{},r={height:t["s-11"],"bottom-height":t["s-14"],"line-width":t["line-1"],"icon-size":t["icon-m"],"icon-margin":t["s-1"],"font-size":t["font-size-body-1"],"bottom-font-size":t["font-size-footnote"],"bottom-icon-size":t["icon-m"],"bottom-icon-margin":t["s-0"],padding:t["s-3"],"normal-bg-color":t["color-white"],"normal-line-color":t["color-line1-2"],"normal-active-line-color":t["color-brand1-6"],"normal-active-line-height":t["line-2"],"normal-active-color":t["color-brand1-6"],"normal-color":t["color-text1-2"],"normal-font-weight":t["font-weight-2"],"normal-active-font-weight":t["font-weight-3"],"normal-shadow":t["shadow-zero"],"primary-bg-color":t["color-brand1-6"],"primary-line-color":t["color-white"],"primary-active-line-color":t["color-white"],"primary-active-line-height":t["line-2"],"primary-active-color":t["color-white"],"primary-color":"rgba(255, 255, 255, .72)","primary-font-weight":t["font-weight-2"],"primary-active-font-weight":t["font-weight-3"],"primary-shadow":t["shadow-2"]};return Object.assign(r,n),r},hr=function(e){var t=fr(e);return{tabs:{backgroundColor:t["normal-bg-color"],boxShadow:t["normal-shadow"]},tabs__divider:{borderBottom:"1px solid "+Xt(t["normal-line-color"]),borderBottomColor:t["normal-line-color"]},tabs__tab:{minHeight:t.height,paddingLeft:t.padding,paddingRight:t.padding,paddingTop:t.padding,paddingBottom:t.padding},"tabs__active-line":{height:t["normal-active-line-height"],backgroundColor:t["normal-active-line-color"]},"tabs__tab-text":{width:"100%",textAlign:"center",lineHeight:1.2*Xt(t["font-size"]),fontSize:t["font-size"],fontWeight:t["normal-font-weight"],color:t["normal-color"]},"tabs__tab-icon":{fontSize:t["icon-size"],color:t["normal-color"]},"tabs__tab-text--icon":{"margin-top":t["icon-margin"]},"tabs__tab--active-text":{color:t["normal-active-color"],fontWeight:t["normal-active-font-weight"]},"tabs__tab--active-icon":{color:t["normal-active-color"]},"tabs--primary":{backgroundColor:t["primary-bg-color"],boxShadow:t["primary-shadow"]},"tabs--primary__active-line":{backgroundColor:t["primary-active-line-color"],height:t["primary-active-line-height"]},"tabs--primary__tab-text":{color:t["primary-color"]},"tabs--primary__tab-icon":{color:t["primary-color"]},"tabs--primary__tab--active-text":{color:t["primary-active-color"]},"tabs--primary__tab--active-icon":{color:t["primary-active-color"]},"tabs--bottom__tab":{height:t["bottom-height"]},"tabs--bottom__tab-text":{fontSize:t["bottom-font-size"]},"tabs--bottom__tab-icon":{fontSize:t["bottom-icon-size"]},"tabs--bottom__tab-text--icon":{"margin-top":t["bottom-icon-margin"]}}},pr=et(dr.a,hr);pr.displayName="Tabs",pr.Tab=dr.a.Tab,pr.Tab.displayName="Tabs.Tab";var mr=n(108);var vr=function(e){var t=e.Core,n=e.Tag||{},r={"size-m-height":t["s-8"],"size-m-padding-lr":t["s-4"],"size-m-corner":t["corner-1"],"size-m-text-font-size":t["font-size-body-1"],"size-m-text-font-weight":t["font-weight-4"],"size-m-icon-size":t["icon-xxs"],"size-m-icon-margin":t["s-2"],"size-m-delete-size":t["s-3"],"size-m-delete-icon-size":t["icon-xxs"],"size-l-height":t["s-11"],"size-l-padding-lr":t["s-4"],"size-l-corner":t["corner-1"],"size-l-text-font-size":t["font-size-subhead"],"size-l-text-font-weight":t["font-weight-4"],"size-l-icon-size":t["icon-xs"],"size-l-icon-margin":t["s-3"],"size-l-delete-size":t["s-4"],"size-l-delete-icon-size":t["icon-xs"],"normal-border-color":t["color-line1-3"],"normal-background":t["color-white"],"normal-color":t["color-text1-4"],"normal-shadow":t["shadow-zero"],"normal-delete-background":t["color-transparent"],"normal-delete-icon-color":t["color-text1-4"],"normal-disabled-border-color":t["color-line1-1"],"normal-disabled-background":t["color-fill1-1"],"normal-disabled-color":t["color-text1-1"],"normal-disabled-shadow":t["shadow-zero"],"normal-disabled-delete-background":t["color-transparent"],"normal-disabled-delete-icon-color":t["color-text1-1"],"normal-selected-border-color":t["color-brand1-6"],"normal-selected-background":t["color-brand1-1"],"normal-selected-color":t["color-brand1-6"],"normal-selected-shadow":t["shadow-zero"],"normal-disabled-selected-border-color":t["color-line1-3"],"normal-disabled-selected-background":t["color-fill1-3"],"normal-disabled-selected-color":t["color-text1-2"],"normal-disabled-selected-shadow":t["shadow-zero"],"primary-border-color":t["color-brand1-6"],"primary-background":t["color-brand1-6"],"primary-color":t["color-white"],"primary-shadow":t["shadow-zero"],"primary-delete-background":t["color-transparent"],"primary-delete-icon-color":t["color-white"],"primary-disabled-border-color":t["color-brand1-1"],"primary-disabled-background":t["color-brand1-1"],"primary-disabled-color":t["color-text1-1"],"primary-disabled-shadow":t["shadow-zero"],"primary-disabled-delete-background":t["color-transparent"],"primary-disabled-delete-icon-color":t["color-text1-1"]};return Object.assign(r,n),r},gr=function(e){var t=vr(e);return{tag:{height:t["size-m-height"],paddingLeft:t["size-m-padding-lr"],paddingRight:t["size-m-padding-lr"],borderColor:t["normal-border-color"],borderRadius:t["size-m-corner"],backgroundColor:t["normal-background"],boxShadow:t["normal-shadow"]},tag__text:{fontSize:t["size-m-text-font-size"],fontWeight:t["size-m-text-font-weight"],color:t["normal-color"]},tag__icon:{fontSize:t["size-m-icon-size"],color:t["normal-color"],marginLeft:t["size-m-icon-margin"],marginRight:t["size-m-icon-margin"]},"tag--large":{height:t["size-l-height"],borderRadius:t["size-l-corner"],paddingLeft:t["size-l-padding-lr"],paddingRight:t["size-l-padding-lr"]},"tag--large__text":{fontSize:t["size-l-text-font-size"],fontWeight:t["size-l-text-font-weight"]},"tag--large__icon":{marginLeft:t["size-l-icon-margin"],marginRight:t["size-l-icon-margin"],fontSize:t["size-l-icon-size"]},"tag--primary":{backgroundColor:t["primary-background"],borderColor:t["primary-border-color"],boxShadow:t["primary-shadow"]},"tag--primary__text":{color:t["primary-color"]},"tag--primary__icon":{color:t["primary-color"]},"tag--selectable":{height:t["size-m-height"],paddingLeft:t["size-m-padding-lr"],paddingRight:t["size-m-padding-lr"],borderColor:t["normal-border-color"],borderRadius:t["size-m-corner"],backgroundColor:t["normal-background"],boxShadow:t["normal-shadow"]},"tag--selectable__text":{fontSize:t["size-m-text-font-size"],fontWeight:t["size-m-text-font-weight"],color:t["normal-color"]},"tag--selectable__icon":{fontSize:t["size-m-icon-size"],color:t["normal-color"],marginLeft:t["size-m-icon-margin"],marginRight:t["size-m-icon-margin"]},"tag--selectable--large":{height:t["size-l-height"],borderRadius:t["size-l-corner"],paddingLeft:t["size-l-padding-lr"],paddingRight:t["size-l-padding-lr"]},"tag--selectable--large__text":{fontSize:t["size-l-text-font-size"],fontWeight:t["size-l-text-font-weight"]},"tag--selectable--large__icon":{marginLeft:t["size-l-icon-margin"],marginRight:t["size-l-icon-margin"],fontSize:t["size-l-icon-size"]},"tag--selectable--selected":{backgroundColor:t["normal-selected-background"],borderColor:t["normal-selected-border-color"],boxShadow:t["normal-selected-shadow"]},"tag--selectable--selected__text":{color:t["normal-selected-color"]},"tag--selectable--selected__icon":{color:t["normal-selected-color"]},"tag--selectable--disabled--selected":{backgroundColor:t["normal-disabled-selected-background"],borderColor:t["normal-disabled-selected-border-color"],boxShadow:t["normal-disabled-selected-shadow"]},"tag--selectable--disabled--selected__text":{color:t["normal-disabled-selected-color"]},"tag--selectable--disabled--selected__icon":{color:t["normal-disabled-selected-color"]},"tag--disabled":{borderColor:t["normal-disabled-border-color"],backgroundColor:t["normal-disabled-background"]},"tag--disabled__text":{color:t["normal-disabled-color"]},"tag--disabled__icon":{color:t["normal-disabled-color"]},"tag--primary--disabled":{borderColor:t["primary-disabled-border-color"],backgroundColor:t["primary-disabled-background"]},"tag--primary--disabled__text":{color:t["primary-disabled-color"]},"tag--primary--disabled__icon":{color:t["primary-disabled-color"]},"tag--selectable--disabled":{borderColor:t["normal-disabled-border-color"],backgroundColor:t["normal-disabled-background"]},"tag--selectable--disabled__text":{color:t["normal-disabled-color"]},"tag--selectable--disabled__icon":{color:t["normal-disabled-color"]},"tag--deletable":{height:t["size-m-height"],paddingLeft:t["size-m-padding-lr"],paddingRight:t["size-m-padding-lr"],borderColor:t["normal-border-color"],borderRadius:t["size-m-corner"],backgroundColor:t["normal-background"],boxShadow:t["normal-shadow"]},"tag--deletable__text":{fontSize:t["size-m-text-font-size"],fontWeight:t["size-m-text-font-weight"],color:t["normal-color"]},"tag--deletable__icon":{fontSize:t["size-m-icon-size"],color:t["normal-color"],marginLeft:t["size-m-icon-margin"],marginRight:t["size-m-icon-margin"]},"tag--deletable__delete":{backgroundColor:t["normal-delete-background"],marginLeft:t["size-m-icon-margin"]},"tag--deletable__delete-icon":{fontSize:t["size-m-delete-icon-size"],color:t["normal-delete-icon-color"]},"tag--deletable--large":{height:t["size-l-height"],borderRadius:t["size-l-corner"],paddingLeft:t["size-l-padding-lr"],paddingRight:t["size-l-padding-lr"]},"tag--deletable--large__icon":{marginLeft:t["size-l-icon-margin"],marginRight:t["size-l-icon-margin"],fontSize:t["size-l-icon-size"]},"tag--deletable--large__text":{fontSize:t["size-l-text-font-size"],fontWeight:t["size-l-text-font-weight"]},"tag--deletable--large__delete":{marginLeft:t["size-l-icon-margin"]},"tag--deletable--large__delete-icon":{fontSize:t["size-l-delete-icon-size"]},"tag--deletable--disabled":{borderColor:t["normal-disabled-border-color"],backgroundColor:t["normal-disabled-background"]},"tag--deletable--disabled__text":{color:t["normal-disabled-color"]},"tag--deletable--disabled__icon":{color:t["normal-disabled-color"]},"tag--deletable--disabled__delete":{backgroundColor:t["normal-disabled-delete-background"]},"tag--deletable--disabled__delete-icon":{color:t["normal-disabled-color"]}}},_r=et(n.n(mr).a,gr);_r.displayName="Tag";var yr=n(109);var br=function(e){var t=e.Core,n=e.Upload||{},r={size:200,margin:t["s-2"],"icon-size":t["icon-l"],"label-font-size":t["font-size-caption"],"label-margin":t["s-2"],"label-color":t["color-text1-3"],"close-size":t["s-7"],"close-pin":t["s-0"],"close-icon-size":t["icon-xs"],"close-color":t["color-white"],"background-color":t["color-transparent"],"border-style":t["line-dashed"],"icon-color":t["color-line1-3"],"normal-border-color":t["color-line1-3"],"error-border-color":t["color-error-2"]};return Object.assign(r,n),r},xr=function(e){var t=br(e);return{upload__add:{borderStyle:t["border-style"],borderColor:t["normal-border-color"]},upload__add__icon:{fontSize:t["icon-size"]},upload__add__text:{fontSize:t["label-font-size"],marginTop:t["label-margin"]},upload__item:{width:t.size,height:t.size,borderColor:t["normal-border-color"],marginLeft:t.margin,marginBottom:t.margin},"upload__item-image":{width:t.size,height:t.size},upload__remove:{width:t["close-size"],height:t["close-size"],right:t["close-pin"],top:t["close-pin"]},"upload__remove-image":{fontSize:t["close-icon-size"],color:t["close-color"]},"upload__fail-image":{fontSize:t["icon-size"]},"upload__item--fail":{borderColor:t["error-border-color"]}}},wr=et(n.n(yr).a,[xr,Vn]);wr.displayName="Upload";var Tr=n(40),Ar=et(n.n(Tr).a,Kt);Ar.displayName="TextField";var Er=n(110);var Or,Mr=function(e){var t=e.Core,n=e.Toast||{},r={"icon-size":t["icon-l"],"icon-margin":t["s-2"],"font-size":t["font-size-body-1"],corner:t["corner-2"],"padding-lr":t["s-3"],"padding-tb":t["s-3"]};return Object.assign(r,n),r},Sr=function(e){var t=Mr(e);return{toast:{borderRadius:t.corner,paddingLeft:t["padding-lr"],minWidth:t["icon-size"]+1.6*t["font-size"]+t["icon-margin"]+2*t["padding-tb"],paddingRight:t["padding-lr"],paddingTop:t["padding-tb"],paddingBottom:t["padding-tb"]},toast__icon:{width:t["icon-size"],height:t["icon-size"],fontSize:t["icon-size"],color:e.Core["color-white"]},"toast__content--has-title":{marginTop:t["icon-margin"]},toast__content__text:{fontSize:t["font-size"],lineHeight:1.5*Xt(t["font-size"])}}},Cr=et(n.n(Er).a,Sr),Rr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kr=function(){return(kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pr=function(e){function t(t){var n=e.call(this,t)||this;return n.close=function(){n.setState({open:!1})},n.state={open:!0},n}return Rr(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.message,r=e.onExited,i=e.duration,o=t&&(-1!==t.indexOf("://")||-1!==t.indexOf("data:image"));return Object(f.createElement)(ht,kr({},ht.getContext()),Object(f.createElement)(Cr,{icon:o?null:t,image:o?t:null,content:n,duration:i,onExited:r,onHide:this.close,visible:this.state.open}))},t}(f.Component),Lr=Cr;Lr.message=function(e){var t=f.shared.Host.driver;if(!t)throw new Error("Toast: use toast after render App.");if(e){Or&&Or.close();var n={message:"string"==typeof e?e:e.message,icon:e.icon||"",timeout:e.timeout||0===e.timeout?e.timeout:2e3},r=document.createElement("div"),i=function(){r&&(at()(r),document.body.removeChild(r),r=null,e.onExited&&e.onExited())},o=Object(f.createElement)(Pr,{message:n.message,icon:n.icon,duration:n.timeout,onExited:i});return document.body.appendChild(r),Object(f.render)(o,r,{driver:t}),Or={close:function(){r&&i()}}}},Lr.displayName="Toast";st.useStyles,st.withStyles,st.useTheme;var Ir={"size-base":8,"s-0":0,"s-1":8,"s-2":16,"s-3":24,"s-4":32,"s-5":40,"s-6":48,"s-7":56,"s-8":64,"s-9":72,"s-10":80,"s-11":88,"s-12":86,"s-13":104,"s-14":112,"s-15":120,"s-16":128,"s-17":136,"s-18":144,"s-19":152,"s-20":160},Fr={"color-transparent":"transparent","color-white":"#FFFFFF","color-black":"#000000","color-brand1-1":"#EEF3f9","color-brand1-6":"#5584FF","color-brand1-9":"#3E71F7","color-line1-1":"#E6E7EB","color-line1-2":"#DCDEE3","color-line1-3":"#C4C6CF","color-fill1-1":"#F7F8FA","color-fill1-2":"#F2F3F7","color-fill1-3":"#EBECF0","color-text1-1":"#CCCCCC","color-text1-2":"#999999","color-text1-3":"#666666","color-text1-4":"#333333","color-success-1":"#E4FDDA","color-success-2":"#46BC15","color-success-3":"#41A716","color-notice-1":"#E3F2FD","color-notice-2":"#4494F9","color-notice-3":"#2E7DE0","color-warning-1":"#FFF3E0","color-warning-2":"#FF9800","color-warning-3":"#EB7E10","color-error-1":"#FFECE4","color-error-2":"#FF3000","color-error-3":"#E72B00","color-help-1":"#E3FFF8","color-help-2":"#01C1B2","color-help-3":"#01A79A","color-link-1":"#5584FF","color-link-2":"#5584FF","color-link-3":"#3E71F7"},Dr={"corner-1":6,"corner-2":12,"corner-3":24,"corner-zero":0,"corner-round":"50%","corner-circle":"50%"},Nr=Dr,zr={"font-family-base":'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',"font-size-display-3":112,"font-size-display-2":96,"font-size-display-1":72,"font-size-headline":48,"font-size-title":40,"font-size-subhead":32,"font-size-body-2":30,"font-size-body-1":28,"font-size-caption":24,"font-size-footnote":20,"font-weight-1":100,"font-weight-2":200,"font-weight-3":300,"font-weight-4":400,"font-weight-5":500,"font-weight-6":600,"font-weight-7":700,"font-weight-8":800,"font-weight-9":900,"font-lineheight-1":1.3,"font-lineheight-2":1.4,"font-lineheight-3":1.5},jr={"line-zero":0,"line-1":1,"line-2":4,"line-3":8,"line-solid":"solid","line-dashed":"dashed","line-dotted":"dotted"},Br={"shadow-zero":"none","shadow-1":"0 2rpx 4rpx 0 rgba(0,0,0,0.20)","shadow-2":"0 4rpx 8rpx 0 rgba(0,0,0,0.24)","shadow-3":"0 6rpx 12rpx 0 rgba(0,0,0,0.24)","shadow-4":"0 8rpx 16rpx 0 rgba(0,0,0,0.28)","shadow-5":"0 12rpx 24rpx 0 rgba(0,0,0,0.32)","shadow-distance-sd1":2,"shadow-distance-sd2":4,"shadow-distance-sd3":6,"shadow-distance-sd4":9,"shadow-distance-sd5":12,"shadow-opacity-sd1":.2,"shadow-opacity-sd2":.24,"shadow-opacity-sd3":.24,"shadow-opacity-sd4":.28,"shadow-opacity-sd5":.32,"shadow-color-sd1":Fr["color-black"],"shadow-color-sd2":Fr["color-black"],"shadow-color-sd3":Fr["color-black"],"shadow-color-sd4":Fr["color-black"],"shadow-color-sd5":Fr["color-black"],"shadow-blur-sd1":4,"shadow-blur-sd2":8,"shadow-blur-sd3":12,"shadow-blur-sd4":16,"shadow-blur-sd5":24,"shadow-spread-sd1":0,"shadow-spread-sd2":0,"shadow-spread-sd3":0,"shadow-spread-sd4":0,"shadow-spread-sd5":0},Ur={"icon-xxs":Ir["s-3"],"icon-xs":Ir["s-4"],"icon-s":Ir["s-5"],"icon-m":Ir["s-6"],"icon-l":Ir["s-8"],"icon-xl":Ir["s-12"],"icon-xxl":Ir["s-16"],"icon-font-path":"//at.alicdn.com/t/font_1273696_vsjsjac28vc","icon-font-family":"iconfont","icon-content-play":"e605","icon-content-checkbox":"e609","icon-content-trash":"e60c","icon-content-arrow-right":"e607","icon-content-add":"e612","icon-content-close":"e604","icon-content-search":"e606","icon-content-delete":"e618","icon-content-semi-select":"e603","icon-content-error":"e60e","icon-content-prompt":"e60b","icon-content-success":"e613","icon-content-warning":"e611","icon-content-arrow-left":"e60d","icon-content-arrow-up":"e608","icon-content-arrow-down":"e60a","icon-content-double-arrow-left":"e61c","icon-content-double-arrow-right":"e61d","icon-content-dropdown-down":"e614","icon-content-favorite":"e60f","icon-content-sort-descend":"e617","icon-content-sort-ascend":"e616","icon-content-minus":"e615","icon-content-loading":"e600"},Vr=function(){return(Vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Hr=(Vr(Vr(Vr(Vr(Vr(Vr(Vr({},Ir),Fr),Nr),zr),jr),Br),Ur),n(111)),Gr=n.n(Hr).a;var Wr=function(e){var t=e.nowStageInfo,n=void 0===t?{}:t,r=e.closeDialog;return Object(f.createElement)(p.a,{className:"quota-dialog",style:Gr["quota-dialog"]},Object(f.createElement)(p.a,{className:"bd",style:Gr.bd},Object(f.createElement)(p.a,{className:"wrap",style:Gr.wrap},Object(f.createElement)(De.a,{className:"txt",numberOfLines:1,style:Gr.txt},"!")),Object(f.createElement)(p.a,{className:"titleWrap",style:Gr.titleWrap},Object(f.createElement)(De.a,{className:"title",numberOfLines:1,style:Gr.title},"")),Object(f.createElement)(p.a,{className:"group",style:Gr.group},Object(f.createElement)(p.a,{className:"color",style:Gr.color}),Object(f.createElement)(p.a,{className:"group-inner",style:Gr["group-inner"]},Object(f.createElement)(De.a,{className:"price",numberOfLines:1,style:Gr.price},n.sendBenefitList[0].currencySpec.symbol),Object(f.createElement)(De.a,{className:"num",numberOfLines:1,style:Gr.num},n.sendBenefitList[0].count)),Object(f.createElement)(p.a,{className:"colorDiv",style:Gr.colorDiv})),Object(f.createElement)(p.a,{className:"infoWrap",style:Gr.infoWrap},Object(f.createElement)(De.a,{className:"info",numberOfLines:1,style:Gr.info},"")),Object(f.createElement)(p.a,{className:"infoWrap_2",style:Gr.infoWrap_2},Object(f.createElement)(De.a,{className:"info_2",numberOfLines:1,style:Gr.info_2},""))),Object(f.createElement)(p.a,{className:"entryPicWrap",style:Gr.entryPicWrap},Object(f.createElement)(ze.a,{className:"entryPic",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1nPRDdIVl614jSZKPXXaGjpXa-632-356.png"},style:Gr.entryPic})),Object(f.createElement)(p.a,{className:"empty",style:Gr.empty}),Object(f.createElement)(ze.a,{className:"entryPic_2",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1CqsXdggP7K4jSZFqXXamhVXa-694-358.png"},style:Gr.entryPic_2}),Object(f.createElement)(p.a,{className:"ft",onClick:r,style:Gr.ft},Object(f.createElement)(ze.a,{className:"div",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAAC+BAMAAAB5WqiuAAAAG1BMVEVHcEySkpKXl5eXl5eXl5eXl5eXl5eXl5eXl5dGx1E6AAAACHRSTlMADMLnPIVnovn0PXMAAAZxSURBVHjatRzLcts2EHRA6ZpISatjM+lDxyZ2Ex7dNk51dB/u8Jg+MsOj23TGusaKHX12RwBIAuAC2MUKPNrgat9vUAjkU71+d/PstNnvTl/c/P76oTju8+aXZm8/u6/+Ph7w6mK9nz63vx2JCBC6/oUjQH/8fh9+Xn3PBf9Ts489u/94nP91n3q+Y0hBupw//ebm6urq5t9TVwrnueA/axyFHHn92FHX3R954J+MMF5MdLG6eDb+wM887G9hW3qz5lAwawYVCUmwGpRr9zZbtK9i4pPvM4Ust+bFr+PqV/3Z/wBNTTvzWtoDXJiT9xTwPxAUo1ezL/Hga5Ja9Ip2SZQtWuvMD6BF8JfGB281T0gimOvT/xDk9TnhlUpz54ykbz/iOaSP3tH0uWqxSM3ynK7RibSfaImydWV8hxPuGd0fGr5eJ06tM5yJfh5hXl3QLBHg0NO0bt6LvKdLEqDQ3+UGbNkkCNDon2WCF9UyQcBJtnBt/L4I/n+bFFDiUfz9FHX7DPR7Ai5j8uegbwgI6J9ko98TcB6WPg99Q8Dz4E/vuDVJ1YSYMGfpvuvmrkPSPWfDlwEJK+O+F/xH4fkQtt3LI8CvYRs+xK3bo1SzayiOSUuvqnd0MVyMydgSEuSJ9ccN3coWFkQJMagbiaroZnbgyQeH1Z6mPLJsd0Z3EwsH4mKqQXOLPTXZT3giBRi0sQ7Q/ZxC+KOrix+dE43tldZEAiZha+nr+sxRqQWRgMl56aeKSyesVTQCgONbz0kftPNDBCEa+qJauRqqnPalyCMAOly7oaT2IwuFAOish/DSNzgCAfDRzhFAN4mZeALgky7GzaTyQBMQOHhQ+J2trn5gxxIQOKcEcG755jscXgJ7rLUseuVqP4WA4CkbZgtFXhQB4UO1xZMGTEwW2HIKPCNHAUs4siMIiB1ZD0jPA4nPAldOBU50Qxq3DGSkSQKiB0aom1BZnCIg+v/5EMO2wYw9TkD833IIKY1lyhQCEuT1YGW4JItimBJPz5Z6EuxxKKakszFWewJ5hzSOSe1aGQ+0ipXEYSST1tHjvYm1nYJYpq17ZvjeRsuiEJpp45bGw62D6hnBE+NdG+3WEnULjCjGuR5QGMkgEYAKDprxs4j6B1FFBTetOHVE/UO44oLzShnYQU2/JQYpXGx+oAzrQbTjBGKLzC005qt0We2ji8yNNOc36a6xhy82t9Oas0F0NVyEsamdVPA7BHwHY3RqKlXe0CorIxCAT62V5W6j7mdKAKE0aA6BEQXfQppQ2ij4a1RbZsCaUpop0E2k4QoQQKnMFGuQ8A3epMqSAt8gTqqMe/h3Ak1AQ6ns2wP8PRK+GZ1QCntlWmj4VT/RRjcmaPB7AvCNFSJ8QwC+MaTgN2j4uvFI6IC3FP3MwH9Lg0/mPw0+XX8U/DW27UzXfwUa55+z7Jfg/7P8j4LfgtOAY/jPSplWh5uKZPh/Hd83KPg58UsO+c/bIvFX51crzNglK3/Q+WE6v83Nf3R+m87Pc/M3jXmyvsjOPzXnk/VRdv6sNUemA0xm/m8K6+RcLbd+0fVpor5m1F+mvm4TBpxbP/aMTxlwbv3bK84qbmDZ9XvfnzmJG0B2/6HHu44aQH7/pO+PydjKBaP/M7Q9m4iCMvpXA9htREHz+28jWzbhtSlG/3DsD4f627z+5wh1HlxM4PRvx/68DHo4Tv95nC8E5iO8/rk1H4HnO4LX/7fnOyvYQ7DmFzbMEziEseYv9nxNgmUPa37kzAeB+aZgzr+c+SYwn+XO79z57BKwMN780cW4ngqANz/15uP+fF9w578+wp1vAcz5tbef4O1XCPb83d+vmHkrR8z9gcl+iPJ2z3PQB89O9luc/Rz+/sZ0P2fOWKCB12eupxx7moM+cBzYj7L3u9j7P8B+l7OfxtxfAvfTrP067v4VuF9n7Qdy98fA/UBrv5G5/xbYb6yG/Uzm/l4XWAEf90tZ+4eh/VJrP5a1Pxncjy293ysK7yeX3q8uvh9efL+99H5+8fsFzPsRWvdj+BW+31H8fkrp+zWGgCwR414tfb+p9P2s4vfLSt+PM/e4yt3vI102zHol937lS5qsit0PLX2/tfj93OL3i0VFvR/9iWgvhe93W9ffy9xPL36/vvj3ASLfN5BH+b5B8e8zFP++hCj9fQxR/PseovT3SUTx76soWyr5fRj95H3f5n97wYXyd4gWrAAAAABJRU5ErkJggg=="},style:Gr.div})))},Xr=n(112),Yr=n.n(Xr).a;var qr=function(e){var t=e.nowStageInfo,n=void 0===t?{}:t,r=e.closeDialog;return Object(f.createElement)(p.a,{className:"coupon-dialog",style:Yr["coupon-dialog"]},Object(f.createElement)(p.a,{className:"bd",style:Yr.bd},Object(f.createElement)(ze.a,{className:"layer",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1Pj1WPEz1gK0jSZLeXXb9kVXa-1116-1310.png"},style:Yr.layer}),Object(f.createElement)(ze.a,{className:"bg",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1dnjjf8Bh1e4jSZFhXXcC9VXa-1116-1310.png"},style:Yr.bg}),Object(f.createElement)(ze.a,{className:"entryPic",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1IwlTb5DsXe8jSZR0XXXK6FXa-978-752.png"},style:Yr.entryPic})),Object(f.createElement)(p.a,{className:"actionBgWrap",style:Yr.actionBgWrap},Object(f.createElement)(ze.a,{className:"box",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAABvCAMAAADhYq9OAAAASFBMVEVHcEz9s47pezvweDPuejj4l2Lxejf7i1T9s4z4iVDweDP0hEnyeznvg0jweDPyfDv1ik77rofweTT9s477i1Xzfz75pHb7q4FboWggAAAAEnRSTlMA4w7dNsG4fmf9eEuXH/Bl2KcYAI5dAAAB/UlEQVRo3u2bbY+DIAzHFRAFQRS3u+//TW+32xxPGh8quyX9Zy+WVPuztFRNalGsF2kV51zGBsYpV5IVp4ipzt7FI8vDQA08lSg7KYiY0MlCW+hgX75v8leUuyYFim0717elxLFJz2Q5AcTaQE6KWWQDA7Mu9P1KMaF24aKOlVTs+pVinrBJGG7K9TPFMmWz7JTkOqvJ0jYKwXVWmRpnP0kvA7JVThUANBAzOeuMHyFzMvAbveaQAU8hUR1klMr5bBuw7D6w6TJjYQ85vJdUVKOJbSXj2tcHuV3cd9lCoyAdzB5+MrqFjpzs1gcXWiYvn893iSlgAtKr9HznlOmCYBC7iDJfxlnlwCQhdhKxu3XoAUC/icv2c/kJ96L/zKWfuM7vqudC7eYeuzEkn+nWaE3b0M2ChipW3/eiF3+/2//EEfWCx+e7zDBu1Lcfmth6fnnv3c2YmzuWt+TrMT93HPaEC8AdyfbsgnBZUb6F23wS98vnXpGLXOQiF7nIRS5ykTup3fP8fJxbkoIM+bllM70T1pf1EgF3w6mX8F0UuchFLnKRi1zkIhe5yEUucpGLXOQiF7nIRW7MNXm4Ipo8ysPto4GYPNw6GpapsnDjeX+Wg1ulRp7O54rUUCWpTuemv6pYDd7JFbMfc7T9eVyhliZmtalXiHtSK84wYaw/XaXlDfpteXgAAAAASUVORK5CYII="},style:Yr.box}),Object(f.createElement)(De.a,{className:"txt",numberOfLines:1,style:Yr.txt},"")),Object(f.createElement)(p.a,{className:"backgroundWrap",style:Yr.backgroundWrap},Object(f.createElement)(ze.a,{className:"background",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1vBWRPAL0gK0jSZFtXXXQCXXa-922-694.png"},style:Yr.background}),Object(f.createElement)(p.a,{className:"block",style:Yr.block},Object(f.createElement)(De.a,{className:"text",numberOfLines:1,style:Yr.text},"!")),Object(f.createElement)(p.a,{className:"titleWrap",style:Yr.titleWrap},Object(f.createElement)(De.a,{className:"title",numberOfLines:1,style:Yr.title},"")),Object(f.createElement)(p.a,{className:"moneyWrap",style:Yr.moneyWrap},Object(f.createElement)(De.a,{className:"price",numberOfLines:1,style:Yr.price},n.sendBenefitList[0].currencySpec.symbol),Object(f.createElement)(De.a,{className:"num",numberOfLines:1,style:Yr.num},n.sendBenefitList[0].meetOffList&&n.sendBenefitList[0].meetOffList.length?n.sendBenefitList[0].meetOffList[0].decrease:0))),Object(f.createElement)(p.a,{className:"empty",style:Yr.empty}),Object(f.createElement)(ze.a,{className:"entryPic_2",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1Sv2jbtTfau8jSZFwXXX1mVXa-646-356.png"},style:Yr.entryPic_2}),Object(f.createElement)(p.a,{className:"div",style:Yr.div}),Object(f.createElement)(ze.a,{className:"entryPic_3",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1QRmPeRFR4u4jSZFPXXanzFXa-710-358.png"},style:Yr.entryPic_3}),Object(f.createElement)(p.a,{className:"layerWrap",style:Yr.layerWrap},Object(f.createElement)(ze.a,{className:"layer_2",source:{uri:"https://img-ovs.alicdn.com/tfs/TB1kSigd9R26e4jSZFEXXbwuXXa-1116-582.png"},style:Yr.layer_2}),Object(f.createElement)(p.a,{className:"buttonBgWrap",onClick:function(){document.getElementById("recyclerview").scrollTop=500,r()},style:Yr.buttonBgWrap},Object(f.createElement)(De.a,{className:"word",numberOfLines:1,style:Yr.word},"")),Object(f.createElement)(De.a,{className:"desc",numberOfLines:1,style:Yr.desc},"--"),Object(f.createElement)(De.a,{className:"word_2",numberOfLines:1,style:Yr.word_2},n.sendBenefitList[0].endTime,"")),Object(f.createElement)(p.a,{className:"ft",onClick:r,style:Yr.ft},Object(f.createElement)(ze.a,{className:"close-image",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL4AAAC+BAMAAAB5WqiuAAAAG1BMVEVHcEySkpKXl5eXl5eXl5eXl5eXl5eXl5eXl5dGx1E6AAAACHRSTlMADMLnPIVnovn0PXMAAAZxSURBVHjatRzLcts2EHRA6ZpISatjM+lDxyZ2Ex7dNk51dB/u8Jg+MsOj23TGusaKHX12RwBIAuAC2MUKPNrgat9vUAjkU71+d/PstNnvTl/c/P76oTju8+aXZm8/u6/+Ph7w6mK9nz63vx2JCBC6/oUjQH/8fh9+Xn3PBf9Ts489u/94nP91n3q+Y0hBupw//ebm6urq5t9TVwrnueA/axyFHHn92FHX3R954J+MMF5MdLG6eDb+wM887G9hW3qz5lAwawYVCUmwGpRr9zZbtK9i4pPvM4Ust+bFr+PqV/3Z/wBNTTvzWtoDXJiT9xTwPxAUo1ezL/Hga5Ja9Ip2SZQtWuvMD6BF8JfGB281T0gimOvT/xDk9TnhlUpz54ykbz/iOaSP3tH0uWqxSM3ynK7RibSfaImydWV8hxPuGd0fGr5eJ06tM5yJfh5hXl3QLBHg0NO0bt6LvKdLEqDQ3+UGbNkkCNDon2WCF9UyQcBJtnBt/L4I/n+bFFDiUfz9FHX7DPR7Ai5j8uegbwgI6J9ko98TcB6WPg99Q8Dz4E/vuDVJ1YSYMGfpvuvmrkPSPWfDlwEJK+O+F/xH4fkQtt3LI8CvYRs+xK3bo1SzayiOSUuvqnd0MVyMydgSEuSJ9ccN3coWFkQJMagbiaroZnbgyQeH1Z6mPLJsd0Z3EwsH4mKqQXOLPTXZT3giBRi0sQ7Q/ZxC+KOrix+dE43tldZEAiZha+nr+sxRqQWRgMl56aeKSyesVTQCgONbz0kftPNDBCEa+qJauRqqnPalyCMAOly7oaT2IwuFAOish/DSNzgCAfDRzhFAN4mZeALgky7GzaTyQBMQOHhQ+J2trn5gxxIQOKcEcG755jscXgJ7rLUseuVqP4WA4CkbZgtFXhQB4UO1xZMGTEwW2HIKPCNHAUs4siMIiB1ZD0jPA4nPAldOBU50Qxq3DGSkSQKiB0aom1BZnCIg+v/5EMO2wYw9TkD833IIKY1lyhQCEuT1YGW4JItimBJPz5Z6EuxxKKakszFWewJ5hzSOSe1aGQ+0ipXEYSST1tHjvYm1nYJYpq17ZvjeRsuiEJpp45bGw62D6hnBE+NdG+3WEnULjCjGuR5QGMkgEYAKDprxs4j6B1FFBTetOHVE/UO44oLzShnYQU2/JQYpXGx+oAzrQbTjBGKLzC005qt0We2ji8yNNOc36a6xhy82t9Oas0F0NVyEsamdVPA7BHwHY3RqKlXe0CorIxCAT62V5W6j7mdKAKE0aA6BEQXfQppQ2ij4a1RbZsCaUpop0E2k4QoQQKnMFGuQ8A3epMqSAt8gTqqMe/h3Ak1AQ6ns2wP8PRK+GZ1QCntlWmj4VT/RRjcmaPB7AvCNFSJ8QwC+MaTgN2j4uvFI6IC3FP3MwH9Lg0/mPw0+XX8U/DW27UzXfwUa55+z7Jfg/7P8j4LfgtOAY/jPSplWh5uKZPh/Hd83KPg58UsO+c/bIvFX51crzNglK3/Q+WE6v83Nf3R+m87Pc/M3jXmyvsjOPzXnk/VRdv6sNUemA0xm/m8K6+RcLbd+0fVpor5m1F+mvm4TBpxbP/aMTxlwbv3bK84qbmDZ9XvfnzmJG0B2/6HHu44aQH7/pO+PydjKBaP/M7Q9m4iCMvpXA9htREHz+28jWzbhtSlG/3DsD4f627z+5wh1HlxM4PRvx/68DHo4Tv95nC8E5iO8/rk1H4HnO4LX/7fnOyvYQ7DmFzbMEziEseYv9nxNgmUPa37kzAeB+aZgzr+c+SYwn+XO79z57BKwMN780cW4ngqANz/15uP+fF9w578+wp1vAcz5tbef4O1XCPb83d+vmHkrR8z9gcl+iPJ2z3PQB89O9luc/Rz+/sZ0P2fOWKCB12eupxx7moM+cBzYj7L3u9j7P8B+l7OfxtxfAvfTrP067v4VuF9n7Qdy98fA/UBrv5G5/xbYb6yG/Uzm/l4XWAEf90tZ+4eh/VJrP5a1Pxncjy293ysK7yeX3q8uvh9efL+99H5+8fsFzPsRWvdj+BW+31H8fkrp+zWGgCwR414tfb+p9P2s4vfLSt+PM/e4yt3vI102zHol937lS5qsit0PLX2/tfj93OL3i0VFvR/9iWgvhe93W9ffy9xPL36/vvj3ASLfN5BH+b5B8e8zFP++hCj9fQxR/PseovT3SUTx76soWyr5fRj95H3f5n97wYXyd4gWrAAAAABJRU5ErkJggg=="},style:Yr["close-image"]})))},Kr=n(113),Qr=n.n(Kr).a,Jr=function(e){var t=e.visible,n=void 0!==t&&t,r=e.nowStageInfo,i=e.closeDialog,o=void 0===i?function(){}:i,a=r.sendBenefitList[0];return Object(f.createElement)(un,{visible:n,className:"sign-in-dialog",onHide:o,style:Qr["sign-in-dialog"]},"coupon_quota"===a.type?Object(f.createElement)(Wr,{nowStageInfo:r,closeDialog:o}):Object(f.createElement)(qr,{nowStageInfo:r,closeDialog:o}))},Zr=n(114),$r=n.n(Zr),ei=n(115),ti=n.n(ei).a;function ni(e){var t=ti.__cache||(ti.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=ti[r[0].trim()]:r.forEach((function(e){"object"==typeof ti[e.trim()]&&(i=Object.assign(i,ti[e.trim()]))})),t[n]=i),i}var ri=function(e){var t=e.stage,n=e.stageInfo,r=e.bgColor,i=e.idx,o=e.signIn;if(t.hasSignIn)return Object(f.createElement)(p.a,{className:"stage-column",style:ti["stage-column"]},Object(f.createElement)(De.a,{className:"date-text "+(i+1===n.stageInfoList.length?"date-text-end":""),style:ni("date-text "+(i+1===n.stageInfoList.length?"date-text-end":""))},c.get("At",""),i+1,c.get("Day","")),Object(f.createElement)(p.a,{className:"benefit-info",style:ti["benefit-info"]},Object(f.createElement)(Pe.a,{className:"sign-in-image",source:{uri:"https://img.alicdn.com/tfs/TB1ncxHmfzO3e4jSZFxXXaP_FXa-78-78.png"},style:ti["sign-in-image"]}),Object(f.createElement)(De.a,{className:"sign-in-text",style:ti["sign-in-text"]},c.get("Success",""))));var a=t.sendBenefitList[0];return Object(f.createElement)(p.a,{className:"stage-column",onClick:function(){n.stage!==i+1||t.hasSignIn||o()},style:ti["stage-column"]},Object(f.createElement)(De.a,{className:"date-text "+(i+1===n.stageInfoList.length?"date-text-end":""),style:ni("date-text "+(i+1===n.stageInfoList.length?"date-text-end":""))},c.get("At",""),i+1,c.get("Day","")),Object(f.createElement)(p.a,{className:"benefit-info",style:ti["benefit-info"]},"coupon_quota"===a.type?Object(f.createElement)(p.a,{className:"coupon-quota "+("old"===n.type?"":"coupon-quota-large"),style:ni("coupon-quota "+("old"===n.type?"":"coupon-quota-large"))},Object(f.createElement)(p.a,{className:"coupon-quota-wrap",style:ti["coupon-quota-wrap"]},Object(f.createElement)(De.a,{className:"coupon-quota-symbol",style:ti["coupon-quota-symbol"]},"+",a.currencySpec.symbol),Object(f.createElement)(De.a,{className:"coupon-quota-number",style:ti["coupon-quota-number"]},a.count)),Object(f.createElement)(De.a,{className:"sign-in-text",style:ti["sign-in-text"]},c.get("sign in",""))):Object(f.createElement)(p.a,{className:"platform-coupon "+("old"===n.type?"":"platform-coupon-large"),style:ni("platform-coupon "+("old"===n.type?"":"platform-coupon-large"))},Object(f.createElement)(p.a,{className:"coupon-wrap",style:ti["coupon-wrap"]},Object(f.createElement)(p.a,{className:"coupon-inner",style:ti["coupon-inner"]},Object(f.createElement)(De.a,{className:"coupon-symbol",style:ti["coupon-symbol"]},a.currencySpec.symbol),Object(f.createElement)(De.a,{className:"coupon-value",style:ti["coupon-value"]},a.meetOffList[0].decrease)),Object(f.createElement)(p.a,{className:"coupon-circle",style:Object.assign({},ti["coupon-circle"],{backgroundColor:r})}),Object(f.createElement)(p.a,{className:"coupon-circle circle-overlay",style:Object.assign({},ti["coupon-circle"],ti["circle-overlay"])})),Object(f.createElement)(De.a,{className:"sign-in-text",style:ti["sign-in-text"]},c.get("Collect Coupon","")))))},ii=n(116),oi=n.n(ii).a,ai=function(e){var t=e.stageInfo,n=e.bgColor,r=e.signIn,i=e.voucherListUrl,o=e.bottomRuleText,a=e.currency;if(!t.stage)return null;var s=t.stageInfoList[t.stage-1].hasSignIn?t.stage:t.stage-1,l=t.quotaLeftCount||0;return Object(f.createElement)(p.a,{className:"stage-info",style:oi["stage-info"]},Object(f.createElement)(p.a,{className:"stage-info-wrap",style:oi["stage-info-wrap"]},Object(f.createElement)(p.a,{className:"stage-left-currency",style:oi["stage-left-currency"]},Object(f.createElement)(De.a,{className:"stage-title",style:oi["stage-title"]},c.get("Accumulate Reward","")),Object(f.createElement)(p.a,{className:"stage-quota-view",style:oi["stage-quota-view"]},Object(f.createElement)(De.a,{className:"stage-line",style:oi["stage-line"]},"-"),l>0&&Object(f.createElement)(De.a,{className:"currency",style:oi.currency},a),Object(f.createElement)(De.a,{className:"quotaLeftCount",style:oi.quotaLeftCount},l),Object(f.createElement)(De.a,{className:"stage-line",style:oi["stage-line"]},"-")),Object(f.createElement)($r.a,{className:"voucher-bag-link",target:"_blank",href:i,style:oi["voucher-bag-link"]},c.get("My vouchers",""),"  ",">")),Object(f.createElement)(p.a,{className:"stage-info-list",style:oi["stage-info-list"]},Object(f.createElement)(p.a,{className:"process-bar",style:Object.assign({},oi["process-bar"],{position:"absolute"})},Object(f.createElement)(p.a,{className:"process-bar-inner",style:oi["process-bar-inner"]},Object(f.createElement)(p.a,{className:"process-current",style:oi["process-current"]},Object(f.createElement)(p.a,{className:"current",style:Object.assign({},oi.current,{width:s/parseInt(t.totalStage)*100+"%"})})))),t.stageInfoList&&t.stageInfoList.length>0?t.stageInfoList.map((function(e,i){return Object(f.createElement)(ri,{key:i,signIn:r,stage:e,idx:i,stageInfo:t,bgColor:n})})):null)),Object(f.createElement)(p.a,{className:"stage-info-tip",style:oi["stage-info-tip"]},Object(f.createElement)(p.a,{className:"line",style:oi.line}),Object(f.createElement)(De.a,{className:"stage-info-text",style:oi["stage-info-text"]},o),Object(f.createElement)(p.a,{className:"line",style:oi.line})))},si=Ge.a;function li(e){var t=si.__cache||(si.__cache={}),n=function e(){var t=[],n=arguments[0],r=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();if("string"===r)(n=n.trim())&&t.push(n);else if("array"===r)n.forEach((function(n){(n=e(n).trim())&&t.push(n)}));else if("object"===r)for(var i in n)(i=i.trim())&&n.hasOwnProperty(i)&&n[i]&&t.push(i);return t.join(" ").trim()}(e),r=n.split(/\s+/),i=t[n];return i||(i={},1===r.length?i=si[r[0].trim()]:r.forEach((function(e){"object"==typeof si[e.trim()]&&(i=Object.assign(i,si[e.trim()]))})),t[n]=i),i}var ci,ui={HipHop:{schema:n(300),scripts:n(301)},StreetFashion:{schema:n(303),scripts:n(304)},HomeMade:{schema:n(306),scripts:n(307)},Sport:{schema:n(309),scripts:n(310)},LiteratureRetro:{schema:n(312),scripts:n(313)},Sweet:{schema:n(315),scripts:n(316)}};function di(e){var t,n=e.data,r=void 0===n?{}:n,i=e.getStickyOffset,o=void 0===i?function(){return 0}:i,a=r.attr,s=((a=void 0===a?{}:a).shakeBoxImage,a.bgColor),l=void 0===s?"#FFC89F":s,u=(a.bgImage,a.voucherListUrl),d=void 0===u?"":u,h=a.bottomRuleText,m=void 0===h?"":h,v=a.currency,g=void 0===v?"$":v,_=Object(f.useState)("none"),y=_[0],b=_[1],x=Object(f.useState)(""),w=x[0],T=x[1],A=Object(f.useState)(!1),E=A[0],O=A[1],M=Object(f.useState)({}),S=M[0],C=M[1],R=Object(f.useState)({}),k=R[0],P=R[1],L=Object(f.useState)(l),I=L[0],F=L[1],D=Object(f.useState)(!1),N=D[0],z=D[1],j=Object(f.useState)(!0),B=j[0],U=j[1],V=function(e){var t=Object(f.useState)(e),n=t[0],r=t[1],i=Object(f.useState)(!1),o=i[0],a=i[1],s=Object(f.useRef)(n);return[n,function(e,t){var n=void 0===t?{}:t,i=n.speed,l=void 0===i?5:i,c=n.completeCb;if("number"!=typeof e||Number.isNaN(e))throw new Error("destination must be number");if(e<0)throw new Error("destination can not be negative");if(!o){e=Math.round(e);var u=setInterval((function(){var t=e-s.current;if(0===t)return a(!1),clearInterval(u),void("function"==typeof c&&c());s.current=t>0?s.current+1:s.current-1,r(s.current),a(!0)}),l)}}]}(0),H=V[0],G=V[1],W=Object(f.useRef)(null),X=!1,Y=function(){return new Promise((function(e){e(!1)}))},q=function(e){window.goldlog&&window.goldlog.record("/a2w01.sign-in.comicDowngrade","EXP","reason="+(e&&e.error||"downgrade"),"GET"),console.log(e)},K=function(e){console.log("oasis loaded",e),ci=e,G(100,{completeCb:function(){setTimeout((function(){return O(!0)}),500)}}),B||e.engine.pause()},Q=function(e){var t=navigator?navigator.userAgent:null;if(/AliApp\(/.test(t))X||B||(window.goldlog.record("/a2w01.sign-in.sign","EXP","position="+e,"GET"),X=!0,new Promise((function(e){e({})})).then((function(e){b("flex"),ci.engine&&ci.engine.resume(),C(e),z(!0),U(!0),k.name&&(T(k.showName),F(k.media.backgroundColor))})).finally((function(){X=!1})));else if(window.EventEmitter)window.EventEmitter.emit("mount:noticeOpenApp");else try{document.createEvent("event").initEvent("noticeOpenApp",!0,!0)}catch(e){}};return Object(f.useEffect)((function(){new Promise((function(e){e({hasBroken:!1,hasSignIn:!0,quotaLeftCount:0,ruleText:{detailList:[{content:"1",title:"1"},{content:"2",title:"2"},{content:"3",title:"3"}],title:""},stage:Math.ceil(6*Math.random()),stageInfoList:[{hasSignIn:!1,sendBenefitList:[{count:"2",type:"coupon_quota",currencySpec:"$"},{count:"1",type:"taobao_mascot",name:"HipHop",showName:"",media:{nameKey:"HipHop",backgroundColor:"#F9B97C"}}],userBenefitList:[]},{hasSignIn:!1,sendBenefitList:[{count:"3",type:"coupon_quota",currencySpec:"$"},{count:"1",type:"taobao_mascot",name:"StreetFashion",media:{nameKey:"StreetFashion",backgroundColor:"#F9B97C"}}],userBenefitList:[]},{hasSignIn:!1,sendBenefitList:[{count:"1",meetOffList:[{amountAt:"11",decrease:"10"}],currencySpec:"$",type:"platform_coupon"},{count:"1",type:"taobao_mascot",name:"HomeMade",media:{nameKey:"HomeMade",backgroundColor:"#F9B97C"}}],userBenefitList:[]},{hasSignIn:!1,sendBenefitList:[{count:"10",type:"coupon_quota",currencySpec:"$"},{count:"1",type:"taobao_mascot",name:"Sport",media:{nameKey:"Sport",backgroundColor:"#F9B97C"}}],userBenefitList:[]},{hasSignIn:!1,sendBenefitList:[{count:"1",meetOffList:[{amountAt:"31",decrease:"30"}],currencySpec:"$",type:"platform_coupon"},{count:"1",type:"taobao_mascot",name:"LiteratureRetro",media:{nameKey:"LiteratureRetro",backgroundColor:"#F9B97C"}}],userBenefitList:[]},{hasSignIn:!1,sendBenefitList:[{count:"1",meetOffList:[{amountAt:"31",decrease:"30"}],currencySpec:"$",type:"platform_coupon"},{count:"1",type:"taobao_mascot",name:"Sweet",media:{nameKey:"Sweet",backgroundColor:"#F9B97C"}}],userBenefitList:[]}],totalStage:"5",type:"old"})})).then((function(e){U(e.hasSignIn),C(e),e.hasBroken&&1===e.stage&&Ie.a.show("\n ");var t=e.stageInfoList[e.stage-1].sendBenefitList,n={};t&&t.length&&(n=t.filter((function(e){return"taobao_mascot"===e.type}))[0]),n.media&&(P(n),e.hasSignIn&&(T(n.media.nickName),F(n.media.backgroundColor)))}));var e=new IntersectionObserver((function(e){var t=e[0];ci&&(t.intersectionRatio>0?ci.engine&&ci.engine.resume():ci.engine&&ci.engine.pause())}));return e.observe(W.current),function(){e.unobserve(W.current)}}),[]),Object(f.createElement)(p.a,{className:"sign-in-page",style:Object.assign({},si["sign-in-page"],{backgroundColor:I,paddingTop:(t=2*o()||0,t/750*window.innerWidth)})},Object(f.createElement)(p.a,{className:"oasis-view",style:si["oasis-view"]},Object(f.createElement)("img",{className:"bg-image",src:"https://img.alicdn.com/tfs/TB1wce.Nlr0gK0jSZFnXXbRRXXa-750-616.png",style:si["bg-image"]}),Object(f.createElement)(Ve,null),Object(f.createElement)(p.a,{className:"oasis-canvas "+("flex"===y||B?"oasis-canvas-fadeIn":""),ref:W,style:Object.assign({},li("oasis-canvas "+("flex"===y||B?"oasis-canvas-fadeIn":"")),{position:"absolute"})},k.media&&k.media.nameKey&&Object(f.createElement)(f.Fragment,null,Object(f.createElement)(Qe,{className:"oasis-loading",completed:E,rad:Math.round(H/100*360),style:si["oasis-loading"]}),Object(f.createElement)(p.a,{style:{visibility:E?"visible":"hidden"}},Object(f.createElement)(Re,{schema:ui[k.media.nameKey].schema,downgradeImage:"https://img-ovs.alicdn.com/tfs/TB18PI3U7L0gK0jSZFAXXcA9pXa-696-904.png",useDowngradeImage:!0,scripts:ui[k.media.nameKey].scripts,detectDowngrade:Y,handleDowngrade:q,handleSceneLoaded:K,mustWebgl1:!0})))),Object(f.createElement)(p.a,{className:"model-name",style:si["model-name"]},Object(f.createElement)(Pe.a,{className:"model-logo",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAOVBMVEVHcEz///////////////////////////////////////////////////////////////////////99PJZNAAAAEnRSTlMAB6mc59vM8/paHYu5EUYtfmpyRFOoAAABzUlEQVRYw62Y25aDIAxFuUm4iZr//9hpba2ODVYI5zFruQ0JgQQhypIKIHnBlcen7MTExBWDwHRIvzDoli4YxNwHA6ELBjUDk3aMG9sxw47B5mwFf6DgoOKSa10KizJIaND+NirMFi+UbpFywl+C+Cv/2eItqStQUHhXLspiRQNWaKArX2qsE1mxo8Vq6a+FhQbKI9KS78vK+R+XhI2KR8yMzTrUbG6nHE+0gYHBtFEWZOm9LGl4GNvFmc2dgYtZozMhW2G/YjmaC2vSy/fJ4yjjJ8gjYV6oje3Lu/1xixE7GNZiPRkNZdzveOIH6xfCnQ671VgMjuqB0cL2wCQqUfWYQZgeGCOgBwYE9sC4Xt50ig2RKZDEhl2NoZgpW6jY81XsKONem2TVpmhvGrdbb0bsceD4Hhjf4wxFfLQ6hk957hDFx6jP8MW+qCRwKevOFJqLeY03U4c8CX6Qt8ZtchyKm04jLrf7k7adYg897dScdPjX8ufG8LhMPSRw2tk3p8EfRwyyuTo+QD4WhMqOP5UmvKXCIbh4/xjjzQi5eD3+hnjjNDTx99OH9OpybaC8vDfQyxwtuTpnY5ZV7wty8rNO1hhwDsDYpGc/FRF/UM3uOSII0eQAAAAASUVORK5CYII="},style:si["model-logo"]}),Object(f.createElement)(De.a,{className:"model-name-text",style:si["model-name-text"]},w)),Object(f.createElement)(p.a,{onClick:function(){return Q("top")},className:"shake-box "+("flex"===y||B?"shake-box-fadeOut":""),style:li("shake-box "+("flex"===y||B?"shake-box-fadeOut":""))},Object(f.createElement)(Pe.a,{className:"shake-box-image",source:{uri:"https://img.alicdn.com/tfs/TB1VW17iypE_u4jSZKbXXbCUVXa-480-480.png"},style:si["shake-box-image"]}),Object(f.createElement)(p.a,{className:"redbag",style:si.redbag},Object(f.createElement)(Pe.a,{className:"redbag-image",source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABQCAMAAACJQxO+AAAAPFBMVEVHcEz6VB/7VSH////6VB73Uhz7VCD7VCD7VCD7VB/8Zjf8eVD8jGn8n4H9sJf+9/T+z8D+3dP9wK3+6uTjDifxAAAACnRSTlMAWf//Oh3evpx52dvFVQAABB5JREFUWMOtmNmiqyAMRRWtA/Pw//96AwgSBeyxN29Fuo1kkQSG4Wbztq7rtu37OM7zZ6hYdbBiG8G2l28Z921dYHAdv1BaCZXGaGul4JwxSkjyIWgEg0GyDZ9P37uRUDeVxskS/7HD/xkXVsNzZUErqC5hLea6UxYpTYpFrZkQXQxr7xzNq7BWHCQEOzVNjhEyDp+FiIu33L/IwVpIQZPrR1jmuKRMXbQUh+9YruOylAbX12OBtnNJwW9z0Zosvb9BB6+yVozOHGUoE1Ib5b9H4r8ZGOJXXw2h+HvHsJ7Ua+QXCBgQOv12EoSovTrq/Sh/Cs/fgjxNXvjAc8E9V/AmNd2NogB5qZnQ+0QjWF45rmtC08QQHP4D90uQ8wcYC6bd1DKBCORkhi0np1eGaAAf56ZXj2bRGlOAYbyt+pdmCLtIzWjkD4ZpIAT2C+bjD1bSoLwUcOXeSZU0OLKEtGLeSfGCBhO280bs7zToIPVfaLCQoIcHGpyU39Agg1SfBo1zCaaBFlK+MH3ak0NoiPqCBhFrXGdyKAeMMW5VlQaDMl+XBnvWFOF6NBxSTRp8fThNVmiQZWIINMgWg4WxLg0s1vAWDTpKQAXSUOh0lwYapVo0+JxM3UGDrkaXlomhTYOKC9SjIT9Sh1SDBueljJ9v2rnBlIkhpBlT3RckNBC0vd0zDSZJ1WlIXvF2HRHpkU4tQ73oHGsF8/ljbrC5+6hPZtEtWQuwc9EZVuaYNg0yFGchUYCVtlD+ofYjGmTqWFs05A0ITY7J/YSQNvcqKfYiN78NdAzaOLpDgyCpY14a6BjW38+ZBp6lVrTDlDl/2XJL2yYNR2IoadDSd1QMBdRwGAjLdu+e7FFiTqkxFR0hKm1QoEFU3Uo00HxO+KJShHDyVm5Iu/mpUpgQYO8WbeQGdUr1K4UKW9FWpWiIfU4MHRrSfN2S4iH2ppBaa/m2AFHGD2QNGkzazc3cAMFTcb6Iyy4aLYgupBotiI0tuyTcsSMRVmnIiSHQUEszLoAJB4FUVVuVQhZSdRoYPvmyZqUQ5am42pA6VFO5qkfXXKQaDanh3RyTaDgTQ48GpaWA2tyvFJzMwyMN6dWi25CyUqrfkMp20QmH1TMxPDaktr3dAw1I6iE3UN49nhSJoUXDl8cTVezmH48nDkv1c0PHgIYyMfx4PNFY6vXxBGgoE8MjDd3MTyWW+uWwKtF12Q80QB67SL2lAT4QJYYfaICtfpV6R4O/C3IoMbygAfodGW5utCLkM7yiQRkLGqkj5L5ZXS8Xq480eA3Ozq6SC6nVpKBlvVxAdq4uHNYorvJYuDjdr3ePyz2ELrbDyZZt20ewfd/WdUm3g8v9UnQvLlexxrKCRO02+fNpXDL7K18NYeH0UeOL62OsMfxg/nr8vcY/ouVWHWBBUp4AAAAASUVORK5CYII="},style:si["redbag-image"]}),Object(f.createElement)(p.a,{className:"redbag-text-wrap",style:si["redbag-text-wrap"]},Object(f.createElement)(De.a,{className:"redbag-text",style:si["redbag-text"]},c.get("click to sign in","")))))),Object(f.createElement)(ai,{stageInfo:S,bgColor:I,bottomRuleText:m,signIn:function(){return Q("bottom")},voucherListUrl:d,currency:g}),S.stage?Object(f.createElement)(Jr,{visible:N,nowStageInfo:S.stageInfoList[S.stage-1],closeDialog:function(){return z(!1)}}):null)}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setViewportWidth",(function(){return h})),n.d(r,"setUnitPrecision",(function(){return p})),n.d(r,"setDecimalPixelTransformer",(function(){return m})),n.d(r,"setTagNamePrefix",(function(){return w})),n.d(r,"createBody",(function(){return T})),n.d(r,"createEmpty",(function(){return A})),n.d(r,"createText",(function(){return E})),n.d(r,"updateText",(function(){return O})),n.d(r,"createElement",(function(){return S})),n.d(r,"appendChild",(function(){return C})),n.d(r,"removeChild",(function(){return R})),n.d(r,"replaceChild",(function(){return k})),n.d(r,"insertAfter",(function(){return P})),n.d(r,"insertBefore",(function(){return L})),n.d(r,"addEventListener",(function(){return I})),n.d(r,"removeEventListener",(function(){return F})),n.d(r,"removeAttribute",(function(){return D})),n.d(r,"setAttribute",(function(){return N})),n.d(r,"setStyle",(function(){return z})),n.d(r,"beforeRender",(function(){return j})),n.d(r,"afterRender",(function(){return B})),n.d(r,"removeChildren",(function(){return U}));var i=/[-+]?\d*\.?\d+(rpx)/g,o=/opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i,a=/^on[A-Z]/,s="http://www.w3.org/2000/svg",l="",c=!1,u=!1,d=750,f=4;function h(e){d=e}function p(e){f=e}function m(e){e}function v(e){return t=parseFloat(e)/(d/100),n=f,r=Math.pow(10,n+1),i=Math.floor(t*r),10*Math.round(i/10)/r+"vw";var t,n,r,i}function g(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var _=g((function(e){return t=e,i.test(t)?function(e){return e.replace(i,v)}(e):e;var t})),y=g((function(e){return e.replace(/-([a-z])/gi,(function(e,t){return t.toUpperCase()}))})),b=g((function(e){return!o.test(e)})),x=g((function(e){return a.test(e)}));function w(e){l=e}function T(){return document.body}function A(e){var t,n=e._parent;if(u){var r=M(n);if(r){if(8===r.nodeType)return r;k(t=document.createComment(""),r,n)}else(t=document.createComment("")).__a=!0}else t=document.createComment("");return t}function E(e,t){var n,r=t._parent;if(u){var i=M(r);if(i){if(3===i.nodeType)return e!==i.textContent&&(i.textContent=e),i;k(n=document.createTextNode(e),i,r)}else(n=document.createTextNode(e)).__a=!0}else n=document.createTextNode(e);return n}function O(e,t){e.textContent=t}function M(e){var t=e.childNodes;null==e.__i&&(e.__i=0);var n=t[e.__i++];return n&&8===n.nodeType&&"|"===n.data?t[e.__i++]:n}function S(e,t,n,r,i){void 0===i&&(i=!0);var o,a=n._parent;c="svg"===e||a&&a.namespaceURI===s;var d=null;function f(){if(c)o=document.createElementNS(s,e);else if(l){var t="function"==typeof t?t(e):t;o=document.createElement(t+e)}else o=document.createElement(e)}if(u)if(d=M(a))if(e===d.nodeName.toLowerCase()){for(var h=d.attributes,p=h.length;p--;){var m=h[p].name,v=t[m];if("class"===m&&null==t.className&&null==v||"style"===m&&(null==v||0===Object.keys(v).length)||"class"!==m&&"style"!==m&&null==v)d.removeAttribute(m);else if("style"===m)for(var g=d.style.length;0<g;g--){var _=d.style[g-1],b=y(_);null==v[b]&&(d.style[b]="")}}o=d}else f(),k(o,d,a);else f(),o.__a=!0;else f();for(var w in t){var T=t[w];"children"!==w&&(null!=T&&("style"===w?z(o,T,r,i):x(w)?I(o,w.slice(2).toLowerCase(),T):N(o,w,T,c)))}return o}function C(e,t){if(!u||e.__a)return t.appendChild(e)}function R(e,t){(t=t||e.parentNode)&&t.removeChild(e)}function k(e,t,n){(n=n||t.parentNode).replaceChild(e,t)}function P(e,t,n){n=n||t.parentNode;var r=t.nextSibling;r?r!==e&&L(e,r,n):C(e,n)}function L(e,t,n){(n=n||t.parentNode).insertBefore(e,t)}function I(e,t,n){return e.addEventListener(t,n)}function F(e,t,n){return e.removeEventListener(t,n)}function D(e,t){if("dangerouslySetInnerHTML"===t)return e.innerHTML=null;if("className"===t&&(t="class"),t in e)try{e[t]=null}catch(e){}e.removeAttribute(t)}function N(e,t,n,r){if("dangerouslySetInnerHTML"===t)return e.innerHTML!==n.__html&&(e.innerHTML=n.__html),void(e.__h=!0);if("className"===t&&(t="class"),!r&&t in e)try{e[t]=n}catch(r){e.setAttribute(t,n)}else e.setAttribute(t,n)}function z(e,t,n,r){for(var i in void 0===r&&(r=!0),t){var o=t[i],a=void 0;"number"==typeof o&&b(i)?n?(a=o+"rpx",r&&(a=_(a))):a=o+"px":a=r?_(o):o,"-"===i[0]&&"-"===i[1]?e.style.setProperty(i,a):e.style[i]=a}}function j(e){var t=e.hydrate;if(u&&!t)throw new Error("Nested render found.");u=t}function B(e){var t=e.container;u&&(!function e(t){if(!t.__h){var n=t.childNodes.length,r=t.__i||0;if(n-r>0)for(var i=n-1;i>=r;i--)t.removeChild(t.childNodes[i]);for(var o=t.childNodes.length-1;o>=0;o--)e(t.childNodes[o])}}(t),u=!1)}function U(e){e.textContent=""}function V(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var H=/^on[A-Z]/,G=/opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i,W=V((function(e){return!G.test(e)})),X=function(e,t){for(var n in t){var r=t[n],i=void 0;i="number"==typeof r&&W(n)?r+"rpx":r,"-"===n[0]&&"-"===n[1]?e.style.setProperty(n,i):e.style[n]=i}},Y=V((function(e){return H.test(e)}));Object.assign({},r,{createElement:function(e,t){var n,r={},i=[];for(var o in t){var a=t[o];"children"!==o&&(null!=a&&("style"===o?n=a:Y(o)?i.push({name:o.slice(2).toLowerCase(),handler:a}):("className"===o&&(o="class"),r[o]=a)))}var s=document._createElement({tagName:e,document:document,attrs:r});return n&&X(s,n),i.forEach((function(e){var t=e.name,n=e.handler;s.addEventListener(t,n)})),s},setStyle:X}),n(28);var q="object"==typeof __weex_document__?__weex_document__:"object"==typeof q?q:null;var K=/[-+]?\d*\.?\d+(rpx)/g,Q=/opa|ntw|ne[ch]|ex(?:s|g|n|p|$)|^ord|zoo|grid|orp|ows|mnc|^columns$|bs|erim|onit/i,J=/^on[A-Z]/;function Z(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}Z((function(e){return J.test(e)}));function $(e){return t=parseFloat(e)/7.5,n=4,r=Math.pow(10,n+1),i=Math.floor(t*r),10*Math.round(i/10)/r+"vw";var t,n,r,i}Z((function(e){return!Q.test(e)})),Z((function(e){return t=e,K.test(t)?function(e){return e.replace(K,$)}(e):e;var t}));var ee=Object.assign({},r,{createElement:function(e,t,n){return S(e,t,n,!0)},setStyle:function(e,t){return z(e,t,!0)}});t.default=ee}]);