{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.4/playground/gltf-loader","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine/controls\", \"dat.gui\", \"oasis-engine\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine/controls\"), require(\"dat.gui\"), require(\"oasis-engine\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngine/controls\"], global.dat, global.oasisEngine);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, dat, _oasisEngine) {\n  \"use strict\";\n\n  dat = _interopRequireWildcard(dat);\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  /**\n   * @title GLTF Loader\n   * @category Advance\n   */\n  _oasisEngine.Logger.enable();\n\n  var envList = {\n    sky: [\"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*Gi7CTZqKuacAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*iRRMQIExwKMAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*ZIcPQZo20sAAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*SPYuTbHT-KgAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*mGUERbY77roAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*ilkPS7A1_JsAAAAAAAAAAABkARQnAQ\"],\n    house: [\"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*1gjTQ7P2mQoAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*entSR7DylL0AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*izQBQY_vs_4AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*x3XnRpq1U-EAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*k7FsT5Gprn0AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*8LdBQ6ixiQAAAAAAAAAAAABkARQnAQ\"],\n    sunnyDay: [\"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*4ZY8T4GpKwYAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*8QbJQZwS1wUAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*a54kSZ3LmAQAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*8CbfTb1yG8MAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*Yi4ZRZbdj8MAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*KddxSriLYjoAAAAAAAAAAABkARQnAQ\"],\n    miniSampler: [\"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*IuyGR4bdwg4AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*4rv5RZ0kll4AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*cHitTpWoJjoAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*RCEbS6k5x18AAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*IRc7R7cl4CcAAAAAAAAAAABkARQnAQ\", \"https://gw.alipayobjects.com/mdn/rms_475770/afts/img/A*y_4hRYVgzQ4AAAAAAAAAAABkARQnAQ\"]\n  };\n\n  var Oasis = /*#__PURE__*/function () {\n    Oasis.guiToColor = function guiToColor(gui, color) {\n      color.setValue(gui[0] / 255, gui[1] / 255, gui[2] / 255, color.a);\n    };\n\n    Oasis.colorToGui = function colorToGui(color) {\n      if (color === void 0) {\n        color = new _oasisEngine.Color(1, 1, 1);\n      }\n\n      var v = [];\n      v[0] = color.r * 255;\n      v[1] = color.g * 255;\n      v[2] = color.b * 255;\n      return v;\n    };\n\n    function Oasis() {\n      var _this = this;\n\n      this.cubeTextures = {};\n      this.textures = {};\n      this.engine = new _oasisEngine.WebGLEngine(\"canvas\");\n      this.scene = this.engine.sceneManager.activeScene;\n      this.skyMaterial = new _oasisEngine.SkyBoxMaterial(this.engine);\n      this.rootEntity = this.scene.createRootEntity(\"root\");\n      this.cameraEntity = this.rootEntity.createChild(\"camera\");\n      this.gltfRootEntity = this.rootEntity.createChild(\"gltf\");\n      this.lightEntity1 = this.rootEntity.createChild(\"direct_light1\");\n      this.lightEntity2 = this.rootEntity.createChild(\"direct_light2\");\n      this.camera = this.cameraEntity.addComponent(_oasisEngine.Camera);\n      this.controler = this.cameraEntity.addComponent(_controls.OrbitControl);\n      this.light1 = this.lightEntity1.addComponent(_oasisEngine.DirectLight);\n      this.light2 = this.lightEntity2.addComponent(_oasisEngine.DirectLight);\n      this.gui = new dat.GUI();\n      this.materialFolder = null;\n      this.animationFolder = null;\n      this.state = {\n        // Scene\n        background: false,\n        // Lights\n        envTexture: \"miniSampler\",\n        envIntensity: 1,\n        addLights: true,\n        lightColor: Oasis.colorToGui(new _oasisEngine.Color(1, 1, 1)),\n        lightIntensity: 0.8,\n        // GLTF Model List\n        defaultGLTF: \"fox\",\n        gltfList: {\n          \"2CylinderEngine\": \"https://gw.alipayobjects.com/os/bmw-prod/48a1e8b3-06b4-4269-807d-79274e58283a.glb\",\n          alphaBlendModeTest: \"https://gw.alipayobjects.com/os/bmw-prod/d099b30b-59a3-42e4-99eb-b158afa8e65d.glb\",\n          animatedCube: \"https://gw.alipayobjects.com/os/bmw-prod/8cc524dd-2481-438d-8374-3c933adea3b6.gltf\",\n          antiqueCamera: \"https://gw.alipayobjects.com/os/bmw-prod/93196534-bab3-4559-ae9f-bcb3e36a6419.glb\",\n          avocado: \"https://gw.alipayobjects.com/os/bmw-prod/0f978c4d-1cd6-4cec-9a4c-b58c8186e063.glb\",\n          avocado_draco: \"https://gw.alipayobjects.com/os/bmw-prod/b3b73614-cf06-4f41-940d-c1bc04cf6410.gltf\",\n          avocado_specular: \"https://gw.alipayobjects.com/os/bmw-prod/3cf50452-0015-461e-a172-7ea1f8135e53.gltf\",\n          avocado_quantized: \"https://gw.alipayobjects.com/os/bmw-prod/6aff5409-8e82-4e77-a6ac-55b6adfd0cf5.gltf\",\n          barramundiFish: \"https://gw.alipayobjects.com/os/bmw-prod/79d7935c-404b-4d8d-9ad3-5f8c273f0e4a.glb\",\n          boomBox: \"https://gw.alipayobjects.com/os/bmw-prod/2e98b1c0-18e8-45d0-b54e-dcad6ef05e22.glb\",\n          boomBoxWithAxes: \"https://gw.alipayobjects.com/os/bmw-prod/96e1b8b2-9be6-4b64-98ea-8c008c6dc422.gltf\",\n          boxVertexColors: \"https://gw.alipayobjects.com/os/bmw-prod/6cff6fcb-5191-465e-9a38-dee42a07cc65.glb\",\n          brianStem: \"https://gw.alipayobjects.com/os/bmw-prod/e3b37dd9-9407-4b5c-91b3-c5880d081329.glb\",\n          buggy: \"https://gw.alipayobjects.com/os/bmw-prod/d6916a14-b004-42d5-86dd-d8520b719288.glb\",\n          cesiumMan: \"https://gw.alipayobjects.com/os/bmw-prod/3a7d9597-7354-4bef-b314-b84509bef9b6.glb\",\n          cesiumMilkTruck: \"https://gw.alipayobjects.com/os/bmw-prod/7701125a-7d0d-4281-a7d8-7f0dfc8d0792.glb\",\n          corset: \"https://gw.alipayobjects.com/os/bmw-prod/3deaa5a4-5b2a-4a0d-8512-a8c4377a08ff.glb\",\n          DamagedHelmet: \"https://gw.alipayobjects.com/os/bmw-prod/a1da72a4-023e-4bb1-9629-0f4b0f6b6fc4.glb\",\n          Duck: \"https://gw.alipayobjects.com/os/bmw-prod/6cb8f543-285c-491a-8cfd-57a1160dc9ab.glb\",\n          environmentTest: \"https://gw.alipayobjects.com/os/bmw-prod/7c7b887c-05d6-43dd-b354-216e738e81ed.gltf\",\n          flightHelmet: \"https://gw.alipayobjects.com/os/bmw-prod/d6dbf161-48e2-4e6d-bbca-c481ed9f1a2d.gltf\",\n          fox: \"https://gw.alipayobjects.com/os/bmw-prod/f40ef8dd-4c94-41d4-8fac-c1d2301b6e47.glb\",\n          animationInterpolationTest: \"https://gw.alipayobjects.com/os/bmw-prod/4f410ef2-20b4-494d-85f1-a806c5070bfb.glb\",\n          lantern: \"https://gw.alipayobjects.com/os/bmw-prod/9557420a-c622-4e9c-bb46-f7af8b19d7de.glb\",\n          materialsVariantsShoe: \"https://gw.alipayobjects.com/os/bmw-prod/b1a414bb-61ea-4667-94d2-ef6cf179ac0d.glb\",\n          metalRoughSpheres: \"https://gw.alipayobjects.com/os/bmw-prod/67b39ede-1c82-4321-8457-0ad83ca9413a.glb\",\n          normalTangentTest: \"https://gw.alipayobjects.com/os/bmw-prod/4bb1a66c-55e3-4898-97d7-a9cc0f239686.glb\",\n          normalTangentMirrorTest: \"https://gw.alipayobjects.com/os/bmw-prod/8335f555-2061-47f5-9252-366c6ebf882a.glb\",\n          orientationTest: \"https://gw.alipayobjects.com/os/bmw-prod/16cdf390-ac42-411c-9d2b-8e112dfd723b.glb\",\n          sparseTest: \"https://gw.alipayobjects.com/os/bmw-prod/f00de659-53ea-49d1-8f2c-d0a412542b80.gltf\",\n          specGlossVsMetalRough: \"https://gw.alipayobjects.com/os/bmw-prod/4643bd7b-f988-4144-8245-4a390023d92d.glb\",\n          sponza: \"https://gw.alipayobjects.com/os/bmw-prod/ca50859b-d736-4a3e-9fc3-241b0bd2afef.gltf\",\n          suzanne: \"https://gw.alipayobjects.com/os/bmw-prod/3869e495-2e04-4e80-9d22-13b37116379a.gltf\",\n          sheenChair: \"https://gw.alipayobjects.com/os/bmw-prod/34847225-bc1b-4bef-9cb9-6b9711ca2f8c.glb\",\n          sheenCloth: \"https://gw.alipayobjects.com/os/bmw-prod/4529d2e8-22a8-47af-9b38-8eaff835f6bf.gltf\",\n          textureCoordinateTest: \"https://gw.alipayobjects.com/os/bmw-prod/5fd23201-51dd-4eea-92d3-c4a72ecc1f2b.glb\",\n          textureEncodingTest: \"https://gw.alipayobjects.com/os/bmw-prod/b8795e57-3c2c-4412-b4f0-7ffa796e4917.glb\",\n          textureSettingTest: \"https://gw.alipayobjects.com/os/bmw-prod/a4b26d58-bd49-4051-8f05-0fe8b532e716.glb\",\n          textureTransformMultiTest: \"https://gw.alipayobjects.com/os/bmw-prod/8fa18786-5188-4c14-94d7-77bf6b8483f9.glb\",\n          textureTransform: \"https://gw.alipayobjects.com/os/bmw-prod/6c59d5d0-2e2e-4933-a737-006d431977fd.gltf\",\n          toyCar: \"https://gw.alipayobjects.com/os/bmw-prod/8138b7d7-45aa-494a-8aea-0c67598b96d2.glb\",\n          transmissionTest: \"https://gw.alipayobjects.com/os/bmw-prod/1dd51fe8-bdd3-42e4-99be-53de5dc106b8.glb\",\n          unlitTest: \"https://gw.alipayobjects.com/os/bmw-prod/06a855be-ac8c-4705-b5d7-659b8b391189.glb\",\n          vc: \"https://gw.alipayobjects.com/os/bmw-prod/b71c4212-25fb-41bb-af88-d79ce6d3cc58.glb\",\n          vertexColorTest: \"https://gw.alipayobjects.com/os/bmw-prod/8fc70cc6-66d8-43c8-b460-f7d2aaa9edcf.glb\",\n          waterBottle: \"https://gw.alipayobjects.com/os/bmw-prod/0f403530-96f5-455a-8a39-b31ac68b6ed5.glb\"\n        }\n      };\n      this._materials = [];\n      this._boundingBox = new _oasisEngine.BoundingBox();\n      this._center = new _oasisEngine.Vector3();\n      this._extent = new _oasisEngine.Vector3();\n      this.initResources().then(function () {\n        _this.initScene();\n\n        _this.addGLTFList();\n\n        _this.addSceneGUI();\n      });\n    }\n\n    var _proto = Oasis.prototype;\n\n    _proto.initResources = function initResources() {\n      var _this2 = this;\n\n      var names = Object.keys(envList);\n      return new Promise(function (resolve) {\n        _this2.engine.resourceManager.load(names.map(function (name) {\n          return {\n            type: _oasisEngine.AssetType.TextureCube,\n            urls: envList[name]\n          };\n        })).then(function (textures) {\n          textures.forEach(function (texture, index) {\n            var name = names[index];\n            _this2.cubeTextures[name] = texture;\n\n            if (name === _this2.state.envTexture) {\n              _this2.scene.ambientLight.specularTexture = texture;\n              _this2.skyMaterial.textureCubeMap = texture;\n            }\n          });\n          resolve(true);\n        });\n      });\n    };\n\n    _proto.initScene = function initScene() {\n      this.engine.canvas.resizeByClientSize();\n      this.controler.minDistance = 0; // debug sync\n\n      if (this.state.background) {\n        this.scene.background.mode = _oasisEngine.BackgroundMode.Sky;\n      }\n\n      if (!this.state.addLights) {\n        this.light1.enabled = this.light2.enabled = false;\n      }\n\n      this.light1.intensity = this.light2.intensity = this.state.lightIntensity;\n      this.lightEntity1.transform.setRotation(30, 0, 0);\n      this.lightEntity2.transform.setRotation(-30, 180, 0);\n      this.scene.ambientLight.specularIntensity = this.state.envIntensity;\n      this.scene.background.sky.material = this.skyMaterial;\n      this.scene.background.sky.mesh = _oasisEngine.PrimitiveMesh.createCuboid(this.engine, 1, 1, 1);\n      this.engine.run();\n    };\n\n    _proto.addGLTFList = function addGLTFList() {\n      var _this3 = this;\n\n      this.loadGLTF(this.state.gltfList[this.state.defaultGLTF]);\n      this.gui.add(this.state, \"defaultGLTF\", Object.keys(this.state.gltfList)).name(\"GLTF List\").onChange(function (v) {\n        _this3.loadGLTF(_this3.state.gltfList[v]);\n      });\n    };\n\n    _proto.addSceneGUI = function addSceneGUI() {\n      var _this4 = this;\n\n      var gui = this.gui; // Display controls.\n\n      var dispFolder = gui.addFolder(\"Scene\");\n      dispFolder.add(this.state, \"background\").onChange(function (v) {\n        if (v) {\n          _this4.scene.background.mode = _oasisEngine.BackgroundMode.Sky;\n        } else {\n          _this4.scene.background.mode = _oasisEngine.BackgroundMode.SolidColor;\n        }\n      }); // Lighting controls.\n\n      var lightFolder = gui.addFolder(\"Lighting\");\n      lightFolder.add(this.state, \"envTexture\", [\"None\"].concat(Object.keys(this.cubeTextures))).name(\"IBL\").onChange(function (v) {\n        _this4.scene.ambientLight.specularTexture = _this4.skyMaterial.textureCubeMap = v === \"None\" ? null : _this4.cubeTextures[v];\n      });\n      lightFolder.add(this.state, \"envIntensity\", 0, 2).onChange(function (v) {\n        _this4.scene.ambientLight.specularIntensity = v;\n      }).name(\"间接光强度\");\n      lightFolder.add(this.state, \"addLights\").onChange(function (v) {\n        _this4.light1.enabled = _this4.light2.enabled = v;\n      }).name(\"直接光\");\n      lightFolder.addColor(this.state, \"lightColor\").onChange(function (v) {\n        Oasis.guiToColor(v, _this4.light1.color);\n        Oasis.guiToColor(v, _this4.light2.color);\n      });\n      lightFolder.add(this.state, \"lightIntensity\", 0, 2).onChange(function (v) {\n        _this4.light1.intensity = _this4.light2.intensity = v;\n      }).name(\"直接光强度\");\n    };\n\n    _proto.setCenter = function setCenter(renderers) {\n      var boundingBox = this._boundingBox;\n      var center = this._center;\n      var extent = this._extent;\n      boundingBox.min.setValue(0, 0, 0);\n      boundingBox.max.setValue(0, 0, 0);\n      renderers.forEach(function (renderer) {\n        _oasisEngine.BoundingBox.merge(renderer.bounds, boundingBox, boundingBox);\n      });\n      boundingBox.getExtent(extent);\n      var size = extent.length();\n      boundingBox.getCenter(center);\n      this.controler.target.setValue(center.x, center.y, center.z);\n      this.cameraEntity.transform.setPosition(center.x, center.y, size * 3);\n      this.camera.farClipPlane = size * 12;\n\n      if (this.camera.nearClipPlane > size) {\n        this.camera.nearClipPlane = size / 10;\n      } else {\n        this.camera.nearClipPlane = 0.1;\n      }\n\n      this.controler.maxDistance = size * 10;\n    };\n\n    _proto.loadGLTF = function loadGLTF(url) {\n      var _this5 = this;\n\n      this.destroyGLTF();\n      var isGLB = /.glb$/.test(url);\n      this.engine.resourceManager.load({\n        type: _oasisEngine.AssetType.Perfab,\n        url: url + \"#\" + Math.random() + \".\" + (isGLB ? \"glb\" : \"gltf\") // @todo: resourceManager cache bug\n\n      }).then(function (asset) {\n        var defaultSceneRoot = asset.defaultSceneRoot,\n            materials = asset.materials,\n            animations = asset.animations;\n        console.log(asset);\n        _this5.gltfRootEntity = defaultSceneRoot;\n\n        _this5.rootEntity.addChild(defaultSceneRoot);\n\n        var meshRenderers = [];\n        var skinnedMeshRenderers = [];\n        defaultSceneRoot.getComponentsIncludeChildren(_oasisEngine.MeshRenderer, meshRenderers);\n        defaultSceneRoot.getComponentsIncludeChildren(_oasisEngine.SkinnedMeshRenderer, skinnedMeshRenderers);\n\n        _this5.setCenter(meshRenderers.concat(skinnedMeshRenderers));\n\n        _this5.loadMaterialGUI(materials);\n\n        _this5.loadAnimationGUI(animations);\n      })[\"catch\"](function (e) {\n        console.error(e);\n      });\n    };\n\n    _proto.destroyGLTF = function destroyGLTF() {\n      this.gltfRootEntity.destroy();\n    };\n\n    _proto.loadMaterialGUI = function loadMaterialGUI(materials) {\n      var _this6 = this;\n\n      var gui = this.gui;\n\n      if (this.materialFolder) {\n        gui.removeFolder(this.materialFolder);\n        this.materialFolder = null;\n      }\n\n      if (!materials) {\n        materials = this._materials;\n      }\n\n      this._materials = materials;\n      if (!materials.length) return;\n      var folder = this.materialFolder = gui.addFolder(\"Material\");\n      var folderName = {};\n      materials.forEach(function (material) {\n        if (!(material instanceof _oasisEngine.PBRBaseMaterial) && !(material instanceof _oasisEngine.UnlitMaterial)) return;\n\n        if (!material.name) {\n          material.name = \"default\";\n        }\n\n        var state = {\n          baseColor: Oasis.colorToGui(material.baseColor),\n          emissiveColor: Oasis.colorToGui(material.emissiveColor),\n          specularColor: Oasis.colorToGui(material.specularColor),\n          baseTexture: material.baseTexture ? \"origin\" : \"\",\n          metallicRoughnessTexture: material.metallicRoughnessTexture ? \"origin\" : \"\",\n          normalTexture: material.normalTexture ? \"origin\" : \"\",\n          emissiveTexture: material.emissiveTexture ? \"origin\" : \"\",\n          occlusionTexture: material.occlusionTexture ? \"origin\" : \"\",\n          opacityTexture: material.opacityTexture ? \"origin\" : \"\",\n          specularGlossinessTexture: material.specularGlossinessTexture ? \"origin\" : \"\"\n        };\n        var originTexture = {\n          baseTexture: material.baseTexture,\n          metallicRoughnessTexture: material.metallicRoughnessTexture,\n          normalTexture: material.normalTexture,\n          emissiveTexture: material.emissiveTexture,\n          occlusionTexture: material.occlusionTexture,\n          opacityTexture: material.opacityTexture,\n          specularGlossinessTexture: material.specularGlossinessTexture\n        };\n        var f = folder.addFolder(folderName[material.name] ? material.name + \"_\" + (folderName[material.name] + 1) : material.name);\n        folderName[material.name] = folderName[material.name] == null ? 1 : folderName[material.name] + 1; // metallic\n\n        if (material instanceof _oasisEngine.PBRMaterial) {\n          var mode1 = f.addFolder(\"金属模式\");\n          mode1.add(material, \"metallicFactor\", 0, 1).step(0.01);\n          mode1.add(material, \"roughnessFactor\", 0, 1).step(0.01);\n          mode1.add(state, \"metallicRoughnessTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.metallicRoughnessTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.metallicRoughnessTexture;\n          });\n          mode1.open();\n        } // specular\n        else if (material instanceof _oasisEngine.PBRSpecularMaterial) {\n            var mode2 = f.addFolder(\"高光模式\");\n            mode2.add(material, \"glossinessFactor\", 0, 1).step(0.01);\n            mode2.addColor(state, \"specularColor\").onChange(function (v) {\n              Oasis.guiToColor(v, material.specularColor);\n            });\n            mode2.add(state, \"specularGlossinessTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n              material.specularGlossinessTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.specularGlossinessTexture;\n            });\n            mode2.open();\n          } else if (material instanceof _oasisEngine.UnlitMaterial) {\n            f.add(state, \"baseTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n              material.baseTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.baseTexture;\n            });\n            f.addColor(state, \"baseColor\").onChange(function (v) {\n              Oasis.guiToColor(v, material.baseColor);\n            });\n          } // common\n\n\n        if (!(material instanceof _oasisEngine.UnlitMaterial)) {\n          var common = f.addFolder(\"通用\");\n          common.add(material, \"envMapIntensity\", 0, 2).step(0.01);\n          common.add(material, \"opacity\", 0, 1).step(0.01).onChange(function (v) {\n            material.opacity = v;\n          });\n          common.add(material, \"isTransparent\");\n          common.add(material, \"alphaCutoff\", 0, 1).step(0.01);\n          common.add(material, \"getOpacityFromRGB\");\n          common.addColor(state, \"baseColor\").onChange(function (v) {\n            Oasis.guiToColor(v, material.baseColor);\n          });\n          common.addColor(state, \"emissiveColor\").onChange(function (v) {\n            Oasis.guiToColor(v, material.emissiveColor);\n          });\n          common.add(state, \"baseTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.baseTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.baseTexture;\n          });\n          common.add(state, \"normalTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.normalTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.normalTexture;\n          });\n          common.add(state, \"emissiveTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.emissiveTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.emissiveTexture;\n          });\n          common.add(state, \"occlusionTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.occlusionTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.occlusionTexture;\n          });\n          common.add(state, \"opacityTexture\", [\"None\", \"origin\"].concat(Object.keys(_this6.textures))).onChange(function (v) {\n            material.opacityTexture = v === \"None\" ? null : _this6.textures[v] || originTexture.opacityTexture;\n          });\n          common.open();\n        }\n      });\n    };\n\n    _proto.loadAnimationGUI = function loadAnimationGUI(animations) {\n      if (this.animationFolder) {\n        this.gui.removeFolder(this.animationFolder);\n        this.animationFolder = null;\n      }\n\n      if (animations != null && animations.length) {\n        this.animationFolder = this.gui.addFolder(\"Animation\");\n        this.animationFolder.open();\n        var animator = this.gltfRootEntity.getComponent(_oasisEngine.Animation);\n        animator.playAnimationClip(animations[0].name);\n        var state = {\n          animation: animations[0].name\n        };\n        this.animationFolder.add(state, \"animation\", [\"None\"].concat(animations.map(function (animation) {\n          return animation.name;\n        }))).onChange(function (name) {\n          if (name === \"None\") {\n            animator.stop(true);\n          } else {\n            animator.playAnimationClip(name);\n          }\n        });\n      }\n    };\n\n    return Oasis;\n  }();\n\n  new Oasis();\n});"},"name":"gltf-loader","id":"201a5a32-f3d6-5a31-8ca6-0d20e89d6e08"}}},"staticQueryHashes":[]}