{"componentChunkName":"component---src-templates-playground-tsx","path":"/0.4/playground/spotlight-shadow","result":{"pageContext":{"node":{"internal":{"content":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"@oasis-engine/controls\", \"oasis-engine\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require(\"@oasis-engine/controls\"), require(\"oasis-engine\"));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global[\"@oasisEngine/controls\"], global.oasisEngine);\n    global.index = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (_controls, _oasisEngine) {\n  \"use strict\";\n\n  function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\n  function _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n  function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  var target = new _oasisEngine.Vector3(0, -3, 0);\n  var up = new _oasisEngine.Vector3(0, 1, 0);\n\n  var Move = /*#__PURE__*/function (_Script) {\n    _inheritsLoose(Move, _Script);\n\n    function Move(node) {\n      var _this;\n\n      _this = _Script.call(this, node) || this;\n      _this.time = 0;\n      _this.y = 3;\n      _this.range = 5;\n      return _this;\n    }\n\n    var _proto = Move.prototype;\n\n    _proto.onUpdate = function onUpdate(deltaTime) {\n      this.time += deltaTime / 1000;\n      var x = Math.cos(this.time) * this.range;\n      var y = Math.sin(this.time) * this.range * 0.2 + this.y;\n      var z = Math.cos(this.time) * this.range;\n      this.entity.transform.position = new _oasisEngine.Vector3(x, y, z);\n    };\n\n    return Move;\n  }(_oasisEngine.Script); // 控制 light entity 始终看向固定点\n\n\n  var LookAtFocus = /*#__PURE__*/function (_Script2) {\n    _inheritsLoose(LookAtFocus, _Script2);\n\n    function LookAtFocus() {\n      return _Script2.apply(this, arguments) || this;\n    }\n\n    var _proto2 = LookAtFocus.prototype;\n\n    _proto2.onUpdate = function onUpdate(deltaTime) {\n      light1.transform.lookAt(target, up);\n    };\n\n    return LookAtFocus;\n  }(_oasisEngine.Script); //-- create engine object\n\n\n  var engine = new _oasisEngine.WebGLEngine(\"canvas\");\n  engine.canvas.resizeByClientSize();\n  var scene = engine.sceneManager.activeScene;\n  var rootEntity = scene.createRootEntity(); // Logger.enable();\n\n  function createCuboidGeometry(name, position, rotation, w, h, d, castShadow) {\n    if (castShadow === void 0) {\n      castShadow = false;\n    }\n\n    var obj = rootEntity.createChild(name);\n    obj.position = _construct(_oasisEngine.Vector3, position);\n    obj.transform.rotation = new _oasisEngine.Vector3(rotation[0], rotation[0], rotation[0]);\n    var cubeRenderer = obj.addComponent(_oasisEngine.MeshRenderer);\n    cubeRenderer.mesh = _oasisEngine.PrimitiveMesh.createCuboid(rootEntity.engine, w, h, d);\n    cubeRenderer.setMaterial(mtl);\n    cubeRenderer[\"recieveShadow\"] = !castShadow;\n    cubeRenderer[\"castShadow\"] = castShadow;\n  }\n\n  var mtl = new _oasisEngine.BlinnPhongMaterial(engine);\n  mtl.baseColor = new _oasisEngine.Color(0.1, 0.9, 0.8, 1); //-- create light entity\n\n  var lighthouse = rootEntity.createChild(\"lighthouse\");\n  var light1 = lighthouse.createChild(\"light1\");\n  light1.addComponent(Move);\n  light1.addComponent(LookAtFocus);\n  var spotLight = light1.addComponent(_oasisEngine.SpotLight);\n  spotLight.angle = Math.PI / 12;\n  spotLight[\"enableShadow\"] = true;\n  spotLight[\"shadow\"].bias = 0.0001;\n  spotLight[\"shadow\"].intensity = 0.2;\n  var sphereRenderer3 = light1.addComponent(_oasisEngine.MeshRenderer);\n  sphereRenderer3.mesh = _oasisEngine.PrimitiveMesh.createSphere(engine, 0.1);\n  sphereRenderer3.setMaterial(mtl); //-- create geometry\n\n  createCuboidGeometry(\"cubiod1\", [0, -3, 0], [0, 0, 0], 10, 0.1, 10);\n  createCuboidGeometry(\"cubiod2\", [5, -2, 0], [0, 0, 0], 0.1, 2, 10);\n  createCuboidGeometry(\"cubiod3\", [-5, -2, 0], [0, 0, 0], 0.1, 2, 10);\n  createCuboidGeometry(\"cubiod4\", [0, -2, -5], [0, 0, 0], 10, 2, 0.1);\n  createCuboidGeometry(\"cubiod-cast-shadow\", [0, -1, 0], [0, 0, 0], 1, 1, 1, true); //-- create camera\n\n  var cameraNode = rootEntity.createChild(\"camera_node\");\n  cameraNode.transform.position = new _oasisEngine.Vector3(0, 5, 17);\n  cameraNode.transform.lookAt(new _oasisEngine.Vector3(), new _oasisEngine.Vector3(0, 1, 0));\n  cameraNode.addComponent(_oasisEngine.Camera);\n  cameraNode.addComponent(_controls.OrbitControl); //-- run\n\n  engine.run();\n});"},"name":"spotlight-shadow","id":"bfd4e9ab-e4f1-5b61-9325-72ff2a0175eb"}}},"staticQueryHashes":[]}